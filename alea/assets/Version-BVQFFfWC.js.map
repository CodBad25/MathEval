{"version":3,"file":"Version-BVQFFfWC.js","sources":["../../src/exercicesInteractifs/Version.svelte"],"sourcesContent":["<script>\n  import Exercice from '../exercices/Exercice'\n  import HeaderExerciceVueProf from '../components/shared/exercice/shared/headerExerciceVueProf/HeaderExerciceVueProf.svelte'\n  import { afterUpdate } from 'svelte'\n  import {\n    fetchServerVersion,\n    checkForServerUpdate,\n    getLocalVersion,\n    forceLocalVersion,\n  } from '../lib/components/version'\n\n  export let indiceExercice\n  export let indiceLastExercice\n\n  export const titre = 'Version du serveur'\n  // Cette ressource n'a pas d'uuid ou de ref\n  // Son accès est défini dans uuidsRessources.json\n\n  const headerExerciceProps = {\n    title: '',\n    isInteractif: false,\n    settingsReady: false,\n    interactifReady: false,\n    randomReady: false,\n    correctionReady: false,\n  }\n\n  const exercice = new Exercice()\n  exercice.id = 'Version'\n  exercice.numeroExercice = indiceExercice\n  exercice.interactif = false\n  let promise = fetchServerVersion()\n  let localeVersion = getLocalVersion()\n  let compare = checkForServerUpdate()\n  function update() {\n    forceLocalVersion()\n    localeVersion = getLocalVersion()\n    compare = checkForServerUpdate()\n  }\n</script>\n\n<HeaderExerciceVueProf\n  {indiceExercice}\n  {indiceLastExercice}\n  id=\"Version\"\n  {...headerExerciceProps}\n/>\n\n<br />\nLa version du serveur est :\n<br /><br />\n<pre>fetchServerVersion()</pre>\n<br /><br />\n<p>Version locale du Serveur: {localeVersion}</p>\n{#await promise}\n  <p>...attendre</p>\n{:then version}\n  <p>Version du Serveur: {version}</p>\n{:catch error}\n  <p style=\"color: red\">{error.message}</p>\n{/await}\n<br /><br />\n{#await compare}\n  <p>...attendre</p>\n{:then compareValue}\n  <p>\n    Compare la version locale avec la version du Serveur: {compareValue\n      ? 'différent'\n      : 'identique'}\n  </p>\n{:catch error}\n  <p style=\"color: red\">{error.message}</p>\n{/await}\n<br /><br />\n\n<button\n  class=\"inline-flex px-6 py-2.5 ml-6 bg-coopmaths-action dark:bg-coopmathsdark-action text-coopmaths-canvas dark:text-coopmathsdark-canvas font-medium text-xs leading-tight uppercase rounded shadow-md transform hover:bg-coopmaths-action-lightest dark:hover:bg-coopmathsdark-action-lightest hover:shadow-lg focus:bg-coopmaths-action-lightest dark:focus:bg-coopmathsdark-action-lightest focus:shadow-lg focus:outline-none focus:ring-0 active:bg-coopmaths-action-lightest dark:active:bg-coopmathsdark-action-lightest active:shadow-lg transition duration-150 ease-in-out\"\n  on:click=\"{() => {\n    promise = fetchServerVersion()\n  }}\">Rafraîchir</button\n>\n<br /><br />\n<button\n  class=\"inline-flex px-6 py-2.5 ml-6 bg-coopmaths-action dark:bg-coopmathsdark-action text-coopmaths-canvas dark:text-coopmathsdark-canvas font-medium text-xs leading-tight uppercase rounded shadow-md transform hover:bg-coopmaths-action-lightest dark:hover:bg-coopmathsdark-action-lightest hover:shadow-lg focus:bg-coopmaths-action-lightest dark:focus:bg-coopmathsdark-action-lightest focus:shadow-lg focus:outline-none focus:ring-0 active:bg-coopmaths-action-lightest dark:active:bg-coopmathsdark-action-lightest active:shadow-lg transition duration-150 ease-in-out\"\n  on:click=\"{() => {\n    update()\n  }}\">Force la version locale</button\n>\n"],"names":["t_value","ctx","insert","target","p","anchor","dirty","set_data","t","t1","t1_value","info","info_1","br0","br1","br2","pre","br3","br4","br5","br6","br7","br8","button0","br9","br10","button1","handle_promise","promise_1","promise_2","indiceExercice","$$props","indiceLastExercice","titre","headerExerciceProps","exercice","Exercice","promise","fetchServerVersion","localeVersion","getLocalVersion","compare","checkForServerUpdate","update","forceLocalVersion","$$invalidate"],"mappings":"08FA2DyBA,EAAAC,MAAM,QAAO,4DAApCC,EAAwCC,EAAAC,EAAAC,CAAA,iBAAjBC,EAAA,GAAAN,KAAAA,EAAAC,MAAM,QAAO,KAAAM,EAAAC,EAAAR,CAAA,2CAFZC,EAAO,EAAA,EAAA,6BAA5B,sBAAoB,iBAAvBC,EAAmCC,EAAAC,EAAAC,CAAA,oCAAXJ,EAAO,EAAA,EAAA,KAAAM,EAAAE,EAAAC,CAAA,+FAF/BR,EAAiBC,EAAAC,EAAAC,CAAA,4CAgBML,EAAAC,MAAM,QAAO,4DAApCC,EAAwCC,EAAAC,EAAAC,CAAA,iBAAjBC,EAAA,IAAAN,KAAAA,EAAAC,MAAM,QAAO,KAAAM,EAAAC,EAAAR,CAAA,2CALqBC,EAAA,EAAA,EACnD,YACA,sCAHJ,wDACsD,iBADxDC,EAIGC,EAAAC,EAAAC,CAAA,qCAHsDJ,EAAA,EAAA,EACnD,YACA,cAAWM,EAAAE,EAAAC,CAAA,+FALjBR,EAAiBC,EAAAC,EAAAC,CAAA,wLAlBbJ,EAAmB,CAAA,6KASjBA,EAAO,CAAA,EAAAU,CAAA,6GAQPV,EAAO,CAAA,EAAAW,CAAA,6CAdV;AAAA;AAAA,CAEL,yHAGG,6BAA2B,MAACX,EAAa,CAAA,CAAA,s3CAL5CC,EAAKC,EAAAU,EAAAR,CAAA,WAELH,EAAMC,EAAAW,EAAAT,CAAA,EAAAH,EAAKC,EAAAY,EAAAV,CAAA,WACXH,EAA8BC,EAAAa,EAAAX,CAAA,WAC9BH,EAAMC,EAAAc,EAAAZ,CAAA,EAAAH,EAAKC,EAAAe,EAAAb,CAAA,WACXH,EAAgDC,EAAAC,EAAAC,CAAA,8FAQhDH,EAAMC,EAAAgB,EAAAd,CAAA,EAAAH,EAAKC,EAAAiB,EAAAf,CAAA,gFAYXH,EAAMC,EAAAkB,EAAAhB,CAAA,EAAAH,EAAKC,EAAAmB,EAAAjB,CAAA,WAEXH,EAKAC,EAAAoB,EAAAlB,CAAA,WACAH,EAAMC,EAAAqB,EAAAnB,CAAA,EAAAH,EAAKC,EAAAsB,EAAApB,CAAA,WACXH,EAKAC,EAAAuB,EAAArB,CAAA,mKA1CMJ,EAAmB,CAAA,CAAA,iCAQMA,EAAa,CAAA,CAAA,sBACpCA,EAAO,CAAA,IAAA0B,EAAAC,EAAAjB,CAAA,iCAQPV,EAAO,CAAA,IAAA0B,EAAAE,EAAAjB,CAAA,2UAnDF,GAAA,CAAA,eAAAkB,CAAA,EAAAC,EACA,CAAA,mBAAAC,CAAA,EAAAD,EAEE,MAAAE,EAAQ,qBAIfC,EAAmB,CACvB,MAAO,GACP,aAAc,GACd,cAAe,GACf,gBAAiB,GACjB,YAAa,GACb,gBAAiB,IAGbC,MAAeC,GACrBD,EAAS,GAAK,UACdA,EAAS,eAAiBL,EAC1BK,EAAS,WAAa,GAClB,IAAAE,EAAUC,EAAkB,EAC5BC,EAAgBC,GAAe,EAC/BC,EAAUC,GAAoB,WACzBC,GAAM,CACbC,GAAiB,EACjBC,EAAA,EAAAN,EAAgBC,IAAe,EAC/BK,EAAA,EAAAJ,EAAUC,IAAoB,eAyC9BG,EAAA,EAAAR,EAAUC,GAAkB,UAO5BK,EAAM"}