{"version":3,"file":"CM2N2A-1-BpkJFAJ7.js","sources":["../../src/exercices/CM/CM2N2A-1.ts"],"sourcesContent":["import { grille, seyes } from '../../lib/2d/reperes'\nimport { choice, combinaisonListes } from '../../lib/outils/arrayOutils'\nimport Exercice from '../Exercice'\nimport { mathalea2d, vide2d } from '../../modules/2dGeneralites'\nimport { context } from '../../modules/context'\nimport { listeQuestionsToContenu, randint } from '../../modules/outils'\nimport { fraction } from '../../modules/fractions'\nimport Figure from 'apigeom'\nimport figureApigeom from '../../lib/figureApigeom'\nimport LineFractionDiagram from 'apigeom/src/elements/diagrams/LineFractionDiagram'\nexport const titre = \"Repr√©senter une fraction de l'unit√©\"\nexport const amcReady = true\nexport const amcType = 'AMCHybride'\nexport const interactifReady = true\nexport const interactifType = 'custom'\nexport const dateDeModifImportante = '7/10/2024'\n/**\n * Tracer un segment de longueur une fraction de l'unit√©.\n * @author Jean-Claude Lhote (R√©mi Angot pour l'interactivit√©)\n * 6N32\n */\n\nexport const uuid = 'c28e5'\n\nexport const refs = {\n  'fr-fr': ['CM2N2A-1'],\n  'fr-2016': ['6N32'],\n  'fr-ch': ['9NO10-12'],\n}\nexport default class FractionsDunite extends Exercice {\n  goodAnswers: number[] = []\n  figuresApigeom: Figure[] = []\n  constructor() {\n    super()\n    this.nbQuestions = 5\n    this.consigne = 'Colorier en bleu un segment de longueur ...'\n    context.isHtml ? (this.spacingCorr = 3.5) : (this.spacingCorr = 2)\n    context.isHtml ? (this.spacing = 2) : (this.spacing = 2)\n    this.sup = 1\n    this.sup2 = 1\n    this.besoinFormulaireNumerique = [\n      'Type  de questions',\n      4,\n      '1 : Fraction inf√©rieure √† 1\\n2 : Demis, tiers et quarts\\n3 : Quarts, cinqui√®mes, sixi√®mes et dixi√®mes\\n4 : Toutes les fractions sup√©rieures √† 1',\n    ]\n    this.besoinFormulaire2Numerique = [\n      'Type de cahier',\n      2,\n      '1 : Cahier √† petits carreaux\\n2 : Cahier √† gros carreaux (Seyes)',\n    ]\n  }\n\n  nouvelleVersion() {\n    let typesDeQuestionsDisponibles, g, carreaux, sc, unit\n    let listeTypeDeQuestions = []\n    if (this.sup < 5) {\n      typesDeQuestionsDisponibles = [parseInt(this.sup)]\n    } else {\n      typesDeQuestionsDisponibles = [1, 2, 3, 4]\n    }\n    listeTypeDeQuestions = combinaisonListes(\n      typesDeQuestionsDisponibles,\n      this.nbQuestions,\n    )\n    for (let i = 0, cpt = 0; i < this.nbQuestions && cpt < 50; ) {\n      let den = 1\n      let num = 1\n      let texte = ''\n      let texteCorr = ''\n      switch (listeTypeDeQuestions[i]) {\n        case 1:\n          den = choice([4, 5, 6, 10])\n          num = randint(1, den - 1)\n          break\n        case 2:\n          den = choice([2, 3, 4])\n          if (den === 3) num = randint(3, 2 * den - 1, den)\n          else num = randint(3, 2 * den - 1, den)\n          break\n        case 3:\n          den = choice([4, 5, 6, 10])\n          if (den === 4) num = randint(5, 3 * den - 1, den)\n          else num = randint(5, 2 * den - 1, den)\n          break\n        case 4:\n          den = choice([2, 3, 4, 5, 6, 10])\n          if (den === 2 || den === 4) num = randint(den + 1, 3 * den - 1, den)\n          else num = randint(den + 1, 2 * den - 1, den)\n          break\n      }\n      if (den % 3 === 0) unit = 12\n      else if (den % 5 === 0) unit = 10\n      else unit = 8\n      const frac = fraction(num, den)\n      this.goodAnswers[i] = Math.round((num / den) * unit)\n      if (this.interactif) {\n        texte = `$${frac.texFraction}$ unit√©.`\n      } else {\n        texte = `$${frac.texFraction}$ unit√© en prenant ${unit} carreaux (ou ${unit} cm) pour une unit√©.`\n      }\n      if (this.sup2 < 3) g = grille(0, 0, 26, 2, 'gray', 0.7)\n      else g = vide2d()\n      if (parseInt(this.sup2) === 2) {\n        sc = 0.6\n        carreaux = seyes(0, 0, 26, 2)\n      } else {\n        sc = 0.5\n        carreaux = vide2d()\n      }\n\n      if (this.interactif) {\n        const figure = new Figure({\n          xMin: -0.5,\n          yMin: -0.3,\n          height: 60,\n          width: 600,\n        })\n        this.figuresApigeom[i] = figure\n        figure.setToolbar({ position: 'top', tools: ['FILL'] })\n        figure.options.color = 'blue'\n        figure.create('LineFractionDiagram', {\n          denominator: unit,\n          max: 3,\n          width: 6,\n        })\n        texte += figureApigeom({\n          exercice: this,\n          figure,\n          defaultAction: 'FILL',\n          i,\n        })\n        figure.divButtons.style.display = 'none'\n        figure.divUserMessage.style.display = 'none'\n      }\n\n      texteCorr = mathalea2d(\n        { xmin: 0, ymin: 0, xmax: 26, ymax: 2, pixelsParCm: 20, scale: sc },\n        frac.representation(1, 1, unit, 0, 'segment', 'blue', 0, 1),\n        g,\n        carreaux,\n      )\n      if (context.isAmc) {\n        this.autoCorrection[i] = {\n          enonce: 'ici la (ou les) question(s) est(sont) pos√©e(s)',\n          enonceAvant: false, // EE : ce champ est facultatif et permet (si false) de supprimer l'√©nonc√© ci-dessus avant la num√©rotation de chaque question.\n          enonceAvantUneFois: false, // EE : ce champ est facultatif et permet (si true) d'afficher l'√©nonc√© ci-dessus une seule fois avant la num√©rotation de la premi√®re question de l'exercice. Ne fonctionne correctement que si l'option melange est √† false.\n          propositions: [\n            {\n              type: 'AMCOpen', // on donne le type de la premi√®re question-r√©ponse qcmMono, qcmMult, AMCNum, AMCOpen\n              propositions: [\n                {\n                  texte: texteCorr,\n                  statut: 2, // OBLIGATOIRE (ici c'est le nombre de lignes du cadre pour la r√©ponse de l'√©l√®ve sur AMC)\n                  enonce: this.consigne.split('.')[0] + ' ' + texte,\n                  pointilles: false,\n                  sanscadre: false, // EE : ce champ est facultatif et permet (si true) de cacher le cadre et les lignes acceptant la r√©ponse de l'√©l√®ve\n                },\n              ],\n            },\n          ],\n        }\n      }\n      if (this.questionJamaisPosee(i, num, den)) {\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n    listeQuestionsToContenu(this)\n  }\n\n  correctionInteractive = (i: number) => {\n    const figure = this.figuresApigeom[i]\n    if (this.answers == null) this.answers = {}\n    // Sauvegarde de la r√©ponse pour Capytale\n    this.answers[figure.id] = figure.json\n    figure.isDynamic = false\n    figure.divButtons.style.display = 'none'\n    figure.divUserMessage.style.display = 'none'\n    const divFeedback = document.querySelector(\n      `#feedback${`Ex${this.numeroExercice}Q${i}`}`,\n    )\n    let result = false\n    figure.elements.forEach((ele) => {\n      if (\n        ele.type === 'LineFractionDiagram' &&\n        ele instanceof LineFractionDiagram\n      ) {\n        // result = (ele.numerator === this.goodAnswers[i] && ele.numerator === ele.indiceLastInColor) // On n'impose plus que le segment soit colori√© depuis le d√©but\n        const bonNombreDeCasesColoriees = ele.numerator === this.goodAnswers[i]\n        const indicesArray = Array.from(ele.indicesRectanglesInColor).sort((a, b) => a - b)\n        const firstElement = indicesArray[0]\n        const lastElement = indicesArray[indicesArray.length - 1]\n        const difference = lastElement - firstElement\n        const segmentEnUnSeulBloc = difference === indicesArray.length - 1\n        result = bonNombreDeCasesColoriees && segmentEnUnSeulBloc\n      }\n    })\n    if (divFeedback != null) {\n      if (result) {\n        divFeedback.innerHTML = 'üòé'\n      } else {\n        const p = document.createElement('p')\n        p.innerText = '‚òπÔ∏è'\n        divFeedback.insertBefore(p, divFeedback.firstChild)\n      }\n    }\n    return result ? 'OK' : 'KO'\n  }\n}\n"],"names":["titre","amcReady","amcType","interactifReady","interactifType","dateDeModifImportante","uuid","refs","FractionsDunite","Exercice","__publicField","i","figure","divFeedback","result","ele","LineFractionDiagram","bonNombreDeCasesColoriees","indicesArray","a","b","firstElement","segmentEnUnSeulBloc","p","context","typesDeQuestionsDisponibles","g","carreaux","sc","unit","listeTypeDeQuestions","combinaisonListes","cpt","den","num","texte","texteCorr","choice","randint","frac","fraction","grille","vide2d","seyes","Figure","figureApigeom","mathalea2d","listeQuestionsToContenu"],"mappings":"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"}