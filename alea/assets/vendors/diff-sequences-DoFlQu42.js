var X={};Object.defineProperty(X,"__esModule",{value:!0});var E=X.default=S;const Y="diff-sequences",h=0,z=(o,n,t,g,l)=>{let r=0;for(;o<n&&t<g&&l(o,t);)o+=1,t+=1,r+=1;return r},A=(o,n,t,g,l)=>{let r=0;for(;o<=n&&t<=g&&l(n,g);)n-=1,g-=1,r+=1;return r},H=(o,n,t,g,l,r,m)=>{let c=0,s=-o,f=r[c],e=f;r[c]+=z(f+1,n,g+f-s+1,t,l);const u=o<m?o:m;for(c+=1,s+=2;c<=u;c+=1,s+=2){if(c!==o&&e<r[c])f=r[c];else if(f=e+1,n<=f)return c-1;e=r[c],r[c]=f+z(f+1,n,g+f-s+1,t,l)}return m},U=(o,n,t,g,l,r,m)=>{let c=0,s=o,f=r[c],e=f;r[c]-=A(n,f-1,t,g+f-s-1,l);const u=o<m?o:m;for(c+=1,s-=2;c<=u;c+=1,s-=2){if(c!==o&&r[c]<e)f=r[c];else if(f=e-1,f<n)return c-1;e=r[c],r[c]=f-A(n,f-1,t,g+f-s-1,l)}return m},Z=(o,n,t,g,l,r,m,c,s,f,e)=>{const u=g-n,_=t-n,F=l-g-_,p=-F-(o-1),M=-F+(o-1);let $=h;const w=o<c?o:c;for(let P=0,C=-o;P<=w;P+=1,C+=2){const q=P===0||P!==o&&$<m[P],i=q?m[P]:$,y=q?i:i+1,b=u+y-C,O=z(y+1,t,b+1,l,r),k=y+O;if($=m[P],m[P]=k,p<=C&&C<=M){const N=(o-1-(C+F))/2;if(N<=f&&s[N]-1<=k){const R=u+i-(q?C+1:C-1),L=A(n,i,g,R,r),D=i-L,B=R-L,j=D+1,G=B+1;e.nChangePreceding=o-1,o-1===j+G-n-g?(e.aEndPreceding=n,e.bEndPreceding=g):(e.aEndPreceding=j,e.bEndPreceding=G),e.nCommonPreceding=L,L!==0&&(e.aCommonPreceding=j,e.bCommonPreceding=G),e.nCommonFollowing=O,O!==0&&(e.aCommonFollowing=y+1,e.bCommonFollowing=b+1);const K=k+1,Q=b+O+1;return e.nChangeFollowing=o-1,o-1===t+l-K-Q?(e.aStartFollowing=t,e.bStartFollowing=l):(e.aStartFollowing=K,e.bStartFollowing=Q),!0}}}return!1},a=(o,n,t,g,l,r,m,c,s,f,e)=>{const u=l-t,_=t-n,F=l-g-_,p=F-o,M=F+o;let $=h;const w=o<f?o:f;for(let P=0,C=o;P<=w;P+=1,C-=2){const q=P===0||P!==o&&s[P]<$,i=q?s[P]:$,y=q?i:i-1,b=u+y-C,O=A(n,y-1,g,b-1,r),k=y-O;if($=s[P],s[P]=k,p<=C&&C<=M){const N=(o+(C-F))/2;if(N<=c&&k-1<=m[N]){const R=b-O;if(e.nChangePreceding=o,o===k+R-n-g?(e.aEndPreceding=n,e.bEndPreceding=g):(e.aEndPreceding=k,e.bEndPreceding=R),e.nCommonPreceding=O,O!==0&&(e.aCommonPreceding=k,e.bCommonPreceding=R),e.nChangeFollowing=o-1,o===1)e.nCommonFollowing=0,e.aStartFollowing=t,e.bStartFollowing=l;else{const L=u+i-(q?C-1:C+1),D=z(i,t,L,l,r);e.nCommonFollowing=D,D!==0&&(e.aCommonFollowing=i,e.bCommonFollowing=L);const B=i+D,j=L+D;o-1===t+l-B-j?(e.aStartFollowing=t,e.bStartFollowing=l):(e.aStartFollowing=B,e.bStartFollowing=j)}return!0}}}return!1},v=(o,n,t,g,l,r,m,c,s)=>{const f=g-n,e=l-t,u=t-n,_=l-g,T=_-u;let F=u,p=u;if(m[0]=n-1,c[0]=t,T%2===0){const M=(o||T)/2,$=(u+_)/2;for(let w=1;w<=$;w+=1)if(F=H(w,t,l,f,r,m,F),w<M)p=U(w,n,g,e,r,c,p);else if(a(w,n,t,g,l,r,m,F,c,p,s))return}else{const M=((o||T)+1)/2,$=(u+_+1)/2;let w=1;for(F=H(w,t,l,f,r,m,F),w+=1;w<=$;w+=1)if(p=U(w-1,n,g,e,r,c,p),w<M)F=H(w,t,l,f,r,m,F);else if(Z(w,n,t,g,l,r,m,F,c,p,s))return}throw new Error(`${Y}: no overlap aStart=${n} aEnd=${t} bStart=${g} bEnd=${l}`)},J=(o,n,t,g,l,r,m,c,s,f)=>{if(l-g<t-n){if(r=!r,r&&m.length===1){const{foundSubsequence:k,isCommon:N}=m[0];m[1]={foundSubsequence:(R,L,D)=>{k(R,D,L)},isCommon:(R,L)=>N(L,R)}}const b=n,O=t;n=g,t=l,g=b,l=O}const{foundSubsequence:e,isCommon:u}=m[r?1:0];v(o,n,t,g,l,u,c,s,f);const{nChangePreceding:_,aEndPreceding:T,bEndPreceding:F,nCommonPreceding:p,aCommonPreceding:M,bCommonPreceding:$,nCommonFollowing:w,aCommonFollowing:P,bCommonFollowing:C,nChangeFollowing:q,aStartFollowing:i,bStartFollowing:y}=f;n<T&&g<F&&J(_,n,T,g,F,r,m,c,s,f),p!==0&&e(p,M,$),w!==0&&e(w,P,C),i<t&&y<l&&J(q,i,t,y,l,r,m,c,s,f)},V=(o,n)=>{if(typeof n!="number")throw new TypeError(`${Y}: ${o} typeof ${typeof n} is not a number`);if(!Number.isSafeInteger(n))throw new RangeError(`${Y}: ${o} value ${n} is not a safe integer`);if(n<0)throw new RangeError(`${Y}: ${o} value ${n} is a negative integer`)},W=(o,n)=>{const t=typeof n;if(t!=="function")throw new TypeError(`${Y}: ${o} typeof ${t} is not a function`)};function S(o,n,t,g){V("aLength",o),V("bLength",n),W("isCommon",t),W("foundSubsequence",g);const l=z(0,o,0,n,t);if(l!==0&&g(l,0,0),o!==l||n!==l){const r=l,m=l,c=A(r,o-1,m,n-1,t),s=o-c,f=n-c,e=l+c;o!==e&&n!==e&&J(0,r,s,m,f,!1,[{foundSubsequence:g,isCommon:t}],[h],[h],{aCommonFollowing:h,aCommonPreceding:h,aEndPreceding:h,aStartFollowing:h,bCommonFollowing:h,bCommonPreceding:h,bEndPreceding:h,bStartFollowing:h,nChangeFollowing:h,nChangePreceding:h,nCommonFollowing:h,nCommonPreceding:h}),c!==0&&g(c,s,f)}}export{E as _};
//# sourceMappingURL=diff-sequences-DoFlQu42.js.map
