{"version":3,"file":"5L10-5-Tce1pZ4-.js","sources":["../../src/exercices/5e/5L10-5.ts"],"sourcesContent":["import { listeShapes2DInfos } from '../../lib/2d/figures2d/shapes2d'\nimport {\n  lisdtePatternsFor5L105,\n  type PatternRiche,\n  type PatternRiche3D,\n} from '../../lib/2d/patterns/patternsPreDef'\nimport { point } from '../../lib/2d/points'\nimport { polygone } from '../../lib/2d/polygones'\nimport { texteParPosition } from '../../lib/2d/textes'\nimport { ajouteQuestionMathlive } from '../../lib/interactif/questionMathLive'\nimport { shuffle } from '../../lib/outils/arrayOutils'\nimport { miseEnEvidence } from '../../lib/outils/embellissements'\nimport {\n  fixeBordures,\n  mathalea2d,\n  type NestedObjetMathalea2dArray,\n} from '../../modules/2dGeneralites'\nimport Exercice from '../Exercice'\n// import type { VisualPattern } from '../../lib/2d/patterns/VisualPattern'\nimport {\n  cubeDef,\n  project3dIso,\n  shapeCubeIso,\n  updateCubeIso,\n} from '../../lib/2d/figures2d/Shape3d'\nimport { VisualPattern } from '../../lib/2d/patterns/VisualPattern'\nimport { VisualPattern3D } from '../../lib/2d/patterns/VisualPattern3D'\nimport { context } from '../../modules/context'\n\nexport const titre =\n  \"Définir une expression littérale à partir d'un modèle figuratif\"\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\n// Gestion de la date de publication initiale\nexport const dateDePublication = '23/06/2025'\n\n/**\n * Étudier les premiers termes d'une série de motifs afin de donner le nombre de formes du motif de rang n.\n * Les patterns sont des motifs figuratifs qui évoluent selon des règles définies.\n * Cet exercice contient des modèles issus de l'excellent site : https://www.visualpatterns.org/\n * @author Jean-Claude Lhote\n */\nexport const uuid = '328b4'\n\nexport const refs = {\n  'fr-fr': ['5L10-5'],\n  'fr-ch': ['10FA1-18', '11FA1-14'],\n}\n\nexport default class PaternNum1 extends Exercice {\n  destroyers: (() => void)[] = []\n\n  constructor() {\n    super()\n    this.nbQuestions = 3\n    this.comment =\n      \"Cet exercice contient des modèles issus de l'excellent site : https://www.visualpatterns.org/\"\n    this.besoinFormulaireNumerique = ['Nombre de figures par question', 4]\n    this.sup = 3\n    this.besoinFormulaire5Numerique = [\n      'Numéro de modèle (uniquement si 1 seule question)',\n      lisdtePatternsFor5L105.length,\n    ]\n    this.sup5 = 1\n  }\n\n  destroy() {\n    // MGu quan l'exercice est supprimé par svelte : bouton supprimé\n    this.destroyers.forEach((destroy) => destroy())\n    this.destroyers.length = 0\n  }\n\n  nouvelleVersion(): void {\n    // MGu quand l'exercice est modifié, on détruit les anciens listeners\n    this.destroyers.forEach((destroy) => destroy())\n    this.destroyers.length = 0\n    if (this.sup5 > lisdtePatternsFor5L105.length) {\n      this.sup5 = lisdtePatternsFor5L105.length\n    }\n    if (this.sup5 < 1) {\n      this.sup5 = 1\n    }\n\n    const listePreDef =\n      this.nbQuestions === 1\n        ? [lisdtePatternsFor5L105[Number(this.sup5) - 1]]\n        : shuffle(lisdtePatternsFor5L105)\n    const nbFigures = Math.max(2, this.sup)\n    for (let i = 0; i < this.nbQuestions; ) {\n      const objetsCorr: NestedObjetMathalea2dArray = []\n      const popped = listePreDef.pop()\n      if (!popped) {\n        continue\n      }\n      const pat = popped\n      const pattern =\n        'iterate3d' in pat\n          ? new VisualPattern3D({\n              initialCells: [],\n              prefixId: `Ex${this.numeroExercice}Q${i}`,\n              shapes: pat.shapes,\n              type: 'iso',\n            })\n          : new VisualPattern([])\n\n      if ('iterate3d' in pattern) {\n        pattern.shape = shapeCubeIso()\n        pattern.iterate3d = (pat as PatternRiche3D).iterate3d\n        objetsCorr.push(cubeDef(`cubeIsoQ${i}F0`))\n      } else {\n        const pat2D = pat as PatternRiche\n        pattern.iterate = (pat as PatternRiche).iterate\n        pattern.shapes = pat2D.shapes || ['carré', 'carré']\n\n        if (pat2D.shapes[0] in listeShapes2DInfos)\n          objetsCorr.push(listeShapes2DInfos[pat2D.shapes[0]].shapeDef)\n        else {\n          console.warn(\n            `Shape ${pat2D.shapes[0]} n'est pas dans listeShapesDef ou emojis`,\n          )\n        }\n        if (pat2D.shapes[1] && pat2D.shapes[1] !== pat2D.shapes[0]) {\n          if (pat2D.shapes[1] in listeShapes2DInfos)\n            objetsCorr.push(listeShapes2DInfos[pat2D.shapes[1]].shapeDef)\n          else {\n            console.warn(\n              `Shape ${pat2D.shapes[1]} n'est pas dans listeShapesDef ou emojis`,\n            )\n          }\n        }\n      }\n\n      const rendered = pattern.render(nbFigures + 1, 0, 0, Math.PI / 6)\n      objetsCorr.push(...rendered)\n      let yMax = 0\n      let yMin = 0\n      const angle = Math.PI / 6\n      let texte = `Voici les ${nbFigures} premiers motifs d'une série de motifs figuratifs. Les motifs se succèdent selon une règle bien définie.<br>`\n      const figures: NestedObjetMathalea2dArray[] = []\n      for (let j = 0; j < nbFigures; j++) {\n        figures[j] = []\n        if ('iterate3d' in pattern) {\n          figures[j].push(cubeDef(`cubeIsoQ${i}F${j}`))\n        } else {\n          const pat2D = pat as PatternRiche\n          for (const shape of pat2D.shapes) {\n            if (shape in listeShapes2DInfos)\n              figures[j].push(listeShapes2DInfos[shape].shapeDef)\n            else {\n              console.warn(\n                `Shape ${shape} n'est pas dans listeShapesDef ou emojis.`,\n              )\n            }\n          }\n        }\n\n        let xmin = Infinity\n        let ymin = Infinity\n        let xmax = -Infinity\n        let ymax = -Infinity\n        if ('iterate3d' in pattern) {\n          if (context.isHtml) {\n            const listeners = updateCubeIso({\n              pattern,\n              i,\n              j,\n              angle,\n              inCorrectionMode: false,\n            })\n            if (listeners) this.destroyers.push(listeners)\n            if (pattern.shape == null) {\n              pattern.shape = shapeCubeIso(`cubeIsoQ${i}F${j}`, 0, 0, {\n                fillStyle: '#ffffff',\n                strokeStyle: '#000000',\n                lineWidth: 1,\n                opacite: 1,\n                scale: 1,\n              })\n            }\n            pattern.shape.codeSvg = `<use href=\"#cubeIsoQ${i}F${j}\"></use>`\n            const cells = (pattern as VisualPattern3D).update3DCells(j + 1)\n            // Ajouter les SVG générés par svg() de chaque objet\n            cells.forEach((cell) => {\n              const [px, py] = project3dIso(cell[0], cell[1], cell[2], angle)\n              const obj = shapeCubeIso(`cubeIsoQ${i}F${j}`, px, py)\n              figures[j].push(obj)\n              ymin = Math.min(ymin, -py / 20)\n              ymax = Math.max(ymax, -py / 20)\n              xmin = Math.min(xmin, px / 20)\n              xmax = Math.max(xmax, px / 20)\n            })\n            xmin -= 1\n            xmax += 1\n          } else {\n            figures[j].push(\n              ...(pattern as VisualPattern3D).render(j + 1, 0, 0, Math.PI / 6),\n            )\n            ;({ xmin, ymin, xmax, ymax } = fixeBordures(figures[j]))\n          }\n        } else {\n          figures[j].push(...pattern.render(j + 1, 0, 0))\n          ;({ xmin, ymin, xmax, ymax } = fixeBordures(figures[j]))\n        }\n        figures[j].push(\n          texteParPosition(\n            `Motif ${j + 1}`,\n            (xmax + xmin + 1) / 2,\n            ymin - 1.5,\n            0,\n            'black',\n            0.8,\n            'milieu',\n          ),\n        )\n        const cadre = polygone(\n          point(xmin - 1, ymin - 2),\n          point(xmax + 2, ymin - 2),\n          point(xmax + 2, ymax + 2),\n          point(xmin - 1, ymax + 2),\n        )\n        cadre.pointilles = 4\n        figures[j].push(cadre)\n        yMax = Math.max(yMax, ymax)\n        yMin = Math.min(yMin, ymin)\n      }\n      texte += figures\n        .map((fig, index) =>\n          mathalea2d(\n            Object.assign(\n              fixeBordures(fig, { rxmin: 0, rymin: -1, rxmax: 0, rymax: 1 }),\n              {\n                id: `Motif${i}F${index}`,\n                pixelsParCm: 20,\n                yMax,\n                yMin,\n                scale: 0.4,\n                style: 'display: inline-block',\n                optionsTikz: 'transform shape',\n              },\n            ),\n            fig,\n          ),\n        )\n        .join('\\n')\n      let texteCorr = ''\n\n      const nbFormes = pat.fonctionNb(nbFigures + 1)\n      const nbTex = miseEnEvidence(nbFormes)\n      const infosShape =\n        pat.shapes[0] in listeShapes2DInfos\n          ? listeShapes2DInfos[pat.shapes[0]]\n          : { articleCourt: 'de ', nomPluriel: 'cubes' }\n      texteCorr += `Le motif de rang $n$ contient $${nbTex}$ ${infosShape.nomPluriel}.<br>`\n      texteCorr += `En effet, la formule pour trouver le nombre ${infosShape.articleCourt}${infosShape.nomPluriel} est : $${miseEnEvidence(pat.formule.replaceAll('n', 'n'))}$.<br>`\n      texte += `<br>Quel sera le nombre ${infosShape.articleCourt}${infosShape.nomPluriel} dans le motif au rang $n$ en fonction de $n$ ?<br>${ajouteQuestionMathlive(\n        {\n          exercice: this,\n          question: i,\n          objetReponse: { reponse: { value: pat.formule } },\n          typeInteractivite: 'mathlive',\n        },\n      )}`\n\n      this.listeQuestions.push(texte)\n      this.listeCorrections.push(texteCorr)\n      i++\n    }\n  }\n}\n"],"names":["titre","interactifReady","interactifType","dateDePublication","uuid","refs","PaternNum1","Exercice","__publicField","lisdtePatternsFor5L105","destroy","listePreDef","shuffle","nbFigures","i","objetsCorr","popped","pat","pattern","VisualPattern3D","VisualPattern","shapeCubeIso","cubeDef","pat2D","listeShapes2DInfos","rendered","yMax","yMin","angle","texte","figures","j","shape","xmin","ymin","xmax","ymax","context","listeners","updateCubeIso","cell","px","py","project3dIso","obj","fixeBordures","texteParPosition","cadre","polygone","point","fig","index","mathalea2d","texteCorr","nbFormes","nbTex","miseEnEvidence","infosShape","ajouteQuestionMathlive"],"mappings":"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"}