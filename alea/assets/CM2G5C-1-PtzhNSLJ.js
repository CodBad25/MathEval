var oe=Object.defineProperty;var ne=(o,i,e)=>i in o?oe(o,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[i]=e;var P=(o,i,e)=>ne(o,typeof i!="symbol"?i+"":i,e);import{E as ae,P as v,ah as R,ag as ce,r as w,p as q,m as y,f as E,dC as ue,o as le,eA as $,b2 as me,x as fe}from"./index-Bk_D2JkM.js";import{a as G}from"./Canvas3DElement-CQDlgMO5.js";import{G as D,p as Fe,j as pe,D as he,M as K,r as W,B as J,V as de}from"./vendors/three-BSH761bm.js";/* empty css                         */import"./vendors/svelte-DYHmJxok.js";import"./vendors/ua-parser-js-IGXSU7q4.js";import"./vendors/instrumenpoche-BZzrq7Nx.js";import"./vendors/sesajstools-DShOIGrY.js";import"./vendors/ansi-styles-C5UZWym2.js";import"./vendors/decimal.js-16C9rIKp.js";import"./vendors/katex-DoI0QyUo.js";import"./vendors/seedrandom-CNNRxp22.js";import"./vendors/crypto-js-jSnn2346.js";import"./vendors/apigeom-CSdzZNvA.js";import"./vendors/mathjs-oaIJR0Fd.js";import"./vendors/babel_runtime-91SaXnVV.js";import"./vendors/javascript-natural-sort-CZcnv-xn.js";import"./vendors/escape-latex-D2RmlMiC.js";import"./vendors/complex.js-CUuq6tox.js";import"./vendors/typed-function-DLw9ktPY.js";import"./vendors/fraction.js-CAdrwJ1J.js";import"./vendors/tiny-emitter-DDQe9_b_.js";import"./vendors/xstate-CiXeYAGM.js";import"./vendors/earcut-jJVragJp.js";import"./vendors/roughjs-GtHDBO_d.js";import"./json/referentielStaticCH-BvJ6T55O.js";import"./json/referentielStaticFR-CRF_Hjtf.js";import"./json/uuidsToUrlFR-BAWSFQnt.js";import"./vendors/cortex-js_compute-engine-CK5Y8453.js";import"./vendors/mathlive-DtHmjDB4.js";import"./vendors/bugsnag_js-CkCWaA3t.js";import"./vendors/bugsnag_browser-d00kmNSm.js";import"./vendors/big-integer-Cu-VsFVy.js";import"./json/codeToLevelList-Cc4cPPvZ.js";import"./json/codeToThemeList-xPVrG8Yb.js";import"./vendors/mixer_postmessage-rpc-Knoq2TfA.js";import"./vendors/eventemitter3-6E4L_h32.js";import"./vendors/scratchblocks-BVGw3YSR.js";import"./json/scratchFr-DbCU7OC2.js";import"./json/refToUuidFR-BN9okUDO.js";import"./json/refToUuidCH-Bo89B_4U.js";import"./vendors/loadjs-BzrfRgSk.js";import"./vendors/svelte-gestures-u4km4ICX.js";import"./vendors/tw-elements-Cl8JxGRl.js";import"./json/uuidsRessources-CtbQ0Y2s.js";import"./json/referentielProfs-Cey1_luL.js";import"./json/referentielBibliotheque-BkZtqQRj.js";import"./vendors/jszip-CxmGZ1c2.js";import"./vendors/jszip-utils-D5kR6ObF.js";import"./vendors/file-saver-FyOmtGcA.js";import"./vendors/copy-image-clipboard-Cf9y-QAU.js";import"./vendors/qrcode-SHonoxyK.js";import"./vendors/dijkstrajs-D_NXgYpA.js";import"./vendors/svelte-french-toast-BHXPj9o3.js";import"./vendors/svelte-writable-derived-Cn90q3ND.js";import"./vendors/brace-BiTXuHwf.js";import"./json/referentielAppsTierce-SxU58PZT.js";import"./vendors/sortablejs-C83syoBY.js";import"./json/carouselContent-BScQaKkw.js";import"./json/levelsThemesList-HiwLnYG4.js";import"./json/levelsThemesListCH-CWlgSx1G.js";import"./json/referentiel2022CH-BoAqvpTp.js";import"./json/referentiel2022FR-CoYbRrWo.js";import"./json/referentielGeometrieDynamique-BJ2PHXsv.js";import"./json/referentielRessources-BU2QQoSD.js";import"./json/referentielsActivation-CpD_hoec.js";import"./vendors/troika-three-text-C_3dcAK8.js";import"./vendors/troika-worker-utils-DbVzmR1E.js";import"./vendors/webgl-sdf-generator-B9WjZ7l-.js";import"./vendors/bidi-js-Dpu9EnKw.js";import"./vendors/troika-three-utils-DmCyTLF3.js";const ge=[[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:0,isFace:!1},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:0,isFace:!1},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:4,isFace:!0},{numero:5,isFace:!0}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:0,isFace:!1},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:0,isFace:!1},{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:2,isFace:!0}],[{numero:0,isFace:!1},{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:0,isFace:!1},{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:2,isFace:!0}],[{numero:0,isFace:!1},{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:0,isFace:!1}],[{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:0,isFace:!1},{numero:5,isFace:!0}],[{numero:0,isFace:!1},{numero:6,isFace:!0}]],[[{numero:0,isFace:!1},{numero:0,isFace:!1},{numero:1,isFace:!0}],[{numero:0,isFace:!1},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]]],xe=[[[{numero:1,isFace:!0,collision:6},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:0,isFace:!1}],[{numero:3,isFace:!0},{numero:4,isFace:!0}],[{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0,collision:6}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0,collision:6},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0,collision:5}],[{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:5,isFace:!0}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0,collision:2},{numero:0,isFace:!1},{numero:2,isFace:!0}],[{numero:3,isFace:!0},{numero:4,isFace:!0},{numero:5,isFace:!0}],[{numero:0,isFace:!1},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:0,isFace:!1}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0,collision:6}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0,collision:5},{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:0,isFace:!1},{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0,collision:5}],[{numero:2,isFace:!0,collision:6}],[{numero:3,isFace:!0}],[{numero:4,isFace:!0}],[{numero:5,isFace:!0}],[{numero:6,isFace:!0}]],[[{numero:1,isFace:!0,collision:6},{numero:2,isFace:!0}],[{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0,collision:6}],[{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:6,isFace:!0}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0,collision:6}],[{numero:2,isFace:!0},{numero:3,isFace:!0}],[{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:3,isFace:!0,collision:6}],[{numero:4,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0,collision:5}],[{numero:3,isFace:!0},{numero:0,isFace:!1}],[{numero:4,isFace:!0},{numero:5,isFace:!0}],[{numero:0,isFace:!1},{numero:6,isFace:!0}]],[[{numero:1,isFace:!0},{numero:2,isFace:!0},{numero:3,isFace:!0,collision:6}],[{numero:4,isFace:!0,collision:5},{numero:0,isFace:!1},{numero:5,isFace:!0}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:0,isFace:!1},{numero:1,isFace:!0}],[{numero:2,isFace:!0},{numero:3,isFace:!0},{numero:4,isFace:!0,collision:6}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]],[[{numero:0,isFace:!1},{numero:1,isFace:!0},{numero:2,isFace:!0,collision:6}],[{numero:3,isFace:!0},{numero:4,isFace:!0},{numero:0,isFace:!1}],[{numero:5,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}],[{numero:6,isFace:!0},{numero:0,isFace:!1},{numero:0,isFace:!1}]]];function X(o,i,e){return[{dx:0,dy:-1,dir:"T"},{dx:0,dy:1,dir:"B"},{dx:-1,dy:0,dir:"L"},{dx:1,dy:0,dir:"R"}].filter(({dx:r,dy:t})=>{var a,c;return(c=(a=o[e+t])==null?void 0:a[i+r])==null?void 0:c.isFace}).map(({dx:r,dy:t,dir:a})=>({x:i+r,y:e+t,dir:a}))}function be(o){let i=-1,e={x:0,y:0};for(let s=0;s<o.length;s++)for(let r=0;r<o[0].length;r++)if(o[s][r].isFace){const t=X(o,r,s);t.length>i&&(i=t.length,e={x:r,y:s})}return e}function Y(o,i,e,s,r,t=new Set){const a=`${i},${e}`;if(t.has(a))return null;t.add(a);const c={x:i,y:e,parent:s,children:[],directionFromParent:r};for(const u of X(o,i,e))if(!t.has(`${u.x},${u.y}`)){Math.abs(u.x-i)+Math.abs(u.y-e)!==1&&console.warn(`Parent (${i},${e}) et enfant (${u.x},${u.y}) ne sont pas adjacents !`);const n=Y(o,u.x,u.y,c,u.dir,t);n&&c.children.push(n)}return c}const N=.001;function U(o,i,e=[0,0,0],s=new Map){const r=`${o.x},${o.y}`;s.set(r,e);for(const t of o.children){let a=[0,0,0];switch(t.directionFromParent){case"T":a=[0,0,-1.501];break;case"B":a=[0,0,i+N];break;case"L":a=[-1.501,0,0];break;case"R":a=[i+N,0,0];break}U(t,i,[e[0]+a[0],e[1]+a[1],e[2]+a[2]],s)}return s}function ee(o,i,e,s){const r=`${o.x},${o.y}`,t=e.get(r)??[0,0,0];let a;if(!o.parent)a=t;else{const c=`${o.parent.x},${o.parent.y}`,u=e.get(c)??[0,0,0];a=[(u[0]+t[0])/2,(u[1]+t[1])/2,(u[2]+t[2])/2]}s.set(r,a);for(const c of o.children)ee(c,i,e,s);return s}function te(o,i,e,s,r,t={value:0}){const c=i-.004,u=i-2*.002,n=t.value%r.length;t.value++;const f=r[n],l=`${o.x},${o.y}`,m=e.get(l)??[0,0,0],d=s.get(l)??[0,0,0],h=o.parent?s.get(`${o.parent.x},${o.parent.y}`)??[0,0,0]:[0,0,0],F=new D;o.parent&&o.directionFromParent&&(F.userData.directionFromParent=o.directionFromParent),o.parent&&o.directionFromParent?F.position.set(d[0]-h[0],d[1]-h[1],d[2]-h[2]):F.position.set(m[0],m[1],m[2]);const M=new Fe(c,.01,u),k=new pe({color:f,side:he}),p=new K(M,k);o.parent&&o.directionFromParent?p.position.set(m[0]-d[0],m[1]-d[1],m[2]-d[2]):p.position.set(0,0,0),F.add(p);for(const C of o.children){const g=te(C,i,e,s,r,t);F.add(g)}return F}function H(o,i){const e=be(o),s=1.5,r=Y(o,e.x,e.y),t=U(r,s,[e.x,0,e.y],new Map),a=ee(r,s,t,new Map),u=te(r,s,t,a,["#3498db","#2ecc71","#e67e22","#9b59b6","#f1c40f","#5dade2"]);return u.traverse(f=>f.updateMatrix()),{type:"group",object:u.toJSON()}}function $e(){return{pliageEnCours:!1,depliageEnCours:!1,estPlie:!1,estDeplie:!0,blinkEnCours:!1}}function Ee(o,i,e){o._etatPatron=$e();const s=o.querySelector(`#btnPlier-${e}`),r=o.querySelector(`#btnDeplier-${e}`);s&&(s.disabled=!1),r&&(r.disabled=!0),o.addEventListener(`pliage-${e}`,()=>{const t=o._etatPatron;!t.estDeplie||t.pliageEnCours||(t.pliageEnCours=!0,t.estDeplie=!1,s.disabled=!0,r.disabled=!0,ye(i,()=>{t.pliageEnCours=!1,t.estPlie=!0;let a=!1;const c=[];i.traverse(n=>{n instanceof K&&c.push(n)});const u=[];for(let n=0;n<c.length;n++){const f=new J().setFromObject(c[n]);for(let l=n+1;l<c.length;l++){const m=new J().setFromObject(c[l]),d=f.clone();d.intersect(m);const h=d.getSize(new de);h.x*h.y*h.z>.01&&(a=!0,u.push(c[n],c[l]))}}if(a){t.blinkEnCours=!0,r.disabled=!0;let n=u.length;u.forEach(f=>{Pe(f,"#ff0000",7,200,()=>{n--,n===0&&(t.blinkEnCours=!1,r.disabled=!1)})})}else r.disabled=!1}))}),o.addEventListener(`depliage-${e}`,()=>{const t=o._etatPatron;!t.estPlie||t.depliageEnCours||t.blinkEnCours||(t.depliageEnCours=!0,t.estPlie=!1,r.disabled=!0,s.disabled=!0,Me(i,()=>{t.depliageEnCours=!1,t.estDeplie=!0,s.disabled=!1}))})}function ye(o,i,e=1e3){const s=[];o.traverse(t=>{t instanceof D&&t.userData.directionFromParent&&s.push(t)});let r=s.length;s.forEach(t=>{const a=t.rotation.clone(),c=new W;switch(t.userData.directionFromParent){case"T":c.set(Math.PI/2,0,0);break;case"B":c.set(-Math.PI/2,0,0);break;case"L":c.set(0,0,-Math.PI/2);break;case"R":c.set(0,0,Math.PI/2);break}re(t,a,c,e,()=>{r--,r===0&&i&&i()})})}function Me(o,i,e=1e3){const s=[];o.traverse(t=>{t instanceof D&&t.userData.directionFromParent&&s.push(t)});let r=s.length;s.forEach(t=>{const a=t.rotation.clone(),c=new W(0,0,0);re(t,a,c,e,()=>{r--,r===0&&i&&i()})})}function se(){document.querySelectorAll("canvas-3d").forEach(i=>{const s=(i.getAttribute("id")||"").match(/Ex\d+Q\d+/),r=s?s[0]:"",t=i.objects,a=Array.isArray(t)?t.find(c=>c instanceof D):void 0;a&&r&&Ee(i,a,r)}),document.removeEventListener("correctionsAffichees",se)}function re(o,i,e,s,r){const t=performance.now();function a(c){const u=Math.min((c-t)/s,1);o.rotation.set(i.x+(e.x-i.x)*u,i.y+(e.y-i.y)*u,i.z+(e.z-i.z)*u),u<1?requestAnimationFrame(a):(o.rotation.copy(e),r&&r())}requestAnimationFrame(a)}function Pe(o,i="#ff0000",e=26,s=200,r){let t=0;const a=o.material;if(!a.color)return r&&r(),()=>{};const c=a.color.clone();function u(){a.color&&a.color.set(t%2===0?i:"#ffffff"),t++,t<e*2?setTimeout(u,s):(a.color&&a.color.copy(c),r&&r())}u()}const Jt=!0,Nt="qcmMono",Ht=!0,Zt="cliqueFigure",Kt="Choisir le patron de cube",Wt="18/07/2025",Xt="f57fe",Yt={"fr-fr":["CM2G5C-1"],"fr-2016":["6G45"],"fr-ch":[]};function Q(o){const i=o.findIndex(r=>r.flat().filter(t=>t.isFace).length===6&&r.flat().filter(t=>t.collision!==void 0).length===0),e=o.findIndex(r=>r.flat().filter(t=>t.isFace).length!==6),s=o.map((r,t)=>{const a=r.flat().reduce((c,u)=>(u.collision!==void 0&&c.push([t,u.collision]),c),[]);return{index:t,collision:a}}).filter(r=>r.collision.length>0);if(s.length===0)throw new Error("Aucun faux patron trouvé dans la liste fournie.");return{indexVraiPatron:i,indexPas6Faces:e,indexFauxPatrons:s}}class Ut extends ae{constructor(){super();P(this,"listeMatrices");P(this,"listeners");this.nbQuestions=1,this.besoinFormulaire2CaseACocher=["3d dynamique",!0],this.sup2=!0,this.listeMatrices=[],this.listeners=[]}nouvelleVersion(){this.figures=[],this.consigne="Parmi les dessins suivants, lequel est un patron de cube ? <br>",this.consigne+=this.interactif?"Cliquer sur":v.vue!=="diap"&&!v.isAmc?"Entourer":"Choisir",this.consigne+=" la bonne figure.";const e=.4,s=.3,t=R(["type1"],this.nbQuestions),a=R(["1","2","3","4","5","6","7","8","9","10","11"],this.nbQuestions),c=Z(ge),u=Z(xe);for(let n=0,f=0;n<this.nbQuestions&&f<50;){let l="",m="";const d=ce([0,1,2,3]),h=[],F=[];switch(this.listeMatrices[n]=[],t[n]){case"type1":{l="",h.push(c[Number(a[n])-1]);const M=w(0,u.length-1);h.push(u[w(0,M)]),h.push(u[w(0,u.length-1,M)]);const k=q([5,7]);h.push(ke(k));for(let x=0;x<4;x++)h[x].braceMatrice(),F[x]=h[d[x]],this.listeMatrices[n][x]=h[d[x]].matrice;const p=Q(this.listeMatrices[n]).indexVraiPatron,C=Q(this.listeMatrices[n]).indexPas6Faces,g=Q(this.listeMatrices[n]).indexFauxPatrons,L=F[0].dessineMatrice({numeroterFaces:!1,numeroDessin:0}),j=F[1].dessineMatrice({numeroterFaces:!1,numeroDessin:1}),S=F[2].dessineMatrice({numeroterFaces:!1,numeroDessin:2}),T=F[3].dessineMatrice({numeroterFaces:!1,numeroDessin:3}),B=y(Object.assign({style:"display: inline-block",scale:s,id:`cliquefigure0Ex${this.numeroExercice}Q${n}`},E(L)),L),O=y(Object.assign({style:"display: inline-block",scale:s,id:`cliquefigure1Ex${this.numeroExercice}Q${n}`},E(j)),j),V=y(Object.assign({style:"display: inline-block",scale:s,id:`cliquefigure2Ex${this.numeroExercice}Q${n}`},E(S)),S),I=y(Object.assign({style:"display: inline-block",scale:s,id:`cliquefigure3Ex${this.numeroExercice}Q${n}`},E(T)),T);this.autoCorrection[n]={},this.autoCorrection[n].enonce=this.consigne+l,this.autoCorrection[n].propositions=[{texte:B,statut:p===0},{texte:O,statut:p===1},{texte:V,statut:p===2},{texte:I,statut:p===3}],this.autoCorrection[n].options={ordered:!0,lastChoice:4},ue(this.autoCorrection[n]),this.figures[n]=[{id:`cliquefigure0Ex${this.numeroExercice}Q${n}`,solution:p===0},{id:`cliquefigure1Ex${this.numeroExercice}Q${n}`,solution:p===1},{id:`cliquefigure2Ex${this.numeroExercice}Q${n}`,solution:p===2},{id:`cliquefigure3Ex${this.numeroExercice}Q${n}`,solution:p===3}];const ie=[B,O,V,I];if(!v.isAmc){l+=ie.join("")+"<br><br>",this.interactif&&v.isHtml&&(l+=`<span id="resultatCheckEx${this.numeroExercice}Q${n}"></span>`),m="Procédons par élimination:<br>",m+=`- Le dessin ${C+1} contient ${k} faces au lieu de 6 faces.<br><br>`,m+=`- Le dessin ${g[0].index+1} poséde des faces qui vont se superposer :<br>`;const x=F[g[0].index].dessineMatrice({numeroterFaces:!0,numeroDessin:g[0].index});m+=y(Object.assign({style:"display: inline-block",scale:e,id:`correction0Ex${this.numeroExercice}Q${n}`},E(x)),x)+"<br>",m+=F[g[0].index].ecritFacesQuiSeSuperposent()+"<br><br>",m+=`- Le dessin ${g[1].index+1} poséde des faces qui vont se superposer :<br>`;const _=F[g[1].index].dessineMatrice({numeroterFaces:!0,numeroDessin:g[1].index});m+=y(Object.assign({style:"display: inline-block",scale:e,id:`correction1Ex${this.numeroExercice}Q${n}`},E(_)),_)+"<br>",m+=F[g[1].index].ecritFacesQuiSeSuperposent()+"<br><br>",m+=`Le dessin ${p+1} posséde 6 faces qui ne vont pas se superposer en le pliant, c'est donc le dessin d'un patron.<br>`;const z=F[p].dessineMatrice({numeroterFaces:!0,numeroDessin:p});m+=y(Object.assign({style:"display: inline-block",scale:e,id:`correction2Ex${this.numeroExercice}Q${n}`},E(z)),z)+"<br><br>"}}break;case"type2":l=`Question ${n+1} de type 2`,m=`Correction ${n+1} de type 2`;break;case"type3":l=`Question ${n+1} de type 3`,m=`Correction ${n+1} de type 3`;break}if(this.questionJamaisPosee(n,l)){if(v.isHtml&&this.sup2){const M=Q(this.listeMatrices[n]).indexVraiPatron,C={objects:[H(this.listeMatrices[n][M],`patron3dEx${this.numeroExercice}Q${n}`),{type:"ambientLight",color:16777215},{type:"directionalLight",color:16777215,position:[8,8,8]},{type:"canvas3dButton",id:`btnPlier-Ex${this.numeroExercice}Q${n}`,text:"Plier",position:{left:"10px",bottom:"10px"},onClick:`pliage-Ex${this.numeroExercice}Q${n}`},{type:"canvas3dButton",id:`btnDeplier-Ex${this.numeroExercice}Q${n}`,text:"Déplier",position:{left:"90px",bottom:"10px"},onClick:`depliage-Ex${this.numeroExercice}Q${n}`}],autoCenterZoomMargin:1};m+=G({id:`canvas3dEx${this.numeroExercice}Q${n}`,content:C,width:200,height:200})}this.listeQuestions[n]=l,this.listeCorrections[n]=m??"",n++}f++}le(this),document.addEventListener("correctionsAffichees",se,{once:!0})}callback(e,s){if("listeMatrices"in e&&Array.isArray(e.listeMatrices)&&e.listeMatrices.length>=s){const r=Array.from(document.querySelectorAll(`[id^="cliquefigure"][id$="Ex${e.numeroExercice}Q${s}"]`)).filter(f=>new RegExp(`^cliquefigure\\dEx${e.numeroExercice}Q${s}$`).test(f.id));let t=Array.from(r).findIndex(f=>!!f.etat);t===-1&&Array.isArray(e.autoCorrection[s].propositions)&&(t=Q(e.listeMatrices[s]).indexVraiPatron);const u={objects:[H(e.listeMatrices[s][t],`patron3dEx${e.numeroExercice}Q${s}`),{type:"ambientLight",color:16777215},{type:"directionalLight",color:16777215,position:[8,8,8]},{type:"canvas3dButton",id:`btnPlier-Ex${e.numeroExercice}Q${s}`,text:"Plier",position:{left:"10px",bottom:"10px"},onClick:`pliage-Ex${e.numeroExercice}Q${s}`},{type:"canvas3dButton",id:`btnDeplier-Ex${e.numeroExercice}Q${s}`,text:"Déplier",position:{left:"90px",bottom:"10px"},onClick:`depliage-Ex${e.numeroExercice}Q${s}`}],autoCenterZoomMargin:1.2},n=G({id:`canvas3dEx${e.numeroExercice}Q${s}`,content:u,width:200,height:200});e.listeCorrections[s]=e.listeCorrections[s].replace(/<canvas-3d[^>]*>.*?<\/canvas-3d>/s,n)}}}const A=1;function Z(o){const i=[];for(const e of o){const s=new b(e[0].length,e.length);s.matrice=e.map(r=>[...r]),i.push(s)}return i}function ke(o){const i=new Ce;return i.faitUnPatron(o),i.faitUnPatronMatrice(),i.matrice}class b{constructor(i,e,s=0,r=!1){P(this,"matrice",[]);for(let t=0;t<e;t++){this.matrice[t]=[];for(let a=0;a<i;a++)this.matrice[t][a]={numero:s,isFace:r}}}get larg(){return this.matrice.reduce((i,e)=>Math.max(i,e.length),0)}get long(){return this.matrice.length}initMatrice(i,e,s=0,r=!1){for(let t=0;t<e;t++){this.matrice[t]=[];for(let a=0;a<i;a++)this.matrice[t][a]={numero:s,isFace:r}}}setcell(i,e,s,r){e<this.long&&i<this.larg&&(this.matrice[e][i]={numero:s,isFace:r})}dimensions(){return[this.larg,this.long]}ecritMatrice(){let i=`[
`;const e=this.matrice.map(s=>s.map(r=>r.isFace?1:0));return i+=e.map(s=>`[${s.join(", ")}]`).join(`,
`),i+=`]
`,i}braceMatrice(){const[i,e]=[this.larg,this.long],s=new b(i,e);s.matrice=$(this.matrice);let r=q([1,2,3,3,0]);switch(r){case 1:s.symetrieMatriceH();break;case 2:s.symetrieMatriceV();break;case 3:s.symetrieMatriceD();break}switch(r=q([1,1,2,3,3,3,3,0]),r){case 1:s.rotationMatrice90p();break;case 2:s.rotationMatrice90n();break;case 3:s.rotationMatrice180();break}this.matrice=$(s.matrice)}ecritFacesQuiSeSuperposent(){let i="";for(let e=0;e<this.long;e++)for(let s=0;s<this.larg;s++)this.matrice[e][s].isFace&&this.matrice[e][s].collision&&(i+=` Les faces ${this.matrice[e][s].numero} et  ${this.matrice[e][s].collision} vont se superposer.`);return i}dessineMatrice({numeroterFaces:i,numeroDessin:e}){const s=i??!1,r=[];for(let c=0;c<this.long;c++)for(let u=0;u<this.larg;u++)if(this.matrice[c][u].isFace){const n=new me({xMin:c*A,yMin:u*A,xMax:(c+1)*A,yMax:(u+1)*A});s&&n.addTextIn({textIn:`${this.matrice[c][u].numero}`});const f=n.render();r.push(f)}const{xmin:t,xmax:a}=E(r);if(e!==void 0&&typeof e=="number"){const c=fe(`Dessin ${e+1}`,(t+a)/2,-.5,0,"black",1,"milieu",!1,1);r.push(c)}return r}symetrieMatriceH(){const[i,e]=[this.larg,this.long],s=new b(i,e);for(let r=0;r<e;r++)for(let t=0;t<i;t++)s.matrice[e-1-r][t]=this.matrice[r][t];this.matrice=$(s.matrice)}symetrieMatriceV(){const[i,e]=[this.larg,this.long],s=new b(i,e);for(let r=0;r<e;r++)for(let t=0;t<i;t++)s.matrice[r][i-1-t]=this.matrice[r][t];this.matrice=$(s.matrice)}symetrieMatriceD(){const[i,e]=[this.larg,this.long],s=new b(e,i);for(let r=0;r<e;r++)for(let t=0;t<i;t++)s.matrice[t][r]=this.matrice[r][t];this.matrice=$(s.matrice)}rotationMatrice90p(){const[i,e]=[this.long,this.larg],s=new b(i,e);for(let r=0;r<e;r++)for(let t=0;t<i;t++)s.matrice[r][i-t-1]=this.matrice[t][r];this.matrice=$(s.matrice)}rotationMatrice90n(){const[i,e]=[this.long,this.larg],s=new b(i,e);for(let r=0;r<e;r++)for(let t=0;t<i;t++)s.matrice[e-r-1][t]=this.matrice[t][r];this.matrice=$(s.matrice)}rotationMatrice180(){const[i,e]=[this.larg,this.long],s=new b(i,e);for(let r=0;r<e;r++)for(let t=0;t<i;t++)s.matrice[e-1-r][i-1-t]=this.matrice[r][t];this.matrice=$(s.matrice)}}class Ce{constructor(){P(this,"_couples",[]);P(this,"_matrice",new b(0,0));this._couples=[[0,0],[1,0]]}get couples(){return this._couples}get matrice(){return this._matrice}set couples(i){}ecritCouples(){return this._couples.map(([i,e])=>`[${i}, ${e}]`).join("; ")}ecritlongueur(){return this._couples.length}faitUnPatron(i=6){const e=[-1,1],s=this._couples.length;for(let r=0;r<i-s;r++){const t=[];for(let a=0;a<this._couples.length;a++){const[c,u]=this._couples[a];for(const n of e)this._couples.some(([f,l])=>f===c+n&&(l===u||l===u+1||l===u-1))||t.push([c+n,u]);for(const n of e)this._couples.some(([f,l])=>l===u+n&&(f===c||f===c+1||f===c-1))||t.push([c,u+n])}this._couples.push(t[w(0,t.length-1)])}}faitUnPatronMatrice(){let i=0,e=0,s=0,r=0;for(const[c,u]of this._couples)s=Math.max(s,c),r=Math.max(r,u),i=Math.min(i,c),e=Math.min(e,u);const t=s-i+1,a=r-e+1;this._matrice.initMatrice(t,a);for(const[c,u]of this._couples)this._matrice.setcell(c-i,r-u,1,!0)}}export{Jt as amcReady,Nt as amcType,Wt as dateDePublication,Ut as default,Ht as interactifReady,Zt as interactifType,Yt as refs,Kt as titre,Xt as uuid};
//# sourceMappingURL=CM2G5C-1-PtzhNSLJ.js.map
