{"version":3,"file":"can3S03-BJm3JB5q.js","sources":["../../src/exercices/can/3e/can3S03.ts"],"sourcesContent":["import { KeyboardType } from '../../../lib/interactif/claviers/keyboard'\nimport { choice, shuffle } from '../../../lib/outils/arrayOutils'\nimport { texNombre } from '../../../lib/outils/texNombre'\nimport { fraction } from '../../../modules/fractions'\nimport { randint } from '../../../modules/outils'\nimport ExerciceSimple from '../../ExerciceSimple'\nexport const titre = 'Calculer une probabilité'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\n/**\n * Modèle d'exercice très simple pour la course aux nombres\n * @author Gilles Mora\n * Date de publication ???\n */\nexport const uuid = 'd86be'\nexport const dateDeModificationImportante = '12/10/2025' // ajout de versionQcmDisponible Jean-Claude Lhote\n\nexport const refs = {\n  'fr-fr': ['can3S03', 'BP2FLUC17', '3AutoP01'],\n  'fr-ch': [],\n}\nexport default class CalculsProbabilite2 extends ExerciceSimple {\n  constructor() {\n    super()\n    this.formatChampTexte = KeyboardType.clavierDeBaseAvecFraction\n    this.typeExercice = 'simple'\n    this.nbQuestions = 1\n    this.versionQcmDisponible = true\n  }\n\n  nouvelleVersion() {\n    let a: number, b: number\n    const choix = choice([true, false])\n\n    // On choisit le \"scénario\" global : a (noire/blanche, fraction) ou b (bleue/rouge, décimal)\n    const scenario = choice(['a', 'a', 'b'])\n    const formatDecimal = scenario === 'b'\n\n    // Pour le scénario b, on peut avoir un total à 10 ou 100 (comme dans l'ancien code)\n    let denom = 0\n    if (!formatDecimal) {\n      // scénario a : fraction classique avec a in [2,9], b in [5,15]\n      a = randint(2, 9)\n      b = randint(5, 15)\n      denom = a + b\n    } else {\n      // scénario b : total 10 ou 100\n      if (choice([true, false])) {\n        a = randint(2, 9)\n        b = 10 - a\n      } else {\n        a = randint(10, 80)\n        b = 100 - a\n      }\n      denom = a + b\n    }\n\n    // Choix des couleurs selon le scénario pour garder l'ancienne formulation\n    const couleur1 = formatDecimal ? 'bleue' : 'noire'\n    const couleur2 = formatDecimal ? 'rouge' : 'blanche'\n    const couleurDemandee = choix ? couleur1 : couleur2\n\n    // Construction de l'énoncé\n    this.question = `On tire une boule au hasard dans une urne contenant $${a}$ boules ${couleur1} et $${b}$ boules ${couleur2}.<br>\n\n             Quelle est la probabilité d'obtenir une boule ${couleurDemandee} ? <br>\n\n             ${formatDecimal ? 'On donnera le résultat sous forme décimale.' : \"(résultat sous  forme d'une fraction irréductible)\"}`\n    this.optionsChampTexte = { texteApres: '' }\n\n    // Correction commune + partie spécifique selon format\n    const correctionCommun = `Dans une situation d'équiprobabilité,\n        on calcule la probabilité d'un événement par le quotient :\n        $\\\\dfrac{\\\\text{Nombre d'issues favorables}}{\\\\text{Nombre total d'issue}}$. <br>\n        La probabilité est donc donnée par : <br>`\n    if (!formatDecimal) {\n      // fraction\n      this.correction = `${correctionCommun}\n        $\\\\dfrac{\\\\text{Nombre de boules ${couleurDemandee}s}}{\\\\text{Nombre total de boules}}\n             =${choix ? fraction(a, denom).texFraction : fraction(b, denom).texFraction}  ${choix ? fraction(a, denom).texSimplificationAvecEtapes() : fraction(b, denom).texSimplificationAvecEtapes()}$`\n      this.reponse = choix\n        ? `$${fraction(a, denom).texFractionSimplifiee}$`\n        : `$${fraction(b, denom).texFractionSimplifiee}$`\n    } else {\n      // décimal\n      this.correction = `${correctionCommun}\n        $\\\\dfrac{\\\\text{Nombre de boules ${couleurDemandee}s}}{\\\\text{Nombre total de boules}}\n             =${choix ? fraction(a, denom).texFraction : fraction(b, denom).texFraction} =${choix ? texNombre(a / denom) : texNombre(b / denom)}$`\n      this.reponse = choix ? a / denom : b / denom\n    }\n\n    // Version QCM : proposer des distracteurs plausibles\n    if (this.versionQcm) {\n      const numCorrect = choix ? a : b\n      const correctTex = formatDecimal\n        ? texNombre(numCorrect / denom)\n        : fraction(numCorrect, denom).texFractionSimplifiee\n\n      const candidates: string[] = []\n\n      if (!formatDecimal) {\n        // erreurs typiques en fraction\n        candidates.push(fraction(numCorrect, denom).texFraction) // éventuelle écriture non réduite\n        candidates.push(fraction(denom - numCorrect, denom).texFraction) // complémentaire 1-p (non réduite)\n        candidates.push(\n          fraction(denom - numCorrect, denom).texFractionSimplifiee,\n        ) // complémentaire réduite\n        // mauvaise lecture: inverser num/den\n        candidates.push(fraction(denom, numCorrect).texFraction)\n        // confusion avec la partie non demandée\n        const otherNum = choix ? b : a\n        candidates.push(fraction(otherNum, denom).texFraction)\n      } else {\n        // erreurs typiques en décimal\n        candidates.push(texNombre(numCorrect / denom)) // écriture correcte (peut être identique)\n        candidates.push(texNombre((denom - numCorrect) / denom)) // complémentaire 1-p\n        candidates.push(texNombre(numCorrect, 0)) // oublier le dénominateur\n        // erreurs d'arrondi ou confusion entre 10/100\n        candidates.push(texNombre(Math.round((numCorrect / denom) * 100) / 100))\n        candidates.push(texNombre(Math.round((denom / numCorrect) * 100) / 100))\n      }\n\n      // filtrer, dédupliquer et retirer la bonne réponse\n      const uniq = Array.from(\n        new Set(candidates.filter((s) => s && s !== correctTex)),\n      )\n      const picked = shuffle(uniq).slice(0, 3)\n      // formatage pour QCM : mettre entre $...$\n      this.distracteurs = picked.map((n) => `$${n}$`)\n    }\n\n    this.canEnonce = this.question\n    this.canReponseACompleter = ''\n  }\n}\n"],"names":["titre","interactifReady","interactifType","uuid","dateDeModificationImportante","refs","CalculsProbabilite2","ExerciceSimple","KeyboardType","a","b","choix","choice","formatDecimal","denom","randint","couleur1","couleur2","couleurDemandee","correctionCommun","fraction","texNombre","numCorrect","correctTex","candidates","otherNum","uniq","s","picked","shuffle","n"],"mappings":"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"}