import{Q as Y,bx as L,by as w,V as z,bz as fe,bA as Q,au as ae,P as oe,bB as Z,a1 as G,bv as ee,aH as U,R,bC as ue,am as ce,bD as pe,bE as xe,A as re,aB as E,bF as Pe,aa as te,a9 as $,bG as Ce,bH as ve,bI as he,bJ as be,bK as J,bL as ie,bM as de,b9 as ye,bN as ge,z as le,a4 as ne,T as De}from"./index-DjA7ROjC.js";import{c as se}from"./aleatoires-DoEZ-8p_.js";import{B as Ve,C as we,D as ke,E as Ae,F as Se}from"./vendors/mathjs-oaIJR0Fd.js";const me={matrix:Se,multiply:Ae,norm:ke,cross:Ve,dot:we};class Me extends Y{constructor(c,u,P="red",o="blue",a=0,g="gray",p=0,D="gray",h=!1,f="black",s=0,l=!0){super(),this.centre=c,this.rayon=u,this.objets=[],this.colorEquateur=P,this.colorEnveloppe=o,this.nbParalleles=a,this.colorParalleles=g,this.nbMeridiens=p,this.colorMeridiens=D,this.affichageAxe=h,this.colorAxe=f;const t=be(Z(this.centre.x,this.centre.y,this.centre.z),L(0,1,0)),y=J(Z(this.centre.x,this.centre.y,this.centre.z+this.rayon,!0,se(1,"OQWX"+this.centre.label)[0],"left"),t,s),b=J(Z(this.centre.x,this.centre.y,this.centre.z-this.rayon,!0,se(1,"OQWX"+this.centre.label+y.label)[0],"left"),t,s),m=36,i=this.nbParalleles!==0?Math.round(2*m/this.nbParalleles):1;let n,r,k,v;const e={listePoints3d:[],ptCachePremier:[],indicePtCachePremier:[],ptCacheDernier:[],indicePtCacheDernier:[]},T=[];let F=[],I=100,W=0,H=0;this.c2d=[],r=J(Z(this.centre.x,this.centre.y,this.centre.z+this.rayon*Math.sin((m-1)/m*Math.PI/2)),t,s),k=J(L(this.rayon*Math.cos((m-1)/m*Math.PI/2),0,0),t,s),v=J(L(0,0,1),t,s),n=ge(r,v,k),e.listePoints3d.push(n[1]),e.ptCachePremier.push(le(0,0)),e.indicePtCachePremier.push(0),e.ptCacheDernier.push(le(0,0)),e.indicePtCacheDernier.push(0);for(let V=m-2,C,d=1;V>-m;V-=1){r=J(Z(this.centre.x,this.centre.y,this.centre.z+this.rayon*Math.sin(V/m*Math.PI/2)),t,s),k=J(L(this.rayon*Math.cos(V/m*Math.PI/2),0,0),t,s),v=J(L(0,0,1),t,s),C=G(n[2]),n=ge(r,v,k,!1),e.listePoints3d.push(n[1]);for(let x=0;x<e.listePoints3d[0].length;x++)e.listePoints3d[d][x].isVisible=!e.listePoints3d[d][x].c2d.estDansPolygone(C);e.ptCachePremier.push(le(0,0)),e.indicePtCachePremier.push(0),e.ptCacheDernier.push(le(0,0)),e.indicePtCacheDernier.push(0);for(let x=0,X,S,B,_,O,j;x<e.listePoints3d[0].length;x++)if(X=R(e.listePoints3d[d][x].c2d,e.listePoints3d[d][(x+1)%e.listePoints3d[0].length].c2d),!e.listePoints3d[d][x].isVisible&&e.listePoints3d[d][(x+1)%e.listePoints3d[0].length].isVisible){O=x-3,S=E(e.listePoints3d[d-1][(e.listePoints3d[0].length+O)%e.listePoints3d[0].length].c2d,e.listePoints3d[d-1][(e.listePoints3d[0].length+O-1)%e.listePoints3d[0].length].c2d);let K=0;for(;!X.estSecant(S)&&K<7;)O++,S=E(e.listePoints3d[d-1][(e.listePoints3d[0].length+O)%e.listePoints3d[0].length].c2d,e.listePoints3d[d-1][(e.listePoints3d[0].length+O-1)%e.listePoints3d[0].length].c2d),K++;if(K!==7){if(B=E(e.listePoints3d[d][x].c2d,e.listePoints3d[d][(x+1)%e.listePoints3d[0].length].c2d),_=E(e.listePoints3d[d-1][(e.listePoints3d[0].length+O)%e.listePoints3d[0].length].c2d,e.listePoints3d[d-1][(e.listePoints3d[0].length+O-1)%e.listePoints3d[0].length].c2d),j=Pe(B,_),!j){window.notify("Erreur dans le calcul du point d'intersection entre d1 et d2",{d1:B,d2:_});continue}T.push(j),I>=d&&(I=d,W=O%e.listePoints3d[0].length),e.ptCachePremier[d]=j,e.indicePtCachePremier[d]=x}}else if(e.listePoints3d[d][x].isVisible&&!e.listePoints3d[d][(x+1)%e.listePoints3d[0].length].isVisible){O=x-3,S=E(e.listePoints3d[d-1][(e.listePoints3d[0].length+O)%e.listePoints3d[0].length].c2d,e.listePoints3d[d-1][(e.listePoints3d[0].length+O-1)%e.listePoints3d[0].length].c2d);let K=0;for(;!X.estSecant(S)&&K<7;)O++,S=E(e.listePoints3d[d-1][(e.listePoints3d[0].length+O)%e.listePoints3d[0].length].c2d,e.listePoints3d[d-1][(e.listePoints3d[0].length+O-1)%e.listePoints3d[0].length].c2d),K++;if(K!==7){if(B=E(e.listePoints3d[d][x].c2d,e.listePoints3d[d][(x+1)%e.listePoints3d[0].length].c2d),_=E(e.listePoints3d[d-1][(e.listePoints3d[0].length+O)%e.listePoints3d[0].length].c2d,e.listePoints3d[d-1][(e.listePoints3d[0].length+O-1)%e.listePoints3d[0].length].c2d),j=Pe(B,_),!j){window.notify("Erreur dans le calcul du point d'intersection entre d1 et d2",{d1:B,d2:_});continue}F.push(j),I>=d&&(I=d,H=O),e.ptCacheDernier[d]=j,e.indicePtCacheDernier[d]=x}}d++}if(this.nbParalleles!==0){let V=re(y.c2d,this.colorParalleles);V.style="o",V.taille=.5,this.c2d.push(V),V=re(b.c2d,ye(this.colorParalleles,50)),V.style="o",V.taille=.5,this.c2d.push(V)}for(let V=m,C=-1;V>-m;V-=1){const d=[];let x=[];if((this.nbParalleles!==0||V===0)&&V!==m&&V%i===0){for(let S=0;S<e.listePoints3d[0].length;S++)e.indicePtCachePremier[C]===S?x.push(e.ptCachePremier[C]):e.indicePtCacheDernier[C]===S?x.push(e.ptCacheDernier[C]):!e.listePoints3d[C][S].isVisible&&!e.listePoints3d[C][(S+1)%e.listePoints3d[0].length].isVisible?x.push(e.listePoints3d[C][S].c2d):d.push(e.listePoints3d[C][(S+1)%e.listePoints3d[0].length].c2d);if(V<36&&V>-30){let S=0;if(x.length>4)for(;S<10&&U(x[x.length-1],x[0])<1;){const B=x.pop();B&&(x=[le(B.x,B.y),...x]),S++}if(d.length>4)for(;S<20&&U(d[d.length-1],d[0])<1;){const B=d.shift();B&&d.push(le(B.x,B.y)),S++}}if(l){const S=x.length>0?ne(...x):null;S&&V===0?(S.color=z(this.colorEquateur),S.epaisseur=1.5):S&&(S.color=z(this.colorParalleles)),l&&S&&(S.pointilles=4,S.opacite=.5,this.c2d.push(S))}const X=d.length>0?ne(...d):null;X&&V===0?(X.color=z(this.colorEquateur),X.epaisseur=1.5):X&&(X.color=z(this.colorParalleles)),X&&this.c2d.push(X)}C++}if(this.nbMeridiens!==0){const V=Math.round(36/this.nbMeridiens);for(let C=0,d;C<18;C+=V){const x=[],X=[],S=[],B=[];for(let j=1;j<e.listePoints3d.length-1;j++)!e.listePoints3d[j][C].isVisible&&!e.listePoints3d[(j+1)%e.listePoints3d.length][C].isVisible?x.push(e.listePoints3d[j][C].c2d):X.push(e.listePoints3d[j][C].c2d),!e.listePoints3d[j][C+18].isVisible&&!e.listePoints3d[(j+1)%e.listePoints3d.length][C+18].isVisible?S.push(e.listePoints3d[j][C+18].c2d):B.push(e.listePoints3d[j][C+18].c2d);d=R(y.c2d,e.listePoints3d[1][C].c2d,this.colorMeridiens),this.c2d.push(d),d=R(e.listePoints3d[1][C+18].c2d,y.c2d,this.colorMeridiens),this.c2d.push(d),d=R(b.c2d,e.listePoints3d[e.listePoints3d.length-1][C].c2d,this.colorMeridiens),l&&!e.listePoints3d[e.listePoints3d.length-1][0].isVisible?(d.pointilles=4,d.opacite=.5,this.c2d.push(d)):l&&this.c2d.push(d),d=R(e.listePoints3d[e.listePoints3d.length-1][C+18].c2d,b.c2d,this.colorMeridiens),l&&!e.listePoints3d[e.listePoints3d.length-1][C].isVisible?(d.pointilles=4,d.opacite=.5,this.c2d.push(d)):l&&this.c2d.push(d);const _=ne(...X),O=ne(...B);if(l){const j=ne(...x),K=ne(...S);j.pointilles=4,j.opacite=.5,K.pointilles=4,K.opacite=.5,this.c2d.push(j,K)}this.c2d.push(_,O)}}F=F.reverse();const N=[...T];let A=1;for(;(H+e.listePoints3d[0].length/2+A)%e.listePoints3d[0].length<(W+e.listePoints3d[0].length/2)%e.listePoints3d[0].length;)N.push(e.listePoints3d[2*m-1-I][(H+e.listePoints3d[0].length/2+A)%e.listePoints3d[0].length].c2d),A++;if(N.push(...F),H>W)for(A=1;H+A<W+e.listePoints3d[0].length;)N.push(e.listePoints3d[I][(H+A)%e.listePoints3d[0].length].c2d),A++;else for(A=1;H+A<W;)N.push(e.listePoints3d[I][H+A].c2d),A++;const q=G(N,this.colorEnveloppe);if(q.epaisseur=1.5,this.c2d.push(q),this.affichageAxe){const V=U(y.c2d,b.c2d);let C=1;const d=G(N);for(;C<2&&ee(y.c2d,b.c2d,C*V).estDansPolygone(d);)C+=.01;let x=R(y.c2d,ee(y.c2d,b.c2d,Math.max(C-.01,1)*V),this.colorAxe);x.pointilles=2,this.c2d.push(x),x=R(b.c2d,ee(y.c2d,b.c2d,1.1*V),this.colorAxe),this.c2d.push(x),x=R(y.c2d,ee(y.c2d,b.c2d,-.1*V),this.colorAxe),this.c2d.push(x)}this.objets=this.c2d}}function We(M,c,u="red",P="blue",o=0,a="gray",g=0,p="black",D=!1,h="black",f=0,s=!0){return new Me(M,c,u,P,o,a,g,p,D,h,f,s)}class Re extends Y{constructor(c,u,P,o="black",a=!0,g="black",p="gray",D=!0,h=!0){super(),this.centre=c,this.sommet=u,this.rayon=P,this.color=z(o),this.colorAxe=g,this.colorCone=p;const f=w(this.centre,this.rayon),s=[f],l=36;for(let y=1;y<l;y++)s.push(J(f,be(this.centre,L(this.sommet,this.centre)),y*360/l));const t=fe(s,this.color[0]);this.c2d=Ge(t,this.sommet,this.color[0],D?this.centre:void 0,a,this.colorAxe,!1,!0,this.colorCone,h).c2d}}function Xe(M,c,u,P="black",o=!1,a="black",g="gray",p=!0,D=!0){return new Re(M,c,u,P,o,a,g,p,D)}class ze extends Y{constructor(c,u,P,o,a="black",g=!0,p=!1,D=!1,h="black",f=!1,s="lightgray",l=!0){super(),this.centrebase1=c,this.centrebase2=u,this.rayon1=P,this.rayon2=o,this.color=z(a),this.affichageGeneratrices=g,this.affichageCentreBases=p,this.affichageAxe=D,this.colorAxe=h,this.cylindreColore=f,this.colorCylindre=s,this.c2d=[];let t;this.normal=L(this.centrebase1,this.centrebase2);const y=L(me.cross(this.normal.matrice,this.rayon1.matrice)),b=me.dot(y.matrice,L(0,1,0).matrice);let m,i;const n=this.centrebase1.c2d.y!==this.centrebase2.c2d.y?this.centrebase1.c2d.y<this.centrebase2.c2d.y:oe.anglePerspective>0;b*oe.anglePerspective>0?(m=n?"direct":"indirect",i=n?"indirect":"direct"):(i=n?"direct":"indirect",m=n?"indirect":"direct"),i=this.rayon1.x===0&&this.rayon1.y===0?"indirect":i,m=this.rayon1.x===0&&this.rayon1.y===0?"direct":m;let r=0,k=0;const v=be(this.centrebase1,this.normal);let e=J(w(this.centrebase1,this.rayon1),v,r);const T=J(w(this.centrebase1,this.rayon1),v,r+1),F=ie(e.c2d,v.c2d)<ie(T.c2d,v.c2d)?1:-1;for(;ie(e.c2d,v.c2d)>k;)k=ie(e.c2d,v.c2d),r=r+F,e=J(w(this.centrebase1,this.rayon1),v,r);r=r-F,this.angleDepart=r;const I=de(this.centrebase1,this.normal,this.rayon1,m,!0,this.color[0],r),W=de(this.centrebase2,this.normal,this.rayon2,m,!1,this.color[0],r),H=de(this.centrebase1,this.normal,this.rayon1,i,!1,this.color[0],r),N=de(this.centrebase2,this.normal,this.rayon2,i,!1,this.color[0],r);if(this.pointsBase1=[...I.listePoints,...H.listePoints],this.pointsBase2=[...W.listePoints,...N.listePoints],this.cylindreColore){let A=[...N.listePoints];for(let C=H.listePoints.length-1;C>=0;C--)A.push(H.listePoints[C]);const q=G(A,"white");q.couleurDeRemplissage=z(this.colorCylindre),this.c2d.push(q),A=[...W.listePoints];for(let C=N.listePoints.length-1;C>=0;C--)A.push(N.listePoints[C]);const V=G(A,"white");V.couleurDeRemplissage=z(ye(this.colorCylindre,25)),this.c2d.push(V)}if(this.affichageGeneratrices)for(let A=1;A<I.listePoints.length-1;A+=2)t=R(W.listePoints[A],I.listePoints[A],this.color[0]),t.pointilles=2,t.opacite=.3,this.c2d.push(t);if(t=R(N.listePoints[0],H.listePoints[0],this.color[0]),this.c2d.push(t),this.affichageGeneratrices)for(let A=1;A<H.listePoints.length-1;A++)t=R(N.listePoints[A],H.listePoints[A],this.color[0]),this.c2d.push(t);if(t=R(N.listePoints[H.listePoints.length-1],H.listePoints[H.listePoints.length-1],this.color[0]),this.c2d.push(t),this.c2d.push(I,H),l&&this.c2d.push(W,N),this.affichageCentreBases&&this.c2d.push(re(this.centrebase1.c2d,this.centrebase2.c2d,this.colorAxe)),this.affichageAxe){let A=9999;const q=H.listePoints;let V=0;const C=E(this.centrebase2.c2d,this.centrebase1.c2d);for(;ie(q[V],C)<A;)A=ie(q[V],v.c2d),V++;t=R(this.centrebase2.c2d,this.centrebase1.c2d,this.colorAxe),t.pointilles=2,t.opacite=.7,this.c2d.push(t),t=E(q[V],q[V-1]);const d=Pe(t,C);if(!d){window.notify("Axe du cylindre non défini correctement",{s:t,axeCylindre:C});return}t=R(this.centrebase1.c2d,d,this.colorAxe),t.pointilles=2,t.opacite=.7,this.c2d.push(t),t=R(te(d,$(this.centrebase1.c2d,d)),d,this.colorAxe),t.opacite=.7,this.c2d.push(t);const x=te(this.centrebase2.c2d,$(te(d,$(this.centrebase1.c2d,d)),this.centrebase1.c2d));t=R(x,this.centrebase2.c2d),t.opacite=.7,this.c2d.push(t)}}}function Ee(M,c,u,P,o="black",a=!0,g=!1,p=!1,D="black",h=!1,f="lightgray",s=!0){return new ze(M,c,u,P,o,a,g,p,D,h,f,s)}class He extends Y{constructor(c,u,P="black",o=!1,a,g){super(),this.affichageNom=o,this.color=z(P),c.color=this.color[0],this.vecteur=u,this.vecteur.y===0&&this.vecteur.x===0?(this.base1=this.vecteur.z>=1?c:w(c,L(this.vecteur.x,this.vecteur.y,-this.vecteur.z)),this.base2=this.vecteur.z<1?c:w(c,this.vecteur)):(this.base1=c,this.base2=w(c,u)),this.base2.color=this.base1.color,this.c2d=[];let p;for(let h=0;h<this.base1.listePoints.length;h++)this.c2d.push(this.base1.c2d[h]);let D=!0;for(let h=0;h<this.base1.listePoints.length;h++){const f=ee(this.base1.listePoints[h].c2d,this.base2.listePoints[h].c2d,U(this.base1.listePoints[h].c2d,this.base2.listePoints[h].c2d)/50).estDansPolygone(G(this.base1.listePoints2d));this.base2.listePoints[h].isVisible=!f,D=!f&&D}for(let h=0;h<this.base2.listePoints.length;h++){if(p=Q(this.base2.listePoints[h],this.base2.listePoints[h+1===this.base2.listePoints.length?0:h+1],this.color[0]),D){let f=!0;for(let s=0;s<this.base1.listePoints.length;s++){const l=R(this.base1.listePoints[s].c2d,this.base2.listePoints[s].c2d);f=f&&!!l.estSecant(p.c2d)}p=Q(this.base2.listePoints[h],this.base2.listePoints[h+1===this.base2.listePoints.length?0:h+1],this.color[0],!f)}this.c2d.push(p.c2d)}for(let h=0;h<this.base1.listePoints.length;h++)p=Q(this.base1.listePoints[h],this.base2.listePoints[h],this.color[0]),this.c2d.push(p.c2d);if(this.affichageNom){let h=G(this.base1.listePoints2d);const f=se(this.base1.listePoints.length,"OQWX"),s=c.listePoints2d.map((t,y)=>t.nom??f[y]);ue(h,s);for(let t=0;t<this.base1.listePoints2d.length;t++)this.base1.listePoints2d[t].positionLabel=c.listePoints2d[t].positionLabel??"above";this.c2d.push(ce(...h.listePoints.map(t=>pe(t)))),h=G(this.base2.listePoints2d);const l=se(this.base1.listePoints.length,"OQWX"+s);ue(h,a??l);for(let t=0;t<this.base2.listePoints2d.length;t++)this.base2.listePoints2d[t].positionLabel=(g==null?void 0:g[t])??"below";this.c2d.push(ce(...h.listePoints.map(t=>pe(t)))),this.nom=s+(a??"")}}}function Je(M,c,u="black",P=!1,o,a){return new He(M,c,u,P,o,a)}class Le extends Y{constructor(c,u,P="black",o,a=!1,g="black",p=!1,D=!1,h="gray",f=!0){super(),c.color=P,this.base=c,this.sommet=u,this.color=z(P),this.centre=o,this.affichageAxe=a,this.colorAxe=g,this.affichageNom=p,this.estCone=D,this.colorCone=h,this.c2d=[],this.nom="";let s;this.aretesSommet=[];for(let i=0;i<this.base.listePoints.length;i++)s=Q(this.base.listePoints[i],this.sommet,P,!0),this.aretesSommet.push(s);const l=[];for(let i=0;i<this.base.listePoints.length;i++)s=Q(this.base.listePoints[i],this.base.listePoints[(i+1)%this.base.listePoints.length],P,!0),l.push(s);let t=!1,y;const b=[0,0],m=[];for(let i=0;i<this.base.listePoints.length;i++){y=t,t=!1;for(let n=1;n<this.base.listePoints.length-1;n++){const r=G([this.sommet.c2d,this.base.listePoints[(i+n)%this.base.listePoints.length].c2d,this.base.listePoints[(i+n+1)%this.base.listePoints.length].c2d]);r.isVisible=!1,t=t||this.base.listePoints[i].c2d.estDansPolygone(r)}this.estCone&&y!==t&&i!==0&&(t?m.push(this.aretesSommet[(this.aretesSommet.length+i-1)%this.aretesSommet.length]):m.push(this.aretesSommet[i]),t?b[1]=i:b[0]=i),t&&u.z>this.base.listePoints[0].z&&(this.aretesSommet[i].isVisible=!1,this.aretesSommet[i].c2d.pointilles=2,l[i].c2d.pointilles=2,l[(this.base.listePoints.length+i-1)%this.base.listePoints.length].c2d.pointilles=2)}if(this.estCone&&b[1]<=b[0]&&(b[1]+=this.base.listePoints.length),this.estCone&&m.length===1&&(m.push(this.aretesSommet[this.aretesSommet.length-1]),b[1]=this.aretesSommet.length-1),this.estCone){const i=[this.sommet.c2d];for(let r=b[0];r<b[1];r++)i.push(this.base.listePoints[r%this.base.listePoints.length].c2d);const n=G(i,this.colorCone);n.couleurDeRemplissage=z(this.colorCone),this.c2d.push(n)}if(this.estCone)for(let i=0;i<m.length;i++)this.c2d.push(m[i].c2d);else{let i;if(this.sommet.z>this.base.listePoints[0].z)for(let n=0;n<this.base.listePoints.length;n++){t=!1,i=U(this.base.listePoints[n].c2d,this.base.listePoints[(n+1)%this.base.listePoints.length].c2d),s=R(ee(this.base.listePoints[n].c2d,this.base.listePoints[(n+1)%this.base.listePoints.length].c2d,i/20),ee(this.base.listePoints[n].c2d,this.base.listePoints[(n+1)%this.base.listePoints.length].c2d,19*i/20)),s.isVisible=!1;for(let r=0;r<this.aretesSommet.length;r++)t=t||!!s.estSecant(this.aretesSommet[r].c2d);t&&(l[n].c2d.pointilles=2)}else for(let n=0;n<this.base.listePoints.length;n++){i=U(this.base.listePoints[n].c2d,this.sommet.c2d),s=R(ee(this.base.listePoints[n].c2d,this.sommet.c2d,i/20),this.sommet.c2d),s.isVisible=!1;let r=0;for(;r<l.length&&!s.estSecant(l[r].c2d);)r++;r<l.length&&(this.aretesSommet[n].c2d.pointilles=2)}for(let n=0;n<this.base.listePoints.length;n++)this.c2d.push(this.aretesSommet[n].c2d)}if(f)for(let i=0;i<this.base.listePoints.length;i++)this.c2d.push(l[i].c2d);if(this.centre!==void 0&&this.centre.constructor===xe&&(this.c2d.push(re(this.centre.c2d,this.colorAxe)),this.centre.label===""&&(this.centre.label=se(1,"OQWX")[0]),this.c2d.push(...ce(this.centre.c2d)),this.affichageAxe))if(this.sommet.z>0){let i=!1,n=0;for(;!i&&n<l.length;){if(s=l[n].c2d,s.pointilles!==2){const r=E(this.centre.c2d,this.sommet.c2d);r.isVisible=!1,i=!!s.estSecant(r)}n++}if(i){n--;const r=E(this.base.listePoints[n].c2d,this.base.listePoints[(n+1)%this.base.listePoints.length].c2d);r.isVisible=!1;const k=E(this.centre.c2d,this.sommet.c2d);k.isVisible=!1;const v=Pe(r,k);if(!v){window.notify("Axe de la pyramide non défini correctement",{d1:r,d2:k});return}s=R(v,this.sommet.c2d,this.colorAxe),s.pointilles=2,this.c2d.push(s),s=R(v,te(v,$(this.centre.c2d,v)),this.colorAxe),this.c2d.push(s),s=R(this.sommet.c2d,te(this.sommet.c2d,$(v,this.centre.c2d)),this.colorAxe),this.c2d.push(s)}}else{s=R(this.centre.c2d,this.sommet.c2d,this.colorAxe),s.pointilles=2,this.c2d.push(s);const i=$(this.centre.c2d,this.sommet.c2d),n=U(this.base.listePoints[0].c2d,this.centre.c2d),r=2*Ce(i);s=R(this.sommet.c2d,te(this.sommet.c2d,$(n*i.x/r,n*i.y/r)),this.colorAxe),this.c2d.push(s),s=R(this.centre.c2d,te(this.centre.c2d,$(-n*i.x/r,-n*i.y/r)),this.colorAxe),this.c2d.push(s)}if(this.affichageNom){const i=G(this.base.listePoints2d);i.isVisible=!1,(this.centre.label===""||this.centre.label===this.sommet.label)&&(this.sommet.label=se(1,"OQWX")[0]);const n=se(this.base.listePoints.length,"OQWX"+this.sommet.label+this.centre.label);ue(i,n);for(let r=0;r<this.base.listePoints2d.length;r++)this.base.listePoints2d[r].positionLabel=this.sommet.z>0?"below":"above";this.c2d.push(ce(...i.listePoints.map(r=>pe(r)))),this.c2d.push(ce(this.sommet)),this.nom=n.join("")+this.sommet.label}}}function Ge(M,c,u="black",P,o=!1,a="black",g=!1,p=!1,D="gray",h=!0){return new Le(M,c,u,P,o,a,g,p,D,h)}class je extends Y{constructor(c,u,P=.5,o="black"){super(),this.color=z(o),c.color=o,this.base=c,this.coeff=P,this.aretes=[],this.sommet=u,this.c2d=[];const a=[];for(let g=0,p;g<this.base.listePoints.length;g++)p=ve(u,c.listePoints[g],P),p.isVisible=!0,a.push(p);this.base2=fe(...a),this.c2d.push(...this.base.c2d);for(let g=0;g<c.listePoints.length;g++)this.aretes.push(Q(c.listePoints[g],this.base2.listePoints[g],o,c.listePoints[g].isVisible)),this.c2d.push(this.aretes[g].c2d);this.c2d.push(...this.base2.c2d)}}function Ke(M,c,u=.5,P="black"){return new je(M,c,u,P)}class Fe extends Y{constructor(c,u,P,o,a="black",g="lightgray",p="white",D="darkgray",h=!0,f=!1,s=["A","B","C","D","E","F","G","H"]){super(),this.affichageNom=f;const l=Z(c,u,P);l.c2d.nom=s[0];const t=L(o,0,0),y=L(0,o,0),b=L(0,0,o),m=w(l,t);m.c2d.nom=s[1];const i=w(m,b);i.c2d.nom=s[2];const n=w(l,b);n.c2d.nom=s[3];let r=[l.c2d,m.c2d,i.c2d,n.c2d];const k=this.affichageNom?ae(...r):G(r,a);this.affichageNom&&(k[0].color=z(a));const v=w(l,y);v.c2d.nom=s[4];const e=w(v,t);e.c2d.nom=s[5];const T=w(e,b);T.c2d.nom=s[6];const F=w(n,y);F.c2d.nom=s[7],r=[v.c2d,e.c2d,T.c2d,F.c2d];const I=this.affichageNom?ae(...r):he(),W=G([m.c2d,e.c2d,T.c2d,i.c2d],a);let H,N,A,q;oe.anglePerspective>0?(H=G([n.c2d,i.c2d,T.c2d,F.c2d],a),q=R(v.c2d,F.c2d,a),A=R(v.c2d,e.c2d,a),N=R(v.c2d,l.c2d,a)):(H=G([l.c2d,m.c2d,e.c2d,v.c2d],a),q=R(v.c2d,F.c2d,a),A=R(n.c2d,F.c2d,a),N=R(T.c2d,F.c2d,a)),q.pointilles=2,A.pointilles=2,N.pointilles=2,this.sommets=[l,m,i,n,v,e,T,F],h?(Array.isArray(k)?k[0].couleurDeRemplissage=z(g):k.couleurDeRemplissage=z(g),H.couleurDeRemplissage=z(p),W.couleurDeRemplissage=z(D),this.c2d=[k.length===2?k[0]:k,k.length===2?k[1]:he(),W,H]):this.c2d=[k.length===2?k[0]:k,k.length===2?k[1]:he(),W,H,I.length===2?I[1]:he(),q,A,N]}}function Ue(M,c,u,P,o="black",a="lightgray",g="white",p="darkgray",D=!0,h=!1,f=["A","B","C","D","E","F","G","H"]){return new Fe(M,c,u,P,o,a,g,p,D,h,f)}class Ne extends Y{constructor(c,u,P,o,a,g="black"){super();let p,D;this.c2d=[];const h=L(o,0,0),f=L(0,o,0),s=L(0,0,o);let l=Z(c,u,P),t=l,y=l,b=l,m=l,i=l,n=l,r=l;for(let v=0;v<a;v++)t=w(l,h),y=w(t,s),b=w(l,s),m=w(l,f),i=w(m,h),n=w(i,s),r=w(b,f),p=G([l.c2d,t.c2d,y.c2d,b.c2d],g),D=G([b.c2d,y.c2d,n.c2d,r.c2d],g),p.couleurDeRemplissage=z("lightgray"),D.couleurDeRemplissage=z("white"),this.c2d.push(p,D),l=w(l,h);const k=G([t.c2d,i.c2d,n.c2d,y.c2d],g);k.couleurDeRemplissage=z("darkgray"),this.c2d.push(k)}}function Ye(M,c,u,P,o,a="black"){return new Ne(M,c,u,P,o,a)}class Oe extends Y{constructor(c,u,P,o,a,g,p="black"){super();let D,h,f,s,l,t,y,b,m,i;this.c2d=[];const n=L(o,0,0),r=L(0,o,0),k=L(0,0,o);for(let v=0;v<a;v++)for(let e=0;e<g;e++)D=Z(c+v*o,u+e*o,P),h=w(D,n),f=w(h,k),s=w(D,k),l=w(h,r),t=w(l,k),y=w(s,r),e===0&&(b=G([D.c2d,h.c2d,f.c2d,s.c2d],p),b.couleurDeRemplissage=z("lightgray"),this.c2d.push(b)),v===a-1&&(i=G([h.c2d,l.c2d,t.c2d,f.c2d],p),i.couleurDeRemplissage=z("darkgray"),this.c2d.push(i)),m=G([s.c2d,f.c2d,t.c2d,y.c2d],p),m.couleurDeRemplissage=z("white"),this.c2d.push(m)}}function Ze(M,c,u,P,o,a,g="black"){return new Oe(M,c,u,P,o,a,g)}class Qe extends Y{constructor(c,u,P,o,a,g,p,D="black"){super();let h,f,s,l,t,y,b,m,i,n;this.c2d=[];const r=L(o,0,0),k=L(0,o,0),v=L(0,0,o);for(let e=0;e<a;e++)for(let T=0;T<g;T++)for(let F=0;F<p;F++)h=Z(c+e*o,u+T*o,P+F*o),f=w(h,r),s=w(f,v),l=w(h,v),t=w(f,k),y=w(t,v),b=w(l,k),T===0&&(m=G([h.c2d,f.c2d,s.c2d,l.c2d],D),m.couleurDeRemplissage=z("lightgray"),this.c2d.push(m)),e===a-1&&(n=G([f.c2d,t.c2d,y.c2d,s.c2d],D),n.couleurDeRemplissage=z("darkgray"),this.c2d.push(n)),F===p-1&&(i=G([l.c2d,s.c2d,y.c2d,b.c2d],D),i.couleurDeRemplissage=z("white"),this.c2d.push(i))}}function _e(M,c,u,P,o,a,g,p="black"){return new Qe(M,c,u,P,o,a,g,p)}class Be extends Y{constructor(c,u,P,o,a="black",g=!1,p="ABCDEFGH"){super(),this.affichageNom=g;const D=L(c,u),h=L(c,o),f=w(P,D),s=w(P,h),l=w(f,h),t=w(u,h);function y(b){const m=U(b.c2d,c.c2d,5),i=U(b.c2d,u.c2d,5),n=U(b.c2d,f.c2d,5),r=U(b.c2d,P.c2d,5);return De((m+i+n+r)/4,5)}if(o.isVisible=!o.c2d.estDansQuadrilatere(c.c2d,u.c2d,f.c2d,P.c2d),t.isVisible=!t.c2d.estDansQuadrilatere(c.c2d,u.c2d,f.c2d,P.c2d),l.isVisible=!l.c2d.estDansQuadrilatere(c.c2d,u.c2d,f.c2d,P.c2d),s.isVisible=!s.c2d.estDansQuadrilatere(c.c2d,u.c2d,f.c2d,P.c2d),o.isVisible&&t.isVisible&&l.isVisible&&s.isVisible){const b=Math.min(y(o),y(t),y(l),y(s));o.isVisible=b!==y(o),t.isVisible=b!==y(t),l.isVisible=b!==y(l),s.isVisible=b!==y(s)}this.sommets=[c,u,f,P,o,t,l,s],this.color=z(a),this.base=fe(c,u,t,o),this.hauteur=L(c,P),this.c2d=[],this.aretes=[Q(c,u,a),Q(c,P,a),Q(c,o,a),Q(f,u,a),Q(t,u,a),Q(f,P,a),Q(f,l,a),Q(t,l,a),Q(t,o,a),Q(s,l,a),Q(s,o,a),Q(s,P,a)];for(const b of this.aretes)this.c2d.push(b.c2d);if(this.affichageNom){let b=[c.c2d,u.c2d,f.c2d,P.c2d];c.c2d.nom=p[0],u.c2d.nom=p[1],f.c2d.nom=p[2],P.c2d.nom=p[3],o.c2d.nom=p[4],t.c2d.nom=p[5],l.c2d.nom=p[6],s.c2d.nom=p[7];const m=ae(...b,oe.isHtml?.5:1.5);b=[o.c2d,t.c2d,l.c2d,s.c2d];const i=ae(...b,oe.isHtml?.5:1.5);this.c2d.push(m[1],i[1])}}}function $e(M,c,u,P,o="black",a=!1,g="ABCDEFGH"){return new Be(M,c,u,P,o,a,g)}export{$e as a,Je as b,Ge as c,Ke as d,_e as e,Ee as f,Xe as g,Ye as h,Ue as i,Ze as p,We as s};
//# sourceMappingURL=solides-DFpXZmA0.js.map
