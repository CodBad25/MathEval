{"version":3,"file":"CM2N1D-1-DJiWJ57P.js","sources":["../../src/exercices/CM/CM2N1D-1.ts"],"sourcesContent":["import Decimal from 'decimal.js'\nimport DragAndDrop, { type Etiquette } from '../../lib/interactif/DragAndDrop'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { shuffle2tableaux } from '../../lib/outils/arrayOutils'\nimport { stringNombre, texNombre } from '../../lib/outils/texNombre'\nimport { context } from '../../modules/context'\nimport {\n  contraindreValeur,\n  gestionnaireFormulaireTexte,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\nimport { glossaire } from './CM2N1D-2'\nexport const titre = 'Décomposer un nombre entier'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\n\nexport const dateDeModifImportante = '24/09/2024'\n/**\n * Exercice modèle pour la nouvelle fonctionnalité de Drag&Drop\n * @author Jean-Claude Lhote\n\n*/\nexport const uuid = '6498e'\nexport const refs = {\n  'fr-fr': ['CM2N1D-1'],\n  'fr-2016': ['c3N10-0'],\n  'fr-ch': [],\n}\nclass DragAndDropNumerationEntiere extends Exercice {\n  dragAndDrops: DragAndDrop[]\n  nombreDeChiffresMin: number\n  morceaux!: string[][]\n  exposantMorceaux!: number[][]\n  constructor() {\n    super()\n    this.interactif = false\n    this.nombreDeChiffresMin = 4\n    this.nbQuestions = 4\n    this.sup = false // false pour des puissances de 10 en chiffres, true pour lettres\n    this.besoinFormulaireCaseACocher = [\n      'Puissance de 10 en chiffres/lettres',\n      false,\n    ]\n    this.besoinFormulaire2Numerique = [\n      'Nombre de chiffres maximum des nombres à décomposer',\n      7,\n    ]\n    this.sup2 = 4\n    this.besoinFormulaire4Texte = [\n      'Présence de zéro(s) ',\n      'Nombres séparés par des tirets :\\n1 : Sans zéro\\n2 : Avec un zéro\\n3 : Avec deux zéros consécutifs\\n4 : Mélange',\n    ]\n    this.sup4 = '4'\n    this.besoinFormulaire5CaseACocher = ['Décomposition désordonnée', false]\n    this.sup5 = false\n    this.dragAndDrops = []\n  }\n\n  nouvelleVersion() {\n    // Pour activer le mélange\n    const desordonne = this.sup5\n    const enLettre = this.sup\n    const presenceZeros = gestionnaireFormulaireTexte({\n      saisie: this.sup4,\n      min: 1,\n      max: 3,\n      defaut: 4,\n      melange: 4,\n      nbQuestions: this.nbQuestions,\n    })\n    // ça c'est pour éviter de ne pas pouvoir fabriquer les nombres.\n    const nombreDeChiffresMin = this.nombreDeChiffresMin\n    const nombreDeChiffresMax = contraindreValeur(\n      nombreDeChiffresMin,\n      11,\n      this.sup2,\n      6,\n    )\n    this.morceaux = []\n    this.exposantMorceaux = []\n    for (\n      let i = 0, cpt = 0, texte: string, texteCorr: string;\n      i < this.nbQuestions && cpt < 50;\n\n    ) {\n      texte = ''\n      texteCorr = ''\n      const nbChiffres = randint(nombreDeChiffresMin, nombreDeChiffresMax)\n      let nombreStr = ''\n\n      this.morceaux[i] = []\n      this.exposantMorceaux[i] = []\n      const presenceDeZeros = Number(presenceZeros[i])\n\n      for (let k = 0; k < nbChiffres; k++) {\n        nombreStr += randint(1, 9, Array.from(nombreStr).map(Number)).toString()\n      }\n      if (presenceDeZeros > 1) {\n        const arrayFromNbr = Array.from(nombreStr).map(Number)\n        const indexOfZero = randint(1, arrayFromNbr.length - 2)\n        arrayFromNbr[indexOfZero] = 0\n        if (presenceDeZeros === 3) arrayFromNbr[indexOfZero + 1] = 0\n        nombreStr = arrayFromNbr.map(String).join('')\n      }\n      const nombre = new Decimal(nombreStr)\n      texte += `Décomposer le nombre $${texNombre(nombre, 0)}$ en complétant avec les ${enLettre ? 'adjectifs numéraux' : 'opérations'} qui conviennent ${enLettre ? '(unité(s) ou dizaine(s) ou centaine(s) ou ...)' : `($\\\\times 1 \\\\text{ ou }\\\\times 10 \\\\text{ ou }\\\\times 100 \\\\text{ ou }\\\\times ${texNombre(1000, 3)} \\\\text{ ou }\\\\ldots$)`}.<br>`\n      // texte += `$${texNombre(nombre, 0)}=`\n\n      texteCorr = `$${texNombre(nombre, 0)}=`\n      for (let k = 0; k < nbChiffres; k++) {\n        // on prépare la correction pour l'exo non interactif\n        this.morceaux[i][k] = nombreStr[k]\n        this.exposantMorceaux[i][k] = nbChiffres - 1 - k\n      }\n      if (desordonne) {\n        shuffle2tableaux(this.morceaux[i], this.exposantMorceaux[i])\n      }\n      let enonceATrous = `$${stringNombre(nombre, 0)}=$ `\n      const etiquettes: Etiquette[] = []\n      const reponses = []\n      for (let e = 0; e < 7; e++) {\n        if (enLettre) {\n          etiquettes.push({\n            id: String(2 * e + 1),\n            contenu: glossaire[e][0],\n          })\n          if (e !== 3) {\n            etiquettes.push({\n              id: String(2 * e + 2),\n              contenu: glossaire[e][1],\n            })\n          }\n        } else {\n          etiquettes.push({\n            id: String(e + 1),\n            contenu: `$\\\\times ${texNombre(10 ** e, 0)}$`,\n          })\n        }\n      }\n      if (context.isHtml) {\n        for (let k = 0, indiceRectangle = 1; k < this.morceaux[i].length; k++) {\n          if (this.morceaux[i][k] !== '0') {\n            enonceATrous += `$${this.morceaux[i][k]}$%{rectangle${indiceRectangle}}$+$`\n            if (this.exposantMorceaux[i][k] === 3) {\n              reponses.push([\n                `rectangle${indiceRectangle++}`,\n                {\n                  value: enLettre\n                    ? String(2 * this.exposantMorceaux[i][k] + 1)\n                    : String(this.exposantMorceaux[i][k] + 1),\n                },\n              ])\n            } else {\n              const shift = Number(this.morceaux[i][k]) > 1 ? 1 : 0\n              reponses.push([\n                `rectangle${indiceRectangle++}`,\n                {\n                  value: enLettre\n                    ? String(2 * this.exposantMorceaux[i][k] + 1 + shift)\n                    : String(this.exposantMorceaux[i][k] + 1),\n                  options: { multi: false },\n                },\n              ])\n            }\n          }\n        }\n        const objetReponse = Object.fromEntries(reponses)\n        enonceATrous = `${enonceATrous.substring(0, enonceATrous.length - 3)}` // En fin de boucle on a ajouté un '+$' inutile, il faut le supprimer\n        const leDragAndDrop = new DragAndDrop({\n          exercice: this,\n          question: i,\n          etiquettes: [etiquettes],\n          consigne: `Remettre les étiquettes au bon endroit pour reconstituer le nombre $${texNombre(nombre, 0)}$`,\n          enonceATrous,\n        })\n        handleAnswers(this, i, objetReponse, { formatInteractif: 'dnd' })\n        texte += leDragAndDrop.ajouteDragAndDrop({\n          melange: true,\n          duplicable: false,\n        })\n        this.dragAndDrops[i] = leDragAndDrop // on stocke les instances de dragAndDrop dans l'exercice pour pouvoir accéder aux listeners à supprimer lors de la vérification.\n      } else {\n        texte += '\\n$'\n        for (let k = 0; k < this.morceaux[i].length; k++) {\n          if (this.morceaux[i][k] !== '0') {\n            texte += `(${this.morceaux[i][k]} \\\\ldots \\\\ldots \\\\ldots) +`\n          }\n        }\n        texte = `${texte.substring(0, texte.length - 2)}$`\n      }\n      for (let k = 0; k < this.morceaux[i].length; k++) {\n        if (this.morceaux[i][k] !== '0') {\n          texteCorr += enLettre\n            ? `${this.morceaux[i][k]}~\\\\text{${glossaire[this.exposantMorceaux[i][k]][Number(this.morceaux[i][k]) > 1 ? 1 : 0]}}+`\n            : `(${this.morceaux[i][k]}\\\\times ${texNombre(10 ** this.exposantMorceaux[i][k], 0)})+`\n        }\n      }\n      // texte = `${texte.substring(0, texte.length - 1)}$`\n      texteCorr = `${texteCorr.substring(0, texteCorr.length - 1)}$`\n      if (this.questionJamaisPosee(i, nombreStr)) {\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        i++\n      }\n      cpt++\n    }\n  }\n}\nexport default DragAndDropNumerationEntiere\n"],"names":["titre","interactifReady","interactifType","dateDeModifImportante","uuid","refs","DragAndDropNumerationEntiere","Exercice","__publicField","desordonne","enLettre","presenceZeros","gestionnaireFormulaireTexte","nombreDeChiffresMin","nombreDeChiffresMax","contraindreValeur","i","cpt","texte","texteCorr","nbChiffres","randint","nombreStr","presenceDeZeros","k","arrayFromNbr","indexOfZero","nombre","Decimal","texNombre","shuffle2tableaux","enonceATrous","stringNombre","etiquettes","reponses","e","glossaire","context","indiceRectangle","shift","objetReponse","leDragAndDrop","DragAndDrop","handleAnswers"],"mappings":"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"}