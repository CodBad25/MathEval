{"version":3,"file":"CM2N2F-1-DodIhRka.js","sources":["../../src/exercices/CM/CM2N2F-1.ts"],"sourcesContent":["import { droiteGraduee } from '../../lib/2d/reperes'\nimport { handleAnswers } from '../../lib/interactif/gestionInteractif'\nimport { remplisLesBlancs } from '../../lib/interactif/questionMathLive'\nimport { choice } from '../../lib/outils/arrayOutils'\nimport { lettreIndiceeDepuisChiffre } from '../../lib/outils/outilString'\nimport { mathalea2d } from '../../modules/2dGeneralites'\nimport { context } from '../../modules/context'\nimport { fraction } from '../../modules/fractions'\nimport {\n  gestionnaireFormulaireTexte,\n  listeQuestionsToContenu,\n  randint,\n} from '../../modules/outils'\nimport Exercice from '../Exercice'\n\nexport const titre = 'Lire des abscisses fractionnaires'\nexport const interactifReady = true\nexport const interactifType = 'mathLive'\nexport const amcReady = true\nexport const amcType = 'AMCOpen'\nexport const dateDePublication = '14/01/2025'\n\n/**\n *  :\n * Lire des abscisses sous forme de fractions avec possibilté d'avoir des fractions simplifiées\n * @author Olivier Mimeau d'après Jean-Claude Lhote 6N21-2\n */\nexport const uuid = '0e527'\n\nexport const refs = {\n  'fr-fr': ['CM2N2F-1'],\n  'fr-2016': ['6N21-3'],\n  'fr-ch': ['9NO11-10'],\n}\nexport default class LireAbscissesFractionnairesComplexes extends Exercice {\n  constructor() {\n    super()\n    this.sup = 13 // 3\n    this.sup2 = false\n    this.sup3 = true // avec des fractions simplifiées\n    this.sup4 = false // valeurs positives si false sinon valeurs positives et négatives\n    this.besoinFormulaireTexte = [\n      'Types de questions',\n      'Nombres séparés par des tirets  :\\n2 : Demis\\n3 : Tiers\\n4 : Quarts\\n5 : Cinquièmes\\n6 : Sixièmes\\n7 : Septièmes\\n8 : Huitièmes\\n9 : Neuvièmes\\n10: Dixièmes\\n11: Onzièmes\\n12 : Douzièmes\\n13 : Mélange',\n    ]\n    //   this.besoinFormulaire2CaseACocher = ['Eviter les nombres décimaux (si possible)', false]\n    this.besoinFormulaire3CaseACocher = [\n      'Avec des fractions simplifiées (le cas échéant)',\n      true,\n    ]\n    this.besoinFormulaire4CaseACocher = ['Avec des valeurs négatives', false]\n    this.nbQuestions = 3\n  }\n\n  nouvelleVersion() {\n    //    let typeDeQuestions: number[]\n    const typeDeQuestions = gestionnaireFormulaireTexte({\n      saisie: this.sup,\n      min: 2,\n      max: 12,\n      defaut: 13,\n      melange: 13,\n      nbQuestions: this.nbQuestions,\n    })\n    const data: Record<\n      number,\n      { id: number; den: number[]; max: number; min: number }\n    > = {\n      2: { id: 2, den: [2], max: !this.sup4 ? 8 : 4, min: !this.sup4 ? 0 : -4 },\n      3: { id: 3, den: [3], max: !this.sup4 ? 8 : 4, min: !this.sup4 ? 0 : -4 },\n      4: {\n        id: 4,\n        den: [2, 4],\n        max: !this.sup4 ? 8 : 4,\n        min: !this.sup4 ? 0 : -4,\n      },\n      5: { id: 5, den: [5], max: !this.sup4 ? 8 : 4, min: !this.sup4 ? 0 : -4 },\n      6: {\n        id: 6,\n        den: [2, 3, 6],\n        max: !this.sup4 ? 6 : 3,\n        min: !this.sup4 ? 0 : -3,\n      },\n      7: { id: 7, den: [7], max: !this.sup4 ? 4 : 2, min: !this.sup4 ? 0 : -2 },\n      8: {\n        id: 8,\n        den: [2, 4, 8],\n        max: !this.sup4 ? 4 : 2,\n        min: !this.sup4 ? 0 : -2,\n      },\n      9: {\n        id: 9,\n        den: [3, 9],\n        max: !this.sup4 ? 4 : 2,\n        min: !this.sup4 ? 0 : -2,\n      },\n      10: {\n        id: 10,\n        den: [2, 5, 10],\n        max: !this.sup4 ? 4 : 2,\n        min: !this.sup4 ? 0 : -2,\n      },\n      11: {\n        id: 11,\n        den: [11],\n        max: !this.sup4 ? 3 : 2,\n        min: !this.sup4 ? 0 : -1,\n      },\n      12: {\n        id: 12,\n        den: [2, 3, 4, 6, 12],\n        max: !this.sup4 ? 3 : 2,\n        min: !this.sup4 ? 0 : -1,\n      },\n    }\n\n    for (let i = 0, texte, cpt = 0; i < this.nbQuestions && cpt < 50; cpt++) {\n      texte = ''\n      const tab = Number(typeDeQuestions[i])\n      const origine = data[tab].min\n\n      const den1 =\n        !this.sup3 || data[tab].den.length === 1\n          ? data[tab].id\n          : choice(data[tab].den)\n      const tab1 = data[tab].id / den1\n\n      const num1 = trouveNumerateur(den1, origine, data[tab].max)\n      const den2 =\n        !this.sup3 || data[tab].den.length === 1\n          ? data[tab].id\n          : choice(data[tab].den, den1)\n      const tab2 = data[tab].id / den2\n      const num2 = trouveNumerateur(den2, origine, data[tab].max, [\n        { num: num1, den: den1 },\n      ])\n      const den3 =\n        !this.sup3 || data[tab].den.length === 1\n          ? data[tab].id\n          : choice(\n              data[tab].den,\n              data[tab].den.length > 2 ? [den1, den2] : [den1],\n            )\n      const tab3 = data[tab].id / den3\n      const num3 = trouveNumerateur(den3, origine, data[tab].max, [\n        { num: num1, den: den1 },\n        { num: num2, den: den2 },\n      ])\n\n      texte +=\n        'Donner les abscisses des points ' +\n        remplisLesBlancs(\n          this,\n          i,\n          `\\\\quad ${lettreIndiceeDepuisChiffre(i * 3 + 1)}\\\\; %{champ1} \\\\quad ${lettreIndiceeDepuisChiffre(i * 3 + 2)} \\\\; %{champ2} \\\\quad ${lettreIndiceeDepuisChiffre(i * 3 + 3)} \\\\;  %{champ3}`,\n          'clavierDeBaseAvecFraction',\n          '\\\\ldots',\n        )\n      handleAnswers(\n        this,\n        i,\n        {\n          bareme: (listePoints) => [\n            listePoints[0] + listePoints[1] + listePoints[2],\n            3,\n          ],\n          champ1: { value: fraction(num1, den1).reduire(tab1).texFraction },\n          champ2: { value: fraction(num2, den2).reduire(tab2).texFraction },\n          champ3: { value: fraction(num3, den3).reduire(tab3).texFraction },\n        },\n        { formatInteractif: 'fillInTheBlank' },\n      )\n\n      const tailleUnite = 20 / (data[tab].max - origine)\n      const d = droiteGraduee({\n        Min: origine,\n        Max: data[tab].max,\n        Unite: tailleUnite,\n        thickSec: true,\n        thickSecDist: 1 / data[tab].id,\n        thickEpaisseur: 3,\n        pointListe: [\n          [num1 / den1, lettreIndiceeDepuisChiffre(i * 3 + 1)],\n          [num2 / den2, lettreIndiceeDepuisChiffre(i * 3 + 2)],\n          [num3 / den3, lettreIndiceeDepuisChiffre(i * 3 + 3)],\n        ],\n      })\n\n      texte +=\n        '<br>' +\n        mathalea2d(\n          {\n            xmin: -0.2,\n            xmax: (data[tab].max - origine) * tailleUnite + 1,\n            ymin: -1,\n            ymax: 1,\n            style: 'margin-top:10px ',\n            scale: 0.6,\n          },\n          d,\n        )\n      const dCorr = droiteGraduee({\n        Min: origine,\n        Max: data[tab].max,\n        Unite: tailleUnite,\n        thickSec: true,\n        thickSecDist: 1 / data[tab].id,\n        thickEpaisseur: 3,\n        pointListe: [\n          [num1 / den1, lettreIndiceeDepuisChiffre(i * 3 + 1)],\n          [num2 / den2, lettreIndiceeDepuisChiffre(i * 3 + 2)],\n          [num3 / den3, lettreIndiceeDepuisChiffre(i * 3 + 3)],\n        ],\n        labelListe: [\n          [num1 / den1, textFractionCorr(num1, den1, this.sup3)],\n          [num2 / den2, textFractionCorr(num2, den2, this.sup3)],\n          [num3 / den3, textFractionCorr(num3, den3, this.sup3)],\n        ],\n        labelDistance: 0.8,\n        labelCustomDistance: 1.7,\n      })\n\n      const texteCorr = mathalea2d(\n        {\n          xmin: -0.2,\n          xmax: (data[tab].max - origine) * tailleUnite + 1,\n          ymin: -2.5,\n          ymax: 1,\n          style: 'margin-top:10px ',\n          scale: 0.6,\n        },\n        dCorr,\n      )\n      if (this.questionJamaisPosee(i, den1, num1, num2, num3)) {\n        // Si la question n'a jamais été posée, on en crée une autre\n        this.listeQuestions[i] = texte\n        this.listeCorrections[i] = texteCorr\n        if (context.isAmc) {\n          this.autoCorrection[i] = {\n            enonce: texte + '\\n',\n            propositions: [\n              {\n                texte: texteCorr,\n                statut: 5,\n                sanscadre: true,\n                pointilles: true,\n                feedback: '',\n              },\n            ],\n          }\n        }\n        i++\n      }\n    }\n    listeQuestionsToContenu(this)\n  }\n}\n\nfunction trouveNumerateur(\n  den: number,\n  min: number,\n  max: number,\n  fractionsAEviter: { num: number; den: number }[] = [],\n) {\n  const isNombreEntier = function (nu: number, de: number) {\n    if (nu % de === 0) return true\n    return false\n  }\n\n  let trouve = false\n  let num = 0\n  let i = 0\n  while (!trouve && i < 10) {\n    num = randint(min * den, den * max)\n\n    // on veut éviter l'entier\n    let k = 0\n    while (isNombreEntier(num, den) && k < 5) {\n      num = randint(min * den, den * max)\n      k++\n    }\n\n    // on veut éviter d'être trop proche d'un autre point\n    trouve = true\n    for (const fraction of fractionsAEviter) {\n      if (Math.abs(fraction.num / fraction.den - num / den) < 2 / den) {\n        trouve = false\n        break\n      }\n    }\n    i++\n  }\n  return num\n}\n\nfunction textFractionCorr(\n  num: number,\n  den: number,\n  simplifier: boolean,\n): string {\n  return simplifier\n    ? fraction(num, den).texFractionSimplifiee\n    : fraction(num, den).texFraction\n}\n"],"names":["titre","interactifReady","interactifType","amcReady","amcType","dateDePublication","uuid","refs","LireAbscissesFractionnairesComplexes","Exercice","typeDeQuestions","gestionnaireFormulaireTexte","data","i","texte","cpt","tab","origine","den1","choice","tab1","num1","trouveNumerateur","den2","tab2","num2","den3","tab3","num3","remplisLesBlancs","lettreIndiceeDepuisChiffre","handleAnswers","listePoints","fraction","tailleUnite","d","droiteGraduee","mathalea2d","dCorr","textFractionCorr","texteCorr","context","listeQuestionsToContenu","den","min","max","fractionsAEviter","isNombreEntier","nu","de","trouve","num","randint","k","simplifier"],"mappings":"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"}