var k=Object.defineProperty;var L=(r,t,s)=>t in r?k(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var f=(r,t,s)=>L(r,typeof t!="symbol"?t+"":t,s);import{q as a,z as w,J as g,aw as x,aa as S,a9 as T,ax as A,G as j,R as B,F as q}from"./index-DjA7ROjC.js";function l(r){return typeof r=="object"&&r instanceof q}function v(r){return l(r)?r.simplifie().toLatex():a(r,1).toLatex()}class P{constructor({nom:t,proba:s,enfants:e,rationnel:n,visible:o,alter:i,racine:h}){f(this,"nom");f(this,"proba");f(this,"enfants");f(this,"rationnel");f(this,"visible");f(this,"alter");f(this,"racine");f(this,"taille");f(this,"pos");this.racine=h!==void 0?!!h:!1,this.enfants=e!==void 0?[...e]:[],this.nom=t!==void 0?String(t):"",this.rationnel=n!==void 0?!!n:!0,this.proba=s!==void 0?l(s)?s.simplifie():a(s,1):a(0,1),this.visible=o!==void 0?o:!0,this.alter=i!==void 0?String(i):"",this.taille=0,this.pos=0}setFils(t,s,e){const n=new P({nom:t,proba:s,rationnel:e||this.rationnel});return this.enfants.push(n),n}getFils(t){if(this.nom===t)return this;for(const s of this.enfants){if(s.nom===t)return s;const e=s.getFils(t);if(e)return e}return null}setFilsProba(t,s,e){let n=this.getFils(t);return n?n.proba=l(s)?s:a(s,1):(n=new P({nom:t,proba:s,rationnel:e||this.rationnel}),this.enfants.push(n)),n}getProba(t){let s=a(0,1),e=a(0,1),n;if(this.nom===t)return l(this.proba)?this.proba.simplifie():a(this.proba*100,100);for(const o of this.enfants)if(o.nom===t){const i=o.proba;s=s.sommeFraction(i)}else{n=o.getProba(t);const i=l(e)?e:a(e,1),h=l(o.proba)?o.proba:a(o.proba,1),p=l(n)?n:a(n,1);e=i.sommeFraction(h.produitFraction(p))}return s=s.sommeFraction(l(e)?e:a(e,1)),l(s)?s.simplifie():a(s,1)}branches(){let t=0;if(this.enfants.length===0)return 1;for(const s of this.enfants)t+=s.branches();return t}setTailles(){try{this.taille=this.branches();for(const t of this.enfants)t.setTailles()}catch(t){return console.error(t),!1}return!0}represente(t=0,s=0,e=0,n=1,o=!1,i=-1,h){h=h||5;const p=[],u=w(o?t:t+e+this.taille*n/2,o?s+e-this.taille*n/2:s,"","center"),c=w(o?t-i*5:t,o?s:s-i*5),m=g(this.nom,u.x+(o?.1*i:0),u.y+(o?0:.5*i),"black",15*this.nom.length,20,"white",h),F=o?x(u,c,.7,"","center"):S(x(u,c,.6),T(u.x>c.x?.5:-.5,0),"","center");F.positionLabel="center";const d=this.visible?A(this.rationnel?v(this.proba):j(this.proba.valueOf(),4),F,"black",20,24,"white",h):A(this.alter,F,"black",20,24,"white",h);if(this.enfants.length===0)return[B(c,u),m,d];for(let b=0;b<this.enfants.length;b++)p.push(...this.enfants[b].represente(o?t+i*5:t+e+this.taille*n/2,o?s+e-this.taille*n/2:s+i*5,o?n*((this.enfants.length/2-b)*this.enfants[b].taille):n*((b-this.enfants.length/2)*this.enfants[b].taille),n,o,i,h));return this.racine?p.push(m):p.push(B(c,u),m,d),p}}export{P as A,v as t};
//# sourceMappingURL=arbres-7rpK0tRr.js.map
