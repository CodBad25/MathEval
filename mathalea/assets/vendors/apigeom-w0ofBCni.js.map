{"version":3,"file":"apigeom-w0ofBCni.js","sources":["../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/userInterface/addColorPalette.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/dashed.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/noDashed.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/userInterface/addDashedChoice.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/actions/loadJson.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/defaultValues.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/calculus/Coords.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/lib/format.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/syncShake.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkAngle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkCircleRadius.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/lib/handleColors.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/Element2D.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkCoords.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkDistance.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkLine.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkParallel.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/Segment.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkPerpendicularBisector.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkPoint.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkPointBetween2Points.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/calculus/utils.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/grid/Grid.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/Point.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/PointIntersectionLL.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkPointOnIntersectionLL.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/Line.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/Ray.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/PointOnLine.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkPointOnLine.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkPolygon.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkPolygonByLabels.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkRay.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkSameDistance.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkSegment.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkVector.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/shake.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/dynamicNumbers/DynamicNumber.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/dynamicNumbers/Angle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/dynamicNumbers/Distance.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/dynamicNumbers/DynamicCalcul.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/dynamicNumbers/DynamicX.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/dynamicNumbers/DynamicY.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/lib/mathjsInstance.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/calculus/Graph.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/calculus/Graph2.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/calculus/GraphByParts.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/diagrams/CircleFractionDiagram.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/diagrams/LineFractionDiagram.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/diagrams/RectangleFractionDiagram.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/grid/GraduatedLine.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/Arc.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/ArcBy3PointsAndRadius.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/dynamicNumbers/Const.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/ArcByCenterRadiusAndAngles.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/BisectorByPoints.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/Circle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/CircleCenterDyamicRadius.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/CircleCenterPoint.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/LineByPointVector.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/LineParallel.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/LinePerpendicular.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/PerpendicularBisector.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/PerpendicularBisectorByPoints.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/Polygon.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/lines/Polyline.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/text/TextByPosition.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/mark/MarkBetweenPoints.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/mark/MarkRightAngle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/Barycenter.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/Middle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/PoinrOnGraph.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/PointByProjection.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/PointByProjectionOnAxisX.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/PointByProjectionOnAxisY.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/PointIntersectionCC.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/PointIntersectionLC.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/PointOnCircle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/PointOnLineAtDistance.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/PointOnPolyline.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/PointsIntersectionCC.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/points/PointsIntersectionLC.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/text/TextByPoint.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/text/TextDynamicByPosition.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/vector/Vector.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/vector/VectorByPoints.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/elements/vector/VectorPerpendicular.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/lib/storage.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/pointerActions/handleHover.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/pointerActions/handlePointerAction.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/bisectorByPoints.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/circle.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/circleCompass.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/circlePoint.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/cursor.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/description.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/dilate.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/disc.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/discPoint.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/drag.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/dragAll.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/fill.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/grid.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/hide.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/informations.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/latex.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/latexSvg.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/line.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/lineParallel.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/linePerpendicular.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/markAngle.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/markSegment.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/mesureAngle.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/mesureSegment.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/middle.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/moveLabel.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/namePoint.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/open.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/pause.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/perpendicularBisector.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/play.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/playSkipBack.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/playSkipForward.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/point.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/pointIntersection.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/pointOn.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/polygon.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/ray.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/redo.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/reflection.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/reflectionOverLine.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/remove.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/restart.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/rotate.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/save.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/segment.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/setOptions.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/shake.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/translation.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/undo.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/vector.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/zoomIn.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/zoomOut.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/userInterface/setButtonStyle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/userInterface/addButtons.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/userInterface/addCustomButton.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/userInterface/addThicknessChoice.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/userInterface/addMarkPalette.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/userInterface/setToolbar.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/Figure.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/userInterface/handleDialog.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/userInterface/selectionRectangle.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/uiMachine.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/main.ts","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/erase.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/minus.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/assets/svg/plus.svg","../../../node_modules/.pnpm/apigeom@git+https+++forge.apps.education.fr+coopmaths+apigeom.git+5516da2450824a3b8bc54dda003d4036b541023d/node_modules/apigeom/src/check/checkElementExist.ts"],"sourcesContent":["import type Figure from '../Figure'\n\nexport default function addColorPalette(\n  colors: string[],\n  figure: Figure,\n): HTMLDivElement {\n  const div = document.createElement('div')\n  div.style.display = 'flex'\n  div.classList.add('apiGeom-color-palette')\n  for (const color of colors) {\n    const button = document.createElement('button')\n    button.style.backgroundColor = color\n    button.style.width = '30px'\n    button.style.height = '30px'\n    button.style.marginRight = '10px'\n    button.style.marginLeft = '4px'\n    button.style.marginTop = '10px'\n    button.style.cursor = 'pointer'\n    button.style.borderRadius = '5px'\n    button.style.backgroundColor = color\n    button.style.border = '1px solid black'\n    button.style.padding = '2px'\n    button.title = translateColor(color)\n    button.addEventListener('click', () => {\n      figure.options.color = color\n      showSelectedColor(figure)\n      if (figure.options.changeColorChangeActionToSetOptions) {\n        figure.buttons.get('SET_OPTIONS')?.click()\n      }\n    })\n    div.appendChild(button)\n  }\n  setTimeout(() => {\n    showSelectedColor(figure)\n  }, 100)\n  return div\n}\n\nfunction showSelectedColor(figure: Figure): void {\n  const buttons = document.querySelectorAll('.apiGeom-color-palette button')\n  for (const element of Array.from(buttons)) {\n    const button = element as HTMLButtonElement\n    if (button.style.backgroundColor === figure.options.color) {\n      button.style.boxShadow = '0px 0px 10px 0px rgba(0,0,0,0.75)'\n      button.style.transform = 'scale(1.2) translate(1px, 1px'\n    } else {\n      button.style.boxShadow = ''\n      button.style.transform = ''\n    }\n  }\n}\n\nexport { showSelectedColor }\n\ninterface ColorMap {\n  [key: string]: string\n  black: string\n  blue: string\n  gray: string\n  green: string\n  lightgray: string\n  purple: string\n  red: string\n  yellow: string\n}\n\nconst colorMap: ColorMap = {\n  black: 'Noir',\n  blue: 'Bleu',\n  gray: 'Gris',\n  green: 'Vert',\n  lightgray: 'Gris clair',\n  purple: 'Violet',\n  red: 'Rouge',\n  yellow: 'Jaune',\n}\n\nfunction translateColor(color: string): string {\n  if (colorMap[color] !== undefined) {\n    return colorMap[color]\n  }\n  return color.charAt(0).toUpperCase() + color.slice(1)\n}\n","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='183.46666'%20height='36'%20viewBox='0%200%20172%2033.750001'%20id='svg7795'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='traitPointilles.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs7797'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='2.9324129'%20inkscape:cx='91.73333'%20inkscape:cy='18.073853'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1620'%20inkscape:window-height='2786'%20inkscape:window-x='-11'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20units='px'%20height='40px'%20/%3e%3cmetadata%20id='metadata7800'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-222.57143,-232.07648)'%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:7.80938;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:15.6188,%2015.6188;stroke-dashoffset:0;stroke-opacity:1'%20d='M%20237.13226,248.95148%20H%20383.91529'%20id='path2564'%20sodipodi:nodetypes='cc'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='183.46666'%20height='36'%20viewBox='0%200%20172%2033.750001'%20id='svg7795'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='traitContinu.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs7797'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='7.6035613'%20inkscape:cx='35.378159'%20inkscape:cy='18.017873'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1620'%20inkscape:window-height='2786'%20inkscape:window-x='-11'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20units='px'%20height='40px'%20/%3e%3cmetadata%20id='metadata7800'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-222.57143,-232.07648)'%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:7.80938;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1'%20d='M%20235.17991,248.95148%20H%20381.96294'%20id='path2564'%20sodipodi:nodetypes='cc'%20/%3e%3c/g%3e%3c/svg%3e\"","import dashed from '../assets/svg/dashed.svg'\nimport noDashed from '../assets/svg/noDashed.svg'\nimport type Figure from '../Figure'\n\nexport default function addDashedChoice(figure: Figure): HTMLDivElement {\n  const div = document.createElement('div')\n  div.style.display = 'flex'\n  div.classList.add('apiGeom-dashed-choice')\n  for (const choice of ['noDashed', 'dashed']) {\n    const img = document.createElement('img')\n    img.src = choice === 'noDashed' ? noDashed : dashed\n    img.title = choice === 'noDashed' ? 'Trait plein' : 'Pointillés'\n    img.style.width = '30px'\n    // img.style.height = '30px'\n    img.style.margin = '10px'\n    img.style.marginLeft = '4px'\n    img.style.marginTop = '30px'\n    img.style.cursor = 'pointer'\n    // img.style.borderRadius = '5px'\n    // img.style.border = '1px solid black'\n    img.style.padding = '2px'\n    img.addEventListener('click', () => {\n      figure.options.isDashed = choice === 'dashed'\n      showSelectedStyle(figure)\n    })\n    img.id = choice\n    div.appendChild(img)\n  }\n  setTimeout(() => {\n    showSelectedStyle(figure)\n  }, 100)\n  return div\n}\n\nfunction showSelectedStyle(figure: Figure): void {\n  const dashed = document.querySelectorAll('.apiGeom-dashed-choice img#dashed')\n  const noDashed = document.querySelectorAll(\n    '.apiGeom-dashed-choice img#noDashed',\n  )\n  if (figure.options.isDashed) {\n    for (const element of Array.from(noDashed)) {\n      const image = element as HTMLImageElement\n      image.style.boxShadow = ''\n      image.style.transform = ''\n    }\n    for (const element of Array.from(dashed)) {\n      const image = element as HTMLImageElement\n      image.style.boxShadow = '0px 0px 10px 0px rgba(0,0,0,0.75)'\n      image.style.transform = 'scale(1.2) translate(1px, 1px'\n    }\n  } else {\n    for (const element of Array.from(dashed)) {\n      const image = element as HTMLImageElement\n      image.style.boxShadow = ''\n      image.style.transform = ''\n    }\n    for (const element of Array.from(noDashed)) {\n      const image = element as HTMLImageElement\n      image.style.boxShadow = '0px 0px 10px 0px rgba(0,0,0,0.75)'\n      image.style.transform = 'scale(1.2) translate(1px, 1px'\n    }\n  }\n}\n\nexport { showSelectedStyle }\n","import type Distance from '../dynamicNumbers/Distance'\nimport type DynamicNumber from '../dynamicNumbers/DynamicNumber'\nimport type { FigureOptions, SaveJson } from '../elements/interfaces'\nimport type Circle from '../elements/lines/Circle'\nimport type Line from '../elements/lines/Line'\nimport type Segment from '../elements/lines/Segment'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\nimport { showSelectedColor } from '../userInterface/addColorPalette'\nimport { showSelectedStyle } from '../userInterface/addDashedChoice'\n\n/**\n * Analyse l'objet de la sauvegarde et si le type est pris en charge alors on créé l'élément\n * @param figure - Espace de travail\n * @param json - Objet\n * @param eraseHistory - Faut-il repartir d'un historique vide ? Oui pour un chargement, non pour l'utilisation de undo et redo\n * @returns - Tableau avec tous les éléments créés\n */\nexport function loadJson(\n  figure: Figure,\n  json: SaveJson,\n  eraseHistory = false,\n): void {\n  if (eraseHistory) {\n    figure.stackUndo = []\n    figure.stackRedo = []\n  }\n  figure.elements.clear()\n  if (figure.divFigure != null) figure.divFigure.innerHTML = ''\n  figure.clearHtml()\n  figure.divFigure?.appendChild(figure.svg)\n  if (json.options != null) {\n    const options = json.options as FigureOptions\n    for (const [key, value] of Object.entries(options)) {\n      if (key in figure.options) {\n        // @ts-expect-error Je ne sais pas typer cela\n        figure.options[key] = value\n      }\n    }\n  }\n  showSelectedColor(figure)\n  showSelectedStyle(figure)\n  figure.pointer = figure.create('Point', {\n    isChild: true,\n    isFree: false,\n    isVisible: false,\n    color: 'black',\n    shape: '',\n    x: 0,\n    y: 0,\n  })\n  figure.pointer.type = 'pointer'\n  for (const options of Object.values(json)) {\n    // Clone map figure.elements\n    // const elements = new Map()\n    // for (const [key, value] of figure.elements) {\n    //   elements.set(key, value)\n    // }\n    // console.info(elements)\n    // console.info(options.type)\n    if (options.type === 'Point') {\n      figure.create('Point', { x: options.x, y: options.y, ...options })\n    } else if (options.type === 'Arc') {\n      const center = figure.elements.get(options.idCenter) as Point\n      const start = figure.elements.get(options.idStart) as Point\n      const dynamicAngle = figure.elements.get(\n        options.idDynamicAngle,\n      ) as DynamicNumber\n      figure.create('Arc', { center, dynamicAngle, start, ...options })\n    } else if (options.type === 'ArcByCenterRadiusAndAngles') {\n      const center = figure.elements.get(options.idCenter) as Point\n      const radius = options.radius\n      const startAngle = options.startAngle\n      const endAngle = options.endAngle\n      figure.create('ArcByCenterRadiusAndAngles', {\n        center,\n        endAngle,\n        radius,\n        startAngle,\n        ...options,\n      })\n    } else if (options.type === 'BisectorByPoints') {\n      const origin = figure.elements.get(options.idOrigin) as Point\n      const pointOnSide1 = figure.elements.get(options.idPointOnSide1) as Point\n      const pointOnSide2 = figure.elements.get(options.idPointOnSide2) as Point\n      figure.create('BisectorByPoints', {\n        origin,\n        pointOnSide1,\n        pointOnSide2,\n        ...options,\n      })\n    } else if (options.type === 'Circle') {\n      const center = figure.elements.get(options.idCenter) as Point\n      figure.create('Circle', { center, radius: options.radius, ...options })\n    } else if (options.type === 'CircleCenterPoint') {\n      const center = figure.elements.get(options.idCenter) as Point\n      const point = figure.elements.get(options.idPoint) as Point\n      figure.create('CircleCenterPoint', { center, point, ...options })\n    } else if (options.type === 'CircleDynamicRadius') {\n      const center = figure.elements.get(options.idCenter) as Point\n      const radius = figure.elements.get(options.idRadius) as Distance\n      figure.create('CircleCenterDynamicRadius', { center, radius, ...options })\n    } else if (options.type === 'CircleFractionDiagram') {\n      const indicesSectorsInColor = new Set(options.arrayIndicesSectorsInColor)\n      figure.create('CircleFractionDiagram', {\n        indicesSectorsInColor,\n        ...options,\n      })\n    } else if (options.type === 'Distance') {\n      const point1 = figure.elements.get(options.idPoint1) as Point\n      const point2 = figure.elements.get(options.idPoint2) as Point\n      figure.create('Distance', { point1, point2, ...options })\n    } else if (options.type === 'DynamicX') {\n      const point = figure.elements.get(options.idPoint) as Point\n      figure.create('DynamicX', { point, ...options })\n    } else if (options.type === 'DynamicY') {\n      const point = figure.elements.get(options.idPoint) as Point\n      figure.create('DynamicY', { point, ...options })\n    } else if (options.type === 'PointOnLine') {\n      const line = figure.elements.get(options.idLine) as Line\n      figure.create('PointOnLine', { line, ...options })\n    } else if (options.type === 'PointOnCircle') {\n      const circle = figure.elements.get(options.idCircle) as Circle\n      figure.create('PointOnCircle', { circle, ...options })\n    } else if (options.type === 'GraphByParts') {\n      figure.create('GraphByParts', { ...options })\n    } else if (options.type === 'Graph') {\n      figure.create('Graph', { ...options })\n    } else if (options.type === 'GraduatedLine') {\n      figure.create('GraduatedLine', { ...options })\n    } else if (options.type === 'Grid') {\n      figure.create('Grid', { ...options })\n    } else if (options.type === 'Line') {\n      const point1 = figure.elements.get(options.idPoint1) as Point\n      const point2 = figure.elements.get(options.idPoint2) as Point\n      figure.create('Line', { point1, point2, ...options })\n    } else if (options.type === 'Middle') {\n      const point1 = figure.elements.get(options.idPoint1) as Point\n      const point2 = figure.elements.get(options.idPoint2) as Point\n      figure.create('Middle', { point1, point2, ...options })\n    } else if (options.type === 'LineByPointVector') {\n      const vector = figure.elements.get(options.idVector)\n      const point = figure.elements.get(options.idPoint)\n      figure.create('LineByPointVector', { point, vector, ...options })\n    } else if (options.type === 'LineFractionDiagram') {\n      const indicesRectanglesInColor = new Set(\n        options.arrayIndicesRectanglesInColor,\n      )\n      figure.create('LineFractionDiagram', {\n        indicesRectanglesInColor,\n        ...options,\n      })\n    } else if (options.type === 'RectangleFractionDiagram') {\n      const indicesRectanglesInColor = new Set(\n        options.arrayIndicesRectanglesInColor,\n      )\n      figure.create('RectangleFractionDiagram', {\n        indicesRectanglesInColor,\n        ...options,\n      })\n    } else if (options.type === 'LineParallel') {\n      const line = figure.elements.get(options.idLine)\n      const point = figure.elements.get(options.idPoint)\n      figure.create('LineParallel', { line, point, ...options })\n    } else if (options.type === 'LinePerpendicular') {\n      const line = figure.elements.get(options.idLine)\n      const point = figure.elements.get(options.idPoint)\n      figure.create('LinePerpendicular', { line, point, ...options })\n    } else if (options.type === 'MarkBetweenPoints') {\n      const point1 = figure.elements.get(options.idPoint1) as Point\n      const point2 = figure.elements.get(options.idPoint2) as Point\n      figure.create('MarkBetweenPoints', {\n        text: options.text,\n        point1,\n        point2,\n        ...options,\n      })\n    } else if (options.type === 'MarkRightAngle') {\n      const point = figure.elements.get(options.idPoint) as Point\n      const directionPoint = figure.elements.get(\n        options.idDirectionPoint,\n      ) as Point\n      figure.create('MarkRightAngle', {\n        point,\n        directionPoint,\n        ...options,\n      })\n    } else if (options.type === 'PerpendicularBisector') {\n      const segment = figure.elements.get(options.idSegment)\n      figure.create('PerpendicularBisector', { segment, ...options })\n    } else if (options.type === 'PerpendicularBisectorByPoints') {\n      const point1 = figure.elements.get(options.idPoint1) as Point\n      const point2 = figure.elements.get(options.idPoint2) as Point\n      figure.create('PerpendicularBisectorByPoints', {\n        point1,\n        point2,\n        ...options,\n      })\n    } else if (options.type === 'ElementByReflect') {\n      const origin = figure.elements.get(\n        options.idTransformationOrigin,\n      ) as Point\n      const center = figure.elements.get(\n        options.idTransformationCenter,\n      ) as Point\n      origin.reflect(center, options)\n    } else if (options.type === 'ElementByReflectOverLine') {\n      const origin = figure.elements.get(\n        options.idTransformationOrigin,\n      ) as Point\n      const line = figure.elements.get(options.idTransformationLine) as Line\n      origin.reflectOverLine(line, options)\n    } else if (options.type === 'ElementByDilate') {\n      const origin = figure.elements.get(\n        options.idTransformationOrigin,\n      ) as Point\n      const center = figure.elements.get(\n        options.idTransformationCenter,\n      ) as Point\n      const factor = options.transformationFactor\n      origin.dilate(center, factor, options)\n    } else if (options.type === 'ElementByRotation') {\n      const origin = figure.elements.get(\n        options.idTransformationOrigin,\n      ) as Point\n      const center = figure.elements.get(\n        options.idTransformationCenter,\n      ) as Point\n      const angle = options.transformationAngle\n      origin.rotate(center, angle, options)\n    } else if (options.type === 'ElementByTranslation') {\n      const origin = figure.elements.get(\n        options.idTransformationOrigin,\n      ) as Point\n      const point1 = figure.elements.get(\n        options.idTransformationPoint1,\n      ) as Point\n      const point2 = figure.elements.get(\n        options.idTransformationPoint2,\n      ) as Point\n      origin.translate(point1, point2, options)\n    } else if (options.type === 'PointByProjection') {\n      const origin = figure.elements.get(options.idOrigin) as Point\n      const line = figure.elements.get(options.idLine) as Segment\n      figure.create('PointByProjection', { line, origin, ...options })\n    } else if (options.type === 'PointByProjectionOnAxisX') {\n      const origin = figure.elements.get(options.idOrigin) as Point\n      figure.create('PointByProjectionOnAxisX', { origin, ...options })\n    } else if (options.type === 'PointByProjectionOnAxisY') {\n      const origin = figure.elements.get(options.idOrigin) as Point\n      figure.create('PointByProjectionOnAxisY', { origin, ...options })\n    } else if (options.type === 'PointIntersectionLL') {\n      const line1 = figure.elements.get(options.idLine1) as Line\n      const line2 = figure.elements.get(options.idLine2) as Line\n      figure.create('PointIntersectionLL', { line1, line2, ...options })\n    } else if (options.type === 'PointIntersectionCC') {\n      const circle1 = figure.elements.get(options.idCircle1) as Circle\n      const circle2 = figure.elements.get(options.idCircle2) as Circle\n      figure.create('PointIntersectionCC', { circle1, circle2, ...options })\n    } else if (options.type === 'PointIntersectionLC') {\n      const line = figure.elements.get(options.idLine) as Line\n      const circle = figure.elements.get(options.idCircle) as Circle\n      figure.create('PointIntersectionLC', { circle, line, ...options })\n    } else if (options.type === 'PointOnGraph') {\n      const graph = figure.elements.get(options.idGraph)\n      figure.create('PointOnGraph', { graph, ...options })\n    } else if (options.type === 'PointOnPolyline') {\n      const polyline = figure.elements.get(options.idPolyline)\n      figure.create('PointOnPolyline', { polyline, ...options })\n    } else if (options.type === 'Segment') {\n      const point1 = figure.elements.get(options.idPoint1) as Point\n      const point2 = figure.elements.get(options.idPoint2) as Point\n      figure.create('Segment', { point1, point2, ...options })\n    } else if (options.type === 'Polyline') {\n      const points = []\n      for (const idPoint of options.idPoints) {\n        points.push(figure.elements.get(idPoint))\n      }\n      figure.create('Polyline', { points, ...options })\n    } else if (options.type === 'Polygon') {\n      const points = []\n      for (const idPoint of options.idPoints) {\n        points.push(figure.elements.get(idPoint))\n      }\n      figure.create('Polygon', { points, ...options })\n    } else if (options.type === 'Ray') {\n      const point1 = figure.elements.get(options.idPoint1) as Point\n      const point2 = figure.elements.get(options.idPoint2) as Point\n      figure.create('Ray', { point1, point2, ...options })\n    } else if (options.type === 'TextByPosition') {\n      figure.create('TextByPosition', {\n        text: options.text,\n        x: options.x,\n        y: options.y,\n        ...options,\n      })\n    } else if (options.type === 'TextByPoint') {\n      const point = figure.elements.get(options.idPoint) as Point\n      figure.create('TextByPoint', { point, text: options.text, ...options })\n    } else if (options.type === 'TextDynamicByPosition') {\n      const dynamicNumber = figure.elements.get(\n        options.idDynamicNumber,\n      ) as DynamicNumber\n      figure.create('TextDynamicByPosition', { dynamicNumber, ...options })\n    } else if (options.type === 'Vector') {\n      const origin = figure.elements.get(options.idOrigin)\n      figure.create('Vector', { origin, ...options })\n    } else if (options.type === 'VectorByPoints') {\n      const origin = figure.elements.get(options.idOrigin)\n      const point1 = figure.elements.get(options.idPoint1)\n      const point2 = figure.elements.get(options.idPoint2)\n      figure.create('VectorByPoints', { origin, point1, point2, ...options })\n    } else if (options.type === 'VectorPerpendicular') {\n      const origin = figure.elements.get(options.idOrigin)\n      const line = figure.elements.get(options.idLine)\n      figure.create('VectorPerpendicular', { line, origin, ...options })\n    }\n  }\n  // Pour la navigation dans l'historique on ne sauvegarde que le premier chargement\n  // les autres chargements proviennent de goBack() ou de goForward()\n  if (figure.stackUndo.length === 0) figure.saveState()\n  if (eraseHistory) {\n    if ('history' in json && json.history !== null) {\n      const history = json.history as string[]\n      figure.stackUndo = [...history]\n      figure.handleUndoRedoButtons()\n      // Comportement irrégulier sans ce Undo que je ne m'explique pas\n      // figure.undo()\n    }\n  }\n}\n","import type { availableButtons } from '../userInterface/availableButtons'\n\n// Couleurs\nexport const colors = {\n  back: '#f5f1f3',\n  backcorrection: '#E0A588',\n  backdark: '#dadbdf',\n  backdarker: '#cecfd4',\n  backnav: '#F15929',\n  backnavlight: '#f56d45',\n  dark: '#F45E27',\n  darkest: '#E64A10',\n  darkmode: '#2e2e2b',\n  darkmodelight: '#363633',\n  DEFAULT: '#F15929',\n  light: '#f56d45',\n  lightest: '#f87f5c',\n  title: '#342A34',\n  titleexercise: '#F15929',\n  titlelight: '#f5f1f3',\n  titlemenu: '#F15929',\n}\n\n// Distance entre l'endroit où on clique et les élément\nexport const defaultDistanceClick = 15\n\n// Taille de l'historique pour la navigation avec le bouton précédent\nexport const defaultHistorySize = 100\n\n// Nombre de chiffres après la virgule dans les affichages\nexport const displayDigits = 2\n\n// Pente d'une droite verticale\nexport const defaultMaxSlope = 10 ** 4\n\n// Pente d'une droite horizontale\nexport const defaultMinSlope = 10 ** -4\n\n// Ecart entre le lieu du clic et la position de la fenêtre modale en unité de la figure\nexport const defaultDeltaXModal = 1\n\n// Espace horizontal laissé pour les boutons\nexport const defaultButtonsWidth = 300\n\n// Espace vertical laissé pour le footer\nexport const defaultFooterHeight = 30\n\n// Largeur minimale du svg\nexport const defaultMinWidth = 30\n\n// Hauteur minimale du svg\nexport const defaultMinHeight = 30\n\n// Style du divUserMessage\nexport const defaultDivUserMessageHeight = '50px'\nexport const defaultDivUserMessageFontSize = 'large'\n\n// Déplacement en unités lors du dragAll\nexport const defaultDragAllDelta = 0.1\n\nexport const defaultZoomInFactor = 1.1\nexport const defaultZoomOutFactor = 0.9\n\nexport const marks = ['', '|', '||', '|||', '✖︎', 'O', '◼︎', '▲', '★']\n\nexport const orangeMathalea = '#F15929'\nexport const orangeMathaleaLight = 'rgba(241, 89, 41, 0.5)'\n\nconst defaultOptions = {\n  animationStepInterval: 3000,\n  automaticUserMessage: true,\n  borderSize: 0.2,\n  color: 'currentColor',\n  colorPointPolygon: 'none',\n  changeColorChangeActionToSetOptions: false,\n  discFillOpacity: 0.2,\n  displayGrid: false,\n  distanceWithoutNewPoint: 0.2,\n  fillColor: 'none',\n  fillColorAndBorderColorAreSame: false,\n  fillOpacity: 0.2,\n  gridWithTwoPointsOnSamePosition: true,\n  fontSize: '1em',\n  isDashed: false,\n  labelAutomaticForPoints: undefined,\n  labelDxInPixels: 15,\n  labelDyInPixels: 15,\n  latexHeight: 12,\n  labelIsVisible: true,\n  latexWidth: 18,\n  limitNumberOfElement: new Map(),\n  mark: '||',\n  moveTextGrid: 15,\n  pointDescriptionWithCoordinates: true,\n  pointSize: 5,\n  thickness: 1,\n  shape: 'x' as '' | '|' | 'o' | 'x',\n  shapeForPolygon: 'x' as '' | '|' | 'o' | 'x',\n  thicknessForPoint: 2,\n  tmpColor: 'gray',\n  tmpFillColor: orangeMathaleaLight,\n  tmpFillOpacity: 0.2,\n  tmpIsDashed: true,\n  tmpThickness: 1,\n  tmpShape: 'x' as '' | '|' | 'o' | 'x',\n}\n\nexport const defaultTools = [\n  'SAVE',\n  'OPEN',\n  'UNDO',\n  'REDO',\n  'DRAG',\n  'DOWNLOAD_LATEX_SVG',\n  'HIDE',\n  'REMOVE',\n  'POINT',\n  'POINT_ON',\n  'POINT_INTERSECTION',\n  'MIDDLE',\n  'SEGMENT',\n  'LINE',\n  'RAY',\n  'POLYGON',\n  'LINE_PARALLEL',\n  'LINE_PERPENDICULAR',\n  'PERPENDICULAR_BISECTOR',\n  'BISECTOR_BY_POINTS',\n  'CIRCLE_CENTER_POINT',\n  'CIRCLE_RADIUS',\n  'REFLECTION_OVER_LINE',\n  'REFLECTION',\n  'ROTATE',\n  'TRANSLATION',\n  'DILATE',\n  'VECTOR',\n  'GRID',\n  'SET_OPTIONS',\n  'FILL',\n  'NAME_POINT',\n  'MOVE_LABEL',\n  'MARK_BETWEEN_POINTS',\n  'DESCRIPTION',\n  'SHAKE',\n  'ZOOM_IN',\n  'ZOOM_OUT',\n] as availableButtons[]\n\nexport default defaultOptions\n","import type Figure from '../../Figure'\nimport { defaultMaxSlope, defaultMinSlope } from '../defaultValues'\nimport type Circle from '../lines/Circle'\nimport type Line from '../lines/Line'\nimport type Segment from '../lines/Segment'\nimport type Point from '../points/Point'\n\n/**\n * Classe de méthodes statiques pour des calculs sur les coordonnées\n */\nexport class Coords {\n  x: number\n  y: number\n  constructor(x = 0, y = 0) {\n    this.x = x\n    this.y = y\n  }\n}\n\nexport function angleWithHorizontalInDegres(A: Coords, B: Coords): number {\n  if (\n    A.x === undefined ||\n    A.y === undefined ||\n    B.x === undefined ||\n    B.y === undefined\n  )\n    return Number.NaN\n  try {\n    const angle = (Math.atan2(B.y - A.y, B.x - A.x) * 180) / Math.PI\n    return angle\n  } catch (_error) {\n    return Number.NaN\n  }\n}\n\nexport function intersectionCCCoord(\n  circle1: Circle,\n  circle2: Circle,\n  n: 1 | 2 = 1,\n): Coords {\n  try {\n    const O1 = circle1.center\n    const O2 = circle2.center\n    const r0 = circle1._radius\n    const r1 = circle2._radius\n    const x0 = O1.x\n    const x1 = O2.x\n    const y0 = O1.y\n    const y1 = O2.y\n    if (\n      x0 === undefined ||\n      x1 === undefined ||\n      y0 === undefined ||\n      y1 === undefined\n    )\n      return new Coords()\n    const dx = x1 - x0\n    const dy = y1 - y0\n    const d = Math.sqrt(dy * dy + dx * dx)\n    if (d > r0 + r1) {\n      return { x: Number.NaN, y: Number.NaN }\n    }\n    if (d < Math.abs(r0 - r1)) {\n      return { x: Number.NaN, y: Number.NaN }\n    }\n    const a = (r0 * r0 - r1 * r1 + d * d) / (2.0 * d)\n    const x2 = x0 + (dx * a) / d\n    const y2 = y0 + (dy * a) / d\n    const h = Math.sqrt(r0 * r0 - a * a)\n    const rx = -dy * (h / d)\n    const ry = dx * (h / d)\n    const xi = x2 + rx\n    const xiPrime = x2 - rx\n    const yi = y2 + ry\n    const yiPrime = y2 - ry\n    if (n === 1) {\n      if (yiPrime > yi) {\n        return new Coords(xiPrime, yiPrime)\n      }\n      return new Coords(xi, yi)\n    }\n    if (yiPrime > yi) {\n      return new Coords(xi, yi)\n    }\n    return new Coords(xiPrime, yiPrime)\n  } catch (_error) {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\nexport function intersectionLLCoord(line1: Line, line2: Line): Coords {\n  try {\n    const [da, db, dc] = line1.equation\n    const [fa, fb, fc] = line2.equation\n    let x: number\n    let y: number\n    if (fa * db - fb * da === 0) {\n      return { x: Number.NaN, y: Number.NaN }\n    }\n    y = (fc * da - dc * fa) / (fa * db - fb * da)\n\n    if (da === 0) {\n      // si d est horizontale alors f ne l'est pas donc fa<>0\n      x = (-fc - fb * y) / fa\n    } else {\n      // d n'est pas horizontale donc ...\n      x = (-dc - db * y) / da\n    }\n    // On teste le cas du segment ou de la demi-droite\n    let isIntersectionExisting = true\n    if (\n      line1.type === 'Segment' &&\n      (x < Math.min(line1.point1.x, line1.point2.x) ||\n        x > Math.max(line1.point1.x, line1.point2.x) ||\n        y < Math.min(line1.point1.y, line1.point2.y) ||\n        y > Math.max(line1.point1.y, line1.point2.y))\n    ) {\n      isIntersectionExisting = false\n    }\n    if (\n      line2.type === 'Segment' &&\n      (x < Math.min(line2.point1.x, line2.point2.x) ||\n        x > Math.max(line2.point1.x, line2.point2.x) ||\n        y < Math.min(line2.point1.y, line2.point2.y) ||\n        y > Math.max(line2.point1.y, line2.point2.y))\n    ) {\n      isIntersectionExisting = false\n    }\n    if (line1.type === 'Ray') {\n      // Direction gauche droite\n      if (line1.point1.x < line1.point2.x && x < line1.point1.x) {\n        isIntersectionExisting = false\n      }\n      // Direction droite gauche\n      if (line1.point1.x > line1.point2.x && x > line1.point1.x) {\n        isIntersectionExisting = false\n      }\n      // Direction bas haut\n      if (line1.point1.y < line1.point2.y && y < line1.point1.y) {\n        isIntersectionExisting = false\n      }\n      // Direction haut bas\n      if (line1.point1.y > line1.point2.y && y > line1.point1.y) {\n        isIntersectionExisting = false\n      }\n    }\n    if (line2.type === 'Ray') {\n      // Direction gauche droite\n      if (line2.point1.x < line2.point2.x && x < line2.point1.x) {\n        isIntersectionExisting = false\n      }\n      // Direction droite gauche\n      if (line2.point1.x > line2.point2.x && x > line2.point1.x) {\n        isIntersectionExisting = false\n      }\n      // Direction bas haut\n      if (line2.point1.y < line2.point2.y && y < line2.point1.y) {\n        isIntersectionExisting = false\n      }\n      // Direction haut bas\n      if (line2.point1.y > line2.point2.y && y > line2.point1.y) {\n        isIntersectionExisting = false\n      }\n    }\n    if (!isIntersectionExisting) {\n      x = Number.NaN\n      y = Number.NaN\n    }\n    return new Coords(x, y)\n  } catch (error) {\n    console.error(error)\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\nexport function distance(A: Coords | Point, B: Coords | Point): number {\n  return Math.hypot(A.x - B.x, A.y - B.y)\n}\n\nexport function equationLine(\n  point1: Coords | Point,\n  point2: Coords | Point,\n): [number, number, number] {\n  try {\n    const a = point1.y - point2.y\n    const b = point2.x - point1.x\n    const c =\n      (point1.x - point2.x) * point1.y + (point2.y - point1.y) * point1.x\n    return [a, b, c]\n  } catch (error) {\n    console.error('Erreur dans Line.equation()', error)\n    return [Number.NaN, Number.NaN, Number.NaN]\n  }\n}\n\nexport function intersectionSCCoord(L: Segment, C: Circle): Coords {\n  try {\n    const { x } = intersectionLCCoord(L, C, 1)\n    const [A, B] = [L.point1, L.point2]\n    if (x !== undefined && distance(A, B) > C.radius) {\n      if (x < Math.max(A.x, B.x) && x > Math.min(A.x, B.x)) {\n        return intersectionLCCoord(L, C, 1)\n      }\n      return intersectionLCCoord(L, C, 2)\n    }\n    return new Coords(Number.NaN, Number.NaN)\n  } catch (_error) {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\nexport function intersectionLCCoord(D: Line, C: Circle, n: 1 | 2 = 1): Coords {\n  try {\n    const O = C.center\n    const r = C.radius\n    const [a, b, c] = D.equation\n    const xO = O.x\n    const yO = O.y\n    let Delta: number\n    let delta: number\n    let xi: number\n    let yi: number\n    let xiPrime: number\n    let yiPrime: number\n    if (b === 0) {\n      // la droite est verticale\n      xi = -c / a\n      xiPrime = xi\n      Delta = 4 * (-xO * xO - (c * c) / (a * a) - (2 * xO * c) / a + r * r)\n      if (Delta < 0) return new Coords(Number.NaN, Number.NaN)\n      if (Math.abs(Delta) < 10 ** -6) {\n        // un seul point d'intersection\n        yi = yO + Math.sqrt(Delta) / 2\n        yiPrime = yi\n      } else {\n        // deux points d'intersection\n        yi = yO - Math.sqrt(Delta) / 2\n        yiPrime = yO + Math.sqrt(Delta) / 2\n      }\n    } else if (a === 0) {\n      // la droite est horizontale\n      yi = -c / b\n      yiPrime = yi\n      Delta = 4 * (-yO * yO - (c * c) / (b * b) - (2 * yO * c) / b + r * r)\n      if (Delta < 0) return new Coords(Number.NaN, Number.NaN)\n      if (Math.abs(Delta) < 10 ** -6) {\n        // un seul point d'intersection\n        xi = xO + Math.sqrt(Delta) / 2\n        xiPrime = xi\n      } else {\n        // deux points d'intersection\n        xi = xO - Math.sqrt(Delta) / 2\n        xiPrime = xO + Math.sqrt(Delta) / 2\n      }\n    } else {\n      // cas général\n      Delta =\n        (2 * ((a * c) / (b * b) + (yO * a) / b - xO)) ** 2 -\n        4 *\n          (1 + (a / b) ** 2) *\n          (xO * xO + yO * yO + (c / b) ** 2 + (2 * yO * c) / b - r * r)\n      if (Delta < 0) return new Coords(Number.NaN, Number.NaN)\n      if (Math.abs(Delta) < 10 ** -6) {\n        // un seul point d'intersection\n        delta = Math.sqrt(Delta)\n        xi =\n          (-2 * ((a * c) / (b * b) + (yO * a) / b - xO) - delta) /\n          (2 * (1 + (a / b) ** 2))\n        xiPrime = xi\n        yi = (-a * xi - c) / b\n        yiPrime = yi\n      } else {\n        // deux points d'intersection\n        delta = Math.sqrt(Delta)\n        xi =\n          (-2 * ((a * c) / (b * b) + (yO * a) / b - xO) - delta) /\n          (2 * (1 + (a / b) ** 2))\n        xiPrime =\n          (-2 * ((a * c) / (b * b) + (yO * a) / b - xO) + delta) /\n          (2 * (1 + (a / b) ** 2))\n        yi = (-a * xi - c) / b\n        yiPrime = (-a * xiPrime - c) / b\n      }\n    }\n    if (n === 1) {\n      if (yiPrime > yi) {\n        return new Coords(xiPrime, yiPrime)\n      }\n      return new Coords(xi, yi)\n    }\n    if (yiPrime > yi) {\n      return new Coords(xi, yi)\n    }\n    return new Coords(xiPrime, yiPrime)\n  } catch (_error) {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\n/**\n *\n * @param origin Point\n * @param line Droite\n * @returns { x, y } coordonnées du projeté orthogonale sur d\n * @author Jean-Claude Lhote\n */\nexport function orthogonalProjectionCoord(\n  origin: Coords | Point,\n  line: Line,\n): Coords {\n  try {\n    const [a, b, c] = line.equation\n    const k = 1 / (a * a + b * b)\n    let x: number | undefined\n    let y: number | undefined\n    if (a === 0) {\n      x = origin.x\n      y = -c / b\n    } else if (b === 0) {\n      y = origin.y\n      x = -c / a\n    } else {\n      if (origin.x === undefined || origin.y === undefined) return new Coords()\n      x = k * (b * b * origin.x - a * b * origin.y - a * c)\n      y = k * (-a * b * origin.x + a * a * origin.y + (a * a * c) / b) - c / b\n    }\n    return new Coords(x, y)\n  } catch (_error) {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\n/**\n *\n * @param A Antécédent (Point ou[x,y])\n * @param O Centre (Point ou[x,y])\n * @param angle Image\n * @returns [x, y] coordonnées de l'image\n */\nexport function rotationCoord(\n  A: Coords | Point,\n  O: Coords | Point,\n  angle: number,\n): Coords {\n  try {\n    if (\n      O.x === undefined ||\n      O.y === undefined ||\n      A.x === undefined ||\n      A.y === undefined\n    )\n      return new Coords()\n    const x =\n      O.x +\n      (A.x - O.x) * Math.cos((angle * Math.PI) / 180) -\n      (A.y - O.y) * Math.sin((angle * Math.PI) / 180)\n    const y =\n      O.y +\n      (A.x - O.x) * Math.sin((angle * Math.PI) / 180) +\n      (A.y - O.y) * Math.cos((angle * Math.PI) / 180)\n    return new Coords(x, y)\n  } catch (_error) {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\n/**\n *\n * @param A Antécédent\n * @param O Centre\n * @param k Coefficient\n * @returns [x, y] coordonnées de l'image\n */\nexport function homothetieCoord(\n  A: Coords | Point,\n  O: Coords | Point,\n  k: number,\n): Coords {\n  if (\n    A.x === undefined ||\n    A.y === undefined ||\n    O.x === undefined ||\n    O.y === undefined\n  )\n    return new Coords()\n  try {\n    const x = O.x + k * (A.x - O.x)\n    const y = O.y + k * (A.y - O.y)\n    return new Coords(x, y)\n  } catch {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\n/**\n *\n * @param A Antécédent\n * @param O Centre\n * @param k Coefficient\n * @param angle Angle en degrés\n * @returns [x, y] coordonnées de l'image\n */\nexport function similitudeCoord(\n  A: Coords | Point,\n  O: Coords | Point,\n  k: number,\n  angle: number,\n): Coords {\n  if (\n    A.x === undefined ||\n    A.y === undefined ||\n    O.x === undefined ||\n    O.y === undefined\n  )\n    return new Coords()\n  try {\n    const angleRadian = (angle * Math.PI) / 180\n    const x =\n      O.x +\n      k *\n        (Math.cos(angleRadian) * (A.x - O.x) -\n          Math.sin(angleRadian) * (A.y - O.y))\n    const y =\n      O.y +\n      k *\n        (Math.cos(angleRadian) * (A.y - O.y) +\n          Math.sin(angleRadian) * (A.x - O.x))\n    return new Coords(x, y)\n  } catch {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\nexport function reflectOverLineCoord(origin: Point, line: Line): Coords {\n  let x: number\n  let y: number\n  const [a, b, c] = line.equation\n  const k = 1 / (a * a + b * b)\n  if (a === 0) {\n    x = origin.x\n    y = -(origin.y + (2 * c) / b)\n  } else if (b === 0) {\n    y = origin.y\n    x = -(origin.x + (2 * c) / a)\n  } else {\n    x = k * ((b * b - a * a) * origin.x - 2 * a * b * origin.y - 2 * a * c)\n    y =\n      k *\n        ((a * a - b * b) * origin.y -\n          2 * a * b * origin.x +\n          (a * a * c) / b -\n          b * c) -\n      c / b\n  }\n  return { x, y }\n}\n\nexport function translateCoords(\n  origin: Coords,\n  point1: Coords,\n  point2: Coords,\n): Coords {\n  const x = origin.x + point2.x - point1.x\n  const y = origin.y + point2.y - point1.y\n  return { x, y }\n}\n\nexport function angleOriented(\n  A: Coords | Point,\n  O: Coords | Point,\n  B: Coords | Point,\n): number {\n  const v = { x: B.x - O.x, y: B.y - O.y }\n  const u = { x: A.x - O.x, y: A.y - O.y }\n  const s = u.x * v.y - v.x * u.y >= 0 ? 1 : -1 // composante z du produit vectoriel OA^OB\n  return s * angle(A, O, B)\n}\n\nexport function angle(\n  A: Coords | Point,\n  O: Coords | Point,\n  B: Coords | Point,\n): number {\n  const OA = { norme: 0, x: A.x - O.x, y: A.y - O.y }\n  OA.norme = Math.sqrt(OA.x ** 2 + OA.y ** 2)\n  const OB = { norme: 0, x: B.x - O.x, y: B.y - O.y }\n  OB.norme = Math.sqrt(OB.x ** 2 + OB.y ** 2)\n  const scalaire = OA.x * OB.x + OA.y * OB.y\n  if (OA.norme * OB.norme < defaultMinSlope) {\n    return 0 // On évite de retouner un angle NaN, zéro, c'est toujours mieux que NaN.\n  }\n  return (Math.acos(scalaire / (OA.norme * OB.norme)) * 180) / Math.PI\n}\n\n/** Renvoie [x1, y1, x2, y2] les coordonnées des extrémités du tracé */\nexport function getCoordsOut(\n  A: Coords | Point,\n  B: Coords | Point,\n  figure: Figure,\n): [number, number, number, number] {\n  if (\n    A.x === undefined ||\n    A.y === undefined ||\n    B.x === undefined ||\n    B.y === undefined ||\n    Number.isNaN(A.x) ||\n    Number.isNaN(A.y) ||\n    Number.isNaN(B.x) ||\n    Number.isNaN(B.y)\n  )\n    return [Number.NaN, Number.NaN, Number.NaN, Number.NaN]\n  try {\n    let pente = defaultMaxSlope\n    if (B.x !== A.x) {\n      pente = (B.y - A.y) / (B.x - A.x)\n    }\n    if (Math.abs(pente) >= defaultMaxSlope)\n      return [A.x, figure.yMax, A.x, figure.yMin]\n    if (Math.abs(pente) < defaultMinSlope)\n      return [figure.xMin, A.y, figure.xMax, A.y]\n    let xOutLeft: number\n    let yOutLeft: number\n    let n = 0\n    while (true) {\n      xOutLeft = A.x + n\n      yOutLeft = A.y + n * pente\n      n++\n      if (\n        xOutLeft > figure.xMax + 1 ||\n        yOutLeft > figure.yMax + 1 ||\n        yOutLeft < figure.yMin - 1\n      )\n        break\n    }\n    let xOutRight: number\n    let yOutRight: number\n    n = 0\n    while (true) {\n      xOutRight = A.x + n\n      yOutRight = A.y + n * pente\n      n--\n      if (\n        xOutRight < figure.xMin - 1 ||\n        yOutRight > figure.yMax + 1 ||\n        yOutRight < figure.yMin - 1\n      )\n        break\n    }\n    return [xOutLeft, yOutLeft, xOutRight, yOutRight]\n  } catch (error) {\n    console.error('Erreur dans Coords.getCoordsOut', error)\n    return [Number.NaN, Number.NaN, Number.NaN, Number.NaN]\n  }\n}\n\nexport function getMinDistanceMinWithElements(\n  coords: Coords,\n  figure: Figure,\n): number {\n  const elements = [...figure.elements.values()].filter(\n    (e) => 'distancePointer' in e,\n  )\n  let distance = Number.POSITIVE_INFINITY\n  for (const element of elements) {\n    const d = element.distancePointer(coords.x, coords.y)\n    if (d < distance) {\n      distance = d\n    }\n  }\n  return distance\n}\n\nexport function labelCoords(\n  point1: Coords | Point,\n  point2: Coords | Point,\n): Coords {\n  try {\n    const midX = (point1.x + point2.x) / 2\n    const midY = (point1.y + point2.y) / 2\n    const dx = point2.x - point1.x\n    const dy = point2.y - point1.y\n    const perpX = -dy\n    const perpY = dx\n    const length = Math.sqrt(perpX * perpX + perpY * perpY)\n    const normPerpX = perpX / length\n    const normPerpY = perpY / length\n    const offsetX = normPerpX * 0.5\n    const offsetY = normPerpY * 0.5\n    const x = midX + offsetX\n    const y = midY + offsetY\n    return new Coords(x, y)\n  } catch {\n    return new Coords(Number.NaN, Number.NaN)\n  }\n}\n\n/** Donne les coordonnées de deux points de la parallèle à line passant par point */\nexport function parallelCoords({\n  line,\n  point,\n  figure,\n}: {\n  line: Line\n  point: Coords\n  figure: Figure\n}) {\n  try {\n    const x1 = point.x\n    const y1 = point.y\n    let x2: number\n    let y2: number\n    if (line.point2.x - line.point1.x === 0) {\n      x2 = x1\n      y2 = figure.yMax\n    } else {\n      x2 = x1 + 5\n      y2 =\n        y1 +\n        (5 * (line.point2.y - line.point1.y)) / (line.point2.x - line.point1.x)\n    }\n    return { x1, y1, x2, y2 }\n  } catch (error) {\n    console.error('Erreur dans Coords.parallelCoords', error)\n    return { x1: Number.NaN, y1: Number.NaN, x2: Number.NaN, y2: Number.NaN }\n  }\n}\n","export function round(value: number, precision = 4): number {\n  return Math.round(value * 10 ** precision) / 10 ** precision\n}\n\nexport function displayNumber(value: number, precision = 4): string {\n  if (round(value, precision).toLocaleString('fr-FR') === '-0') return '0'\n  return round(value, precision).toLocaleString('fr-FR').replace(',', '{,}')\n}\n","import type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nimport { round } from '../lib/format'\n\nexport default function syncShake({\n  delta = 3,\n  figure,\n  repeat = 5,\n  time = 1,\n}: {\n  delta?: number\n  figure: Figure\n  repeat?: number\n  time?: number\n}): void {\n  const timePeranimation = time / repeat\n  // Retirer l'animation\n  figure.container.style.animation = 'none'\n  void figure.container.offsetWidth\n  // Remettre l'animation définie dans le css de index.html\n  figure.container.style.animation = `shake ${timePeranimation}s`\n  figure.container.style.animationIterationCount = repeat.toString()\n\n  const nearX = (x: number): number => {\n    const distanceFromBorder = 0.5\n    const newX = round(x + (Math.random() - 0.5) * delta, 1)\n    if (\n      newX > figure.xMin + distanceFromBorder &&\n      newX < figure.xMax - distanceFromBorder\n    ) {\n      return newX\n    }\n    return x\n  }\n\n  const nearY = (y: number): number => {\n    const distanceFromBorder = 2\n    const newY = round(y + (Math.random() - 0.5) * delta, 1)\n    if (\n      newY > figure.yMin + distanceFromBorder &&\n      newY < figure.yMax - distanceFromBorder\n    ) {\n      return newY\n    }\n    return y\n  }\n\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e.type === 'Point',\n  ) as Point[]\n  const freePoints = points.filter((p) => p.isFree)\n  for (let _ = 0; _ < repeat; _++) {\n    for (const point of freePoints) {\n      point.moveTo(nearX(point.x), nearY(point.y))\n    }\n  }\n  figure.container.style.animation = 'none'\n}\n","import { angle as calculAngle } from '../elements/calculus/Coords'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\nimport { round } from '../lib/format'\nimport syncShake from './syncShake'\n\n/**\n * Teste la valeur de l'angle label1label2label3\n * @returns {{isValid: boolean, message: string}} Un objet contenant deux propriétés :\n * `isValid`, un booléen indiquant si l'angle est valide, et `message`, une chaîne de caractères contenant un message descriptif.\n */\nexport default function checkAngle({\n  angle,\n  figure,\n  label1,\n  label2,\n  label3,\n}: {\n  angle: number\n  figure: Figure\n  label1: string\n  label2: string\n  label3: string\n}): { isValid: boolean; message: string } {\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e.type.includes('Point'),\n  ) as Point[]\n  const matchPoints1 = points.filter((p) => p.label === label1)\n  const matchPoints2 = points.filter((p) => p.label === label2)\n  const matchPoints3 = points.filter((p) => p.label === label3)\n  if (matchPoints1.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${label1}$ dans la figure.`,\n    }\n  }\n  if (matchPoints1.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a plusieurs points nommés $${label1}$ dans la figure.`,\n    }\n  }\n  if (matchPoints2.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${label2}$ dans la figure.`,\n    }\n  }\n  if (matchPoints2.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a plusieurs points nommés $${label2}$ dans la figure.`,\n    }\n  }\n  if (matchPoints3.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${label3}$ dans la figure.`,\n    }\n  }\n  if (matchPoints3.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a plusieurs points nommés $${label3}$ dans la figure.`,\n    }\n  }\n  let isValid = true\n  const point1 = matchPoints1[0]\n  const point2 = matchPoints2[0]\n  const point3 = matchPoints3[0]\n  for (let i = 0; i < 3; i++) {\n    isValid =\n      isValid &&\n      round(calculAngle(point1, point2, point3), 2) === round(angle, 2)\n    syncShake({ figure })\n  }\n  if (isValid) {\n    return {\n      isValid,\n      message: `L'angle $\\\\widehat{${label1}${label2}${label3}}$ est bien toujours égal à ${angle}°.`,\n    }\n  }\n  return {\n    isValid,\n    message: `L'angle $\\\\widehat{${label1}${label2}${label3}}$ n'est pas toujours égal à ${angle}°.`,\n  }\n}\n","import type { Coords } from '../elements/calculus/Coords'\nimport type Circle from '../elements/lines/Circle'\nimport type Figure from '../Figure'\nimport { round } from '../lib/format'\n\nexport default function checkCircle({\n  center,\n  figure,\n  labelCenter,\n  radius,\n}: {\n  center: Coords\n  figure: Figure\n  labelCenter?: string\n  radius: number\n}) {\n  const allCircles = [...figure.elements.values()].filter((e) =>\n    e.type.includes('Circle'),\n  ) as Circle[]\n  let circlesWithGoodLabelCenter: Circle[] = []\n  if (labelCenter) {\n    circlesWithGoodLabelCenter = allCircles.filter(\n      (c) => c.center.label === labelCenter,\n    )\n  }\n  if (allCircles.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de cercle dans la figure.`,\n    }\n  }\n  const goodCircle = allCircles.find(\n    (c) =>\n      round(c.center.x) === round(center.x) &&\n      round(c.center.y) === round(center.y) &&\n      round(c.radius) === round(radius),\n  )\n  if (!goodCircle) {\n    return {\n      isValid: false,\n      message: `Le cercle de centre $(${round(center.x, 2)}\\\\;;\\\\;${round(center.y, 2)})$ et de rayon ${round(radius, 1)} n'existe pas dans la figure.`,\n    }\n  }\n  if (labelCenter) {\n    const goodCircleWithGoodLabelCenter = circlesWithGoodLabelCenter.find(\n      (c) =>\n        round(c.center.x) === round(center.x) &&\n        round(c.center.y) === round(center.y) &&\n        round(c.radius) === round(radius),\n    )\n    if (!goodCircleWithGoodLabelCenter) {\n      return {\n        isValid: false,\n        message: `Le cercle de centre $(${round(center.x, 2)}\\\\;;\\\\;${round(center.y, 2)})$ et de rayon ${round(radius, 2)} est bien tracé mais son centre n\\'est pas ${labelCenter}.`,\n        element: goodCircle,\n      }\n    }\n    return {\n      isValid: true,\n      message: '',\n      element: goodCircleWithGoodLabelCenter,\n    }\n  }\n\n  return {\n    isValid: true,\n    message: '',\n    element: goodCircle,\n  }\n}\n","/** Transforme #F15929 en {rgb,255:red,241; green,89; blue,41} : indispensable avec tikZ */\nfunction hexToTikzRgb(hex: string): string {\n  const hexWithoutHashtag = hex.replace(/^#/, '')\n  const bigint = Number.parseInt(hexWithoutHashtag, 16)\n  const r = (bigint >> 16) & 255\n  const g = (bigint >> 8) & 255\n  const b = bigint & 255\n  return `{rgb,255:red,${r}; green,${g}; blue,${b}}`\n}\n\n/** Transforme rgba(241, 89, 41, 0.5) en {rgb,255:red,241; green,89; blue,41} : indispensable avec tikZ */\nfunction rgbaToTikzRgb(rgba: string): string {\n  const rgbaValues = rgba.match(/\\d+(\\.\\d+)?/g)\n  if (rgbaValues && rgbaValues.length >= 3) {\n    const r = Number.parseInt(rgbaValues[0])\n    const g = Number.parseInt(rgbaValues[1])\n    const b = Number.parseInt(rgbaValues[2])\n    return `{rgb,255:red,${r}; green,${g}; blue,${b}}`\n  }\n  throw new Error('Invalid RGBA color format')\n}\n\nexport function colorLatex(color: string) {\n  if (color.includes('#')) return hexToTikzRgb(color)\n  if (color.includes('rgba')) return rgbaToTikzRgb(color)\n  if (color === 'currentColor') return 'black'\n  return color\n}\n","import type DynamicNumber from '../dynamicNumbers/DynamicNumber'\nimport type Figure from '../Figure'\nimport { colorLatex } from '../lib/handleColors'\nimport { orangeMathalea } from './defaultValues'\nimport type { OptionsElement2D, typeElement2D } from './interfaces'\nimport type Transformation from './Transformation'\n\nabstract class Element2D {\n  /** Couleur de l'élément au format HTML */\n  protected _color: string\n  /** Tracé en pointillés ? */\n  protected _isDashed: boolean\n  /** Est-ce que le pointeur est au dessus de l'élément ? */\n  protected _isHover = false\n  /** Est-ce que l'élément est sélectionné ? */\n  protected _isSelected = false\n  /** Visible ? */\n  protected _isVisible: boolean\n  /** Opacité */\n  protected _opacity = 1\n  /** Épaisseur du tracé de l'élément */\n  protected _thickness: number\n  /** Espace de travail dans lequel l'élément sera représenté */\n  figure: Figure\n  /** Groupe SVG dans lequel sera déssiné l'élément */\n  groupSvg: SVGElement\n  /** Identifiant de l'objet qui servira de clé dans le Map de tous les éléments */\n  readonly id: string\n  /** Les élément qui ont isChild à true sont ceux qui sont construits par d'autres et qui n'ont pas à être dans la sauvegarde */\n  readonly isChild: boolean\n  /** Est-ce qu'un élément est caché ? */\n  isHidden = false\n  /** Est-ce que l'élément peut être supprimé ? */\n  isDeletable = true\n  /** Pour l'interface graphique, détermine si un élément apparaitra ou pas dans la liste */\n  isSelectable: boolean\n  /** Liste des enfants à notifier à chaque fois que l'élément est déplacé */\n  observers: Array<DynamicNumber | Element2D>\n  /** Indique la transformation subit par le point */\n  transformation?: Transformation\n  /** Type d'objet mathématique */\n  type!: typeElement2D\n  constructor(\n    figure: Figure,\n    {\n      color,\n      id,\n      isChild,\n      isDashed,\n      isSelectable,\n      isVisible,\n      opacity,\n      thickness,\n    }: OptionsElement2D,\n  ) {\n    this.figure = figure\n    this.isChild = isChild ?? false\n    /** Certains éléments sont construits par d'autres (codages, points temporaires, labels...)\n     *  on les nomme elementTmpX, on met this.child à true et on ne les sauvegarde pas dans le Json\n     *  mais ils sont bien présents dans figure.elements\n     */\n    this.isSelectable = isSelectable ?? true\n    if (id == null || this.figure.elements.has(id)) {\n      if (id != null && this.figure.elements.has(id)) {\n        throw Error(`id ${id} déjà utilisé`)\n      }\n      if (this.isChild) {\n        let cpt = 0\n        while (this.figure.elements.has(`elementTmp${cpt.toString()}`)) {\n          cpt++\n        }\n        this.id = `elementTmp${cpt.toString()}`\n      } else {\n        let cpt = 0\n        while (this.figure.elements.has(`element${cpt.toString()}`)) {\n          cpt++\n        }\n        this.id = `element${cpt.toString()}`\n      }\n    } else {\n      this.id = id\n    }\n    this.figure.elements.set(this.id, this)\n    this._color = color ?? this.figure.options.color\n    this._thickness = thickness ?? this.figure.options.thickness\n    this._isDashed = isDashed ?? this.figure.options.isDashed\n    this._isVisible = isVisible ?? true\n    this._opacity = opacity ?? 1\n    this.groupSvg = document.createElementNS('http://www.w3.org/2000/svg', 'g')\n    this.observers = []\n  }\n\n  /** Change la couleur de manière temporaire sans changer les attributs de l'élément */\n  changeColor(element: Element2D, color: string): void {\n    const fixedColor = color === 'mathalea' ? orangeMathalea : color\n    if (element.groupSvg.children.length > 0) {\n      for (const line of Array.from(element.groupSvg.children)) {\n        line.setAttribute('stroke', fixedColor)\n      }\n    } else {\n      // Le segment ou le cercle ne sont pas des groupes, ce sont des éléments uniques sans children\n      element.groupSvg.setAttribute('stroke', fixedColor)\n    }\n  }\n\n  distancePointer(_: number, __: number): number {\n    return Number.POSITIVE_INFINITY\n  }\n\n  draw(): void {}\n\n  /** Cacher l'élément de façon temporaire et permettre à l'utilisateur d'apercevoir l'élément en cliquant sur l'icone Afficher/Cacher */\n  hide(): void {\n    this.isVisible = false\n    this.isHidden = true\n  }\n\n  jsonOptions(): object {\n    const defaultOptions = {\n      color: this.color,\n      id: this.id,\n      isChild: this.isChild,\n      isDashed: this.isDashed,\n      isVisible: this.isVisible,\n      isSelectable: this.isSelectable,\n      isDeletable: this.isDeletable,\n      opacity: this.opacity,\n      thickness: this.thickness,\n      type: this.type,\n    }\n    if (this.transformation?.type === 'dilate') {\n      return {\n        ...defaultOptions,\n        idTransformationCenter: this.transformation.center.id,\n        idTransformationOrigin: this.transformation.origin.id,\n        transformationFactor: this.transformation.factor,\n        type: 'ElementByDilate',\n      }\n    }\n    if (this.transformation?.type === 'reflect') {\n      return {\n        ...defaultOptions,\n        idTransformationCenter: this.transformation.center.id,\n        idTransformationOrigin: this.transformation.origin.id,\n        type: 'ElementByReflect',\n      }\n    }\n    if (this.transformation?.type === 'reflectOverLine') {\n      return {\n        ...defaultOptions,\n        idTransformationLine: this.transformation.line.id,\n        idTransformationOrigin: this.transformation.origin.id,\n        type: 'ElementByReflectOverLine',\n      }\n    }\n    if (this.transformation?.type === 'rotation') {\n      return {\n        ...defaultOptions,\n        idTransformationCenter: this.transformation.center.id,\n        idTransformationOrigin: this.transformation.origin.id,\n        transformationAngle: this.transformation.angle,\n        type: 'ElementByRotation',\n      }\n    }\n    if (this.transformation?.type === 'translation') {\n      return {\n        ...defaultOptions,\n        idTransformationPoint1: this.transformation.point1.id,\n        idTransformationPoint2: this.transformation.point2.id,\n        idTransformationOrigin: this.transformation.origin.id,\n        type: 'ElementByTranslation',\n      }\n    }\n    return defaultOptions\n  }\n\n  /** Prévenir les enfants qu'ils doivent se mettre à jour */\n  notify(): void {\n    for (const element of this.observers) {\n      element.update()\n    }\n  }\n\n  remove(): void {\n    if (!this.isDeletable) return\n    const element = this.figure.elements.get(this.id)\n    const observers = element?.observers\n    if (observers !== undefined) {\n      for (const observer of observers) {\n        observer.remove()\n      }\n    }\n    if (element !== undefined) this.figure.elements.delete(this.id)\n    this.groupSvg.remove()\n  }\n\n  /** Modifie la couleur et l'épaisseur de l'élément */\n  setVisibilityColorThicknessAndDashed(): void {\n    this.isVisible = this._isVisible\n    this.color = this._color\n    this.thickness = this._thickness\n    if (this.type.includes('Point')) return\n    this.isDashed = this._isDashed\n  }\n\n  /** Afficher l'élément */\n  show(): void {\n    this.isVisible = true\n  }\n\n  /** S'abonner aux modifications des éléments parents\n   * Par exemple le segment s'abonnera aux modifications de ses deux extrémités\n   */\n  subscribe(element: DynamicNumber | Element2D): void {\n    this.observers.push(element)\n  }\n\n  temp(): Element2D {\n    this.figure.tmpElements.push(this)\n    this.color = this.figure.options.tmpColor\n    this.thickness = this.figure.options.tmpThickness\n    if ('isDashed' in this) this.isDashed = this.figure.options.tmpIsDashed\n    if ('fillColor' in this) this.fillColor = this.figure.options.tmpFillColor\n    if ('fillOpacity' in this)\n      this.fillOpacity = this.figure.options.tmpFillOpacity\n    return this\n  }\n\n  tempShow(): void {\n    this.isVisible = true\n    this.changeColor(this, this.figure.options.tmpColor)\n    changeThickness(this, 0.5)\n  }\n\n  /** Personnalise la sortie JSON de l'élément pour la sauvegarde */\n  toJSON(): object {\n    return {\n      ...this.jsonOptions,\n    }\n  }\n\n  /**\n   * Annuler l'abonnement\n   */\n  unsubscribe(element: Element2D): void {\n    this.observers = this.observers.filter((observer) => observer !== element)\n  }\n\n  /** Créé ou met à jour le groupe SVG de l'élément */\n  update(): void {}\n\n  /** Change la couleur des tracés de l'élément */\n  set color(color: string) {\n    this._color = color\n    this.changeColor(this, color)\n  }\n\n  /** Couleur au format HTML */\n  get color(): string {\n    return this._color\n  }\n\n  get description(): string {\n    return this.id\n  }\n\n  set isDashed(isDashed) {\n    if (isDashed) {\n      this.groupSvg.setAttribute('stroke-dasharray', '4 3')\n    } else {\n      this.groupSvg.removeAttribute('stroke-dasharray')\n    }\n    this._isDashed = isDashed\n  }\n\n  /** Pointillés */\n  get isDashed(): boolean {\n    return this._isDashed\n  }\n\n  get isHover(): boolean {\n    return this._isHover\n  }\n\n  set isHover(isHover: boolean) {\n    if (this.figure.currentState === 'HIDE') {\n      if (isHover) {\n        this.changeColor(this, orangeMathalea)\n        changeThickness(this, this._thickness + 2)\n      } else if (!this._isSelected && !this.isHidden) {\n        this.changeColor(this, this._color)\n        changeThickness(this, this._thickness)\n      } else {\n        this.tempShow()\n      }\n    } else {\n      if (isHover) {\n        this.changeColor(this, orangeMathalea)\n        changeThickness(this, this._thickness + 2)\n      } else if (!this._isSelected && !this.isHidden) {\n        this.changeColor(this, this._color)\n        changeThickness(this, this._thickness)\n      }\n    }\n    this._isHover = isHover\n  }\n\n  get isSelected(): boolean {\n    return this._isSelected\n  }\n\n  set isSelected(isSelected: boolean) {\n    if (isSelected) {\n      this.changeColor(this, orangeMathalea)\n      changeThickness(this, this._thickness + 2)\n    } else if (!this._isHover) {\n      this.changeColor(this, this._color)\n      changeThickness(this, this._thickness)\n    }\n    this._isSelected = isSelected\n  }\n\n  /** Affiche ou masque l'élément sans permettre à l'utilisateur de modifier l'état avec l'interface graphique */\n  set isVisible(isVisible) {\n    if (isVisible) {\n      this.figure.svg.appendChild(this.groupSvg)\n    } else {\n      this.groupSvg.remove()\n    }\n    this._isVisible = isVisible\n  }\n\n  /** Est-il visible ? Le groupe SVG est-il dans le code SVG ? */\n  get isVisible(): boolean {\n    return this._isVisible\n  }\n\n  /** Génère le code LaTeX de l'élément */\n  get latex(): string {\n    return `% ${this.type} ${this.id}} n'a pas de sortie LaTeX`\n  }\n\n  get latexOptions(): string {\n    const options = []\n    if (this.color !== 'black' && this.color !== '') {\n      options.push(`color=${colorLatex(this.color)}`)\n    }\n    if (this.thickness !== 1) {\n      options.push(`line width=${this.thickness}`)\n    }\n    if (this.isDashed) {\n      options.push('dashed')\n    }\n    if (options.length > 0) {\n      return `[${options.join(',')}]`\n    }\n    return ''\n  }\n\n  get opacity(): number {\n    return this._opacity\n  }\n\n  set opacity(opacity: number) {\n    this._opacity = opacity\n    this.groupSvg.setAttribute('opacity', `${opacity}`)\n  }\n\n  /** Change l'épaisseur des tracés */\n  set thickness(thickness: number) {\n    this._thickness = thickness\n    changeThickness(this, thickness)\n  }\n\n  /** Épaisseur des tracés */\n  get thickness(): number {\n    return this._thickness\n  }\n}\n\nfunction changeThickness(element: Element2D, thickness: number): void {\n  if (element.groupSvg.children.length > 0) {\n    for (const line of Array.from(element.groupSvg.children)) {\n      if (\n        line.getAttribute('stroke-readonly') === null ||\n        line.getAttribute('stroke-readonly') === '0'\n      ) {\n        line.setAttribute('stroke-width', `${thickness}`)\n      }\n    }\n  } else {\n    // Le segment par exemple n'est pas un groupe mais un élément unique sans children\n    element.groupSvg.setAttribute('stroke-width', `${thickness}`)\n  }\n}\nexport default Element2D\n","import Element2D from '../elements/Element2D'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nimport { displayNumber, round } from '../lib/format'\n\nexport default function checkCoords({\n  checkOnlyAbscissa = false,\n  figure,\n  label,\n  x,\n  y = 0,\n  color,\n}: {\n  checkOnlyAbscissa?: boolean\n  figure: Figure\n  label?: string\n  x: number\n  y?: number\n  color?: string\n}): { isValid: boolean; message: string; points: Point[] } {\n  let points: Point[] = []\n  if (color !== undefined) {\n    points = [...figure.elements.values()].filter(\n      (e) =>\n        e instanceof Element2D &&\n        e.type !== 'pointer' &&\n        e.type.includes('Point') &&\n        e.color === color,\n    ) as Point[]\n  } else {\n    points = [...figure.elements.values()].filter(\n      (e) =>\n        e.type !== 'pointer' &&\n        e.type.startsWith('Point') &&\n        e instanceof Element2D &&\n        e.isSelectable,\n    ) as Point[]\n  }\n  if (label !== undefined) {\n    const matchPoints = points.filter((p) => p.label === label)\n    if (matchPoints.length === 0) {\n      return {\n        isValid: false,\n        message: `Il n'y a pas de point $${label}$ dans la figure.`,\n        points: [],\n      }\n    }\n    if (matchPoints.length > 1) {\n      return {\n        isValid: false,\n        message: `Il y a ${matchPoints.length} points $${label}$ dans la figure.`,\n        points: matchPoints,\n      }\n    }\n    const point = matchPoints[0]\n    const isValid = round(point.x) === round(x) && round(point.y) === round(y)\n    let message: string\n    if (checkOnlyAbscissa) {\n      message = isValid\n        ? ''\n        : `Le point $${label}$ a pour abscisse $${displayNumber(point.x)}$ et non $${displayNumber(x)}$.`\n    } else {\n      message = isValid\n        ? ''\n        : `Le point $${label}$ a pour coordonnées $(${displayNumber(point.x)}\\\\;;\\\\;${displayNumber(point.y)})$ et non $(${displayNumber(x)}\\\\;;\\\\;${displayNumber(y)})$.`\n    }\n    return { isValid, message, points: [point] }\n  }\n  let matchPoints = points.filter(\n    (p) => round(p.x) === round(x) && round(p.y) === round(y),\n  )\n  if (checkOnlyAbscissa) {\n    matchPoints = points.filter((p) => round(p.x) === round(x))\n  }\n  if (matchPoints.length === 0) {\n    if (checkOnlyAbscissa) {\n      return {\n        isValid: false,\n        message: `Il n'y a pas de point d'abscisse $${displayNumber(x)}$ dans la figure.`,\n        points: [],\n      }\n    }\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point en $(${displayNumber(x)}\\\\;;\\\\;${displayNumber(y)})$ dans la figure.`,\n      points: [],\n    }\n  }\n  if (matchPoints.length > 1) {\n    if (checkOnlyAbscissa) {\n      return {\n        isValid: true,\n        message: `Il y a ${matchPoints.length} points d'abscisse $${displayNumber(x)}$ dans la figure.`,\n        points: matchPoints,\n      }\n    }\n    return {\n      isValid: true,\n      message: `Il y a ${matchPoints.length} points de coordonnées $(${displayNumber(x)}\\\\;;\\\\;${displayNumber(y)})$ dans la figure.`,\n      points: matchPoints,\n    }\n  }\n  const point = matchPoints[0]\n  return { isValid: true, message: '', points: [point] }\n}\n","import { distance as calculDistance } from '../elements/calculus/Coords'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\nimport syncShake from './syncShake'\n\nexport default function checkDistance({\n  distance,\n  figure,\n  label1,\n  label2,\n  shake = true,\n  time = 0,\n}: {\n  distance: number\n  figure: Figure\n  label1: string\n  label2: string\n  shake?: boolean\n  time?: number\n}): { isValid: boolean; message: string } {\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e.type.includes('Point'),\n  ) as Point[]\n  const matchPoints1 = points.filter((p) => p.label === label1)\n  if (matchPoints1.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${label1}$ dans la figure.`,\n    }\n  }\n  if (matchPoints1.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPoints1.length} points $${label1}$ dans la figure.`,\n    }\n  }\n  const matchPoints2 = points.filter((p) => p.label === label2)\n  if (matchPoints2.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${label2}$ dans la figure.`,\n    }\n  }\n  if (matchPoints2.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPoints2.length} points $${label2}$ dans la figure.`,\n    }\n  }\n  const point1 = matchPoints1[0]\n  const point2 = matchPoints2[0]\n  let isValid = Math.abs(calculDistance(point1, point2) - distance) < 0.001\n  if (shake) {\n    syncShake({ figure, time })\n    isValid =\n      isValid && Math.abs(calculDistance(point1, point2) - distance) < 0.001\n    syncShake({ figure, time })\n    isValid =\n      isValid && Math.abs(calculDistance(point1, point2) - distance) < 0.001\n  }\n  let message = ''\n  if (isValid) {\n    message = `La distance entre les points $${label1}$ et $${label2}$ est bien toujours égale à ${distance}.`\n  } else {\n    message = `La distance entre les points $${label1}$ et $${label2}$ n'est pas toujours égale à ${distance}.`\n  }\n  return { isValid, message }\n}\n","import { type Coords, equationLine } from '../elements/calculus/Coords'\nimport type Line from '../elements/lines/Line'\nimport type Segment from '../elements/lines/Segment'\nimport type Figure from '../Figure'\n\nimport { round } from '../lib/format'\n\nexport function checkLineFromLabels({\n  figure,\n  nameLine,\n  color,\n}: {\n  figure: Figure\n  nameLine: string[] | string\n  color?: string\n}): {\n  isValid: boolean\n  message: string\n} {\n  let lines: Line[]\n  let lines1: Line[] = []\n  let lines2: Line[] = []\n\n  lines = [...figure.elements.values()].filter((e) =>\n    e.type === 'Line',\n  ) as Line[]\n  if (lines.length === 0)\n    return { isValid: false, message: \"Il n'y a pas de droite dans la figure.\" }\n\n  const nomLigne1 = Array.isArray(nameLine) ? nameLine[0] : nameLine\n  if (lines.length !== 0) {\n    lines1 = lines.filter((e) => nameLine.includes(e.notation) || nameLine.includes(e.point1.label + e.point2.label) || nameLine.includes(e.point2.label + e.point1.label)  )\n    if (lines1.length === 0)\n      return {\n        isValid: false,\n        message: `${nomLigne1} n'existe pas sur la figure.`,\n      }\n  }\n\n  if (color !== undefined) {\n    lines2 = lines1.filter((e) => e.color === color)\n    if (lines2.length === 0)\n      return {\n        isValid: false,\n        message:\n          \"Il n'y a pas de droite de la couleur demandée dans la figure.\",\n      }\n    \n  }\n  return { isValid: true, message: 'La droite a bien été tracée.' }\n}\n\nexport default function checkLine({\n  figure,\n  point1,\n  point2,\n  color,\n}: {\n  figure: Figure\n  point1: Coords\n  point2: Coords\n  color?: string\n}): {\n  isValid: boolean\n  message: string\n} {\n  let lines: Segment[]\n  let lines2: Segment[]\n\n  lines = [...figure.elements.values()].filter((e) =>\n    e.type.includes('Line'),\n  ) as Segment[]\n  if (lines.length === 0)\n    return { isValid: false, message: \"Il n'y a pas de droite dans la figure.\" }\n\n  if (color !== undefined) {\n    lines2 = lines.filter((e) => e.color === color)\n    if (lines2.length === 0)\n      return {\n        isValid: false,\n        message:\n          \"Il n'y a pas de droite de la couleur demandée dans la figure.\",\n      }\n\n    const [aa, bb, cc] = equationLine(point1, point2)\n    for (const line of lines2) {\n      const [a2, b2, c2] = line.equation\n      if (areCoincident(aa, bb, cc, a2, b2, c2)) {\n        return { isValid: true, message: 'La droite a bien été tracée.' }\n      }\n    }\n  }\n\n  const [a, b, c] = equationLine(point1, point2)\n  for (const line of lines) {\n    const [a2, b2, c2] = line.equation\n    if (areCoincident(a, b, c, a2, b2, c2)) {\n      if (color === undefined)\n        return { isValid: true, message: 'La droite a bien été tracée.' }\n      return {\n        isValid: false,\n        message: \"La droite n'est pas tracée de la bonne couleur.\",\n      }\n    }\n  }\n\n  return {\n    isValid: false,\n    message: 'Aucune droite ne correspond à la réponse attendue.',\n  }\n}\n\nfunction areCoincident(\n  a1: number,\n  b1: number,\n  c1: number,\n  a2: number,\n  b2: number,\n  c2: number,\n  precision = 2,\n): boolean {\n  // Cas des droites verticales\n  if (b1 === 0 && b2 === 0) {\n    return c1 / a1 === c2 / a2\n  }\n  const slope1 = b1 !== 0 ? -a1 / b1 : Number.POSITIVE_INFINITY\n  const slope2 = b2 !== 0 ? -a2 / b2 : Number.POSITIVE_INFINITY\n\n  const intercept1 = b1 !== 0 ? -c1 / b1 : Number.NaN\n  const intercept2 = b2 !== 0 ? -c2 / b2 : Number.NaN\n\n  return (\n    round(slope1, precision) === round(slope2, precision) &&\n    round(intercept1, precision) === round(intercept2, precision)\n  )\n}\n","import type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nimport { round } from '../lib/format'\nimport syncShake from './syncShake'\n\n/** Les labels sont de la forme AB avec A et B les labels de deux points de la droite */\nexport default function checkParallel({\n  figure,\n  label1,\n  label2,\n  time = 0,\n}: {\n  figure: Figure\n  label1: string\n  label2: string\n  time?: number\n}): {\n  isValid: boolean\n  message: string\n} {\n  const [a, b] = label1.split('')\n  const [c, d] = label2.split('')\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e.type.includes('Point'),\n  ) as Point[]\n  const matchPointsA = points.filter((p) => p.label === a)\n  if (matchPointsA.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${a}$ dans la figure.`,\n    }\n  }\n  if (matchPointsA.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsA.length} points $${a}$ dans la figure.`,\n    }\n  }\n  const matchPointsB = points.filter((p) => p.label === b)\n  if (matchPointsB.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${b}$ dans la figure.`,\n    }\n  }\n  if (matchPointsB.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsB.length} points $${b}$ dans la figure.`,\n    }\n  }\n  const matchPointsC = points.filter((p) => p.label === c)\n  if (matchPointsC.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${c}$ dans la figure.`,\n    }\n  }\n  if (matchPointsC.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsC.length} points $${c}$ dans la figure.`,\n    }\n  }\n  const matchPointsD = points.filter((p) => p.label === d)\n  if (matchPointsD.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${d}$ dans la figure.`,\n    }\n  }\n  if (matchPointsD.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsD.length} points $${d}$ dans la figure.`,\n    }\n  }\n  const pointA = matchPointsA[0]\n  const pointB = matchPointsB[0]\n  const pointC = matchPointsC[0]\n  const pointD = matchPointsD[0]\n  let isValid =\n    round((pointB.y - pointA.y) / (pointB.x - pointA.x), 2) ===\n    round((pointD.y - pointC.y) / (pointD.x - pointC.x), 2)\n  syncShake({ figure, time })\n  isValid =\n    isValid &&\n    round((pointB.y - pointA.y) / (pointB.x - pointA.x), 2) ===\n      round((pointD.y - pointC.y) / (pointD.x - pointC.x), 2)\n  syncShake({ figure, time })\n  isValid =\n    isValid &&\n    round((pointB.y - pointA.y) / (pointB.x - pointA.x), 2) ===\n      round((pointD.y - pointC.y) / (pointD.x - pointC.x), 2)\n  const message = isValid\n    ? `Les droites $(${a}${b})$ et $(${c}${d})$ sont bien toujours parallèles.`\n    : `Les droites $(${a}${b})$ et $(${c}${d})$ ne sont pas toujours parallèles.`\n  return { isValid, message }\n}\n","import type Figure from '../../Figure'\nimport { distance, similitudeCoord } from '../calculus/Coords'\n\nimport Element2D from '../Element2D'\nimport type { Binome, OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\n\n/**\n * Trace un segment qui a pour extrémités deux points donnés\n * Si un point a des coordonnées non définies alors le segment est effacé momentannément\n * C'est la classe parent de celles qui permettent de tracer une droite ou une demi-droite\n */\nclass Segment extends Element2D {\n  borderSize: number\n  /** Élément parent avec lequel il est lié pour le changement de style (comme les côtés d'un polygone) */\n  createdBy?: Element2D\n  /** Première extrémité du segment */\n  point1: Point\n  /** Deuxième extrémité du segment */\n  point2: Point\n  /** Détermine s'il faut afficher les deux extrémités, que celle de gauche ou que celle de droite */\n  shape?: '->' | '-|' | '' | '<-' | '<->' | '<-|' | '|-' | '|->' | '|-|'\n  svgArrow1!: SVGElement\n  svgArrow2!: SVGElement\n  svgBorder1!: SVGElement\n  svgBorder2!: SVGElement\n  svgLine!: SVGElement\n  constructor(\n    figure: Figure,\n    {\n      borderSize,\n      color = figure.options.color,\n      isDashed = figure.options.isDashed,\n      point1,\n      point2,\n      shape = '',\n      thickness = figure.options.thickness,\n      ...options\n    }: {\n      borderSize?: number\n      point1: Point\n      point2: Point\n      shape?: '->' | '-|' | '' | '<-' | '<->' | '<-|' | '|-' | '|->' | '|-|'\n    } & OptionsElement2D,\n  ) {\n    super(figure, options)\n    this.type = 'Segment'\n    this.point1 = point1\n    this.point2 = point2\n    this.shape = shape\n    this.borderSize = borderSize ?? figure.options.borderSize\n    this.color = color\n    this.thickness = thickness\n    this.isDashed = isDashed\n    this.point1.subscribe(this)\n    this.point2.subscribe(this)\n  }\n\n  dilate(center: Point, factor: number, options?: OptionsElement2D): Segment {\n    const newPoint1 = this.point1.dilate(center, factor, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint2 = this.point2.dilate(center, factor, {\n      isChild: true,\n      isVisible: false,\n      ...options,\n    })\n    let type = this.type as 'Line' | 'Ray' | 'Segment' | 'LineParallel'\n    if (type !== 'Ray' && type !== 'Segment') type = 'Line' // Gestion de toutes les droites particulières\n    const newSegment = this.figure.create(type, {\n      point1: newPoint1,\n      point2: newPoint2,\n    })\n    newSegment.transformation = { center, factor, origin: this, type: 'dilate' }\n    return newSegment\n  }\n\n  distancePointer(x: number, y: number): number {\n    const pointerCoords = { x, y }\n    // Calculer la distance entre le point donné et les extrémités du segment\n    const distanceToP1 = distance(pointerCoords, this.point1)\n    const distanceToP2 = distance(pointerCoords, this.point2)\n\n    // Trouver la projection du point sur le segment\n    const segmentLength = distance(this.point1, this.point2)\n    const projection =\n      ((x - this.point1.x) * (this.point2.x - this.point1.x) +\n        (y - this.point1.y) * (this.point2.y - this.point1.y)) /\n      segmentLength ** 2\n    // La distance minimale est la distance à l'une des extrémités si la projection est en dehors du segment\n    if (projection < 0) {\n      return distanceToP1\n    }\n    if (projection > 1) {\n      return distanceToP2\n    }\n    // Calculer la distance verticale entre le point et le segment\n    const closestX =\n      this.point1.x + projection * (this.point2.x - this.point1.x)\n    const closestY =\n      this.point1.y + projection * (this.point2.y - this.point1.y)\n    const closest = { x: closestX, y: closestY }\n    return distance(pointerCoords, closest)\n  }\n\n  draw(): void {\n    this.svgLine = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'line',\n    )\n    this.groupSvg.appendChild(this.svgLine)\n    if (this.shape !== '') {\n      this.svgBorder1 = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      this.svgBorder2 = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      this.svgArrow1 = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'polyline',\n      )\n      this.svgArrow2 = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'polyline',\n      )\n      this.groupSvg.appendChild(this.svgBorder1)\n      this.groupSvg.appendChild(this.svgBorder2)\n      this.groupSvg.appendChild(this.svgArrow1)\n      this.groupSvg.appendChild(this.svgArrow2)\n    }\n    this.setVisibilityColorThicknessAndDashed()\n    this.update()\n  }\n\n  drawArrow1(): void {\n    const a = { x: this.point1.x, y: this.point1.y }\n    const b = { x: this.point2.x, y: this.point2.y }\n    const l = Math.hypot(\n      this.point1.x - this.point2.x,\n      this.point1.y - this.point2.y,\n    )\n    const { x: x1, y: y1 } = similitudeCoord(\n      b,\n      a,\n      (1 / l) * this.borderSize * 2,\n      45,\n    )\n    const { x: x2, y: y2 } = similitudeCoord(\n      b,\n      a,\n      (1 / l) * this.borderSize * 2,\n      -45,\n    )\n    const x1Svg = this.figure.xToSx(x1)\n    const x2Svg = this.figure.xToSx(x2)\n    const y1Svg = this.figure.yToSy(y1)\n    const y2Svg = this.figure.yToSy(y2)\n    const axSvg = this.figure.xToSx(a.x)\n    const aySvg = this.figure.yToSy(a.y)\n    if (allAreNumbers(x1Svg, x2Svg, y1Svg, y2Svg, axSvg, aySvg)) {\n      this.svgArrow1.setAttribute(\n        'points',\n        `${x1Svg},${y1Svg} ${axSvg},${aySvg} ${x2Svg},${y2Svg}`,\n      )\n      this.groupSvg.appendChild(this.svgArrow1)\n    }\n  }\n\n  drawArrow2(): void {\n    const a = { x: this.point1.x, y: this.point1.y }\n    const b = { x: this.point2.x, y: this.point2.y }\n    const l = Math.hypot(\n      this.point1.x - this.point2.x,\n      this.point1.y - this.point2.y,\n    )\n    const { x: x1, y: y1 } = similitudeCoord(\n      a,\n      b,\n      (1 / l) * this.borderSize * 2,\n      45,\n    )\n    const { x: x2, y: y2 } = similitudeCoord(\n      a,\n      b,\n      (1 / l) * this.borderSize * 2,\n      -45,\n    )\n    const x1Svg = this.figure.xToSx(x1)\n    const x2Svg = this.figure.xToSx(x2)\n    const y1Svg = this.figure.yToSy(y1)\n    const y2Svg = this.figure.yToSy(y2)\n    const bxSvg = this.figure.xToSx(b.x)\n    const bySvg = this.figure.yToSy(b.y)\n    if (allAreNumbers(x1Svg, x2Svg, y1Svg, y2Svg, bxSvg, bySvg)) {\n      this.svgArrow2.setAttribute(\n        'points',\n        `${x1Svg},${y1Svg} ${bxSvg},${bySvg} ${x2Svg},${y2Svg}`,\n      )\n      this.groupSvg.appendChild(this.svgArrow2)\n    }\n  }\n\n  drawBorder1(): void {\n    const a = { x: this.point1.x, y: this.point1.y }\n    const b = { x: this.point2.x, y: this.point2.y }\n    const l = Math.hypot(\n      this.point1.x - this.point2.x,\n      this.point1.y - this.point2.y,\n    )\n    const { x: x1, y: y1 } = similitudeCoord(\n      b,\n      a,\n      (1 / l) * this.borderSize,\n      90,\n    )\n    const { x: x2, y: y2 } = similitudeCoord(\n      b,\n      a,\n      (1 / l) * this.borderSize,\n      -90,\n    )\n    const x1Svg = this.figure.xToSx(x1).toString()\n    const x2Svg = this.figure.xToSx(x2).toString()\n    const y1Svg = this.figure.yToSy(y1).toString()\n    const y2Svg = this.figure.yToSy(y2).toString()\n    this.svgBorder1.setAttribute('x1', x1Svg)\n    this.svgBorder1.setAttribute('y1', y1Svg)\n    this.svgBorder1.setAttribute('x2', x2Svg)\n    this.svgBorder1.setAttribute('y2', y2Svg)\n    this.groupSvg.appendChild(this.svgBorder1)\n  }\n\n  drawBorder2(): void {\n    const a = { x: this.point1.x, y: this.point1.y }\n    const b = { x: this.point2.x, y: this.point2.y }\n    const l = Math.hypot(\n      this.point1.x - this.point2.x,\n      this.point1.y - this.point2.y,\n    )\n    const { x: x1, y: y1 } = similitudeCoord(\n      a,\n      b,\n      (1 / l) * this.borderSize,\n      90,\n    )\n    const { x: x2, y: y2 } = similitudeCoord(\n      a,\n      b,\n      (1 / l) * this.borderSize,\n      -90,\n    )\n    const x1Svg = this.figure.xToSx(x1).toString()\n    const x2Svg = this.figure.xToSx(x2).toString()\n    const y1Svg = this.figure.yToSy(y1).toString()\n    const y2Svg = this.figure.yToSy(y2).toString()\n    this.svgBorder2.setAttribute('x1', x1Svg)\n    this.svgBorder2.setAttribute('y1', y1Svg)\n    this.svgBorder2.setAttribute('x2', x2Svg)\n    this.svgBorder2.setAttribute('y2', y2Svg)\n    this.groupSvg.appendChild(this.svgBorder2)\n  }\n\n  reflect(center: Point, options?: OptionsElement2D): Segment {\n    const newPoint1 = this.point1.reflect(center, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint2 = this.point2.reflect(center, {\n      isChild: true,\n      isVisible: false,\n    })\n    let type = this.type as 'Line' | 'Ray' | 'Segment' | 'LineParallel'\n    if (type !== 'Ray' && type !== 'Segment') type = 'Line' // Gestion de toutes les droites particulières\n    const result = this.figure.create(type, {\n      point1: newPoint1,\n      point2: newPoint2,\n      ...options,\n    })\n    result.transformation = { center, origin: this, type: 'reflect' }\n    return result\n  }\n\n  reflectOverLine(line: Segment, options?: OptionsElement2D): Segment {\n    const newPoint1 = this.point1.reflectOverLine(line, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint2 = this.point2.reflectOverLine(line, {\n      isChild: true,\n      isVisible: false,\n    })\n    let type = this.type as 'Line' | 'Ray' | 'Segment' | 'LineParallel'\n    if (type !== 'Ray' && type !== 'Segment') type = 'Line' // Gestion de toutes les droites particulières\n    const result = this.figure.create(type, {\n      point1: newPoint1,\n      point2: newPoint2,\n      ...options,\n    })\n    result.transformation = { line, origin: this, type: 'reflectOverLine' }\n    return result\n  }\n\n  rotate(center: Point, angle: number, options?: OptionsElement2D): Segment {\n    const newPoint1 = this.point1.rotate(center, angle, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint2 = this.point2.rotate(center, angle, {\n      isChild: true,\n      isVisible: false,\n      ...options,\n    })\n    let type = this.type as 'Line' | 'Ray' | 'Segment' | 'LineParallel'\n    if (type !== 'Ray' && type !== 'Segment') type = 'Line' // Gestion de toutes les droites particulières\n    const result = this.figure.create(type, {\n      point1: newPoint1,\n      point2: newPoint2,\n    })\n    result.transformation = { angle, center, origin: this, type: 'rotation' }\n    return result\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      borderSize: this.borderSize,\n      idPoint1: this.point1.id,\n      idPoint2: this.point2.id,\n      shape: this.shape,\n    }\n  }\n\n  translate(point1: Point, point2: Point, options: OptionsElement2D) {\n    const newPoint1 = this.point1.translate(point1, point2)\n    const newPoint2 = this.point2.translate(point1, point2)\n    let type = this.type as 'Line' | 'Ray' | 'Segment' | 'LineParallel'\n    if (type !== 'Ray' && type !== 'Segment') type = 'Line' // Gestion de toutes les droites particulières\n    const result = this.figure.create(type, {\n      point1: newPoint1,\n      point2: newPoint2,\n      ...options,\n    })\n    result.transformation = {\n      origin: this,\n      point1,\n      point2,\n      type: 'translation',\n    }\n    return result\n  }\n\n  update(): void {\n    this.notify()\n    if (\n      this.point1.x === undefined ||\n      this.point1.y === undefined ||\n      this.point2.x === undefined ||\n      this.point2.y === undefined ||\n      !Number.isFinite(this.point1.x) ||\n      !Number.isFinite(this.point1.y) ||\n      !Number.isFinite(this.point2.x) ||\n      !Number.isFinite(this.point2.y)\n    ) {\n      this.svgLine.removeAttribute('x1')\n      this.svgLine.removeAttribute('x2')\n      this.svgLine.removeAttribute('y1')\n      this.svgLine.removeAttribute('y2')\n    } else {\n      const x1Svg = this.figure.xToSx(this.point1.x)\n      const x2Svg = this.figure.xToSx(this.point2.x)\n      const y1Svg = this.figure.yToSy(this.point1.y)\n      const y2Svg = this.figure.yToSy(this.point2.y)\n      this.svgLine.setAttribute('x1', `${x1Svg}`)\n      this.svgLine.setAttribute('y1', `${y1Svg}`)\n      this.svgLine.setAttribute('x2', `${x2Svg}`)\n      this.svgLine.setAttribute('y2', `${y2Svg}`)\n    }\n    if (this.shape?.at(0) === '|') {\n      this.drawBorder1()\n      this.svgArrow1?.remove()\n    } else if (this.shape?.at(0) === '<') {\n      this.drawArrow1()\n      this.svgBorder1?.remove()\n    } else {\n      this.svgArrow1?.remove()\n      this.svgBorder1?.remove()\n    }\n    if (this.shape?.at(-1) === '|') {\n      this.drawBorder2()\n      this.svgArrow2.remove()\n    } else if (this.shape?.at(-1) === '>') {\n      this.drawArrow2()\n      this.svgBorder2?.remove()\n    } else {\n      this.svgArrow2?.remove()\n      this.svgBorder2?.remove()\n    }\n  }\n\n  get angleWithHorizontalInDegres(): number {\n    const [a, b] = this.equation\n    const angle = Math.atan2(-a, b)\n    return (angle * 180) / Math.PI\n  }\n\n  get color(): string {\n    return this._color\n  }\n\n  set color(color: string) {\n    super.color = color\n    for (const element of [this.svgArrow1, this.svgArrow2]) {\n      if (element === undefined) continue\n      element.setAttribute('stroke', color)\n      element.setAttribute('fill', color)\n    }\n  }\n\n  get description(): string {\n    return `Segment ${this.notation}`\n  }\n\n  /** Renvoie [a, b, c] tels que ax + by + c = 0 est l'équation de la droite passant par point1 et point2 */\n  get equation(): [number, number, number] {\n    if (\n      this.point1.x === undefined ||\n      this.point1.y === undefined ||\n      this.point2.x === undefined ||\n      this.point2.y === undefined\n    )\n      return [Number.NaN, Number.NaN, Number.NaN]\n    try {\n      const a = this.point1.y - this.point2.y\n      const b = this.point2.x - this.point1.x\n      const c =\n        (this.point1.x - this.point2.x) * this.point1.y +\n        (this.point2.y - this.point1.y) * this.point1.x\n      return [a, b, c]\n    } catch (error) {\n      console.error('Erreur dans Line.equation()', error)\n      // this.exist = false\n      return [Number.NaN, Number.NaN, Number.NaN]\n    }\n  }\n\n  get latex(): string {\n    let result = `%${this.description}`\n    // Nettoyer les crochets s'il y en a déjà dans latexOptions\n    const cleanLatexOptions = this.latexOptions\n      .replace(/^\\[|\\]$/g, '') // supprime les crochets de début et de fin\n      .trim()\n    // Fusionne avec la flèche si définie\n    let allOptions = [cleanLatexOptions, this.shape]\n      .filter(Boolean) // enlève les valeurs nulles ou vides\n      .join(', ') // jointure propre pour TikZ\n    if (allOptions.includes('->') || allOptions.includes('<-')) {\n      allOptions += ', >=stealth'\n    }\n    result += `\\n\\\\draw[${allOptions}] (${this.point1.x}, ${this.point1.y}) -- (${this.point2.x}, ${this.point2.y});`\n    return result\n  }\n\n  get notation(): string {\n    const point1Name =\n      this.point1.label !== '' ? this.point1.label : this.point1.id\n    const point2Name =\n      this.point2.label !== '' ? this.point2.label : this.point2.id\n    return `[${point1Name}${point2Name}]`\n  }\n\n  /**\n   * Vecteur normal à la droite\n   */\n  get unitPerpendicularVectorBinome(): Binome {\n    try {\n      const [a, b] = this.equation\n      return { x: a, y: b }\n    } catch (error) {\n      console.error('Erreur dans Line.directeur()', error)\n      return { x: Number.NaN, y: Number.NaN }\n    }\n  }\n\n  /**\n   * Vecteur directeur de la droite\n   */\n  get unitVectorBinome(): Binome {\n    try {\n      const [a, b] = this.equation\n      return { x: b, y: -a }\n    } catch (error) {\n      console.error('Erreur dans Line.normal()', error)\n      return { x: Number.NaN, y: Number.NaN }\n    }\n  }\n}\n\nexport default Segment\n\nfunction allAreNumbers(...numbers: number[]): boolean {\n  for (const number of numbers) {\n    if (!Number.isFinite(number)) return false\n  }\n  return true\n}\n","import { distance } from '../elements/calculus/Coords'\nimport Segment from '../elements/lines/Segment'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nexport default function checkPerpendicularBisector({\n  color,\n  label1,\n  label2,\n  figure,\n}: {\n  color?: string\n  figure: Figure\n  label1: string\n  label2: string\n}): { isValid: boolean; message: string } {\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e.type.includes('Point'),\n  ) as Point[]\n  const matchPoints1 = points.filter((p) => p.label === label1)\n  const matchPoints2 = points.filter((p) => p.label === label2)\n  if (matchPoints1.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${label1}$ dans la figure.`,\n    }\n  }\n  if (matchPoints1.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a plusieurs points nommés $${label1}$ dans la figure.`,\n    }\n  }\n  if (matchPoints2.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${label2}$ dans la figure.`,\n    }\n  }\n  if (matchPoints2.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a plusieurs points nommés $${label2}$ dans la figure.`,\n    }\n  }\n  let lines = [...figure.elements.values()].filter((e) => e instanceof Segment)\n  if (color !== undefined) {\n    lines = lines.filter((e) => e instanceof Segment && e.color === color)\n    if (lines.length > 1)\n      return {\n        isValid: false,\n        message: `Il y a plusieurs droites de couleur ${color}.`,\n      }\n    if (lines.length === 0)\n      return {\n        isValid: false,\n        message: `Il n'y a aucune droite de couleur ${color}.`,\n      }\n  }\n  if (lines.length === 0) {\n    return { isValid: false, message: \"Aucune droite n'est tracée.\" }\n  }\n  let isValid = false\n  for (const line of lines) {\n    const distAM = distance(line.point1, matchPoints1[0])\n    const distBM = distance(line.point1, matchPoints2[0])\n    const distAN = distance(line.point2, matchPoints1[0])\n    const distBN = distance(line.point2, matchPoints2[0])\n    isValid =\n      Math.abs(distAM - distBM) < 0.001 && Math.abs(distAN - distBN) < 0.001\n    if (isValid) break\n  }\n  let message = isValid\n    ? `La médiatrice de $[${label1 + label2}]$ bien construite`\n    : `La médiatrice de [$${label1 + label2}]$ n'est pas construite`\n  message += color !== undefined && isValid ? ` en ${color}.` : '.'\n  return { isValid, message }\n}\n","import Element2D from '../elements/Element2D'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\nimport { round } from '../lib/format'\n\n/**\n * Idem que checkCoords mais avec un feedback sans coordonnées. Test juste l'existance d'un point et éventuellement son label.\n * @param param0\n * @returns\n */\nexport default function checkPoint({\n  figure,\n  label,\n  x,\n  y,\n  color,\n}: {\n  figure: Figure\n  label?: string\n  x: number\n  y: number\n  color?: string\n}): { isValid: boolean; message: string; points: Point[] } {\n  let points: Point[] = []\n  if (color !== undefined) {\n    points = [...figure.elements.values()].filter(\n      (e) =>\n        e instanceof Element2D &&\n        e.type !== 'pointer' &&\n        e.type === 'Point' &&\n        e.color === color,\n    ) as Point[]\n  } else {\n    points = [...figure.elements.values()].filter(\n      (e) => e.type !== 'pointer' && e.type === 'Point',\n    ) as Point[]\n  }\n  if (label !== undefined) {\n    const matchPoints = points.filter((p) => p.label === label)\n    if (matchPoints.length === 0) {\n      return {\n        isValid: false,\n        message: `Il n'y a pas de point $${label}$ dans la figure.`,\n        points: [],\n      }\n    }\n    if (matchPoints.length > 1) {\n      return {\n        isValid: false,\n        message: `Il y a ${matchPoints.length} points $${label}$ dans la figure.`,\n        points: matchPoints,\n      }\n    }\n    const point = matchPoints[0]\n    const isValid = round(point.x) === round(x) && round(point.y) === round(y)\n    const message = isValid\n      ? ''\n      : `Le point $${label}$ n'est pas  non bien placé dans la figure.`\n    return { isValid, message, points: [point] }\n  }\n  const matchPoints = points.filter(\n    (p) => round(p.x) === round(x) && round(p.y) === round(y),\n  )\n  if (matchPoints.length === 0) {\n    return {\n      isValid: false,\n      message: `Un point attendu n'est pas à sa place dans la figure.`,\n      points: [],\n    }\n  }\n  if (matchPoints.length > 1) {\n    return {\n      isValid: true,\n      message: `Il y a ${matchPoints.length} points confondus à la place d'un point attendu dans la figure.`,\n      points: matchPoints,\n    }\n  }\n  const point = matchPoints[0]\n  return { isValid: true, message: '', points: [point] }\n}\n","import type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nexport function areNumbersOrdered(a: number, b: number, c: number): boolean {\n  // Vérifier si les nombres sont en ordre croissant\n  const isIncreasing = a <= b && b <= c\n  // Vérifier si les nombres sont en ordre décroissant\n  const isDecreasing = a >= b && b >= c\n\n  // Retourner true si l'un des deux ordres est respecté\n  return isIncreasing || isDecreasing\n}\n\n/**\n * Vérifie si un point est sur le segment point1-point2 sans que le segment ne soit tracé mais la droite ou la demi-droite doit l'être.\n * @param {Figure} figure // La figure\n * @param {string} labelPt // Nom du point\n * @param {string} labelPt1 // Nom du point1\n * @param {string} labelPt2 // Nom du point2\n * @example Voir exemples plus adaptés dans Figure.ts\n * @author Eric Elter\n * @returns {{ isValid: boolean, message: string }}\n */\nexport default function checkPointBetween2Points({\n  figure,\n  labelPt,\n  labelPt1, // Je passe par un label et pas par un pt car cela pourrait être un pointOnLine ou un PointIntersectionLL ou .....\n  labelPt2,\n}: {\n  figure: Figure\n  labelPt: string\n  labelPt1: string\n  labelPt2: string\n}): { isValid: boolean; message: string } {\n  const point = [...figure.elements.values()].filter(\n    (e) =>\n      e.type !== 'pointer' &&\n      e.type.includes('Point') &&\n      'label' in e &&\n      e.label === labelPt,\n  ) as Point[]\n  if (point.length === 0)\n    return {\n      isValid: false,\n      message: `Il n'existe pas de point ${labelPt} sur la figure.`,\n    }\n  if (point.length > 1)\n    return {\n      isValid: false,\n      message: `Il existe trop de points ${labelPt} sur la figure.`,\n    }\n\n  const point1 = [...figure.elements.values()].filter(\n    (e) =>\n      e.type !== 'pointer' &&\n      e.type.includes('Point') &&\n      'label' in e &&\n      e.label === labelPt1,\n  ) as Point[]\n  if (point1.length === 0)\n    return {\n      isValid: false,\n      message: `Il n'existe pas de point ${labelPt1} sur la figure.`,\n    }\n  if (point1.length > 1)\n    return {\n      isValid: false,\n      message: `Il existe trop de points ${labelPt1} sur la figure.`,\n    }\n\n  const point2 = [...figure.elements.values()].filter(\n    (e) =>\n      e.type !== 'pointer' &&\n      e.type.includes('Point') &&\n      'label' in e &&\n      e.label === labelPt2,\n  ) as Point[]\n  if (point2.length === 0)\n    return {\n      isValid: false,\n      message: `Il n'existe pas de point ${labelPt2} sur la figure.`,\n    }\n  if (point2.length > 1)\n    return {\n      isValid: false,\n      message: `Il existe trop de points ${labelPt2} sur la figure.`,\n    }\n\n  if (\n    !figure.checkPointOnLine({ labelPt, nameLine: `${labelPt1}${labelPt2}` })\n      .isValid ||\n    !areNumbersOrdered(point1[0].x, point[0].x, point2[0].x) ||\n    !areNumbersOrdered(point1[0].y, point[0].y, point2[0].y)\n  )\n    return {\n      isValid: false,\n      message: `Le point ${labelPt} n'est pas sur le segment[${labelPt1}${labelPt2}].`,\n    }\n\n  return {\n    isValid: true,\n    message: `Le point ${labelPt} est sur le segment[${labelPt1}${labelPt2}].`,\n  }\n}\n","import type Point from '../points/Point'\n\nexport function distance(\n  point1: { x: number; y: number },\n  point2: { x: number; y: number },\n): number {\n  return Math.hypot(point1.x - point2.x, point1.y - point2.y)\n}\n\nexport function getLargeSweep(angle: number): [number, number] {\n  try {\n    let large: 0 | 1\n    let sweep: 0 | 1\n    if (angle > 180) {\n      large = 1\n      sweep = 0\n    } else if (angle < -180) {\n      large = 1\n      sweep = 1\n    } else {\n      large = 0\n      sweep = angle > 0 ? 0 : 1\n    }\n    return [large, sweep]\n  } catch {\n    return [Number.NaN, Number.NaN]\n  }\n}\n\nexport function normalizeAngle(angle: number): number {\n  return angle - 2 * Math.PI * Math.floor((angle + Math.PI) / (2 * Math.PI))\n}\n\nexport function polarToCartesian(\n  center: Point,\n  radius: number,\n  angleInDegrees: number,\n): { x: number; y: number } {\n  const angleInRadians = (angleInDegrees * Math.PI) / 180.0\n\n  return {\n    x: center.x + radius * Math.cos(angleInRadians),\n    y: center.y + radius * Math.sin(angleInRadians),\n  }\n}\n","import type Figure from '../../Figure'\nimport { orangeMathalea } from '../defaultValues'\n\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport type TextByPosition from '../text/TextByPosition'\nimport type Vector from '../vector/Vector'\n\nclass Grid extends Element2D {\n  readonly axeX: boolean\n  readonly axeY: boolean\n  grid: boolean\n  labels: TextByPosition[]\n  vectors: Vector[]\n  readonly labelX: boolean\n  readonly labelY: boolean\n  readonly stepX: number\n  readonly stepY: number\n  readonly subGrid: boolean\n  readonly subGridDivisions: number\n  readonly xMax: number\n  readonly xMin: number\n  readonly yMax: number\n  readonly yMin: number\n  /** Présence du repère O, i, j*/\n  readonly repereOij: boolean\n  /** Épaisseur des traits de la grille principale */\n  readonly strokeWidthGrid: number\n  /** Épaisseur des thicks */\n  readonly thickThickness: number\n  /** Longueur des thicks */\n  readonly thickHeight: number\n  /** Groupe SVG des thicks */\n  protected thicks: SVGElement\n  constructor(\n    figure: Figure,\n    {\n      axeX = true,\n      axeY = true,\n      color = 'black',\n      grid = true,\n      labelX = true,\n      labelY = true,\n      stepX = 1,\n      stepY = 1,\n      subGrid = false,\n      subGridDivisions = 5,\n      xMax = figure.xMax,\n      xMin = figure.xMin,\n      yMax = figure.yMax,\n      yMin = figure.yMin,\n      strokeWidthGrid = 0.5,\n      thickThickness = 2,\n      thickHeight = 4,\n      repereOij = false,\n      ...options\n    }: {\n      axeX?: boolean\n      axeY?: boolean\n      color?: string\n      grid?: boolean\n      labelX?: boolean\n      labelY?: boolean\n      stepX?: number\n      stepY?: number\n      subGrid?: boolean\n      subGridDivisions?: number\n      xMax?: number\n      xMin?: number\n      yMax?: number\n      yMin?: number\n      strokeWidthGrid?: number\n      thickThickness?: number\n      thickHeight?: number\n      repereOij?: boolean\n    } & OptionsElement2D = {},\n  ) {\n    super(figure, { ...options })\n    this.type = 'Grid'\n    this._color = color\n    this.axeX = axeX\n    this.axeY = axeY\n    this.grid = grid\n    this.subGrid = subGrid\n    this.labelX = labelX\n    this.labelY = labelY\n    this.stepX = stepX\n    this.stepY = stepY\n    this.subGridDivisions = subGridDivisions\n    this.xMin = xMin\n    this.xMax = xMax\n    this.yMin = yMin\n    this.yMax = yMax\n    this.labels = []\n    this.vectors = []\n    this.strokeWidthGrid = strokeWidthGrid\n    this.thickThickness = thickThickness\n    this.thickHeight = thickHeight\n    this.repereOij = repereOij\n    this.thicks = document.createElementNS('http://www.w3.org/2000/svg', 'g')\n  }\n\n  draw(): void {\n    const sizeOfArrow = 20\n    if (this.axeX) {\n      // Définit la flèche\n      const defs = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'defs',\n      )\n      this.figure.svg.appendChild(defs)\n      const marker = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'marker',\n      )\n      marker.setAttribute('id', 'arrow')\n      marker.setAttribute('markerWidth', sizeOfArrow.toString())\n      marker.setAttribute('markerHeight', sizeOfArrow.toString())\n      marker.setAttribute('refX', '0')\n      marker.setAttribute('refY', '6')\n      marker.setAttribute('orient', 'auto')\n      marker.setAttribute('markerUnits', 'strokeWidth')\n      const path = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'path',\n      )\n      path.setAttribute('d', 'M0,0 L0,12 L18,6 z')\n      marker.appendChild(path)\n      defs.appendChild(marker)\n\n      const svgAxeX = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      svgAxeX.setAttribute('x1', this.figure.xToSx(this.xMin).toString())\n      svgAxeX.setAttribute('y1', this.figure.yToSy(0).toString())\n      svgAxeX.setAttribute(\n        'x2',\n        (this.figure.xToSx(this.xMax) - sizeOfArrow).toString(),\n      )\n      svgAxeX.setAttribute('y2', this.figure.yToSy(0).toString())\n      svgAxeX.setAttribute('stroke', 'black')\n      svgAxeX.setAttribute('stroke-width', '1')\n      // Ajoute la flèche comme une mark\n      svgAxeX.setAttribute('marker-end', 'url(#arrow)')\n\n      // Thicks\n      for (let x = 0; x < this.xMax; x += this.stepX) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y1', (-this.thickHeight).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y2', this.thickHeight.toString())\n        svgLine.setAttribute('stroke', this._color)\n        svgLine.setAttribute('stroke-width', this.thickThickness.toString())\n        this.thicks.appendChild(svgLine)\n      }\n      for (let x = 0; x >= this.xMin; x -= this.stepX) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y1', (-this.thickHeight).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y2', this.thickHeight.toString())\n        svgLine.setAttribute('stroke', this._color)\n        svgLine.setAttribute('stroke-width', this.thickThickness.toString())\n        this.thicks.appendChild(svgLine)\n      }\n      this.groupSvg.appendChild(svgAxeX)\n    }\n    if (this.axeY) {\n      // Définit la flèche\n      const defs = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'defs',\n      )\n      this.figure.svg.appendChild(defs)\n      const marker = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'marker',\n      )\n      marker.setAttribute('id', 'arrow')\n      marker.setAttribute('markerWidth', sizeOfArrow.toString()) // Augmenter la largeur\n      marker.setAttribute('markerHeight', sizeOfArrow.toString()) // Augmenter la hauteur\n      marker.setAttribute('refX', '0')\n      marker.setAttribute('refY', '6') // Ajuster la référence Y\n      marker.setAttribute('orient', 'auto')\n      marker.setAttribute('markerUnits', 'strokeWidth')\n      const path = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'path',\n      )\n      path.setAttribute('d', 'M0,0 L0,12 L18,6 z') // Augmenter les dimensions du chemin\n      marker.appendChild(path)\n      defs.appendChild(marker)\n\n      const svgAxeY = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      svgAxeY.setAttribute('x1', this.figure.xToSx(0).toString())\n      svgAxeY.setAttribute('y1', this.figure.yToSy(this.yMin).toString())\n      svgAxeY.setAttribute('x2', this.figure.xToSx(0).toString())\n      svgAxeY.setAttribute(\n        'y2',\n        (this.figure.yToSy(this.yMax) + sizeOfArrow).toString(),\n      )\n      svgAxeY.setAttribute('stroke', 'black')\n      svgAxeY.setAttribute('stroke-width', '1')\n      // Ajoute la flèche comme une mark\n      svgAxeY.setAttribute('marker-end', 'url(#arrow)')\n      // Thicks\n      for (let y = 0; y < this.yMax; y += this.stepY) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', (-this.thickHeight).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('x2', this.thickHeight.toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('stroke', this._color)\n        svgLine.setAttribute('stroke-width', this.thickThickness.toString())\n        this.thicks.appendChild(svgLine)\n      }\n      for (let y = 0; y >= this.yMin; y -= this.stepY) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', (-this.thickHeight).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('x2', this.thickHeight.toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('stroke', this._color)\n        svgLine.setAttribute('stroke-width', this.thickThickness.toString())\n        this.thicks.appendChild(svgLine)\n      }\n      this.groupSvg.appendChild(svgAxeY)\n    }\n    if (this.grid) {\n      const svgGrid = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'g',\n      )\n      svgGrid.setAttribute('stroke', 'gray')\n      svgGrid.setAttribute('stroke-opacity', '0.5')\n      this.groupSvg.appendChild(svgGrid)\n      //for (let x = 0; x <= this.xMax; x += this.stepX) {\n      for (\n        let x = this.xMin <= 0 ? 0 : this.xMin;\n        x <= this.xMax;\n        x += this.stepX\n      ) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(this.yMin).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(this.yMax).toString())\n        svgLine.setAttribute('stroke-width', this.strokeWidthGrid.toString())\n        svgGrid.appendChild(svgLine)\n      }\n      // for (let x = 0; x >= this.xMin; x -= this.stepX) {\n      for (\n        let x = this.xMax < 0 ? this.xMax : this.xMax < this.stepX ? 0 : -1;\n        x >= this.xMin;\n        x -= this.stepX\n      ) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(this.yMin).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(this.yMax).toString())\n        svgLine.setAttribute('stroke-width', '0.5')\n        svgGrid.appendChild(svgLine)\n      }\n      // for (let y = 0; y <= this.yMax; y += this.stepY) {\n      for (\n        let y = this.yMin <= 0 ? 0 : this.yMin;\n        y <= this.yMax;\n        y += this.stepY\n      ) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(this.xMin).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(this.xMax).toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('stroke-width', this.strokeWidthGrid.toString())\n        svgGrid.appendChild(svgLine)\n      }\n      // for (let y = 0; y >= this.yMin; y -= this.stepY) {\n      for (\n        let y = this.yMax < 0 ? this.yMax : this.yMax < this.stepY ? 0 : -1;\n        y >= this.yMin;\n        y -= this.stepY\n      ) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(this.xMin).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(this.xMax).toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('stroke-width', '0.5')\n        svgGrid.appendChild(svgLine)\n      }\n    }\n    if (this.subGrid) {\n      const svgSubGrid = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'g',\n      )\n      svgSubGrid.setAttribute('stroke', 'gray')\n      svgSubGrid.setAttribute('stroke-opacity', '0.2')\n      this.groupSvg.appendChild(svgSubGrid)\n      for (\n        let x = this.xMin;\n        x <= this.xMax;\n        x += this.stepX / this.subGridDivisions\n      ) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(this.yMin).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(x).toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(this.yMax).toString())\n        svgLine.setAttribute('stroke-width', '0.25')\n        svgSubGrid.appendChild(svgLine)\n      }\n      for (\n        let y = this.yMin;\n        y <= this.yMax;\n        y += this.stepY / this.subGridDivisions\n      ) {\n        const svgLine = document.createElementNS(\n          'http://www.w3.org/2000/svg',\n          'line',\n        )\n        svgLine.setAttribute('x1', this.figure.xToSx(this.xMin).toString())\n        svgLine.setAttribute('y1', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('x2', this.figure.xToSx(this.xMax).toString())\n        svgLine.setAttribute('y2', this.figure.yToSy(y).toString())\n        svgLine.setAttribute('stroke-width', '0.25')\n        svgSubGrid.appendChild(svgLine)\n      }\n    }\n    if (this.labelX) {\n      for (\n        let x = this.labelY ? this.stepX : 0;\n        x < this.xMax;\n        x += this.stepX\n      ) {\n        this.labels.push(\n          this.figure.create('TextByPosition', {\n            anchor: 'topCenter',\n            dyInPixels: -this.thickHeight - 2,\n            fontSize: '0.67em', // '8pt',\n            isChild: true,\n            isSelectable: true,\n            text: `$${x.toString()}$`,\n            x,\n            y: 0,\n          }),\n        )\n      }\n      for (let x = -this.stepX; x >= this.xMin; x -= this.stepX) {\n        this.labels.push(\n          this.figure.create('TextByPosition', {\n            anchor: 'topCenter',\n            dyInPixels: -this.thickHeight - 2,\n            fontSize: '0.67em', // '8pt',\n            isChild: true,\n            isSelectable: true,\n            text: `$${x.toString()}$`,\n            x,\n            y: 0,\n          }),\n        )\n      }\n    }\n    if (this.labelY) {\n      for (let y = this.stepY; y < this.yMax; y += this.stepY) {\n        this.labels.push(\n          this.figure.create('TextByPosition', {\n            anchor: 'middleRight',\n            dxInPixels: -this.thickHeight - 5,\n            dyInPixels: 0,\n            fontSize: '0.67em', // '8pt',\n            isChild: true,\n            isSelectable: true,\n            text: `$${y.toString()}$`,\n            x: 0,\n            y,\n          }),\n        )\n      }\n      for (let y = -this.stepY; y >= this.yMin; y -= this.stepY) {\n        this.labels.push(\n          this.figure.create('TextByPosition', {\n            anchor: 'middleRight',\n            dxInPixels: -this.thickHeight - 5,\n            dyInPixels: 2,\n            fontSize: '0.67em', // '8pt',\n            isChild: true,\n            isSelectable: true,\n            text: `$${y.toString()}$`,\n            x: 0,\n            y: y - 0.1,\n          }),\n        )\n      }\n      if (!this.labelX) {\n        this.labels.push(\n          this.figure.create('TextByPosition', {\n            anchor: 'middleRight',\n            dxInPixels: this.thickHeight + 10,\n            dyInPixels: 2,\n            fontSize: '0.67em', // '8pt',\n            isChild: true,\n            isSelectable: true,\n            text: '$0$',\n            x: -1.2,\n            y: 0,\n          }),\n        )\n      }\n    }\n    this.groupSvg.appendChild(this.thicks)\n    this.setVisibilityColorThicknessAndDashed()\n    if (this.repereOij) {\n      const origin = this.figure.create('Point', {\n        x: 0,\n        y: 0,\n        isVisible: false,\n        isChild: true,\n      })\n      this.vectors = [\n        this.figure.create('Vector', {\n          origin,\n          x: 1,\n          y: 0,\n          color: orangeMathalea,\n          thickness: 3,\n          isChild: true,\n        }),\n        this.figure.create('Vector', {\n          origin,\n          x: 0,\n          y: 1,\n          color: orangeMathalea,\n          thickness: 3,\n          isChild: true,\n        }),\n      ]\n      this.labels.push(\n        this.figure.create('TextByPosition', {\n          text: '$O$',\n          x: -0.25,\n          y: -0.25,\n          anchor: 'topRight',\n          color: orangeMathalea,\n          fontSize: '8pt',\n          isChild: true,\n        }),\n        this.figure.create('TextByPosition', {\n          text: '$\\\\vec \\\\imath$',\n          x: 0.5,\n          y: -0.25,\n          anchor: 'topRight',\n          color: orangeMathalea,\n          fontSize: '8pt',\n          isChild: true,\n        }),\n        this.figure.create('TextByPosition', {\n          text: '$\\\\vec \\\\jmath$',\n          x: -0.5,\n          y: 0.25,\n          anchor: 'bottomRight',\n          color: orangeMathalea,\n          fontSize: '8pt',\n          isChild: true,\n        }),\n      )\n    }\n    this.update()\n  }\n\n  get latex(): string {\n    let result = `%${this.description}`\n    result += `\\n\\\\tkzInit[xmin=${this.xMin}, xmax=${this.xMax}, ymin=${this.yMin}, ymax=${this.yMax}]`\n    result += '\\n\\\\tkzGrid[thick]'\n    result += '\\\\tkzAxeXY'\n    return result\n  }\n\n  get isVisible(): boolean {\n    return super.isVisible\n  }\n\n  set isVisible(value: boolean) {\n    super.isVisible = value\n    for (const label of this.labels) {\n      label.isVisible = value\n    }\n    for (const vector of this.vectors) {\n      vector.isVisible = value\n    }\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      xMin: this.xMin,\n      xMax: this.xMax,\n      yMin: this.yMin,\n      yMax: this.yMax,\n      axeX: this.axeX,\n      axeY: this.axeY,\n      grid: this.grid,\n      labelX: this.labelX,\n      labelY: this.labelY,\n      repereOij: this.repereOij,\n      stepX: this.stepX,\n      stepY: this.stepY,\n      subGrid: this.subGrid,\n      thickHeight: this.thickHeight,\n      thickThickness: this.thickThickness,\n    }\n  }\n}\n\nexport default Grid\n","import type Figure from '../../Figure'\nimport { round } from '../../lib/format'\nimport {\n  reflectOverLineCoord,\n  rotationCoord,\n  translateCoords,\n} from '../calculus/Coords'\nimport { distance, normalizeAngle } from '../calculus/utils'\nimport Element2D from '../Element2D'\nimport Grid from '../grid/Grid'\nimport type { OptionsElement2D, OptionsPointWithoutCoords } from '../interfaces'\nimport type Arc from '../lines/Arc'\nimport type Circle from '../lines/Circle'\nimport type Line from '../lines/Line'\nimport type Polygon from '../lines/Polygon'\nimport type Segment from '../lines/Segment'\nimport type TextByPoint from '../text/TextByPoint'\nimport type Vector from '../vector/Vector'\n\n/**\n * Trace un point et ajoute un éventuel label à partir de la propriété label\n */\nclass Point extends Element2D {\n  /** Couleur du label */\n  private _colorLabel: string\n  /** Nom que l'on affiche à côté du point */\n  private _label?: string\n  /** Croix, rond ou rien */\n  private _shape: '' | '|' | 'o' | 'x'\n  /** Taille du point, correspond à ce qui est ajouté dans les 4 directions pour faire la croix ou au rayon du rond */\n  private _sizeInPixels: number\n  protected _x: number\n  protected _y: number\n  /** Elément SVG pour rond */\n  private svgCircle!: SVGCircleElement\n  /** Affichage du nom du point */\n  elementTextLabel?: TextByPoint\n  /** Le point est-il librement déplaçable ? */\n  isFree: boolean\n  /** Décalage vertical pour le nom du point */\n  labelDxInPixels: number\n  /** Décalage horizontal pour le nom du point */\n  labelDyInPixels: number\n  /** Affichage ou non du label */\n  labelIsVisible: boolean\n  /** Elément SVG pour le premier trait de la croix */\n  protected svgLine1!: SVGLineElement\n  /** Elément SVG pour le deuxième trait de la croix */\n  protected svgLine2!: SVGLineElement\n  constructor(\n    figure: Figure,\n    {\n      color = figure.options.color,\n      colorLabel = figure.options.color,\n      id,\n      isChild,\n      isFree = true,\n      isSelectable,\n      isVisible = true,\n      label,\n      labelIsVisible = figure.options.labelIsVisible ?? true,\n      labelDxInPixels,\n      labelDyInPixels,\n      shape = figure.options.shape,\n      sizeInPixels,\n      thickness,\n      x = 0,\n      y = 0,\n    }: {\n      color?: string\n      colorLabel?: string\n      id?: string\n      isChild?: boolean\n      isFree?: boolean\n      isSelectable?: boolean\n      isVisible?: boolean\n      label?: string\n      labelDxInPixels?: number\n      labelDyInPixels?: number\n      labelIsVisible?: boolean\n      shape?: '' | '|' | 'o' | 'x'\n      sizeInPixels?: number\n      thickness?: number\n      x?: number\n      y?: number\n    } & OptionsElement2D,\n  ) {\n    if (id === undefined) {\n      let cpt = 0\n      while (figure.elements.has(`point${cpt.toString()}`)) {\n        cpt++\n      }\n      id = `point${cpt.toString()}`\n    }\n    super(figure, { color, id, isChild, isSelectable, thickness })\n    this.type = 'Point'\n    this._shape = shape ?? 'x'\n    this._sizeInPixels = sizeInPixels ?? figure.options.pointSize\n    this._thickness = thickness ?? figure.options.thicknessForPoint\n    this.labelDxInPixels = labelDxInPixels ?? figure.options.labelDxInPixels\n    this.labelDyInPixels = labelDyInPixels ?? figure.options.labelDyInPixels\n    if (this.figure.snapGrid && this.isVisible) {\n      // Les points invisible comme ceux qui définissent la droite perpendiculaire n'ont pas besoin d'être sur la grille\n      this._x = Math.round(x / this.figure.dx) * this.figure.dx\n      this._y = Math.round(y / this.figure.dy) * this.figure.dy\n    } else {\n      this._x = x\n      this._y = y\n    }\n    this.label = label\n    this.labelIsVisible = labelIsVisible\n    this._colorLabel = colorLabel\n    this.isFree = isFree\n    this._isVisible = isVisible ?? true\n  }\n\n  private redraw(): void {\n    this.notify()\n    if (Number.isNaN(this._x) || Number.isNaN(this._y)) {\n      this.svgCircle?.remove()\n      this.svgLine1?.remove()\n      this.svgLine2?.remove()\n      this.elementTextLabel?.hide()\n      return\n    }\n    if (\n      this.elementTextLabel === undefined ||\n      this.elementTextLabel.x > this.figure.xMax ||\n      this.elementTextLabel.y > this.figure.yMax ||\n      this.elementTextLabel.x < this.figure.xMin ||\n      this.elementTextLabel.y < this.figure.yMin\n    ) {\n      this.elementTextLabel?.hide()\n    } else\n      this.isVisible && this.labelIsVisible && this.elementTextLabel?.show()\n    if (this._shape === 'x') {\n      const x1Svg = this.figure.xToSx(this._x) - this._sizeInPixels\n      const x2Svg = this.figure.xToSx(this._x) + this._sizeInPixels\n      const x3Svg = this.figure.xToSx(this._x) + this._sizeInPixels\n      const x4Svg = this.figure.xToSx(this._x) - this._sizeInPixels\n      const y1Svg = this.figure.yToSy(this._y) - this._sizeInPixels\n      const y2Svg = this.figure.yToSy(this._y) + this._sizeInPixels\n      const y3Svg = this.figure.yToSy(this._y) - this._sizeInPixels\n      const y4Svg = this.figure.yToSy(this._y) + this._sizeInPixels\n      this.svgLine1.setAttribute('x1', `${x1Svg}`)\n      this.svgLine1.setAttribute('y1', `${y1Svg}`)\n      this.svgLine1.setAttribute('x2', `${x2Svg}`)\n      this.svgLine1.setAttribute('y2', `${y2Svg}`)\n      this.svgLine2.setAttribute('x1', `${x3Svg}`)\n      this.svgLine2.setAttribute('y1', `${y3Svg}`)\n      this.svgLine2.setAttribute('x2', `${x4Svg}`)\n      this.svgLine2.setAttribute('y2', `${y4Svg}`)\n      this.svgCircle?.remove()\n      this.groupSvg.appendChild(this.svgLine1)\n      this.groupSvg.appendChild(this.svgLine2)\n    } else if (this._shape === 'o') {\n      const xSvg = this.figure.xToSx(this._x)\n      const ySvg = this.figure.yToSy(this._y)\n      const rSvg = this._sizeInPixels\n      this.svgCircle.setAttribute('cx', `${xSvg}`)\n      this.svgCircle.setAttribute('cy', `${ySvg}`)\n      this.svgCircle.setAttribute('r', `${rSvg}`)\n      this.svgLine1?.remove()\n      this.svgLine2?.remove()\n      this.groupSvg.appendChild(this.svgCircle)\n    } else if (this._shape === '') {\n      this.svgLine1?.remove()\n      this.svgLine2?.remove()\n      this.svgCircle?.remove()\n    }\n  }\n\n  createSegmentToAxeX(): Segment {\n    const M = this.figure.create('PointByProjectionOnAxisX', {\n      isVisible: false,\n      origin: this,\n    })\n    return this.figure.create('Segment', {\n      isDashed: true,\n      point1: this,\n      point2: M,\n    })\n  }\n\n  createSegmentToAxeY(): Segment {\n    const M = this.figure.create('PointByProjectionOnAxisY', {\n      isVisible: false,\n      origin: this,\n    })\n    return this.figure.create('Segment', {\n      isDashed: true,\n      point1: this,\n      point2: M,\n    })\n  }\n\n  dilate(\n    center: Point,\n    factor: number,\n    options?: OptionsPointWithoutCoords,\n  ): Point {\n    const dilated = this.figure.create('Point', options)\n    dilated.transformation = { center, factor, origin: this, type: 'dilate' }\n    this.subscribe(dilated)\n    center.subscribe(dilated)\n    dilated.isFree = false\n    dilated.update()\n    return dilated\n  }\n\n  /** Distance entre un point et le pointeur de la souris exprimée dans les unités du repère */\n  distancePointer(pointerX: number, pointerY: number): number {\n    if (this._x === undefined || this._y === undefined)\n      return Number.POSITIVE_INFINITY\n    return Math.hypot(\n      (this._x - pointerX) * this.figure.scale * this.figure.xScale,\n      (this._y - pointerY) * this.figure.scale * this.figure.yScale,\n    )\n  }\n\n  draw(): void {\n    // Les deux traits qui forment la croix du point\n    this.svgLine1 = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'line',\n    )\n    this.svgLine2 = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'line',\n    )\n    // Le cercle, si le point est représenté par un rond\n    this.svgCircle = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'circle',\n    )\n    // Le groupe parent de la représentation du point\n    this.groupSvg = document.createElementNS('http://www.w3.org/2000/svg', 'g')\n    this.setVisibilityColorThicknessAndDashed()\n    if (this.isVisible) {\n      this.shape = this._shape\n      this.label = this._label\n    }\n    this.update()\n  }\n\n  isInArc(arc: Arc): boolean {\n    const [x, y] = [this.x, this.y]\n    const distanceToCenter = distance(this, arc.center)\n    const radius = distance(arc.center, arc.start)\n    if (distanceToCenter > radius) return false\n    const angle = normalizeAngle(Math.atan2(y - arc.center.y, x - arc.center.x))\n    const angleStart = normalizeAngle(\n      Math.atan2(arc.start.y - arc.center.y, arc.start.x - arc.center.x),\n    )\n    const angleEnd = normalizeAngle(\n      angleStart + (arc.dynamicAngle.value * Math.PI) / 180,\n    )\n    if (angleStart < angleEnd) {\n      return angleStart < angle && angle < angleEnd\n    }\n    return angleStart < angle || angle < angleEnd\n  }\n\n  isInCircle(circle: Circle): boolean {\n    return (\n      (this.x - circle.center.x) ** 2 + (this.y - circle.center.y) ** 2 <=\n      circle.radius ** 2\n    )\n  }\n\n  isInPolygon(polygon: Polygon): boolean {\n    const x = this.x\n    const y = this.y\n    let result = false\n    for (let i = 0; i < polygon.points.length; i++) {\n      const point1 = polygon.points.at(i % polygon.points.length) as Point\n      const point2 = polygon.points.at((i + 1) % polygon.points.length) as Point\n      if (\n        point1.y > y !== point2.y > y &&\n        x <\n          ((point2.x - point1.x) * (y - point1.y)) / (point2.y - point1.y) +\n            point1.x\n      ) {\n        result = !result\n      }\n    }\n    return result\n  }\n\n  isOnline(line: Line): boolean {\n    const [a, b, c] = line.equation\n    let result = Math.abs(a * this.x + b * this.y + c) < 10 ** -6\n    if (\n      line.type === 'Segment' &&\n      (this.x < Math.min(line.point1.x, line.point2.x) ||\n        this.x > Math.max(line.point1.x, line.point2.x) ||\n        this.y < Math.min(line.point1.y, line.point2.y) ||\n        this.y > Math.max(line.point1.y, line.point2.y))\n    ) {\n      result = false\n    }\n    if (line.type === 'Ray') {\n      // Direction gauche droite\n      if (line.point1.x < line.point2.x && this.x < line.point1.x) {\n        result = false\n      }\n      // Direction droite gauche\n      if (line.point1.x > line.point2.x && this.x > line.point1.x) {\n        result = false\n      }\n      // Direction bas haut\n      if (line.point1.y < line.point2.y && this.y < line.point1.y) {\n        result = false\n      }\n      // Direction haut bas\n      if (line.point1.y > line.point2.y && this.y > line.point1.y) {\n        result = false\n      }\n    }\n    return result\n  }\n\n  jsonOptions(): object {\n    return {\n      ...super.jsonOptions(),\n      colorLabel: this.colorLabel,\n      label: this.label,\n      labelDxInPixels: this.labelDxInPixels,\n      labelDyInPixels: this.labelDyInPixels,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n      x: round(this.x),\n      y: round(this.y),\n    }\n  }\n\n  /** Déplace le point */\n  moveTo(x: number, y: number): void {\n    this.x = x\n    this.y = y\n  }\n\n  reflect(center: Point, options?: OptionsPointWithoutCoords): Point {\n    const reflected = this.figure.create('Point', options)\n    reflected.transformation = { center, origin: this, type: 'reflect' }\n    this.subscribe(reflected)\n    center.subscribe(reflected)\n    reflected.isFree = false\n    reflected.update()\n    return reflected\n  }\n\n  reflectOverLine(line: Segment, options?: OptionsPointWithoutCoords): Point {\n    const reflected = this.figure.create('Point', options)\n    reflected.transformation = { line, origin: this, type: 'reflectOverLine' }\n    this.subscribe(reflected)\n    line.subscribe(reflected)\n    reflected.isFree = false\n    reflected.update()\n    return reflected\n  }\n\n  rotate(\n    center: Point,\n    angle: number,\n    options?: OptionsPointWithoutCoords,\n  ): Point {\n    const rotated = this.figure.create('Point', options)\n    rotated.transformation = { angle, center, origin: this, type: 'rotation' }\n    this.subscribe(rotated)\n    center.subscribe(rotated)\n    rotated.isFree = false\n    rotated.update()\n    return rotated\n  }\n\n  toJSON(): object {\n    return this.jsonOptions()\n  }\n\n  translate(\n    point1: Point,\n    point2: Point,\n    options?: OptionsPointWithoutCoords,\n  ): Point {\n    const translated = this.figure.create('Point', options)\n    translated.transformation = {\n      origin: this,\n      point1,\n      point2,\n      type: 'translation',\n    }\n    this.subscribe(translated)\n    point1.subscribe(translated)\n    point2.subscribe(translated)\n    translated.isFree = false\n    translated.update()\n    return translated\n  }\n\n  translateVector(vector: Vector, options?: OptionsPointWithoutCoords): Point {\n    const translated = this.figure.create('Point', options)\n    translated.transformation = {\n      origin: this,\n      vector,\n      type: 'translationVector',\n    }\n    this.subscribe(translated)\n    vector.subscribe(translated)\n    translated.isFree = false\n    translated.update()\n    return translated\n  }\n\n  update(): void {\n    if (this.transformation?.type === 'reflect') {\n      this._x =\n        2 * this.transformation.center.x -\n        (this.transformation.origin as Point).x\n      this._y =\n        2 * this.transformation.center.y -\n        (this.transformation.origin as Point).y\n    } else if (this.transformation?.type === 'dilate') {\n      this._x =\n        this.transformation.center.x +\n        this.transformation.factor *\n          ((this.transformation.origin as Point).x -\n            this.transformation.center.x)\n      this._y =\n        this.transformation.center.y +\n        this.transformation.factor *\n          ((this.transformation.origin as Point).y -\n            this.transformation.center.y)\n    } else if (this.transformation?.type === 'rotation') {\n      const { x, y } = rotationCoord(\n        this.transformation.origin as Point,\n        this.transformation.center,\n        this.transformation.angle,\n      )\n      this._x = x\n      this._y = y\n    } else if (this.transformation?.type === 'reflectOverLine') {\n      const { x, y } = reflectOverLineCoord(\n        this.transformation.origin as Point,\n        this.transformation.line,\n      )\n      this._x = x\n      this._y = y\n    } else if (this.transformation?.type === 'translation') {\n      const { x, y } = translateCoords(\n        this.transformation.origin as Point,\n        this.transformation.point1,\n        this.transformation.point2,\n      )\n      this._x = x\n      this._y = y\n    } else if (this.transformation?.type === 'translationVector') {\n      const x = this.transformation.origin.x + this.transformation.vector.x\n      const y = this.transformation.origin.y + this.transformation.vector.y\n      this._x = x\n      this._y = y\n    }\n\n    this.redraw()\n  }\n\n  get color(): string {\n    return this._color\n  }\n\n  set color(color) {\n    this._color = color\n    if (this.svgCircle !== undefined) {\n      this.svgCircle.setAttribute('fill', color)\n      this.svgCircle.setAttribute('stroke', color)\n    }\n    if (this.svgLine1 !== undefined) {\n      this.svgLine1.setAttribute('stroke', color)\n    }\n    if (this.svgLine2 !== undefined) {\n      this.svgLine2.setAttribute('stroke', color)\n    }\n  }\n\n  get colorLabel(): string {\n    return this._colorLabel\n  }\n\n  set colorLabel(color: string) {\n    this._colorLabel = color\n    if (this.elementTextLabel !== undefined) this.elementTextLabel.color = color\n  }\n\n  get description(): string {\n    if (this.transformation?.type === 'reflect') {\n      return `Point $${this.label}$ image du point $${(this.transformation.origin as Point).notation}$ dans la symétrie de centre $${this.transformation?.center.notation}$`\n    }\n    if (this.transformation?.type === 'reflectOverLine') {\n      return `Point $${this.label}$ image du point $${(this.transformation.origin as Point).notation}$ dans la symétrie d'axe $${this.transformation?.line.notation}$`\n    }\n    if (this.transformation?.type === 'dilate') {\n      return `Point $${this.label}$ image du point $${(this.transformation.origin as Point).notation}$ dans l'homothétie de centre $${this.transformation?.center.notation}$ et de rapport $${this.transformation.factor}$`\n    }\n    if (this.transformation?.type === 'rotation') {\n      return `Point $${this.label}$ image du point $${(this.transformation.origin as Point).notation}$ dans la rotation de centre $${this.transformation.center.notation}$ et d'angle $${Math.abs(this.transformation.angle)}\\\\degree$ dans le sens ${this.transformation.angle > 0 ? 'anti-horaire' : 'horaire'}`\n    }\n    if (this.transformation?.type === 'translation') {\n      return `Point $${this.label}$ image du point $${(this.transformation.origin as Point).notation}$ dans la translation qui transforme $${(this.transformation.point1 as Point).notation}$ en $${(this.transformation.point2 as Point).notation}$`\n    }\n    if (this.transformation?.type === 'translationVector') {\n      return `Point $${this.label}$ image\n      du point $${(this.transformation.origin as Point).notation}$\n      par la translation de vecteur $${this.transformation.vector.notation}$\n      `\n    }\n    if (this.figure.options.pointDescriptionWithCoordinates) {\n      return `Point $${this.label}$ libre de coordonnées $(${round(this.x, 2).toString().replace('.', ',')}\\\\;;\\\\;${round(this.y, 2).toString().replace('.', ',')})$`\n    }\n    return `Point $${this.label}$`\n  }\n\n  get isVisible(): boolean {\n    return this._isVisible\n  }\n\n  set isVisible(isVisible) {\n    this._isVisible = isVisible\n    this.isVisible\n      ? this.elementTextLabel?.show()\n      : this.elementTextLabel?.hide()\n    if (!this.isVisible) this.labelIsVisible = false\n    super.isVisible = isVisible\n  }\n\n  get label(): string {\n    if (this._label === undefined) return ''\n    return this._label\n  }\n\n  set label(label: string | undefined) {\n    this._label = label\n    if (!this.isVisible || !this.labelIsVisible) {\n      this.elementTextLabel?.hide()\n      return\n    }\n    if (label !== undefined && label.length > 0) {\n      if (this.elementTextLabel === undefined) {\n        this.elementTextLabel = this.figure.create('TextByPoint', {\n          color: this.colorLabel,\n          dxInPixels: this.labelDxInPixels * this.figure.scale,\n          dyInPixels: this.labelDyInPixels * this.figure.scale,\n          id: `${this.id}_label`,\n          isChild: true,\n          isSelectable: true,\n          point: this,\n          text: `$${label}$`,\n        })\n      } else {\n        this.elementTextLabel.text = `$${label}$`\n        this.elementTextLabel.color = this._colorLabel\n      }\n    }\n  }\n\n  get latex(): string {\n    if (this.shape === '') return ''\n    let result = `% Point ${this.label}`\n    // todo : Mgu la taille de la croix est fixe qqlesoit le scale, sinon elle peu être invisible si scale=0.5 => il faudrait une option\n    result += `\\n\\\\draw${this.latexOptions} plot[mark=${this.shape}, mark size=${0.15 / this.figure.scale}cm] coordinates{(${this.x},${this.y})};`\n    return result\n  }\n\n  get notation(): string {\n    if (this.label !== '') return this.label\n    return this.id\n  }\n\n  get shape(): '' | '|' | 'o' | 'x' {\n    return this._shape\n  }\n\n  set shape(shape) {\n    this._shape = shape\n    if (this._shape === 'x') {\n      this.figure.svg.appendChild(this.groupSvg)\n      this.svgCircle?.remove()\n      this.groupSvg.appendChild(this.svgLine1)\n      this.groupSvg.appendChild(this.svgLine2)\n    } else if (this._shape === 'o') {\n      this.figure.svg.appendChild(this.groupSvg)\n      this.svgLine1?.remove()\n      this.svgLine2?.remove()\n      this.groupSvg.appendChild(this.svgCircle)\n    } else if (this._shape === '') {\n      this.groupSvg?.remove()\n      this.svgLine1?.remove()\n      this.svgLine2?.remove()\n      this.svgCircle?.remove()\n    }\n    this.update()\n  }\n\n  get sizeInPixels(): number {\n    return this._sizeInPixels\n  }\n\n  set sizeInPixels(size) {\n    this._sizeInPixels = size\n    this.update()\n  }\n\n  get x(): number {\n    return this._x\n  }\n\n  set x(x) {\n    if (this.figure.snapGrid && this.isVisible) {\n      this._x = Math.round(x / this.figure.dx) * this.figure.dx\n      if (!this.figure.options.gridWithTwoPointsOnSamePosition) {\n        this.goToClosestFreePosition()\n      }\n    } else {\n      this._x = x\n    }\n    this.update()\n  }\n\n  get y(): number {\n    return this._y\n  }\n\n  set y(y) {\n    if (this.figure.snapGrid && this.isVisible) {\n      this._y = Math.round(y / this.figure.dy) * this.figure.dy\n      if (!this.figure.options.gridWithTwoPointsOnSamePosition) {\n        this.goToClosestFreePosition()\n      }\n    } else {\n      this._y = y\n    }\n    this.update()\n  }\n\n  /**\n   *\n   * MGu cette fonction est compliquée, et je trouve son comportement non intuitif...\n   * Je l'ai modifié pour empêcher que les points sortent de la grille..\n   * En revanche, si on tombe sur un point existant, c'est un peu au bonheur la chance...\n   * et ça, c'est risque de bug...\n   *\n   */\n  goToClosestFreePosition(): void {\n    const MAX_DISTANCE = 10\n    const { points } = this.figure.checkCoords({ x: this._x, y: this._y })\n    const grid = [...this.figure.elements.values()].find((ele) => {\n      return ele instanceof Grid\n    })\n    const inFigure =\n      this._x >= this.figure.xMin &&\n      this._x <= this.figure.xMax &&\n      this._y >= this.figure.yMin &&\n      this._y <= this.figure.yMax\n    /*  point in grid only*/\n    const inGrid =\n      grid !== undefined &&\n      this._x <= grid.xMax &&\n      this._x >= grid.xMin &&\n      this._y <= grid.yMax &&\n      this._y >= grid.yMin\n    if (points.length === 1 && inFigure && (!grid || inGrid)) {\n      return\n    }\n    for (let distance = 1; distance <= MAX_DISTANCE; distance++) {\n      for (const dy of [0, distance, -distance]) {\n        for (const dx of [0, distance, -distance]) {\n          // [5 3 4]\n          // [2 x 1] Indice de recherche\n          // [8 6 7]\n          if (dx === 0 && dy === 0) {\n            continue // point de départ\n          }\n          const newX = this._x + dx * this.figure.dx // il faut utiliser les pas de la figure\n          const newY = this._y + dy * this.figure.dy // il faut utiliser les pas de la figure\n          const pointNotInFigure =\n            newX < this.figure.xMin ||\n            newX > this.figure.xMax ||\n            (newY < this.figure.yMin && newY > this.figure.yMax)\n          if (pointNotInFigure) {\n            // le point n'est pas dans la figure\n            continue\n          }\n          const pointNotInGrid =\n            grid !== undefined &&\n            (newX < grid.xMin ||\n              newX > grid.xMax ||\n              (newY < grid.yMin && newY > grid.yMax))\n          if (pointNotInGrid) {\n            // le point n'est pas dans la grille\n            continue\n          }\n          if (this.checkAndMove(dx * this.figure.dx, dy * this.figure.dy))\n            // trouver un point disponible...\n            return\n        }\n      }\n    }\n  }\n\n  private checkAndMove(dx: number, dy: number): boolean {\n    const newX = this._x + dx\n    const newY = this._y + dy\n    const { points } = this.figure.checkCoords({ x: newX, y: newY })\n    if (points.length === 0) {\n      this._x = newX\n      this._y = newY\n      return true\n    }\n    return false\n  }\n}\n\nexport default Point\n","import type Figure from '../../Figure'\nimport { intersectionLLCoord } from '../calculus/Coords'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Line from '../lines/Line'\nimport type Segment from '../lines/Segment'\nimport Point from './Point'\n\n/**\n * Créé un point à l'intersection de deux droites (demi-droites ou segments)\n * Masque le point et ses descendances s'il n'y a pas d'intersection\n */\nexport class PointIntersectionLL extends Point {\n  /** Première droite */\n  line1: Segment\n  /** Deuxième droite */\n  line2: Segment\n  constructor(\n    figure: Figure,\n    {\n      line1,\n      line2,\n      ...options\n    }: {\n      label?: string\n      labelDxInPixels?: number\n      labelDyInPixels?: number\n      line1: Line\n      line2: Line\n      shape?: '' | '|' | 'o' | 'x'\n      sizeInPixels?: number\n    } & OptionsElement2D,\n  ) {\n    const coords = intersectionLLCoord(line1, line2)\n    super(figure, { isFree: false, x: coords.x, y: coords.y, ...options })\n    this.type = 'PointIntersectionLL'\n    this.line1 = line1\n    this.line2 = line2\n    this.line1.subscribe(this)\n    this.line2.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      ...super.jsonOptions(),\n      idLine1: this.line1.id,\n      idLine2: this.line2.id,\n      label: this.label,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    }\n  }\n\n  update(): void {\n    if (this.line1 === undefined || this.line2 === undefined) return\n    try {\n      const coords = intersectionLLCoord(this.line1, this.line2)\n      this._x = coords.x\n      this._y = coords.y\n      super.update()\n    } catch (error) {\n      console.error('Erreur dans PointIntersectionLL.update()', error)\n    }\n    this.notify()\n  }\n\n  get description(): string {\n    const line1Name = this.line1.notation\n    const line2Name = this.line2.notation\n    return `Point $${this.notation}$ à l'intersection de la droite $${line1Name}$ et de la droite $${line2Name}$`\n  }\n}\n\nexport default PointIntersectionLL\n","import type Line from '../elements/lines/Line'\nimport PointIntersectionLL from '../elements/points/PointIntersectionLL'\nimport type Figure from '../Figure'\n\n/**\n * Vérifie si un point appartient à une intersection de deux lignes (droites, demi-droites ou segments)\n * @param {Figure} figure // La figure\n * @param {string} labelPt // Nom du point\n * @param {string[]|string} nameLine1 // Nom de la ligne1 ou bien tableau contenant les noms de la ligne1\n * @param {string[]|string} nameLine2 // Nom de la ligne2 ou bien tableau contenant les noms de la ligne2\n * @example Voir exemples plus adaptés dans Figure.ts\n * @author Eric Elter\n * @returns {{ isValid: boolean, message: string }}\n */\nexport default function checkPointOnIntersectionLL({\n  figure,\n  labelPt,\n  nameLine1,\n  nameLine2,\n}: {\n  figure: Figure\n  labelPt: string\n  nameLine1: string[] | string\n  nameLine2: string[] | string\n}): { isValid: boolean; message: string } {\n  let points = [...figure.elements.values()].filter(\n    (e) =>\n      e.type !== 'pointer' &&\n      e.type.includes('Point') &&\n      'label' in e &&\n      e.label === labelPt,\n  )\n  if (points.length === 0)\n    return {\n      isValid: false,\n      message: `Il n'existe pas de point ${labelPt} sur la figure.`,\n    }\n  if (points.length > 1)\n    return {\n      isValid: false,\n      message: `Il existe trop de points ${labelPt} sur la figure.`,\n    }\n\n  const lines = [...figure.elements.values()].filter(\n    (e) =>\n      e.type.includes('Line') ||\n      e.type.includes('Segment') ||\n      e.type.includes('Ray'),\n  ) as Line[]\n  let lines1: Line[]\n  let lines2: Line[]\n\n  const nomLigne1 = Array.isArray(nameLine1) ? nameLine1[0] : nameLine1\n  const nomLigne2 = Array.isArray(nameLine2) ? nameLine2[0] : nameLine2\n\n  if (lines.length !== 0) {\n    lines1 = lines.filter((e) => nameLine1.includes(e.notation))\n    if (lines1.length === 0)\n      return {\n        isValid: false,\n        message: `${nomLigne1} n'existe pas sur la figure.`,\n      }\n    lines2 = lines.filter((e) => nameLine2.includes(e.notation))\n    if (lines2.length === 0)\n      return {\n        isValid: false,\n        message: `${nomLigne2} n'existe pas sur la figure.`,\n      }\n  }\n\n  points = [...figure.elements.values()].filter(\n    (e) =>\n      e instanceof PointIntersectionLL &&\n      e.type !== 'pointer' &&\n      e.type.includes('PointIntersectionLL') &&\n      'label' in e &&\n      e.label === labelPt &&\n      lines1.some((line) => e.line1 === line || e.line2 === line) &&\n      lines2.some((line) => e.line1 === line || e.line2 === line),\n  )\n  if (points.length === 0)\n    return {\n      isValid: false,\n      message: `Le point ${labelPt} n'est pas à l'intersection de ${nomLigne1} et de ${nomLigne2}.`,\n    }\n  return {\n    isValid: true,\n    message: `Le point ${labelPt} est à l'intersection de ${nomLigne1} et de ${nomLigne2}.`,\n  }\n}\n","import type Figure from '../../Figure'\nimport { distance, orthogonalProjectionCoord } from '../calculus/Coords'\nimport { defaultMaxSlope, defaultMinSlope } from '../defaultValues'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport Segment from './Segment'\n\n/**\n * Trace une droite\n */\nclass Line extends Segment {\n  constructor(\n    figure: Figure,\n    {\n      point1,\n      point2,\n      ...options\n    }: {\n      borderSize?: number\n      point1: Point\n      point2: Point\n      shape?: '-|' | '' | '|-' | '|-|'\n    } & OptionsElement2D,\n  ) {\n    super(figure, { point1, point2, ...options })\n    this.type = 'Line'\n  }\n\n  distancePointer(x: number, y: number): number {\n    const pointerCoords = { x, y }\n    const projectionCoords = orthogonalProjectionCoord(pointerCoords, this)\n    return distance(pointerCoords, projectionCoords)\n  }\n\n  update(): void {\n    const [x1Svg, y1Svg, x2Svg, y2Svg] = getCoordsOut(this.point1, this.point2)\n    if (\n      Number.isNaN(x1Svg) ||\n      Number.isNaN(x2Svg) ||\n      Number.isNaN(y1Svg) ||\n      Number.isNaN(y1Svg)\n    ) {\n      this.svgLine.removeAttribute('x1')\n      this.svgLine.removeAttribute('x2')\n      this.svgLine.removeAttribute('y1')\n      this.svgLine.removeAttribute('y2')\n    } else {\n      this.svgLine.setAttribute('x1', `${this.figure.xToSx(x1Svg)}`)\n      this.svgLine.setAttribute('y1', `${this.figure.yToSy(y1Svg)}`)\n      this.svgLine.setAttribute('x2', `${this.figure.xToSx(x2Svg)}`)\n      this.svgLine.setAttribute('y2', `${this.figure.yToSy(y2Svg)}`)\n    }\n    if (this.shape?.at(0) === '|') {\n      this.drawBorder1()\n    } else {\n      this.svgBorder1?.remove()\n    }\n    if (this.shape?.at(-1) === '|') {\n      this.drawBorder2()\n    } else {\n      this.svgBorder2?.remove()\n    }\n    this.notify()\n  }\n\n  get description(): string {\n    if (this.point1.label !== '' || this.point2.label !== '') {\n      return `Droite ${this.notation}`\n    }\n    const lines = [...this.figure.elements.values()].filter(\n      (element) => element instanceof Line,\n    ) as Line[]\n    const index = lines.indexOf(this)\n    return `Droite n°${index + 1}`\n  }\n\n  get latex(): string {\n    const [x1, y1, x2, y2] = getCoordsOut(this.point1, this.point2)\n    let result = `%${this.description}`\n    result += `\\n\\\\draw${this.latexOptions} (${x1}, ${y1}) -- (${x2}, ${y2});`\n    return result\n  }\n\n  get notation(): string {\n    const point1Name =\n      this.point1.label !== '' ? this.point1.label : this.point1.id\n    const point2Name =\n      this.point2.label !== '' ? this.point2.label : this.point2.id\n    return `(${point1Name}${point2Name})`\n  }\n}\n\n/** Renvoie [x1, y1, x2, y2] les coordonnées des extrémités du tracé */\nexport function getCoordsOut(\n  A: Point,\n  B: Point,\n): [number, number, number, number] {\n  if (\n    A.x === undefined ||\n    A.y === undefined ||\n    B.x === undefined ||\n    B.y === undefined ||\n    Number.isNaN(A.x) ||\n    Number.isNaN(A.y) ||\n    Number.isNaN(B.x) ||\n    Number.isNaN(B.y)\n  )\n    return [Number.NaN, Number.NaN, Number.NaN, Number.NaN]\n\n  try {\n    const figure = A.figure\n    let pente = defaultMaxSlope\n    if (B.x !== A.x) {\n      pente = (B.y - A.y) / (B.x - A.x)\n    }\n\n    if (Math.abs(pente) >= defaultMaxSlope)\n      return [A.x, figure.yMax, A.x, figure.yMin]\n    if (Math.abs(pente) < defaultMinSlope)\n      return [figure.xMin, A.y, figure.xMax, A.y]\n\n    let xOutLeft: number = figure.xMin\n    let yOutLeft: number = A.y + (figure.xMin - A.x) * pente\n\n    if (yOutLeft > figure.yMax) {\n      yOutLeft = figure.yMax\n      xOutLeft = A.x + (figure.yMax - A.y) / pente\n    } else if (yOutLeft < figure.yMin) {\n      yOutLeft = figure.yMin\n      xOutLeft = A.x + (figure.yMin - A.y) / pente\n    }\n\n    let xOutRight: number = figure.xMax\n    let yOutRight: number = A.y + (figure.xMax - A.x) * pente\n\n    if (yOutRight > figure.yMax) {\n      yOutRight = figure.yMax\n      xOutRight = A.x + (figure.yMax - A.y) / pente\n    } else if (yOutRight < figure.yMin) {\n      yOutRight = figure.yMin\n      xOutRight = A.x + (figure.yMin - A.y) / pente\n    }\n    return [xOutLeft, yOutLeft, xOutRight, yOutRight]\n  } catch (error) {\n    console.error('Erreur dans Line.getCoordsOut', error)\n    return [Number.NaN, Number.NaN, Number.NaN, Number.NaN]\n  }\n}\n\nexport default Line\n","import type Figure from '../../Figure'\nimport { distance } from '../calculus/Coords'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport Segment from './Segment'\n\n/**\n * Trace une demi-droite d'origine point1 et qui passe par point 2\n */\nclass Ray extends Segment {\n  constructor(\n    figure: Figure,\n    {\n      point1,\n      point2,\n      ...options\n    }: {\n      borderSize?: number\n      point1: Point\n      point2: Point\n      shape?: '-|' | '' | '|-' | '|-|'\n    } & OptionsElement2D,\n  ) {\n    super(figure, { point1, point2, ...options })\n    this.type = 'Ray'\n  }\n\n  distancePointer(x: number, y: number): number {\n    const pointerCoords = { x, y }\n    // Calculer la direction de la demi-droite\n    const rayDirection = {\n      x: this.point2.x - this.point1.x,\n      y: this.point2.y - this.point1.y,\n    }\n    const rayLength = Math.hypot(rayDirection.x, rayDirection.y)\n    // Si la longueur du rayon est nulle, la demi-droite se réduit à un point, donc on renvoie la distance entre ce point et le pointeur\n    if (rayLength === 0) {\n      return distance(pointerCoords, this.point1)\n    }\n    // Normaliser la direction du rayon (la rendre unitaire)\n    const normalizedRayDirection = {\n      x: rayDirection.x / rayLength,\n      y: rayDirection.y / rayLength,\n    }\n    // Trouver la projection du point sur la demi-droite\n    const projection =\n      (normalizedRayDirection.x * (x - this.point1.x) +\n        normalizedRayDirection.y * (y - this.point1.y)) /\n      rayLength\n    // La distance minimale est la distance au point d'origine si la projection est négative\n    if (projection < 0) {\n      return distance(pointerCoords, this.point1)\n    }\n    // Calculer les coordonnées du point le plus proche sur la demi-droite\n    const closestX = this.point1.x + rayDirection.x * projection\n    const closestY = this.point1.y + rayDirection.y * projection\n    const closest = { x: closestX, y: closestY }\n    return distance(pointerCoords, closest)\n  }\n\n  update(): void {\n    const [x1Svg, y1Svg, x2Svg, y2Svg] = getRayCoordsOut(\n      this.point1,\n      this.point2,\n    )\n    const [x1Screen, y1Screen, x2Screen, y2Screen] = [\n      this.figure.xToSx(x1Svg),\n      this.figure.yToSy(y1Svg),\n      this.figure.xToSx(x2Svg),\n      this.figure.yToSy(y2Svg),\n    ]\n    if (\n      !Number.isFinite(x1Screen) ||\n      !Number.isFinite(x2Screen) ||\n      !Number.isFinite(y1Screen) ||\n      !Number.isFinite(y2Screen)\n    ) {\n      this.svgLine.removeAttribute('x1')\n      this.svgLine.removeAttribute('x2')\n      this.svgLine.removeAttribute('y1')\n      this.svgLine.removeAttribute('y2')\n    } else {\n      this.svgLine.setAttribute('x1', `${x1Screen}`)\n      this.svgLine.setAttribute('y1', `${y1Screen}`)\n      this.svgLine.setAttribute('x2', `${x2Screen}`)\n      this.svgLine.setAttribute('y2', `${y2Screen}`)\n    }\n    if (this.shape?.at(0) === '|') {\n      this.drawBorder1()\n    } else {\n      this.svgBorder1?.remove()\n    }\n    if (this.shape?.at(-1) === '|') {\n      this.drawBorder2()\n    } else {\n      this.svgBorder2?.remove()\n    }\n    this.notify()\n  }\n\n  get description(): string {\n    return `Demi-droite ${this.notation}`\n  }\n\n  get latex(): string {\n    const [x1, y1, x2, y2] = getRayCoordsOut(this.point1, this.point2)\n    let result = `%${this.description}`\n    result += `\\n\\\\draw${this.latexOptions} (${x1}, ${y1}) -- (${x2}, ${y2});`\n    return result\n  }\n\n  get notation(): string {\n    const point1Name =\n      this.point1.label !== '' ? this.point1.label : this.point1.id\n    const point2Name =\n      this.point2.label !== '' ? this.point2.label : this.point2.id\n    return `[${point1Name}${point2Name})`\n  }\n}\nfunction getRayCoordsOut(A: Point, B: Point): [number, number, number, number] {\n  if (\n    A.x === undefined ||\n    A.y === undefined ||\n    B.x === undefined ||\n    B.y === undefined ||\n    Number.isNaN(A.x) ||\n    Number.isNaN(A.y) ||\n    Number.isNaN(B.x) ||\n    Number.isNaN(B.y)\n  )\n    return [Number.NaN, Number.NaN, Number.NaN, Number.NaN]\n  try {\n    const parentFigure = A.figure\n    let pente = Number.POSITIVE_INFINITY\n    if (B.x !== A.x) {\n      pente = (B.y - A.y) / (B.x - A.x)\n    }\n    if (pente === Number.POSITIVE_INFINITY) {\n      if (A.y > B.y) {\n        return [A.x, A.y, A.x, parentFigure.yMin] // Si la droite est verticale on prend l'abscisse de A et le bon bord en ordonnée\n      }\n      return [A.x, A.y, A.x, parentFigure.yMax] // Ici on sort par en haut\n    }\n    if (Math.abs(pente) < 10 ** -4) {\n      if (A.x > B.x) {\n        return [A.x, A.y, parentFigure.xMin, A.y]\n      }\n      return [A.x, A.y, parentFigure.xMax, A.y]\n    }\n    let xOutLeft: number\n    let yOutLeft: number\n    let n = 0\n    if (B.x > A.x) {\n      while (true) {\n        xOutLeft = A.x + n\n        yOutLeft = A.y + n * pente\n        n++\n        if (\n          xOutLeft > parentFigure.xMax + 1 ||\n          yOutLeft > parentFigure.yMax + 1 ||\n          yOutLeft < parentFigure.yMin - 1\n        )\n          break\n      }\n      return [A.x, A.y, xOutLeft, yOutLeft]\n    }\n    while (true) {\n      xOutLeft = A.x - n\n      yOutLeft = A.y - n * pente\n      n++\n      if (\n        xOutLeft < parentFigure.xMin - 1 ||\n        yOutLeft > parentFigure.yMax + 1 ||\n        yOutLeft < parentFigure.yMin - 1\n      )\n        break\n    }\n    return [A.x, A.y, xOutLeft, yOutLeft]\n  } catch (error) {\n    console.error('Erreur dans Ray.getRayCoordsOut', error)\n    return [Number.NaN, Number.NaN, Number.NaN, Number.NaN]\n  }\n}\n\nexport default Ray\n","import type Figure from '../../Figure'\n\nimport { similitudeCoord } from '../calculus/Coords'\nimport type { OptionsElement2D, OptionsPointBy } from '../interfaces'\nimport Line from '../lines/Line'\nimport Ray from '../lines/Ray'\nimport Segment from '../lines/Segment'\nimport Point from './Point'\n\nclass PointOnLine extends Point {\n  line: Line\n  center: Point\n  origin: Point\n  k: number\n  constructor(\n    figure: Figure,\n    {\n      k,\n      line,\n      shape = '|',\n      ...options\n    }: { k?: number; line: Line } & OptionsPointBy & OptionsElement2D,\n  ) {\n    if (k === undefined) k = Math.random()\n    if (shape === undefined) shape = '|'\n    super(figure, {\n      x: 99,\n      y: 99,\n      shape,\n      ...options,\n    })\n    this.center = line.point1\n    this.origin = line.point2\n    this.k = k\n    this.type = 'PointOnLine'\n    this.line = line\n    this.isFree = true\n    this.line.subscribe(this)\n  }\n\n  /** Déplace le point */\n  moveTo(x: number, y: number): void {\n    // Lieu du clic\n    const origin = { x, y }\n    // On calcule le nouveau coefficient de l'homothétie par rapport au projeté du lieu où on clic\n    try {\n      const [a, b, c] = this.line.equation\n      const k = 1 / (a * a + b * b)\n      let x: number | undefined\n      let y: number | undefined\n      if (a === 0) {\n        x = origin.x\n        y = -c / b\n      } else if (b === 0) {\n        y = origin.y\n        x = -c / a\n      } else {\n        if (origin.x === undefined || origin.y === undefined) {\n          x = Number.NaN\n          y = Number.NaN\n        } else {\n          x = k * (b * b * origin.x - a * b * origin.y - a * c)\n          y =\n            k * (-a * b * origin.x + a * a * origin.y + (a * a * c) / b) - c / b\n        }\n      }\n      if (this.line instanceof Segment) {\n        const line = this.line\n        if (this.line instanceof Line) {\n          let isPositive = 1\n          if (this.line.point1.x < this.line.point2.x && x < this.line.point1.x)\n            isPositive = -1\n          else if (\n            this.line.point1.x > this.line.point2.x &&\n            x > this.line.point1.x\n          )\n            isPositive = -1\n          else if (\n            this.line.point1.y < this.line.point2.y &&\n            y < this.line.point1.y\n          )\n            isPositive = -1\n          else if (\n            this.line.point1.y > this.line.point2.y &&\n            y > this.line.point1.y\n          )\n            isPositive = -1\n          this.k =\n            (isPositive *\n              Math.hypot(x - this.line.point1.x, y - this.line.point1.y)) /\n            Math.hypot(\n              this.line.point2.x - this.line.point1.x,\n              this.line.point2.y - this.line.point1.y,\n            )\n          //\n        } else if (line instanceof Ray) {\n          const ray = this.line as Ray\n          if (ray.point1.x < ray.point2.x && x < ray.point1.x) this.k = 0\n          else if (ray.point1.x > ray.point2.x && x > ray.point1.x) this.k = 0\n          else if (ray.point1.y < ray.point2.y && y < ray.point1.y) this.k = 0\n          else if (ray.point1.y > ray.point2.y && y > ray.point1.y) this.k = 0\n          else\n            this.k =\n              Math.hypot(x - ray.point1.x, y - ray.point1.y) /\n              Math.hypot(\n                ray.point2.x - ray.point1.x,\n                ray.point2.y - ray.point1.y,\n              )\n        } else if (line instanceof Segment) {\n          const segment = this.line as Segment\n          if (x < Math.min(segment.point1.x, segment.point2.x))\n            this.k = segment.point1.x < segment.point2.x ? 0 : 1\n          else if (x > Math.max(segment.point1.x, segment.point2.x))\n            this.k = segment.point1.x < segment.point2.x ? 1 : 0\n          else if (y < Math.min(segment.point1.y, segment.point2.y))\n            this.k = segment.point1.y < segment.point2.y ? 0 : 1\n          else if (y > Math.max(segment.point1.y, segment.point2.y))\n            this.k = segment.point1.y < segment.point2.y ? 1 : 0\n          else\n            this.k =\n              Math.hypot(x - segment.point1.x, y - segment.point1.y) /\n              Math.hypot(\n                segment.point2.x - segment.point1.x,\n                segment.point2.y - segment.point1.y,\n              )\n        }\n      }\n    } catch {\n      console.error('Erreur dans le moveTo PointOnLine')\n    }\n    this.update()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idLine: this.line.id,\n      k: this.k,\n      label: this.label,\n      shape: this.shape,\n    }\n  }\n\n  update(): void {\n    this._x =\n      this.center.x + this.k * ((this.origin as Point).x - this.center.x)\n    this._y =\n      this.center.y + this.k * ((this.origin as Point).y - this.center.y)\n    // La marque du segment doit être perpendiculaire à la droite donc on surcharge le update par défaut\n    if (this.shape === '|') {\n      const a = { x: this.line.point1.x, y: this.line.point1.y }\n      const o = { x: this._x, y: this._y }\n      const l = Math.hypot(\n        this.line.point1.x - this._x,\n        this.line.point1.y - this._y,\n      )\n      let { x: x1, y: y1 } = similitudeCoord(\n        a,\n        o,\n        (((1 / l) * this.sizeInPixels) / this.figure.pixelsPerUnit) *\n          Math.sqrt(2),\n        90,\n      )\n      let { x: x2, y: y2 } = similitudeCoord(\n        a,\n        o,\n        (((1 / l) * this.sizeInPixels) / this.figure.pixelsPerUnit) *\n          Math.sqrt(2),\n        -90,\n      )\n      // Le trait ne se trace pas si le point est confondu avec l'origine donc on \"change d'origine\" pour le calcul\n      if (\n        !Number.isFinite(x1) ||\n        !Number.isFinite(x2) ||\n        !Number.isFinite(y1) ||\n        !Number.isFinite(y2)\n      ) {\n        const { x: newX1, y: newY1 } = similitudeCoord(\n          o,\n          a,\n          (((1 / l) * this.sizeInPixels) / this.figure.pixelsPerUnit) *\n            Math.sqrt(2),\n          90,\n        )\n        const { x: newX2, y: newY2 } = similitudeCoord(\n          o,\n          a,\n          (((1 / l) * this.sizeInPixels) / this.figure.pixelsPerUnit) *\n            Math.sqrt(2),\n          -90,\n        )\n        x1 = newX1\n        x2 = newX2\n        y1 = newY1\n        y2 = newY2\n      }\n      if (\n        Number.isFinite(x1) &&\n        Number.isFinite(x2) &&\n        Number.isFinite(y1) &&\n        Number.isFinite(y2)\n      ) {\n        const x1Svg = this.figure.xToSx(x1).toString()\n        const x2Svg = this.figure.xToSx(x2).toString()\n        const y1Svg = this.figure.yToSy(y1).toString()\n        const y2Svg = this.figure.yToSy(y2).toString()\n        this.svgLine1.setAttribute('x1', x1Svg)\n        this.svgLine1.setAttribute('y1', y1Svg)\n        this.svgLine1.setAttribute('x2', x2Svg)\n        this.svgLine1.setAttribute('y2', y2Svg)\n        this.groupSvg.appendChild(this.svgLine1)\n      } else console.error('Erreur dans le update de PointOnLine')\n    }\n    super.update()\n  }\n\n  get description(): string {\n    return `Point sur $${this.line.notation}$`\n  }\n\n  get x(): number {\n    return this._x\n  }\n\n  set x(x: number) {\n    const [a, b, c] = this.line.equation\n    const y = (-a * x - c) / b\n    this.moveTo(x, y)\n  }\n\n  get y(): number {\n    return this._y\n  }\n\n  set y(y: number) {\n    const [a, b, c] = this.line.equation\n    const x = (-b * y - c) / a\n    this.moveTo(x, y)\n  }\n}\n\nexport default PointOnLine\n","import type Line from '../elements/lines/Line'\nimport type Point from '../elements/points/Point'\nimport PointOnLine from '../elements/points/PointOnLine'\nimport type Figure from '../Figure'\n\n/**\n * Vérifie si un point appartient à une ligne (droite, demi-droite ou segment)\n * @param {Figure} figure // La figure\n * @param {string} labelPt // Nom du point\n * @param {string[]|string} nameLine // Nom de la ligne ou bien tableau contenant les noms de la ligne\n * @example Voir exemples plus adaptés dans Figure.ts\n * @author Eric Elter\n * @returns {{ isValid: boolean, message: string }}\n */\nexport default function checkPointOnLine({\n  figure,\n  labelPt,\n  nameLine,\n}: {\n  figure: Figure\n  labelPt: string\n  nameLine: string[] | string\n}): { isValid: boolean; message: string } {\n  let points = [...figure.elements.values()].filter(\n    (e) =>\n      e.type !== 'pointer' &&\n      e.type.includes('Point') &&\n      'label' in e &&\n      e.label === labelPt,\n  ) as Point[]\n  if (points.length === 0)\n    return {\n      isValid: false,\n      message: `Il n'existe pas de point ${labelPt} sur la figure.`,\n    }\n  if (points.length > 1)\n    return {\n      isValid: false,\n      message: `Il existe trop de points ${labelPt} sur la figure.`,\n    }\n\n  let lines = [...figure.elements.values()].filter(\n    (e) =>\n      e.type.includes('Line') ||\n      e.type.includes('Segment') ||\n      e.type.includes('Ray'),\n  ) as Line[]\n  if (lines.length === 0)\n    lines = lines.filter((e) => nameLine.includes(e.notation))\n\n  const nomLigne = Array.isArray(nameLine) ? nameLine[0] : nameLine\n  if (lines.length === 0)\n    return {\n      isValid: false,\n      message: `${nomLigne} n'existe pas sur la figure.`,\n    }\n\n  points = [...figure.elements.values()].filter(\n    (e) =>\n      e instanceof PointOnLine &&\n      e.type !== 'pointer' &&\n      e.type.includes('PointOnLine') &&\n      lines.some((line) => e.line === line),\n  ) as PointOnLine[]\n  if (points.length === 0)\n    return {\n      isValid: false,\n      message: `Il n'existe pas de point sur ${nomLigne}.`,\n    }\n\n  points = points.filter((e) => e.label === labelPt)\n  if (points.length === 0)\n    return {\n      isValid: false,\n      message: `Il n'existe pas de point ${labelPt} sur ${nomLigne}.`,\n    }\n\n  return { isValid: true, message: `Le point ${labelPt} sur ${nomLigne}.` }\n}\n","import type { Coords } from '../elements/calculus/Coords'\nimport type Polygon from '../elements/lines/Polygon'\nimport type Segment from '../elements/lines/Segment'\nimport type Figure from '../Figure'\nimport { round } from '../lib/format'\n\nexport default function checkPolygon({\n  figure,\n  points,\n  color,\n  acceptSegments = true,\n}: {\n  figure: Figure\n  points: Coords[]\n  color?: string\n  acceptSegments?: boolean\n}): {\n  isValid: boolean\n  message: string\n} {\n  let polygons = [...figure.elements.values()].filter((e) =>\n    e.type.includes('Polygon'),\n  ) as Polygon[]\n  if (color !== undefined) {\n    polygons = polygons.filter((e) => e.color === color)\n  }\n  if (polygons.length === 0) {\n    if (acceptSegments) {\n      let segments = [...figure.elements.values()].filter(\n        (e) => e.type === 'Segment',\n      ) as Segment[]\n      if (color !== undefined) {\n        segments = segments.filter((e) => e.color === color)\n      }\n      if (segments.length === 0) {\n        return {\n          isValid: false,\n          message:\n            color === undefined\n              ? \"Il n'y a ni polygone, ni segments dans la figure.\"\n              : `Il n'y a ni polygone, ni segments de couleur ${color} dans la figure.`,\n        }\n      }\n      const n = points.length\n      const eq = (a: Coords, b: Coords) =>\n        round(a.x) === round(b.x) && round(a.y) === round(b.y)\n      let allEdges = true\n      for (let i = 0; i < n; i++) {\n        const p1 = points[i]\n        const p2 = points[(i + 1) % n]\n        const found = segments.some(\n          (s) =>\n            (eq(s.point1, p1) && eq(s.point2, p2)) ||\n            (eq(s.point1, p2) && eq(s.point2, p1)),\n        )\n        if (!found) {\n          allEdges = false\n          break\n        }\n      }\n      return {\n        isValid: allEdges,\n        message: allEdges\n          ? 'Les segments du polygone ont bien été tracés.'\n          : color === undefined\n            ? \"Tous les côtés n'ont pas été tracés.\"\n            : \"Tous les côtés n'ont pas été tracés avec la couleur demandée.\",\n      }\n    }\n    return {\n      isValid: false,\n      message:\n        color === undefined\n          ? \"Il n'y a pas de polygones dans la figure.\"\n          : `Il n'y a pas de polygones de couleur ${color} dans la figure.`,\n    }\n  }\n  let samePolygone = false\n  for (const polygon of polygons) {\n    if (polygon.points.length !== points.length) {\n      continue\n    }\n    // Vérifie l'égalité cyclique (rotations) et l'inversion, avec arrondi et sans muter `points`\n    const n = points.length\n    const eq = (a: Coords, b: Coords) =>\n      round(a.x) === round(b.x) && round(a.y) === round(b.y)\n    const sameRotation = (src: Coords[], tgt: Coords[]) => {\n      for (let offset = 0; offset < n; offset++) {\n        let ok = true\n        for (let i = 0; i < n; i++) {\n          if (!eq(src[(i + offset) % n], tgt[i])) {\n            ok = false\n            break\n          }\n        }\n        if (ok) return true\n      }\n      return false\n    }\n    if (\n      sameRotation(points, polygon.points) ||\n      sameRotation([...points].reverse(), polygon.points)\n    ) {\n      samePolygone = true\n      break\n    }\n  }\n  return {\n    isValid: samePolygone,\n    message: samePolygone ? 'Le polygone a bien été tracé' : '',\n  }\n}\n","import type Polygon from '../elements/lines/Polygon'\nimport type Figure from '../Figure'\n\nexport default function checkPolygonByLabels({\n  figure,\n  labels,\n  color,\n}: {\n  figure: Figure\n  labels: string[]\n  color?: string\n}): {\n  isValid: boolean\n  message: string\n} {\n  let polygons = [...figure.elements.values()].filter((e) =>\n    e.type.includes('Polygon'),\n  ) as Polygon[]\n  if (color !== undefined) {\n    polygons = polygons.filter((e) => e.color === color)\n  }\n  if (polygons.length === 0)\n    return {\n      isValid: false,\n      message:\n        color === undefined\n          ? \"Il n'y a pas de polygones dans la figure.\"\n          : `Il n'y a pas de polygones de couleur ${color} dans la figure.`,\n    }\n  let samePolygone = false\n  for (const polygon of polygons) {\n    if (polygon.points.length !== labels.length) {\n      continue\n    }\n    // Index du premier point du polygone\n    const index = labels.findIndex((label) => label === polygon.points[0].label)\n    if (index === -1) {\n      break\n    }\n    const newLabels = labels.slice(index).concat(labels.slice(0, index))\n    samePolygone = newLabels.every(\n      (label, i) => label === polygon.points[i].label,\n    )\n    if (samePolygone) {\n      break\n    }\n    const reveseLabels = labels.reverse()\n    const indexReverse = reveseLabels.findIndex(\n      (label) => label === polygon.points[0].label,\n    )\n    const newLabelsReverse = reveseLabels\n      .slice(indexReverse)\n      .concat(reveseLabels.slice(0, indexReverse))\n    samePolygone = newLabelsReverse.every(\n      (label, i) => label === polygon.points[i].label,\n    )\n    if (samePolygone) {\n      break\n    }\n  }\n  return { isValid: samePolygone, message: '' }\n}\n","import { type Coords, equationLine } from '../elements/calculus/Coords'\nimport type Ray from '../elements/lines/Ray'\nimport type Figure from '../Figure'\n\nimport { round } from '../lib/format'\n\nexport function checkRayFromLabels({\n  figure,\n  nameRay,\n  color,\n}: {\n  figure: Figure\n  nameRay: string[] | string\n  color?: string\n}): {\n  isValid: boolean\n  message: string\n} {\n  let rays: Ray[]\n  let ray1: Ray[] = []\n  let ray2: Ray[] = []\n\n  rays = [...figure.elements.values()].filter((e) =>\n    e.type.includes('Ray'),\n  ) as Ray[]\n  if (rays.length === 0)\n    return { isValid: false, message: \"Il n'y a pas de demi-droite dans la figure.\" }\n\n  const nomRay1 = Array.isArray(nameRay) ? nameRay[0] : nameRay\n  if (rays.length !== 0) {\n    ray1 = rays.filter((e) => nameRay.includes(e.notation) || nameRay.includes(e.point1.label + e.point2.label) || nameRay.includes(e.point2.label + e.point1.label)  )\n    if (ray1.length === 0)\n      return {\n        isValid: false,\n        message: `${nomRay1} n'existe pas sur la figure.`,\n      }\n  }\n\n  if (color !== undefined) {\n    ray2 = ray1.filter((e) => e.color === color)\n    if (ray2.length === 0)\n      return {\n        isValid: false,\n        message:\n          \"Il n'y a pas demi-droite de la couleur demandée dans la figure.\",\n      }\n    \n  }\n  return { isValid: true, message: 'La demi-droite a bien été tracée.' }\n}\n\nexport default function checkRay({\n  figure,\n  point1,\n  point2,\n  color,\n}: {\n  figure: Figure\n  point1: Coords\n  point2: Coords\n  color?: string\n}): {\n  isValid: boolean\n  message: string\n} {\n  let rays = [...figure.elements.values()].filter(\n    (e) => e.type === 'Ray',\n  ) as Ray[]\n  const [a, b, c] = equationLine(point1, point2)\n  if (rays.length === 0)\n    return {\n      isValid: false,\n      message: \"Il n'y a pas de demi-droite dans la figure.\",\n    }\n  if (color !== undefined) {\n    rays = rays.filter((e) => e.color === color)\n    if (rays.length === 0)\n      return {\n        isValid: false,\n        message:\n          \"Il n'y a pas de demi-droite de la couleur demandée dans la figure.\",\n      }\n  }\n\n  for (const ray of rays) {\n    const [a2, b2, c2] = ray.equation\n    if (\n      areCoincident(a, b, c, a2, b2, c2) &&\n      round(ray.point1.x) === round(point1.x) &&\n      round(ray.point1.y) === round(point1.y)\n    ) {\n      const directionRay = {\n        x: round(ray.point2.x - ray.point1.x),\n        y: round(ray.point2.y - ray.point1.y),\n      }\n      const directionCheck = {\n        x: round(point2.x - point1.x),\n        y: round(point2.y - point1.y),\n      }\n      if (\n        directionRay.x * directionCheck.x >= 0 &&\n        directionRay.y * directionCheck.y >= 0\n      ) {\n        return { isValid: true, message: 'La demi-droite a bien été tracée.' }\n      }\n    }\n  }\n\n  if (color !== undefined) {\n    rays = [...figure.elements.values()].filter(\n      (e) => e.type === 'Ray',\n    ) as Ray[]\n    for (const ray of rays) {\n      const [a2, b2, c2] = ray.equation\n      if (\n        areCoincident(a, b, c, a2, b2, c2) &&\n        round(ray.point1.x) === round(point1.x) &&\n        round(ray.point1.y) === round(point1.y)\n      ) {\n        const directionRay = {\n          x: round(ray.point2.x - ray.point1.x),\n          y: round(ray.point2.y - ray.point1.y),\n        }\n        const directionCheck = {\n          x: round(point2.x) - round(point1.x),\n          y: round(point2.y) - round(point1.y),\n        }\n        if (\n          directionRay.x * directionCheck.x >= 0 &&\n          directionRay.y * directionCheck.y >= 0\n        ) {\n          return {\n            isValid: false,\n            message:\n              \"Il n'y a pas de demi-droite de la couleur demandée dans la figure.\",\n          }\n        }\n      }\n    }\n  }\n\n  return {\n    isValid: false,\n    message: 'Aucune demi-droite ne correspond à la réponse attendue.',\n  }\n}\n\nfunction areCoincident(\n  a1: number,\n  b1: number,\n  c1: number,\n  a2: number,\n  b2: number,\n  c2: number,\n  precision = 2,\n): boolean {\n  // Cas des droites verticales\n  if (b1 === 0 && b2 === 0) {\n    return c1 / a1 === c2 / a2\n  }\n  const slope1 = b1 !== 0 ? -a1 / b1 : Number.POSITIVE_INFINITY\n  const slope2 = b2 !== 0 ? -a2 / b2 : Number.POSITIVE_INFINITY\n\n  const intercept1 = b1 !== 0 ? -c1 / b1 : Number.NaN\n  const intercept2 = b2 !== 0 ? -c2 / b2 : Number.NaN\n\n  return (\n    round(slope1, precision) === round(slope2, precision) &&\n    round(intercept1, precision) === round(intercept2, precision)\n  )\n}\n","import { distance } from '../elements/calculus/Coords'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\nimport { round } from '../lib/format'\nimport syncShake from './syncShake'\n\nexport default function checkSameDistance({\n  figure,\n  label1,\n  label2,\n  time = 0,\n}: {\n  figure: Figure\n  label1: string\n  label2: string\n  time?: number\n}): {\n  isValid: boolean\n  message: string\n} {\n  const [a, b] = label1.split('')\n  const [c, d] = label2.split('')\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e.type.includes('Point'),\n  ) as Point[]\n  const matchPointsA = points.filter((p) => p.label === a)\n  if (matchPointsA.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${a}$ dans la figure.`,\n    }\n  }\n  if (matchPointsA.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsA.length} points $${a}$ dans la figure.`,\n    }\n  }\n  const matchPointsB = points.filter((p) => p.label === b)\n  if (matchPointsB.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${b}$ dans la figure.`,\n    }\n  }\n  if (matchPointsB.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsB.length} points $${b}$ dans la figure.`,\n    }\n  }\n  const matchPointsC = points.filter((p) => p.label === c)\n  if (matchPointsC.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${c}$ dans la figure.`,\n    }\n  }\n  if (matchPointsC.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsC.length} points $${c}$ dans la figure.`,\n    }\n  }\n  const matchPointsD = points.filter((p) => p.label === d)\n  if (matchPointsD.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a pas de point $${d}$ dans la figure.`,\n    }\n  }\n  if (matchPointsD.length > 1) {\n    return {\n      isValid: false,\n      message: `Il y a ${matchPointsD.length} points $${d}$ dans la figure.`,\n    }\n  }\n  const pointA = matchPointsA[0]\n  const pointB = matchPointsB[0]\n  const pointC = matchPointsC[0]\n  const pointD = matchPointsD[0]\n  let isValid =\n    round(distance(pointA, pointB), 2) === round(distance(pointC, pointD), 2)\n  syncShake({ figure, time })\n  isValid =\n    isValid &&\n    round(distance(pointA, pointB), 2) === round(distance(pointC, pointD), 2)\n  syncShake({ figure, time })\n  isValid =\n    isValid &&\n    round(distance(pointA, pointB), 2) === round(distance(pointC, pointD), 2)\n  syncShake({ figure, time })\n  isValid =\n    isValid &&\n    round(distance(pointA, pointB), 2) === round(distance(pointC, pointD), 2)\n  const message = isValid\n    ? `Les longueurs $${a}${b}$ et $${c}${d}$ sont bien toujours égales.`\n    : `Les longueurs $${a}${b}$ et $${c}${d}$ ne sont pas toujours égales.`\n  return { isValid, message }\n}\n","import { type Coords, equationLine } from '../elements/calculus/Coords'\nimport type Segment from '../elements/lines/Segment'\nimport type Figure from '../Figure'\n\nimport { round } from '../lib/format'\n\n\nexport function checkSegmentFromLabels({\n  figure,\n  nameSegment,\n  color,\n}: {\n  figure: Figure\n  nameSegment: string[] | string\n  color?: string\n}): {\n  isValid: boolean\n  message: string\n} {\n  let segments: Segment[]\n  let segment1: Segment[] = []\n  let segment2: Segment[] = []\n\n  segments = [...figure.elements.values()].filter((e) =>\n    e.type.includes('Segment'),\n  ) as Segment[]\n  if (segments.length === 0)\n    return { isValid: false, message: \"Il n'y a pas de segment dans la figure.\" }\n\n  const nomSegment1 = Array.isArray(nameSegment) ? nameSegment[0] : nameSegment\n  if (segments.length !== 0) {\n    segment1 = segments.filter((e) => nameSegment.includes(e.notation) || nameSegment.includes(e.point1.label + e.point2.label) || nameSegment.includes(e.point2.label + e.point1.label)  )\n    if (segment1.length === 0)\n      return {\n        isValid: false,\n        message: `${nomSegment1} n'existe pas sur la figure.`,\n      }\n  }\n\n  if (color !== undefined) {\n    segment2 = segment1.filter((e) => e.color === color)\n    if (segment2.length === 0)\n      return {\n        isValid: false,\n        message:\n          \"Il n'y a pas de segment de la couleur demandée dans la figure.\",\n      }\n    \n  }\n  return { isValid: true, message: 'Le segment a bien été tracé.' }\n}\n\n/**\n *\n * @param param0 Vérifie si un segment est tracé\n * Attention ! Si A, B, C, D sont alignés dans cet ordre et [AD] est tracé, alors [BC] sera compté comme tracé\n * @returns\n */\nexport default function checkSegment({\n  figure,\n  point1,\n  point2,\n  color,\n}: {\n  figure: Figure\n  point1: Coords\n  point2: Coords\n  color?: string\n}): { isValid: boolean; message: string } {\n  let segments = [...figure.elements.values()].filter((e) =>\n    e.type === 'Segment',\n  ) as Segment[]\n  if (segments.length === 0)\n    return {\n      isValid: false,\n      message: \"Il n'y a pas de segment dans la figure.\",\n    }\n  if (color !== undefined) {\n    segments = segments.filter((e) => e.color === color)\n  }\n  if (segments.length === 0)\n    return {\n      isValid: false,\n      message: \"Il n'y a pas de segment de la couleur demandée dans la figure.\",\n    }\n  const [a, b, c] = equationLine(point1, point2)\n  const segmentsCoincident = segments.filter((segment) => {\n    const [a2, b2, c2] = segment.equation\n    return areCoincident(a, b, c, a2, b2, c2)\n  })\n  if (segmentsCoincident.length === 0) {\n    return { isValid: false, message: 'Les segments ne sont pas confondus.' }\n  }\n  for (const segment of segmentsCoincident) {\n    if (\n      (round(segment.point1.x) === round(point1.x) &&\n        round(segment.point1.y) === round(point1.y) &&\n        round(segment.point2.x) === round(point2.x) &&\n        round(segment.point2.y) === round(point2.y)) ||\n      (round(segment.point2.x) === round(point1.x) &&\n        round(segment.point2.y) === round(point1.y) &&\n        round(segment.point1.x) === round(point2.x) &&\n        round(segment.point1.y) === round(point2.y))\n    ) {\n      return { isValid: true, message: 'Le segment a bien été tracé.' }\n    }\n    // Si [point1, point2] est inclus dans le segment\n    if (\n      segment.point1.x <= point1.x &&\n      point1.x <= segment.point2.x &&\n      segment.point1.y <= point1.y &&\n      point1.y <= segment.point2.y &&\n      segment.point1.x <= point2.x &&\n      point2.x <= segment.point2.x &&\n      segment.point1.y <= point2.y &&\n      point2.y <= segment.point2.y\n    ) {\n      return { isValid: true, message: 'Un segment plus grand existe.' }\n    }\n  }\n  if (color !== undefined) {\n    segments = [...figure.elements.values()].filter((e) =>\n      e.type.includes('Segment'),\n    ) as Segment[]\n    for (const segment of segmentsCoincident) {\n      if (\n        (round(segment.point1.x) === round(point1.x) &&\n          round(segment.point1.y) === round(point1.y) &&\n          round(segment.point2.x) === round(point2.x) &&\n          round(segment.point2.y) === round(point2.y)) ||\n        (round(segment.point2.x) === round(point1.x) &&\n          round(segment.point2.y) === round(point1.y) &&\n          round(segment.point1.x) === round(point2.x) &&\n          round(segment.point1.y) === round(point2.y))\n      ) {\n        return {\n          isValid: false,\n          message: \"Le segment n'est pas tracé de la bonne couleur.\",\n        }\n      }\n    }\n  }\n  return {\n    isValid: false,\n    message: 'Aucun segment ne correspond à la réponse attendue.',\n  }\n}\n\nfunction areCoincident(\n  a1: number,\n  b1: number,\n  c1: number,\n  a2: number,\n  b2: number,\n  c2: number,\n  precision = 2,\n): boolean {\n  // Cas des droites verticales\n  if (b1 === 0 && b2 === 0) {\n    return c1 / a1 === c2 / a2\n  }\n  const slope1 = b1 !== 0 ? -a1 / b1 : Number.POSITIVE_INFINITY\n  const slope2 = b2 !== 0 ? -a2 / b2 : Number.POSITIVE_INFINITY\n\n  const intercept1 = b1 !== 0 ? -c1 / b1 : Number.NaN\n  const intercept2 = b2 !== 0 ? -c2 / b2 : Number.NaN\n\n  return (\n    round(slope1, precision) === round(slope2, precision) &&\n    round(intercept1, precision) === round(intercept2, precision)\n  )\n}\n","import type VectorByPoints from '../elements/vector/VectorByPoints'\nimport type Figure from '../Figure'\n\nexport default function checkVector({\n  color,\n  figure,\n  labelOrigin,\n  labelPoint2,\n  x,\n  xOrigin,\n  y,\n  yOrigin,\n}: {\n  color?: string\n  figure: Figure\n  labelOrigin?: string\n  labelPoint2?: string\n  x: number\n  xOrigin?: number\n  y: number\n  yOrigin?: number\n}): { isValid: boolean; message: string; vectors: VectorByPoints[] } {\n  const vectors = [...figure.elements.values()].filter(\n    (e) => e.type === 'Vector' || e.type === 'VectorByPoints',\n  ) as VectorByPoints[]\n  let matchVectors = vectors.filter(\n    (vector) => vector.x === x && vector.y === y,\n  )\n  if (color !== undefined) {\n    matchVectors = matchVectors.filter((vector) => vector.color === color)\n  }\n  if (matchVectors.length === 0) {\n    return {\n      isValid: false,\n      message: `Il n'y a aucun vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$`,\n      vectors: [],\n    }\n  }\n  const verifOnlyLabelOrigin = (): {\n    isValid: boolean\n    message: string\n    vectors: VectorByPoints[]\n  } => {\n    const matchVectors2 = matchVectors.filter(\n      (vector) => vector.point1.label === labelOrigin,\n    )\n    if (matchVectors2.length === 0) {\n      return {\n        isValid: false,\n        message: `Il n'y a aucun vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$ dont l'origine est nommée $${labelOrigin as string}$`,\n        vectors: [],\n      }\n    }\n    return { isValid: true, message: '', vectors: matchVectors2 }\n  }\n  const verifOnlyLabelOriginAndPoint2 = (): {\n    isValid: boolean\n    message: string\n    vectors: VectorByPoints[]\n  } => {\n    const matchVectors2 = matchVectors.filter(\n      (vector) =>\n        vector.point1.label === labelOrigin &&\n        vector.point2.label === labelPoint2,\n    )\n    if (matchVectors2.length === 0) {\n      return {\n        isValid: false,\n        message: `Il n'y a aucun vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$ dont l'origine est nommée $${labelOrigin as string}$ et l'extrémité est nommée $${labelPoint2 as string}$`,\n        vectors: [],\n      }\n    }\n    return { isValid: true, message: '', vectors: matchVectors2 }\n  }\n  const verifOnlyOrigin = (): {\n    isValid: boolean\n    message: string\n    vectors: VectorByPoints[]\n  } => {\n    const matchVectors2 = matchVectors.filter(\n      (vector) => vector.point1.x === xOrigin && vector.point1.y === yOrigin,\n    )\n    if (matchVectors.length === 0 && matchVectors2.length === 0) {\n      return {\n        isValid: false,\n        message: `Il n'y a aucun vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$ dont l'origine a pour coordonnées $(${xOrigin as number}\\\\;;\\\\;${yOrigin as number})$`,\n        vectors: [],\n      }\n    }\n    if (matchVectors.length > 0 && matchVectors2.length === 0) {\n      return {\n        isValid: false,\n        message: `Il y a bien un vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$ mais son origine n'a pas pour coordonnées $(${xOrigin as number}\\\\;;\\\\;${yOrigin as number})$`,\n        vectors: matchVectors,\n      }\n    }\n    return { isValid: true, message: '', vectors: matchVectors2 }\n  }\n  const verifOnlyLabelOriginAndOrigin = (): {\n    isValid: boolean\n    message: string\n    vectors: VectorByPoints[]\n  } => {\n    const matchVectors2 = matchVectors.filter(\n      (vector) =>\n        vector.point1.label === labelOrigin &&\n        vector.point1.x === xOrigin &&\n        vector.point1.y === yOrigin,\n    )\n    if (matchVectors2.length === 0) {\n      return {\n        isValid: false,\n        message: `Il n'y a aucun vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$ dont l'origine est nommée $${labelOrigin as string}$ et a pour coordonnées $(${xOrigin as number}\\\\;;\\\\;${yOrigin as number})$`,\n        vectors: [],\n      }\n    }\n    return { isValid: true, message: '', vectors: matchVectors2 }\n  }\n  const verifLabelOriginAndPoint2AndOrigin = (): {\n    isValid: boolean\n    message: string\n    vectors: VectorByPoints[]\n  } => {\n    const matchVectors2 = matchVectors.filter(\n      (vector) =>\n        vector.point1.label === labelOrigin &&\n        vector.point2.label === labelPoint2 &&\n        vector.point1.x === xOrigin &&\n        vector.point1.y === yOrigin,\n    )\n    if (matchVectors2.length === 0) {\n      return {\n        isValid: false,\n        message: `Il n'y a aucun vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$ dont l'origine est nommée $${labelOrigin as string}$, l'extrémité est nommée $${labelPoint2 as string}$ et a pour coordonnées $(${xOrigin as number}\\\\;;\\\\;${yOrigin as number})$`,\n        vectors: [],\n      }\n    }\n    return { isValid: true, message: '', vectors: matchVectors2 }\n  }\n  if (matchVectors.length === 1) {\n    // On veut que l'origine ait un nom particulier\n    if (\n      labelOrigin !== undefined &&\n      labelOrigin !== '' &&\n      labelPoint2 === undefined &&\n      xOrigin === undefined &&\n      yOrigin === undefined\n    ) {\n      return verifOnlyLabelOrigin()\n      // On veut que les 2 extrémités soient nommées\n    }\n    if (\n      labelOrigin !== undefined &&\n      labelOrigin !== '' &&\n      labelPoint2 !== undefined &&\n      labelPoint2 !== '' &&\n      xOrigin === undefined &&\n      yOrigin === undefined\n    ) {\n      return verifOnlyLabelOriginAndPoint2()\n      // On veut que l'origine ait des coordonnées particulières\n    }\n    if (\n      labelOrigin === undefined &&\n      labelPoint2 === undefined &&\n      xOrigin !== undefined &&\n      yOrigin !== undefined\n    ) {\n      return verifOnlyOrigin()\n      // On veut que l'origine ait des coordonnées particulières et que l'origine soit nommée\n    }\n    if (\n      labelOrigin !== undefined &&\n      labelOrigin !== '' &&\n      labelPoint2 === undefined &&\n      xOrigin !== undefined &&\n      yOrigin !== undefined\n    ) {\n      return verifOnlyLabelOriginAndOrigin()\n      // On veut que l'origine ait des coordonnées particulières et que les 2 extrémités soient nommées\n    }\n    if (\n      labelOrigin !== undefined &&\n      labelOrigin !== '' &&\n      labelPoint2 !== undefined &&\n      labelPoint2 !== '' &&\n      xOrigin !== undefined &&\n      yOrigin !== undefined\n    ) {\n      return verifLabelOriginAndPoint2AndOrigin()\n    }\n    return {\n      isValid: true,\n      message: `Il y a bien un vecteur de coordonnées $(${x}\\\\;;\\\\;${y})$`,\n      vectors: matchVectors,\n    }\n  }\n  return {\n    isValid: false,\n    message: `Il y a ${matchVectors.length} vecteurs de coordonnées $(${x}\\\\;;\\\\;${y})`,\n    vectors: matchVectors,\n  }\n}\n","import Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nimport { round } from '../lib/format'\nimport { areNumbersOrdered } from './checkPointBetween2Points'\n\nexport default async function shake({\n  delta = 3,\n  figure,\n  repeat = 5,\n  time = 1,\n}: {\n  delta?: number\n  figure: Figure\n  repeat?: number\n  time?: number\n}): Promise<void> {\n  const timePeranimation = time / repeat\n  // Retirer l'animation\n  figure.container.style.animation = 'none'\n  void figure.container.offsetWidth\n  // Remettre l'animation définie dans le css de index.html\n  figure.container.style.animation = `shake ${timePeranimation}s`\n  figure.container.style.animationIterationCount = repeat.toString()\n\n  const nearX = (x: number): number => {\n    const distanceFromBorder = 0.5\n    const newX = round(x + (Math.random() - 0.5) * delta, 1)\n    if (\n      newX > figure.xMin + distanceFromBorder &&\n      newX < figure.xMax - distanceFromBorder\n    ) {\n      return newX\n    }\n    return x\n  }\n\n  const nearY = (y: number): number => {\n    const distanceFromBorder = 2\n    const newY = round(y + (Math.random() - 0.5) * delta, 1)\n    if (\n      newY > figure.yMin + distanceFromBorder &&\n      newY < figure.yMax - distanceFromBorder\n    ) {\n      return newY\n    }\n    return y\n  }\n\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e instanceof Point,\n  ) as Point[]\n  const pointsOnFigure = points.filter(\n    (p) =>\n      p.x < figure.xMax &&\n      p.x > figure.xMin &&\n      p.y < figure.yMax &&\n      p.y > figure.yMin,\n  )\n  const freePoints = points.filter((p) => p.isFree)\n\n  for (let _ = 0; _ < repeat; _++) {\n    for (const point of freePoints) {\n      const { x, y } = point\n      point.moveTo(nearX(point.x), nearY(point.y))\n      if (!allPointsStayOnFigure(pointsOnFigure)) {\n        point.moveTo(x, y)\n      }\n    }\n    await delay((time / repeat / points.length) * 1000)\n  }\n  figure.container.style.animation = 'none'\n}\n\nasync function delay(milliseconds: number): Promise<void> {\n  await new Promise((resolve) => {\n    setTimeout(resolve, milliseconds)\n  })\n}\n\nfunction allPointsStayOnFigure(points: Point[]): boolean {\n  const figure = points[0].figure\n  return points.every(\n    (point) =>\n      areNumbersOrdered(figure.xMin, point.x, figure.xMax) &&\n      areNumbersOrdered(figure.yMin, point.y, figure.yMax),\n  )\n}\n","import type Element2D from '../elements/Element2D'\nimport type { OptionsDynamicNumber } from '../elements/interfaces'\nimport type TextDynamicByPosition from '../elements/text/TextDynamicByPosition'\nimport type Figure from '../Figure'\n\n/**\n * Pour les valeurs numériques variables qui seront les « parents » de constructions\n */\nabstract class DynamicNumber {\n  private readonly _label?: string\n  protected _value: number\n  figure: Figure\n  readonly id: string\n  isChild: boolean\n  observers: Array<DynamicNumber | Element2D>\n  textAfter: string\n  textBefore: string\n  type: string\n  constructor(\n    figure: Figure,\n    { isChild = false, textAfter = '', textBefore = '' }: OptionsDynamicNumber,\n  ) {\n    this.figure = figure\n    this.isChild = isChild\n    if (this.isChild) {\n      let cpt = 0\n      while (this.figure.elements.has(`elementTmp${cpt.toString()}`)) {\n        cpt++\n      }\n      this.id = `elementTmp${cpt.toString()}`\n    } else {\n      let cpt = 0\n      while (this.figure.elements.has(`element${cpt.toString()}`)) {\n        cpt++\n      }\n      this.id = `element${cpt.toString()}`\n    }\n    this.figure.elements.set(this.id, this)\n    this.observers = []\n    this._value = Number.NaN\n    this.type = ''\n    this.textBefore = textBefore\n    this.textAfter = textAfter\n  }\n\n  display({\n    color,\n    maximumFractionDigits,\n    minimumFractionDigits,\n    textAfter = '',\n    textBefore = '',\n    x,\n    y,\n  }: {\n    color?: string\n    maximumFractionDigits?: number\n    minimumFractionDigits?: number\n    textAfter?: string\n    textBefore?: string\n    x: number\n    y: number\n  }): TextDynamicByPosition {\n    return this.figure.create('TextDynamicByPosition', {\n      color,\n      dynamicNumber: this,\n      id: `${this.id}_display`,\n      maximumFractionDigits,\n      minimumFractionDigits,\n      textAfter,\n      textBefore,\n      x,\n      y,\n    })\n  }\n\n  draw(): void {}\n\n  /** Prévenir les enfants qu'ils doivent se mettre à jour */\n  notify(): void {\n    for (const element of this.observers) {\n      element.update()\n    }\n  }\n\n  remove(): void {\n    this.figure.elements.delete(this.id)\n    for (const element of this.observers) {\n      element.remove()\n    }\n  }\n\n  /** S'abonner aux modifications des éléments parents\n   * Par exemple le segment s'abonnera aux modifications de ses deux extrémités\n   */\n  subscribe(element: DynamicNumber | Element2D): void {\n    this.observers.push(element)\n  }\n\n  /** Personnalise la sortie JSON de l'élément pour la sauvegarde */\n  toJSON(): object {\n    return {\n      id: this.id,\n      isChild: this.isChild,\n      type: this.type,\n    }\n  }\n\n  /**\n   * Annuler l'abonnement\n   */\n  unsubscribe(element: Element2D): void {\n    this.observers = this.observers.filter((observer) => observer !== element)\n  }\n\n  update(): void {\n    this.notify()\n  }\n\n  get label(): string | undefined {\n    return this._label\n  }\n\n  get string(): string {\n    return this.textBefore + this.value.toString() + this.textAfter\n  }\n\n  set value(x: number) {\n    this._value = x\n    this.notify()\n  }\n\n  get value(): number {\n    return this._value\n  }\n}\n\nexport default DynamicNumber\n","import { angleOriented } from '../elements/calculus/Coords'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\nimport DynamicNumber from './DynamicNumber'\n\nclass Angle extends DynamicNumber {\n  center: Point\n  end: Point\n  start: Point\n  constructor(\n    figure: Figure,\n    { center, end, start }: { center: Point; end: Point; start: Point },\n  ) {\n    super(figure, { isChild: false })\n    this.start = start\n    this.center = center\n    this.end = end\n    this.start.subscribe(this)\n    this.center.subscribe(this)\n    this.end.subscribe(this)\n    this.update()\n  }\n\n  toJSON(): object {\n    return {\n      id: this.id,\n      idCenter: this.center.id,\n      idEnd: this.end.id,\n      idStart: this.start.id,\n      isChild: this.isChild,\n      type: this.type,\n    }\n  }\n\n  update(): void {\n    this._value = angleOriented(this.start, this.center, this.end)\n    this.notify()\n  }\n}\n\nexport default Angle\n","import type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nimport DynamicNumber from './DynamicNumber'\n\nclass Distance extends DynamicNumber {\n  /** id du premier point */\n  idPoint1: string\n  /** id du deuxième point */\n  idPoint2: string\n  /** Pointeur vers la première extrémité */\n  point1: Point\n  /** Pointeur vers la deuxième extrémité */\n  point2: Point\n  constructor(\n    figure: Figure,\n    {\n      isChild = false,\n      point1,\n      point2,\n    }: { isChild?: boolean; point1: Point; point2: Point },\n  ) {\n    super(figure, { isChild })\n    this.type = 'Distance'\n    this.point1 = point1\n    this.idPoint1 = point1.id\n    this.point2 = point2\n    this.idPoint2 = point2.id\n    this.point1.subscribe(this)\n    this.point2.subscribe(this)\n    this.update()\n  }\n\n  remove(): void {\n    const element = this.figure.elements.get(this.id)\n    if (element?.observers) {\n      for (const observer of element.observers) {\n        observer.remove()\n      }\n    }\n    if (element !== undefined) this.figure.elements.delete(this.id)\n  }\n\n  toJSON(): object {\n    return {\n      id: this.id,\n      idPoint1: this.idPoint1,\n      idPoint2: this.idPoint2,\n      isChild: this.isChild,\n      type: this.type,\n    }\n  }\n\n  update(): void {\n    try {\n      this.value = Math.hypot(\n        this.point1.x - this.point2.x,\n        this.point1.y - this.point2.y,\n      )\n    } catch (_error) {\n      console.error('Erreur dans Distance.update()', _error)\n      // this.exist = false\n    }\n    this.notify()\n  }\n}\n\nexport default Distance\n","import type { OptionsDynamicNumber } from '../elements/interfaces'\nimport type Figure from '../Figure'\nimport DynamicNumber from './DynamicNumber'\n\nclass DynamicCalcul extends DynamicNumber {\n  calculus: (x: number[]) => number\n  dynamicNumbers: DynamicNumber[]\n  constructor(\n    figure: Figure,\n    {\n      calculus,\n      dynamicNumbers,\n      ...options\n    }: {\n      calculus: (x: number[]) => number\n      dynamicNumbers: DynamicNumber[]\n    } & OptionsDynamicNumber,\n  ) {\n    super(figure, { ...options })\n    this.calculus = calculus\n    this.dynamicNumbers = dynamicNumbers\n    for (const dynamicNumber of this.dynamicNumbers) {\n      dynamicNumber.subscribe(this)\n    }\n    this.update()\n  }\n\n  update(): void {\n    const values = []\n    for (const dynamicNumber of this.dynamicNumbers) {\n      values.push(dynamicNumber.value)\n    }\n    this._value = this.calculus(values)\n    this.notify()\n  }\n}\n\nexport default DynamicCalcul\n","import type Point from '../elements/points/Point'\nimport type TextDynamicByPosition from '../elements/text/TextDynamicByPosition'\nimport type Figure from '../Figure'\n\nimport DynamicNumber from './DynamicNumber'\n\nclass DynamicX extends DynamicNumber {\n  dynamicText: TextDynamicByPosition\n  point: Point\n  constructor(figure: Figure, { point }: { point: Point }) {\n    super(figure, {})\n    this.point = point\n    this.point.subscribe(this)\n    this.dynamicText = this.figure.create('TextDynamicByPosition', {\n      color: 'blue',\n      dynamicNumber: this,\n      isChild: true,\n      maximumFractionDigits: 2,\n      minimumFractionDigits: 0,\n      textAfter: '',\n      textBefore: '',\n      x: point.x,\n      y: -1,\n    })\n    this.type = 'DynamicX'\n    this.update()\n    this.dynamicText.div.style.fontWeight = 'bolder'\n  }\n\n  toJSON() {\n    return {\n      ...super.toJSON(),\n      idPoint: this.point.id,\n    }\n  }\n\n  update(): void {\n    this.value = this.point.x\n    this.dynamicText.x = this.point.x\n    if (this.point.y > 0) {\n      this.dynamicText.y = -1\n    } else {\n      this.dynamicText.y = 1\n    }\n    this.notify()\n  }\n}\n\nexport default DynamicX\n","import type Point from '../elements/points/Point'\nimport type TextDynamicByPosition from '../elements/text/TextDynamicByPosition'\nimport type Figure from '../Figure'\n\nimport DynamicNumber from './DynamicNumber'\n\nclass DynamicY extends DynamicNumber {\n  dynamicText: TextDynamicByPosition\n  point: Point\n  constructor(figure: Figure, { point }: { point: Point }) {\n    super(figure, {})\n    this.point = point\n    this.point.subscribe(this)\n    this.dynamicText = this.figure.create('TextDynamicByPosition', {\n      color: 'blue',\n      dynamicNumber: this,\n      isChild: true,\n      maximumFractionDigits: 2,\n      minimumFractionDigits: 0,\n      textAfter: '',\n      textBefore: '',\n      x: -1,\n      y: point.y,\n    })\n    this.type = 'DynamicY'\n    this.update()\n    this.dynamicText.div.style.fontWeight = 'bolder'\n  }\n\n  toJSON() {\n    return {\n      ...super.toJSON(),\n      idPoint: this.point.id,\n    }\n  }\n\n  update(): void {\n    this.value = this.point.y\n    this.dynamicText.y = this.point.y\n    if (this.point.x > 0) {\n      this.dynamicText.x = -1\n    } else {\n      this.dynamicText.x = 1\n    }\n    this.notify()\n  }\n}\n\nexport default DynamicY\n","// ESM\nimport { create,\n  // juste ce qu’il faut :\n  parseDependencies,\n  evaluateDependencies,\n  addDependencies,\n  subtractDependencies,\n  multiplyDependencies,\n  divideDependencies,\n  powDependencies,\n  unaryMinusDependencies,\n} from 'mathjs'\n\n// Configuration optionnelle\nconst config = {}\n\n// Création d’une instance \"light\" de mathjs\nconst math = create(\n  {\n    parseDependencies,\n    evaluateDependencies,\n    addDependencies,\n    subtractDependencies,\n    multiplyDependencies,\n    divideDependencies,\n    powDependencies,\n    unaryMinusDependencies,\n  },\n  config\n)\n\n// Export correct en ESM\nexport default math;","import mathImport from '../../lib/mathjsInstance'\n\nimport type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport { distance } from './Coords'\n\n\n// on met math dans une variable globale du module\nconst math = mathImport\n\n/**\n * Trace la courbe représentative d'une fonction à partir de son expression.\n * L'expression de la fonction est un string qui est analysé par mathjs\n */\nclass Graph extends Element2D {\n  expression: string\n  readonly f: (x: number) => number\n  prohibitedValues: number[]\n  step: number\n  xMax: number\n  xMin: number\n  constructor(\n    figure: Figure,\n    {\n      expression,\n      prohibitedValues = [],\n      step,\n      xMax = figure.xMax,\n      xMin = figure.xMin,\n      ...options\n    }: {\n      expression: string\n      prohibitedValues?: number[]\n      step?: number\n      xMax?: number\n      xMin?: number\n    } & OptionsElement2D,\n  ) {\n    super(figure, { ...options })\n    this.type = 'Graph'\n    this.xMin = xMin\n    this.xMax = xMax\n    this.expression = expression\n    this.prohibitedValues = prohibitedValues\n    if (step === undefined) {\n      const unite = figure.pixelsPerUnit * figure.xScale * figure.scale\n      step = 2 / unite\n    }\n    this.step = step\n    const fNode = math.parse(expression)\n    this.f = (x: number): number => fNode.evaluate({ x })\n  }\n\n  draw(): void {\n    const points = getListOfPoints({\n      f: this.f,\n      prohibitedValues: this.prohibitedValues,\n      step: this.step,\n      xMax: this.xMax,\n      xMin: this.xMin,\n    })\n    const pointsCoords = points\n      .map(\n        (point) =>\n          `${this.figure.xToSx(point.x).toString()},${this.figure.yToSy(point.y).toString()}`,\n      )\n      .join(' ')\n    this.groupSvg = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'polyline',\n    )\n    this.groupSvg.setAttribute('fill', 'none')\n    this.groupSvg.setAttribute('points', pointsCoords)\n    this.setVisibilityColorThicknessAndDashed()\n  }\n\n  /**\n   * Calcule la distance minimale entre un point et la courbe\n   */\n  distancePointer(x: number, y: number): number {\n    // On échantillonne plusieurs points de la courbe pour trouver le plus proche\n    let minDistance = Number.POSITIVE_INFINITY\n    for (let xi = this.xMin; xi <= this.xMax; xi += this.step) {\n      try {\n        const yi = this.f(xi)\n        if (!Number.isNaN(yi) && Number.isFinite(yi)) {\n          const d = distance({ x, y }, { x: xi, y: yi })\n          minDistance = Math.min(minDistance, d)\n        }\n      } catch {\n        // Si on tombe sur une erreur, on ignore le point\n      }\n    }\n    return minDistance\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      expression: this.expression,\n      isChild: this.isChild,\n    }\n  }\n\n  /**\n   * Description de la courbe pour l'interface utilisateur\n   */\n  get description(): string {\n    return `Courbe représentative de la fonction ${this.notation}`\n  }\n\n  /**\n   * Code LaTeX pour export\n   */\n  get latex(): string {\n    return `\\\\draw[domain=${this.xMin}:${this.xMax}, smooth, thick, ${this.color}, ${this.isDashed ? 'dashed, ' : ''} line width=${this.thickness}] \n        plot (\\\\x, {${math.parse(this.expression).toString({ implicit: 'show' }).replaceAll('x', '(\\\\x)')}});`\n  }\n\n  /**\n   * Notation mathématique de la fonction\n   */\n  get notation(): string {\n    return `f(x) = ${this.expression}`\n  }\n}\n\nfunction getListOfPoints({\n  f,\n  prohibitedValues,\n  step,\n  xMax,\n  xMin,\n}: {\n  f: (x: number) => number\n  prohibitedValues: number[]\n  step: number\n  xMax: number\n  xMin: number\n}): Array<{ x: number; y: number }> {\n  const points: Array<{ x: number; y: number }> = []\n  for (let x = xMin; x < xMax; x += step) {\n    if (!prohibitedValues.includes(x)) {\n      const point = { x, y: f(x) }\n      points.push(point)\n    }\n  }\n  return points\n}\nexport default Graph\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\n\n/**\n * Trace la courbe représentative d'une fonction.\n * La fonction numérique est défini en JS et ne peut donc pas être sauvegardée dans le JSON.\n */\n\nclass Graph2 extends Element2D {\n  f: (x: number) => number\n  prohibitedValues: number[]\n  step: number\n  xMax: number\n  xMin: number\n  constructor(\n    figure: Figure,\n    {\n      f,\n      prohibitedValues = [],\n      step,\n      xMax = figure.xMax,\n      xMin = figure.xMin,\n      ...options\n    }: {\n      f: (x: number) => number\n      prohibitedValues?: number[]\n      step?: number\n      xMax?: number\n      xMin?: number\n    } & OptionsElement2D,\n  ) {\n    super(figure, { ...options })\n    this.type = 'Graph'\n    this.xMin = xMin\n    this.xMax = xMax\n    this.f = f\n    this.prohibitedValues = prohibitedValues\n    if (step === undefined) {\n      const unite = figure.pixelsPerUnit * figure.xScale * figure.scale\n      step = 2 / unite\n    }\n    this.step = step\n  }\n\n  draw(): void {\n    const points = getListOfPoints({\n      f: this.f,\n      prohibitedValues: this.prohibitedValues,\n      step: this.step,\n      xMax: this.xMax,\n      xMin: this.xMin,\n    })\n    const pointsCoords = points\n      .map(\n        (point) =>\n          `${this.figure.xToSx(point.x).toString()},${this.figure.yToSy(point.y).toString()}`,\n      )\n      .join(' ')\n    this.groupSvg = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'polyline',\n    )\n    this.groupSvg.setAttribute('fill', 'none')\n    this.groupSvg.setAttribute('points', pointsCoords)\n    this.setVisibilityColorThicknessAndDashed()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      isChild: this.isChild,\n      thickness: this.thickness,\n    }\n  }\n}\n\nfunction getListOfPoints({\n  f,\n  prohibitedValues,\n  step,\n  xMax,\n  xMin,\n}: {\n  f: (x: number) => number\n  prohibitedValues: number[]\n  step: number\n  xMax: number\n  xMin: number\n}): Array<{ x: number; y: number }> {\n  const points: Array<{ x: number; y: number }> = []\n  for (let x = xMin; x < xMax; x += step) {\n    if (!prohibitedValues.includes(x)) {\n      const point = { x, y: f(x) }\n      points.push(point)\n    }\n  }\n  return points\n}\nexport default Graph2\n","import mathImport from '../../lib/mathjsInstance'\n\nimport type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport { distance } from './Coords'\n\n// on met math dans une variable globale du module\nconst math = mathImport\n\n\n\n/**\n * Trace la courbe représentative d'une fonction à partir de son expression.\n * L'expression de la fonction est un string qui est analysé par mathjs\n */\nclass GraphByParts extends Element2D {\n  parts: { expression: string; xMin: number; xMax: number }[]\n  fonctions: ((x: number) => number)[]\n  prohibitedValues: number[]\n  step: number\n  xMax: number\n  xMin: number\n  constructor(\n    figure: Figure,\n    {\n      parts,\n      prohibitedValues = [],\n      step,\n      xMax = figure.xMax,\n      xMin = figure.xMin,\n      ...options\n    }: {\n      parts: { expression: string; xMin: number; xMax: number }[]\n      prohibitedValues?: number[]\n      step?: number\n      xMax?: number\n      xMin?: number\n    } & OptionsElement2D,\n  ) {\n    super(figure, { ...options })\n    this.type = 'GraphByParts'\n    this.xMin = Math.min(...parts.map((el) => el.xMin))\n    this.xMax = Math.max(...parts.map((el) => el.xMax))\n    this.fonctions = []\n    this.parts = parts\n    for (let i = 0; i < parts.length; i++) {\n      const fNode = math.parse(parts[i].expression)\n      this.fonctions.push((x: number): number => fNode.evaluate({ x }))\n    }\n    this.prohibitedValues = prohibitedValues\n    if (step === undefined) {\n      const unite = figure.pixelsPerUnit * figure.xScale * figure.scale\n      step = 2 / unite\n    }\n    this.step = step\n    this.f = this.f.bind(this)\n  }\n\n  f(x: number) {\n    let i = 0\n    while (x > this.parts[i].xMax && i < this.parts.length) {\n      i++\n    }\n    if (i >= this.parts.length) {\n      return Number.NaN\n    }\n    const f = this.fonctions[i]\n    return f(x)\n  }\n\n  draw(): void {\n    const groups: SVGElement[] = []\n    for (const part of this.parts) {\n      const points = getListOfPoints({\n        f: this.f,\n        prohibitedValues: this.prohibitedValues,\n        step: this.step,\n        xMax: part.xMax,\n        xMin: part.xMin,\n      })\n      const pointsCoords = points\n        .map(\n          (point) =>\n            `${this.figure.xToSx(point.x).toString()},${this.figure.yToSy(point.y).toString()}`,\n        )\n        .join(' ')\n      const groupSvg = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'polyline',\n      )\n      groupSvg.setAttribute('fill', 'none')\n      groupSvg.setAttribute('points', pointsCoords)\n      groups.push(groupSvg)\n    }\n    this.groupSvg = document.createElementNS('http://www.w3.org/2000/svg', 'g')\n    this.groupSvg.innerHTML = groups.map((group) => group.outerHTML).join('\\n')\n    this.setVisibilityColorThicknessAndDashed()\n  }\n\n  /**\n   * Calcule la distance minimale entre un point et la courbe\n   */\n  distancePointer(x: number, y: number): number {\n    // On échantillonne plusieurs points de la courbe pour trouver le plus proche\n    let minDistance = Number.POSITIVE_INFINITY\n    for (let xi = this.xMin; xi <= this.xMax; xi += this.step) {\n      try {\n        const yi = this.f(xi)\n        if (!Number.isNaN(yi) && Number.isFinite(yi)) {\n          const d = distance({ x, y }, { x: xi, y: yi })\n          minDistance = Math.min(minDistance, d)\n        }\n      } catch {\n        // Si on tombe sur une erreur, on ignore le point\n      }\n    }\n    return minDistance\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      parts: this.parts,\n      xMax: this.xMax,\n      xMin: this.xMin,\n    }\n  }\n\n  /**\n   * Description de la courbe pour l'interface utilisateur\n   */\n  get description(): string {\n    return `Courbe représentative de la fonction ${this.notation}`\n  }\n\n  /**\n   * Code LaTeX pour export\n   */\n  get latex(): string {\n    let latex = ''\n    for (const part of this.parts) {\n      latex += `\\\\draw[domain=${part.xMin}:${part.xMax}, smooth, thick, ${this.color}, ${this.isDashed ? 'dashed, ' : ''} line width=${this.thickness}] \n        plot (\\\\x, {${math.parse(part.expression).toString({ implicit: 'show' }).replaceAll('x', '(\\\\x)')}});\\n`\n    }\n    return latex\n  }\n\n  /**\n   * Notation mathématique de la fonction\n   */\n  get notation(): string {\n    let notation = ''\n    for (const part of this.parts) {\n      notation += `f(x) = ${part.expression}\\\\text{ pour }${part.xMin} ≤ x ≤ ${part.xMax}~;~\\n`\n    }\n    return notation\n  }\n}\n\nfunction getListOfPoints({\n  f,\n  prohibitedValues,\n  step,\n  xMax,\n  xMin,\n}: {\n  f: (x: number) => number\n  prohibitedValues: number[]\n  step: number\n  xMax: number\n  xMin: number\n}): Array<{ x: number; y: number }> {\n  const points: Array<{ x: number; y: number }> = []\n  for (let x = xMin; x < xMax; x += step) {\n    if (!prohibitedValues.includes(x)) {\n      const point = { x, y: f(x) }\n      points.push(point)\n    }\n  }\n  return points\n}\nexport default GraphByParts\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport type ArcByCenterRadiusAndAngles from '../lines/ArcByCenterRadiusAndAngles'\nimport type Point from '../points/Point'\n\n/**\n * Créé plusieurs disques fractionnés que l'on peut colorier\n * Soit on définit le numérateur à N et les N premières portions sont coloriées soit on définit les indices des portions à colorier dans indicesSectorsInColor s'il y a les deux c'est indicesSectorsInColor qui l'emporte\n */\nclass CircleFractionDiagram extends Element2D {\n  /** Centre du diagramme */\n  center: Point\n  /** Centre des cercles */\n  centers: Point[] = []\n  /** Nombre de portions */\n  denominator: number\n  /** Espace entre les cercles */\n  gap: number\n  /** Nombre de cercles */\n  numberOfCircle: number\n  /** Rayon des cercles */\n  radius: number\n  /** Arcs de cercles */\n  sectors: ArcByCenterRadiusAndAngles[] = []\n  /** Indices des portions coloriées */\n  _indicesSectorsInColor: Set<number> = new Set()\n  constructor(\n    figure: Figure,\n    {\n      denominator,\n      gap = 1,\n      indicesSectorsInColor = new Set(),\n      numberOfCircle = 1,\n      numerator = 0,\n      radius,\n      x = 0,\n      y = 0,\n      ...options\n    }: {\n      /** Nombre de portions */\n      denominator: number\n      /** Espace entre les cercles */\n      gap?: number\n      /** Indices des portions coloriées */\n      indicesSectorsInColor?: Set<number>\n      /** Nombre de cercles */\n      numberOfCircle?: number\n      /** Nombre de portions coloriées si indicesSectorsInColor n'est pas défini */\n      numerator?: number\n      /** Rayon des cercles */\n      radius: number\n      /** Abscisse du centre */\n      x?: number\n      /** Ordonnée du centre */\n      y?: number\n    } & OptionsElement2D,\n  ) {\n    super(figure, { ...options })\n    this.center = this.figure.create('Point', {\n      shape: '',\n      x,\n      y,\n      isChild: true,\n    })\n    this.radius = radius\n    this.denominator = denominator\n    this.gap = gap\n    this.numberOfCircle = numberOfCircle\n    if (numerator !== undefined && indicesSectorsInColor.size === 0) {\n      for (let i = 0; i < numerator; i++) {\n        this.indicesSectorsInColor.add(i)\n      }\n    } else {\n      this.indicesSectorsInColor = indicesSectorsInColor\n    }\n    this.type = 'CircleFractionDiagram'\n  }\n\n  draw(): void {\n    this.centers = [this.center]\n    this.sectors = []\n    const angle = 360 / this.denominator\n    for (let n = 0; n < this.numberOfCircle; n++) {\n      if (n > 0)\n        this.centers.push(\n          this.figure.create('Point', {\n            isChild: true,\n            isSelectable: false,\n            shape: '',\n            x: this.center.x + n * (2 * this.radius + this.gap),\n            y: this.center.y,\n          }),\n        )\n      for (let i = 0; i < this.denominator; i++) {\n        this.sectors.push(\n          this.figure.create('ArcByCenterRadiusAndAngles', {\n            center: this.centers[n],\n            endAngle: angle * (i + 1),\n            isChild: true,\n            radius: this.radius,\n            startAngle: angle * i,\n            color: this.color,\n            thickness: this.thickness,\n            isDashed: this.isDashed,\n          }),\n        )\n      }\n    }\n    this.indicesSectorsInColor = this._indicesSectorsInColor\n  }\n\n  redraw(): void {\n    for (const center of this.centers) {\n      center.remove()\n    }\n    for (const sector of this.sectors) {\n      sector.remove()\n    }\n    this.draw()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      denominator: this.denominator,\n      gap: this.gap,\n      arrayIndicesSectorsInColor: Array.from(this.indicesSectorsInColor),\n      numberOfCircle: this.numberOfCircle,\n      numerator: this.numerator,\n      radius: this.radius,\n      x: this.center.x,\n      y: this.center.y,\n    }\n  }\n\n  get indicesSectorsInColor(): Set<number> {\n    for (let i = 0; i < this.sectors.length; i++) {\n      if (this.sectors[i].fillColor !== 'none') {\n        this._indicesSectorsInColor.add(i)\n      } else {\n        this._indicesSectorsInColor.delete(i)\n      }\n    }\n    return this._indicesSectorsInColor\n  }\n\n  set indicesSectorsInColor(indicesSectorsInColor: Set<number>) {\n    this._indicesSectorsInColor = indicesSectorsInColor\n    this.sectors.forEach((sector, index) => {\n      if (this._indicesSectorsInColor.has(index)) {\n        sector.fillColor = this.color\n      } else {\n        sector.fillColor = 'none'\n      }\n    })\n  }\n\n  get numerator(): number {\n    return this.sectors.filter((sector) => sector.fillColor !== 'none').length\n  }\n\n  set numerator(numerator: number) {\n    this.sectors.forEach((sector, index) => {\n      if (index < numerator) {\n        sector.fillColor = this.color\n      } else {\n        sector.fillColor = 'none'\n      }\n    })\n  }\n}\n\nexport default CircleFractionDiagram\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type Polygon from '../lines/Polygon'\nimport type Point from '../points/Point'\n\nexport default class LineFractionDiagram extends Element2D {\n  denominator: number\n  height: number\n  _indicesRectanglesInColor: Set<number> = new Set()\n  min: number\n  max: number\n  origin: Point\n  origins: Point[] = []\n  rectangles: Polygon[] = []\n  thickHeightInPixels: number\n  thickThickness: number\n  verticalDistanceForClick: number\n  width: number\n  constructor(\n    figure: Figure,\n    {\n      denominator = 4,\n      height = 0.2,\n      indicesRectanglesInColor = new Set(),\n      min = 0,\n      max = 5,\n      numerator,\n      thickHeightInPixels = 10,\n      thickThickness = 4,\n      verticalDistanceForClick = 1,\n      width = 4,\n      x = 0,\n      y = 0,\n      ...options\n    }: {\n      denominator?: number\n      height?: number\n      indicesRectanglesInColor?: Set<number>\n      min?: number\n      max?: number\n      numerator?: number\n      thickHeightInPixels?: number\n      thickThickness?: number\n      verticalDistanceForClick?: number\n      width?: number\n      x?: number\n      y?: number\n    } = {},\n  ) {\n    super(figure, { ...options })\n    this.origin = this.figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x,\n      y: y - height / 2,\n    })\n    this.width = width\n    this.height = height\n    this.min = min\n    this.denominator = denominator\n    this.max = max\n    this.thickHeightInPixels = thickHeightInPixels\n    this.thickThickness = thickThickness\n    if (numerator !== undefined && indicesRectanglesInColor.size === 0) {\n      for (let i = 0; i < numerator; i++) {\n        this.indicesRectanglesInColor.add(i)\n      }\n    } else {\n      this.indicesRectanglesInColor = indicesRectanglesInColor\n    }\n    this.type = 'LineFractionDiagram'\n    this.verticalDistanceForClick = verticalDistanceForClick\n  }\n\n  draw(): void {\n    this.figure.svg.appendChild(this.groupSvg)\n    this.origins = [this.origin]\n    this.rectangles = []\n    const fractionWidth = this.width / this.denominator\n    for (let n = 0; n < this.max; n++) {\n      if (n > 0)\n        this.origins.push(\n          this.figure.create('Point', {\n            isChild: true,\n            isSelectable: false,\n            shape: '',\n            x: this.origin.x + n * this.width,\n            y: this.origin.y,\n          }),\n        )\n      for (let i = 0; i < this.denominator; i++) {\n        this.rectangles.push(\n          createRectangleByOriginWidthAndHeight({\n            height: this.height,\n            origin: this.origins[n],\n            width: fractionWidth,\n            xTranslate: i * fractionWidth,\n            color: this.color,\n            thickness: this.thickness,\n            isDashed: this.isDashed,\n          }),\n        )\n      }\n    }\n    const verticalDistanceForClick = this.verticalDistanceForClick\n    for (const rectangle of this.rectangles) {\n      rectangle.distancePointer = function (_: number, __: number): number {\n        if (\n          this.figure.currentState === 'FILL' &&\n          this.figure.pointer.x >= this.points[0].x &&\n          this.figure.pointer.x <= this.points[1].x &&\n          this.figure.pointer.y - this.points[0].y < verticalDistanceForClick &&\n          this.figure.pointer.y - this.points[0].y > -verticalDistanceForClick\n        )\n          return 0\n        return Number.POSITIVE_INFINITY\n      }\n    }\n    // Thicks\n    for (let i = 0; i <= this.max; i++) {\n      const x = this.origin.x + i * this.width\n      const svgLine = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      svgLine.setAttribute('x1', this.figure.xToSx(x).toString())\n      svgLine.setAttribute(\n        'y1',\n        (\n          this.figure.yToSy(this.origin.y + this.height / 2) -\n          this.thickHeightInPixels * this.figure.yScale * this.figure.scale\n        ).toString(),\n      )\n      svgLine.setAttribute('x2', this.figure.xToSx(x).toString())\n      svgLine.setAttribute(\n        'y2',\n        (\n          this.figure.yToSy(this.origin.y + this.height / 2) +\n          this.thickHeightInPixels * this.figure.yScale * this.figure.scale\n        ).toString(),\n      )\n      svgLine.setAttribute('stroke', this._color)\n      svgLine.setAttribute('stroke-width', this.thickThickness.toString())\n      svgLine.setAttribute('stroke-readonly', '1')\n      this.groupSvg.appendChild(svgLine)\n      this.figure.create('TextByPosition', {\n        isChild: true,\n        x,\n        y:\n          this.origin.y +\n          1 +\n          this.thickHeightInPixels /\n            (this.figure.yScale *\n              this.figure.scale *\n              this.figure.pixelsPerUnit),\n        text: (this.min + i).toString(),\n      })\n    }\n    this.indicesRectanglesInColor = this._indicesRectanglesInColor\n  }\n\n  redraw(): void {\n    for (const origin of this.origins) {\n      origin.remove()\n    }\n    for (const rectangle of this.rectangles) {\n      rectangle.remove()\n    }\n    this.draw()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      denominator: this.denominator,\n      height: this.height,\n      arrayIndicesRectanglesInColor: Array.from(this.indicesRectanglesInColor),\n      min: this.min,\n      max: this.max,\n      thickHeightInPixels: this.thickHeightInPixels,\n      thickThickness: this.thickThickness,\n      verticalDistanceForClick: this.verticalDistanceForClick,\n      width: this.width,\n      x: this.origin.x,\n      y: this.origin.y + this.height / 2,\n    }\n  }\n\n  get numerator(): number {\n    return this.rectangles.filter((rectangle) => rectangle.fillColor !== 'none')\n      .length\n  }\n\n  get indicesRectanglesInColor(): Set<number> {\n    for (let i = 0; i < this.rectangles.length; i++) {\n      if (this.rectangles[i].fillColor !== 'none') {\n        this._indicesRectanglesInColor.add(i)\n      } else {\n        this._indicesRectanglesInColor.delete(i)\n      }\n    }\n    return this._indicesRectanglesInColor\n  }\n\n  set indicesRectanglesInColor(indicesRectanglesInColor: Set<number>) {\n    this._indicesRectanglesInColor = indicesRectanglesInColor\n    this.rectangles.forEach((rectangle, index) => {\n      if (this._indicesRectanglesInColor.has(index)) {\n        rectangle.fillColor = this.color\n      } else {\n        rectangle.fillColor = 'none'\n      }\n    })\n  }\n\n  get indiceLastInColor(): number {\n    const indice = this.rectangles.findIndex(\n      (rectangle) => rectangle.fillColor === 'none',\n    )\n    return indice === -1 ? this.max * this.denominator : indice\n  }\n\n  set numerator(numerator: number) {\n    this.rectangles.forEach((rectangle, index) => {\n      if (index < numerator) {\n        rectangle.fillColor = this.color\n      } else {\n        rectangle.fillColor = 'none'\n      }\n    })\n  }\n}\n\nfunction createRectangleByOriginWidthAndHeight({\n  height,\n  origin,\n  width,\n  xTranslate,\n  color,\n  thickness,\n  isDashed,\n}: {\n  color?: string\n  thickness?: number\n  isDashed?: boolean\n  height: number\n  origin: Point\n  width: number\n  xTranslate: number\n}): Polygon {\n  const newPoints = []\n  const figure = origin.figure\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate,\n      y: origin.y,\n    }),\n  )\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate + width,\n      y: origin.y,\n    }),\n  )\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate + width,\n      y: origin.y + height,\n    }),\n  )\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate,\n      y: origin.y + height,\n    }),\n  )\n  return figure.create('Polygon', {\n    isChild: true,\n    points: newPoints,\n    color,\n    thickness,\n    isDashed,\n  })\n}\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type Polygon from '../lines/Polygon'\nimport type Point from '../points/Point'\n\nclass RectangleFractionDiagram extends Element2D {\n  denominator: number\n  gap: number\n  height: number\n  numberOfRectangles: number\n  _indicesRectanglesInColor: Set<number> = new Set()\n  origin: Point\n  origins: Point[] = []\n  rectangles: Polygon[] = []\n  width: number\n  constructor(\n    figure: Figure,\n    {\n      denominator = 4,\n      gap = 1,\n      height = 1,\n      numberOfRectangles = 5,\n      indicesRectanglesInColor = new Set(),\n      numerator = 0,\n      width = 4,\n      x = 0,\n      y = 0,\n      ...options\n    }: {\n      denominator?: number\n      gap?: number\n      height?: number\n      indicesRectanglesInColor?: Set<number>\n      numberOfRectangles?: number\n      numerator?: number\n      width?: number\n      x?: number\n      y?: number\n    } = {},\n  ) {\n    super(figure, { ...options })\n    this.origin = this.figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x,\n      y,\n    })\n    this.width = width\n    this.height = height\n    this.denominator = denominator\n    this.gap = gap\n    this.numberOfRectangles = numberOfRectangles\n    this.numerator = numerator\n    if (numerator !== undefined && indicesRectanglesInColor.size === 0) {\n      for (let i = 0; i < numerator; i++) {\n        this.indicesRectanglesInColor.add(i)\n      }\n    } else {\n      this.indicesRectanglesInColor = indicesRectanglesInColor\n    }\n    this.type = 'RectangleFractionDiagram'\n  }\n\n  draw(): void {\n    this.origins = [this.origin]\n    this.rectangles = []\n    const fractionWidth = this.width / this.denominator\n    for (let n = 0; n < this.numberOfRectangles; n++) {\n      if (n > 0)\n        this.origins.push(\n          this.figure.create('Point', {\n            isChild: true,\n            isSelectable: false,\n            shape: '',\n            x: this.origin.x + n * (this.width + this.gap),\n            y: this.origin.y,\n          }),\n        )\n      for (let i = 0; i < this.denominator; i++) {\n        this.rectangles.push(\n          createRectangleByOriginWidthAndHeight({\n            height: this.height,\n            origin: this.origins[n],\n            width: fractionWidth,\n            xTranslate: i * fractionWidth,\n          }),\n        )\n      }\n    }\n    for (const rectangle of this.rectangles) {\n      rectangle.distancePointer = function (_: number, __: number): number {\n        if (\n          this.figure.currentState === 'FILL' &&\n          this.figure.pointer.isInPolygon(this)\n        )\n          return 0\n        return Number.POSITIVE_INFINITY\n      }\n    }\n    this.indicesRectanglesInColor = this._indicesRectanglesInColor\n  }\n\n  redraw(): void {\n    for (const origin of this.origins) {\n      origin.remove()\n    }\n    for (const rectangle of this.rectangles) {\n      rectangle.remove()\n    }\n    this.draw()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      denominator: this.denominator,\n      numerator: this.numerator,\n      arrayIndicesRectanglesInColor: Array.from(this.indicesRectanglesInColor),\n      height: this.height,\n      width: this.width,\n      gap: this.gap,\n      x: this.origin.x,\n      y: this.origin.y,\n    }\n  }\n\n  get indicesRectanglesInColor(): Set<number> {\n    for (let i = 0; i < this.rectangles.length; i++) {\n      if (this.rectangles[i].fillColor !== 'none') {\n        this._indicesRectanglesInColor.add(i)\n      } else {\n        this._indicesRectanglesInColor.delete(i)\n      }\n    }\n    return this._indicesRectanglesInColor\n  }\n\n  set indicesRectanglesInColor(indicesRectanglesInColor: Set<number>) {\n    this._indicesRectanglesInColor = indicesRectanglesInColor\n    this.rectangles.forEach((rectangle, index) => {\n      if (this._indicesRectanglesInColor.has(index)) {\n        rectangle.fillColor = this.color\n      } else {\n        rectangle.fillColor = 'none'\n      }\n    })\n  }\n\n  get numerator(): number {\n    return this.rectangles.filter((rectangle) => rectangle.fillColor !== 'none')\n      .length\n  }\n\n  set numerator(numerator: number) {\n    this.rectangles.forEach((rectangle, index) => {\n      if (index < numerator) {\n        rectangle.fillColor = this.color\n      } else {\n        rectangle.fillColor = 'none'\n      }\n    })\n  }\n}\n\nfunction createRectangleByOriginWidthAndHeight({\n  height,\n  origin,\n  width,\n  xTranslate,\n}: {\n  height: number\n  origin: Point\n  width: number\n  xTranslate: number\n}): Polygon {\n  const newPoints = []\n  const figure = origin.figure\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate,\n      y: origin.y,\n    }),\n  )\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate + width,\n      y: origin.y,\n    }),\n  )\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate + width,\n      y: origin.y + height,\n    }),\n  )\n  newPoints.push(\n    figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x: origin.x + xTranslate,\n      y: origin.y + height,\n    }),\n  )\n  return figure.create('Polygon', { isChild: true, points: newPoints })\n}\n\nexport default RectangleFractionDiagram\n","import type Figure from '../../Figure'\nimport { displayNumber, round } from '../../lib/format'\nimport Element2D from '../Element2D'\nimport type TextByPosition from '../text/TextByPosition'\n\nclass GraduatedLine extends Element2D {\n  private _labelSize = '0.8em'\n  private readonly addInPixels = 5\n  /** La droite dépasse du min de addLeft */\n  addLeft: number\n  /** La droite dépasse du max de addRight */\n  addRight: number\n  /** Distance entre 2 labels à partir de 0 ou du min */\n  labelInterval: number\n  labels: TextByPosition[] = []\n  max: number\n  min: number\n  points: Array<{ label: string; x: number }> = []\n  /** Distance entre deux graduations */\n  step: number\n  /** Distance entre deux graduations secondaires */\n  stepBis?: number\n  svgLine!: SVGLineElement\n  /** Épaisseur des graduations */\n  thick: number\n  /** Ordonnée des labels en pixels */\n  yLabel: number\n\n  constructor(\n    figure: Figure,\n    {\n      addLeft = 0,\n      addRight = 0,\n      color,\n      labelInterval,\n      max = 6,\n      min = -6,\n      step = 1,\n      stepBis,\n      thick = 0.2,\n      yLabel = -0.5,\n    }: {\n      addLeft?: number\n      addRight?: number\n      color?: string\n      labelInterval?: number\n      max?: number\n      min?: number\n      scale?: number\n      step?: number\n      stepBis?: number\n      thick?: number\n      yLabel?: number\n    } = {},\n  ) {\n    super(figure, {})\n    this.addLeft = addLeft\n    this.addRight = addRight\n    this._color = color ?? figure.options.color\n    this.labelInterval = labelInterval ?? step\n    this.min = min\n    this.max = max\n    this.step = step\n    this.stepBis = stepBis\n    this.thick = thick\n    this.yLabel = yLabel\n    this.type = 'GraduatedLine'\n  }\n\n  draw(): void {\n    this.svgLine = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'line',\n    )\n    this.groupSvg.appendChild(this.svgLine)\n    this.groupSvg.setAttribute('color', this.color)\n    this.setVisibilityColorThicknessAndDashed()\n    this.drawLine()\n    this.drawThicks()\n    this.drawThicksBis()\n    this.drawLabels()\n  }\n\n  drawLabels(): void {\n    const start = round(\n      Math.ceil(this.min / this.labelInterval) * this.labelInterval,\n    )\n    const end = round(\n      Math.floor(this.max / this.labelInterval) * this.labelInterval,\n    )\n    for (let i = start; i <= end; ) {\n      const text = `$${displayNumber(i)}$`\n      this.labels.push(\n        this.figure.create('TextByPosition', {\n          anchor: 'topCenter',\n          dxInPixels: 0,\n          dyInPixels: 0,\n          isChild: true,\n          text,\n          x: i,\n          y: this.yLabel,\n        }),\n      )\n      i = round(i + this.labelInterval)\n    }\n  }\n\n  drawLine(): void {\n    const x1Svg = this.figure.xToSx(this.min - this.addLeft)\n    const x2Svg = this.figure.xToSx(this.max + this.addRight)\n    const y1Svg = this.figure.yToSy(0)\n    const y2Svg = this.figure.yToSy(0)\n    this.svgLine.setAttribute('x1', `${x1Svg - this.addInPixels}`)\n    this.svgLine.setAttribute('y1', `${y1Svg}`)\n    this.svgLine.setAttribute('x2', `${x2Svg + this.addInPixels}`)\n    this.svgLine.setAttribute('y2', `${y2Svg}`)\n    this.svgLine.setAttribute('stroke', 'currentColor')\n\n    // Définit la flèche\n    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs')\n    this.figure.svg.appendChild(defs)\n    const marker = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'marker',\n    )\n    marker.setAttribute('id', 'arrow')\n    marker.setAttribute('markerWidth', '10')\n    marker.setAttribute('markerHeight', '10')\n    marker.setAttribute('refX', '0')\n    marker.setAttribute('refY', '3')\n    marker.setAttribute('orient', 'auto')\n    marker.setAttribute('markerUnits', 'strokeWidth')\n    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n    path.setAttribute('d', 'M0,0 L0,6 L9,3 z')\n    path.setAttribute('fill', this.color)\n    marker.appendChild(path)\n    defs.appendChild(marker)\n\n    // Ajoute la flèche comme une mark\n    this.svgLine.setAttribute('marker-end', 'url(#arrow)')\n  }\n\n  drawThicks(): void {\n    const start = round(Math.ceil(this.min / this.step) * this.step)\n    const end = round(Math.floor(this.max / this.step) * this.step)\n    for (let i = start; i <= end; ) {\n      const xSvg = this.figure.xToSx(i)\n      const y1Svg = this.figure.yToSy(-this.thick)\n      const y2Svg = this.figure.yToSy(this.thick)\n      const svgLine = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      svgLine.setAttribute('x1', `${xSvg}`)\n      svgLine.setAttribute('y1', `${y1Svg}`)\n      svgLine.setAttribute('x2', `${xSvg}`)\n      svgLine.setAttribute('y2', `${y2Svg}`)\n      svgLine.setAttribute('stroke', 'currentColor')\n      svgLine.setAttribute('stroke-width', '1')\n      this.groupSvg.appendChild(svgLine)\n      i = round(i + this.step)\n    }\n  }\n\n  drawThicksBis(): void {\n    if (this.stepBis === undefined) return\n    const start = round(Math.ceil(this.min / this.stepBis) * this.stepBis)\n    const end = round(Math.floor(this.max / this.stepBis) * this.stepBis)\n    let cpt = 0\n    // Mille graduations aux maximum\n    for (let i = start; i <= end && cpt < 1000; ) {\n      const xSvg = this.figure.xToSx(i)\n      const y1Svg = this.figure.yToSy(-this.thick / 2)\n      const y2Svg = this.figure.yToSy(this.thick / 2)\n      const svgLine = document.createElementNS(\n        'http://www.w3.org/2000/svg',\n        'line',\n      )\n      svgLine.setAttribute('x1', `${xSvg}`)\n      svgLine.setAttribute('y1', `${y1Svg}`)\n      svgLine.setAttribute('x2', `${xSvg}`)\n      svgLine.setAttribute('y2', `${y2Svg}`)\n      svgLine.setAttribute('stroke', 'currentColor')\n      svgLine.setAttribute('stroke-width', '1')\n      this.groupSvg.appendChild(svgLine)\n      i = round(i + this.stepBis)\n      cpt++\n    }\n  }\n\n  toJSON(): object {\n    return {\n      ...super.toJSON(),\n      type: this.type,\n      color: this.color,\n      addLeft: this.addLeft,\n      addRight: this.addRight,\n      labelInterval: this.labelInterval,\n      max: this.max,\n      min: this.min,\n      step: this.step,\n      stepBis: this.stepBis,\n      thick: this.thick,\n      yLabel: this.yLabel,\n    }\n  }\n\n  get labelSize(): string {\n    return this._labelSize\n  }\n\n  set labelSize(labelSize: string) {\n    this._labelSize = labelSize\n    for (const label of this.labels) {\n      label.fontSize = labelSize\n    }\n  }\n\n  get latex(): string {\n    let result = `\\n\\\\tkzInit[xmin=${this.min}, xmax=${this.max}, xstep=${this.step}]`\n    result += '\\n\\\\tkzDrawX[label={}, tickup=3pt, tickdn=3pt]'\n    if (this.stepBis !== undefined) {\n      result += `\\\\foreach \\\\i in {${this.min},${round(this.min + this.stepBis, 6)},...,${this.max}} {`\n      result += '\\n\\\\tkzHTick[mark=|,mark size=2pt]{\\\\i}\\n}'\n    }\n    return result\n  }\n}\n\nexport default GraduatedLine\n","import type DynamicNumber from '../../dynamicNumbers/DynamicNumber'\nimport type Figure from '../../Figure'\nimport { rotationCoord } from '../calculus/Coords'\nimport { distance, getLargeSweep } from '../calculus/utils'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\n\nclass Arc extends Element2D {\n  _fillColor!: string\n  _fillOpacity!: number\n  /** Faut-il tracer les segments pour fermer l'arc de cercle ? */\n  addBorders: boolean\n  center: Point\n  dynamicAngle: DynamicNumber\n  start: Point\n  svgArc: SVGPathElement\n  constructor(\n    figure: Figure,\n    {\n      addBorders = false,\n      center,\n      color,\n      dynamicAngle,\n      fillColor,\n      fillOpacity,\n      start,\n      ...options\n    }: {\n      addBorders: boolean\n      center: Point\n      dynamicAngle: DynamicNumber\n      start: Point\n    } & OptionsElement2D,\n  ) {\n    super(figure, { ...options })\n    this.start = start\n    this.center = center\n    this.dynamicAngle = dynamicAngle\n    this.addBorders = addBorders\n    this._color = color ?? 'black'\n    this._fillColor = fillColor ?? 'none'\n    this._fillOpacity = this.fillOpacity ?? this.figure.options.fillOpacity\n    this.svgArc = document.createElementNS('http://www.w3.org/2000/svg', 'path')\n    this.groupSvg.appendChild(this.svgArc)\n    this.start.subscribe(this)\n    this.center.subscribe(this)\n    this.dynamicAngle.subscribe(this)\n  }\n\n  distancePointer(_: number, __: number): number {\n    if (this.figure.pointer.isInArc(this)) return 0\n    return Number.POSITIVE_INFINITY\n  }\n\n  draw(): void {\n    this.figure.svg.appendChild(this.groupSvg)\n    this.update()\n    this.setVisibilityColorThicknessAndDashed()\n  }\n\n  /** Modifie la couleur et l'épaisseur de l'élément */\n  setVisibilityColorThicknessAndDashed(): void {\n    this.color = this._color\n    this.fillColor = this._fillColor\n    if (this._fillOpacity !== undefined) this.fillOpacity = this._fillOpacity\n    if (this._isDashed !== undefined) this.isDashed = this._isDashed\n    this.isDashed = this._isDashed\n    this.isVisible = this._isVisible\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idCenter: this.center.id,\n      idDynamicAngle: this.dynamicAngle.id,\n      idStart: this.start.id,\n    }\n  }\n\n  update(): void {\n    this.notify()\n    const radius = this.figure.xToSx(distance(this.start, this.center))\n    const [large, sweep] = getLargeSweep(this.dynamicAngle.value)\n    const end = rotationCoord(this.start, this.center, this.dynamicAngle.value)\n    if (\n      Number.isFinite(this.start.x) &&\n      Number.isFinite(this.start.y) &&\n      Number.isFinite(end.x) &&\n      Number.isFinite(end.y)\n    ) {\n      let path = `M${this.figure.xToSx(this.start.x)} ${this.figure.yToSy(this.start.y)} A ${radius} ${radius} 0 ${large} ${sweep} ${this.figure.xToSx(end.x)} ${this.figure.yToSy(end.y)}`\n      if (this.addBorders)\n        path += `L ${this.figure.xToSx(this.center.x)} ${this.figure.yToSy(this.center.y)} Z`\n      this.svgArc.setAttribute('d', path)\n    }\n  }\n\n  /** Couleur de remplissage au format HTML */\n  get fillColor(): string {\n    return this._fillColor\n  }\n\n  /** Change la couleur des tracés de l'élément */\n  set fillColor(color: string) {\n    this._fillColor = color\n    this.groupSvg.setAttribute('fill', this._fillColor)\n  }\n\n  /** Couleur de remplissage au format HTML */\n  get fillOpacity(): number {\n    return this._fillOpacity\n  }\n\n  /** Change la couleur des tracés de l'élément */\n  set fillOpacity(opacity: number) {\n    this._fillOpacity = opacity\n    if (opacity !== undefined)\n      this.groupSvg.setAttribute('fill-opacity', opacity.toString())\n  }\n}\n\nexport default Arc\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport Arc from './Arc'\n\nclass ArcBy3PointsAndRadius extends Arc {\n  radius: number\n  constructor(\n    figure: Figure,\n    {\n      addBorders = true,\n      center,\n      end,\n      radius,\n      start,\n      ...options\n    }: {\n      addBorders?: boolean\n      center: Point\n      end: Point\n      radius: number\n      start: Point\n    } & OptionsElement2D,\n  ) {\n    const tempLine = figure.create('Segment', {\n      isChild: true,\n      isSelectable: true,\n      isVisible: false,\n      point1: start,\n      point2: center,\n    })\n    const newStart = figure.create('PointOnLineAtDistance', {\n      distance: radius,\n      isChild: true,\n      isVisible: false,\n      line: tempLine,\n      shape: start.shape,\n    })\n    const dynamicAngle = figure.create('Angle', {\n      center,\n      end,\n      start: newStart,\n    })\n    super(figure, {\n      addBorders,\n      center,\n      dynamicAngle,\n      start: newStart,\n      ...options,\n    })\n    this.radius = radius\n  }\n}\n\nexport default ArcBy3PointsAndRadius\n","import type Figure from '../Figure'\n\nimport DynamicNumber from './DynamicNumber'\n\nclass Const extends DynamicNumber {\n  constructor(\n    figure: Figure,\n    { isChild, value }: { isChild?: boolean; value: number },\n  ) {\n    super(figure, { isChild })\n    this.type = 'Const'\n    this.value = value\n  }\n\n  toJSON(): object {\n    return {\n      id: this.id,\n      isChild: this.isChild,\n      type: this.type,\n      value: this.value,\n    }\n  }\n}\n\nexport default Const\n","import Const from '../../dynamicNumbers/Const'\nimport type Figure from '../../Figure'\nimport { polarToCartesian } from '../calculus/utils'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport Arc from './Arc'\n\nclass ArcByCenterRadiusAndAngles extends Arc {\n  endAngle: number\n  radius: number\n  startAngle: number\n  constructor(\n    figure: Figure,\n    {\n      addBorders = true,\n      center,\n      color,\n      endAngle,\n      fillColor,\n      fillOpacity,\n      radius,\n      startAngle,\n      ...options\n    }: {\n      addBorders?: boolean\n      center: Point\n      endAngle: number\n      radius: number\n      startAngle: number\n    } & OptionsElement2D,\n  ) {\n    const dynamicAngle = new Const(figure, {\n      isChild: true,\n      value: endAngle - startAngle,\n    })\n    const { x, y } = polarToCartesian(center, radius, startAngle)\n    const start = figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      shape: '',\n      x,\n      y,\n    })\n    super(figure, {\n      addBorders,\n      center,\n      color,\n      dynamicAngle,\n      fillColor,\n      fillOpacity,\n      start,\n      ...options,\n    })\n    this.radius = radius\n    this.startAngle = startAngle\n    this.endAngle = endAngle\n    this.type = 'ArcByCenterRadiusAndAngles'\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      endAngle: this.endAngle,\n      fillColor: this.fillColor,\n      idCenter: this.center.id,\n      radius: this.radius,\n      startAngle: this.startAngle,\n    }\n  }\n\n  get latex(): string {\n    let result = `% Arc de cercle ${this.id}`\n    const start = polarToCartesian(this.center, this.radius, this.startAngle)\n    if (this.fillColor && this.fillColor !== 'none') {\n      result += `\\n\\\\fill${this.latexOptions} (${this.center.x}, ${this.center.y}) -- ({${this.center.x} + ${this.radius} * cos(${this.startAngle})}, {${this.center.y} + ${this.radius} * sin(${this.startAngle})}) arc(${this.startAngle}:${this.endAngle}:${this.radius}) -- \n    cycle;`\n    } else {\n      result += `\\n\\\\draw${this.latexOptions} (${start.x}, ${start.y}) arc (${this.startAngle}:${this.endAngle}:${this.radius});`\n    }\n    if (this.addBorders) {\n      result += `\\n\\\\draw${this.latexOptions} (${this.center.x}, ${this.center.y}) -- ({${this.center.x} + ${this.radius} * cos(${this.startAngle})}, {${this.center.y} + ${this.radius} * sin(${this.startAngle})});`\n      result += `\\n\\\\draw${this.latexOptions} (${this.center.x}, ${this.center.y}) -- ({${this.center.x} + ${this.radius} * cos(${this.endAngle})}, {${this.center.y} + ${this.radius} * sin(${this.endAngle})});`\n    }\n    return result\n  }\n}\n\nexport default ArcByCenterRadiusAndAngles\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\n\nimport Ray from './Ray'\n\nclass BisectorByPoints extends Ray {\n  pointOnBissector: Point\n  pointOnSide1: Point\n  pointOnSide2: Point\n  constructor(\n    figure: Figure,\n    {\n      origin,\n      pointOnSide1,\n      pointOnSide2,\n      ...options\n    }: {\n      origin: Point\n      pointOnSide1: Point\n      pointOnSide2: Point\n    } & OptionsElement2D,\n  ) {\n    let angle =\n      Math.atan2(pointOnSide2.y - origin.y, pointOnSide2.x - origin.x) -\n      Math.atan2(pointOnSide1.y - origin.y, pointOnSide1.x - origin.x)\n    if (angle > Math.PI) angle -= 2 * Math.PI\n    if (angle < -Math.PI) angle += 2 * Math.PI\n    const x =\n      origin.x +\n      Math.cos(angle / 2) * (pointOnSide1.x - origin.x) -\n      Math.sin(angle / 2) * (pointOnSide1.y - origin.y)\n    const y =\n      origin.y +\n      Math.sin(angle / 2) * (pointOnSide1.x - origin.x) +\n      Math.cos(angle / 2) * (pointOnSide1.y - origin.y)\n    const bisectorPoint = figure.create('Point', {\n      isChild: true,\n      isSelectable: false,\n      isVisible: false,\n      x,\n      y,\n    })\n    super(figure, { point1: origin, point2: bisectorPoint, ...options })\n    this.type = 'BisectorByPoints'\n    this.pointOnSide1 = pointOnSide1\n    this.pointOnSide2 = pointOnSide2\n    this.pointOnBissector = bisectorPoint\n    this.pointOnSide1.subscribe(this)\n    this.pointOnSide2.subscribe(this)\n    this.point2.unsubscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idOrigin: this.point1.id,\n      idPointOnSide1: this.pointOnSide1.id,\n      idPointOnSide2: this.pointOnSide2.id,\n      isChild: this.isChild,\n    }\n  }\n\n  update(): void {\n    let angle =\n      Math.atan2(\n        this.pointOnSide2.y - this.point1.y,\n        this.pointOnSide2.x - this.point1.x,\n      ) -\n      Math.atan2(\n        this.pointOnSide1.y - this.point1.y,\n        this.pointOnSide1.x - this.point1.x,\n      )\n    if (angle > Math.PI) angle -= 2 * Math.PI\n    if (angle < -Math.PI) angle += 2 * Math.PI\n    const x =\n      this.point1.x +\n      Math.cos(angle / 2) * (this.pointOnSide1.x - this.point1.x) -\n      Math.sin(angle / 2) * (this.pointOnSide1.y - this.point1.y)\n    const y =\n      this.point1.y +\n      Math.sin(angle / 2) * (this.pointOnSide1.x - this.point1.x) +\n      Math.cos(angle / 2) * (this.pointOnSide1.y - this.point1.y)\n    this.point2.moveTo(x, y)\n    super.update()\n  }\n\n  get description(): string {\n    const originName =\n      this.point1.label !== '' ? this.point1.label : this.point1.id\n    const pointOnSide1Name =\n      this.pointOnSide1.label !== ''\n        ? this.pointOnSide1.label\n        : this.pointOnSide1.id\n    const pointOnSide2Name =\n      this.pointOnSide2.label !== ''\n        ? this.pointOnSide2.label\n        : this.pointOnSide2.id\n    return `Bissectrice de l'angle $\\\\widehat{${pointOnSide1Name}${originName}${pointOnSide2Name}}$`\n  }\n}\n\nexport default BisectorByPoints\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type { OptionsCircle, OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport type Segment from './Segment'\n\n/**\n * Trace un cercle dont on connait le centre et le rayon\n */\nclass Circle extends Element2D {\n  /** Couleur de remplissage du cercle */\n  private _fillColor: 'none' | string\n  /** Opacité de remplissage entre 0 et 1 */\n  private _fillOpacity?: number\n  /** Rayon du cercle */\n  _radius: number\n  /** Pointeur vers la première extrémité */\n  center: Point\n  constructor(\n    figure: Figure,\n    {\n      center,\n      fillOpacity = figure.options.fillOpacity,\n      radius,\n      ...options\n    }: OptionsCircle & OptionsElement2D,\n  ) {\n    super(figure, options)\n    this.type = 'Circle'\n    this._radius = radius\n    this.center = center\n    if (options?.fillColor !== undefined) this._fillColor = options.fillColor\n    else this._fillColor = this.figure.options.fillColor\n    this.fillOpacity = fillOpacity || this.figure.options.fillOpacity\n    if (options?.isDashed !== undefined) this._isDashed = options.isDashed\n  }\n\n  /** Créé un nouveau cercle image d'une homothétie */\n  dilate(center: Point, factor: number, options?: OptionsElement2D): Circle {\n    const newCenter = this.center.dilate(center, factor, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('Circle', {\n      center: newCenter,\n      radius: Math.abs(factor) * this.radius,\n      ...options,\n    })\n    newCircle.transformation = { center, factor, origin: this, type: 'dilate' }\n    return newCircle\n  }\n\n  distancePointer(x: number, y: number): number {\n    if (\n      (this.figure.currentState === 'FILL' ||\n        (this.figure.currentState === 'SET_OPTIONS' &&\n          this.fillColor !== 'none')) &&\n      this.figure.pointer.isInCircle(this)\n    )\n      return 0\n    const distanceToCenter =\n      Math.hypot(\n        (x - this.center.x) * this.figure.xScale,\n        (y - this.center.y) * this.figure.yScale,\n      ) * this.figure.scale\n    return Math.abs(distanceToCenter - this.radius * this.figure.scale)\n  }\n\n  draw(): void {\n    this.groupSvg = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'circle',\n    )\n    this.center.subscribe(this)\n    this.setVisibilityColorThicknessAndDashed()\n    this.update()\n  }\n\n  /** Créé un nouveau cercle image d'une symétrie centrale */\n  reflect(center: Point, options?: OptionsElement2D): Circle {\n    const newCenter = this.center.reflect(center, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('Circle', {\n      center: newCenter,\n      radius: this.radius,\n      ...options,\n    })\n    newCircle.transformation = { center, origin: this, type: 'reflect' }\n    return newCircle\n  }\n\n  /** Créé un nouveau cercle image d'une symétrie axiale */\n  reflectOverLine(line: Segment, options?: OptionsElement2D): Circle {\n    const newCenter = this.center.reflectOverLine(line, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('Circle', {\n      center: newCenter,\n      radius: this.radius,\n      ...options,\n    })\n    newCircle.transformation = { line, origin: this, type: 'reflectOverLine' }\n    return newCircle\n  }\n\n  /** Créé un nouveau cercle image d'une rotation */\n  rotate(center: Point, angle: number, options?: OptionsElement2D): Circle {\n    const newCenter = this.center.rotate(center, angle, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('Circle', {\n      center: newCenter,\n      radius: this.radius,\n      ...options,\n    })\n    newCircle.transformation = { angle, center, origin: this, type: 'rotation' }\n    return newCircle\n  }\n\n  /** Modifie la couleur et l'épaisseur de l'élément */\n  setVisibilityColorThicknessAndDashed(): void {\n    this.color = this._color\n    this.fillColor = this._fillColor\n    if (this._fillOpacity !== undefined) this.fillOpacity = this._fillOpacity\n    if (this._isDashed !== undefined) this.isDashed = this._isDashed\n    this.isDashed = this._isDashed\n    this.isVisible = this._isVisible\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      fillColor: this.fillColor,\n      fillOpacity: this.fillOpacity,\n      idCenter: this.center.id,\n      radius: this._radius,\n    }\n  }\n\n  translate(point1: Point, point2: Point, options?: OptionsElement2D): Circle {\n    const newCenter = this.center.translate(point1, point2, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('Circle', {\n      center: newCenter,\n      radius: this.radius,\n      ...options,\n    })\n    newCircle.transformation = {\n      origin: this,\n      point1,\n      point2,\n      type: 'translation',\n    }\n    return newCircle\n  }\n\n  update(): void {\n    if (\n      this.center.x === undefined ||\n      this.center.y === undefined ||\n      Number.isNaN(this.center.x) ||\n      Number.isNaN(this.center.y)\n    ) {\n      this.groupSvg.removeAttribute('r')\n    } else {\n      const xSvg = this.figure.xToSx(this.center.x)\n      const ySvg = this.figure.yToSy(this.center.y)\n      const rSvg = this.figure.pixelsPerUnit * this._radius * this.figure.scale\n      this.groupSvg.setAttribute('cx', `${xSvg}`)\n      this.groupSvg.setAttribute('cy', `${ySvg}`)\n      this.groupSvg.setAttribute('r', `${rSvg}`)\n    }\n    this.notify()\n  }\n\n  get description(): string {\n    if (this.transformation?.type === 'reflect') {\n      return `Cercle $${this.label}$, image du cercle $${(this.transformation.origin as Circle).notation}$ dans la symétrie de centre $${this.transformation?.center.notation}$`\n    }\n    if (this.transformation?.type === 'reflectOverLine') {\n      return `Cercle $${this.label}$, image du cercle $${(this.transformation.origin as Circle).notation}$ dans la symétrie d'axe  $${this.transformation?.line.notation}$`\n    }\n    if (this.transformation?.type === 'dilate') {\n      return `Cercle $${this.label}$, image du cercle $${(this.transformation.origin as Circle).notation}$ dans l'homothétie de centre $${this.transformation?.center.notation}$ et de rapport $${this.transformation.factor}$`\n    }\n    if (this.transformation?.type === 'rotation') {\n      return `Cercle $${this.label}$, image du cercle $${(this.transformation.origin as Circle).notation}$ dans la rotation de centre $${this.transformation.center.notation}$ et d'angle $${Math.abs(this.transformation.angle)}\\\\degree$ dans le sens ${this.transformation.angle > 0 ? 'anti-horaire' : 'horaire'}`\n    }\n    if (this.transformation?.type === 'translation') {\n      return `Cercle $${this.label}$, image du cercle $${(this.transformation.origin as Circle).notation}$ dans la translation qui transforme $${(this.transformation.point1 as Point).notation}$ en $${(this.transformation.point2 as Point).notation}$`\n    }\n    const centerName =\n      this.center.label !== '' ? this.center.label : this.center.id\n    return `Cercle $${this.label}$ de centre $${centerName}$ et de rayon ${this.radius} cm`\n  }\n\n  /** Couleur de remplissage au format HTML */\n  get fillColor(): string {\n    return this._fillColor\n  }\n\n  /** Change la couleur des tracés de l'élément */\n  set fillColor(color: string) {\n    this._fillColor = color\n    this.groupSvg.setAttribute('fill', this._fillColor)\n  }\n\n  /** Couleur de remplissage au format HTML */\n  get fillOpacity(): number | undefined {\n    return this._fillOpacity\n  }\n\n  /** Change la couleur des tracés de l'élément */\n  set fillOpacity(opacity: number | undefined) {\n    this._fillOpacity = opacity\n    if (opacity !== undefined)\n      this.groupSvg.setAttribute('fill-opacity', opacity.toString())\n  }\n\n  get label(): string {\n    return this.id.replace('element', 'C_')\n  }\n\n  get latex(): string {\n    let result = `% Cercle ${this.id}`\n    result += `\\n\\\\draw${this.latexOptions} (${this.center.x}, ${this.center.y}) circle (${this.radius});`\n    return result\n  }\n\n  get notation(): string {\n    return this.id\n  }\n\n  get radius(): number {\n    return this._radius\n  }\n\n  set radius(radius: number) {\n    this._radius = radius\n    this.update()\n  }\n}\n\nexport default Circle\n","import type DynamicNumber from '../../dynamicNumbers/DynamicNumber'\nimport type Figure from '../../Figure'\nimport type {\n  OptionsCircleCenterDynamicRadius,\n  OptionsElement2D,\n} from '../interfaces'\nimport type Point from '../points/Point'\nimport Circle from './Circle'\n\nclass CircleCenterDynamicRadius extends Circle {\n  /** Centre du cercle */\n  center: Point\n  /** Rayon du cercle */\n  readonly radiusDynamic: DynamicNumber\n  constructor(\n    figure: Figure,\n    {\n      center,\n      radius,\n      ...options\n    }: OptionsCircleCenterDynamicRadius & OptionsElement2D,\n  ) {\n    super(figure, { center, radius: radius.value, ...options })\n    this.type = 'CircleDynamicRadius'\n    this.center = center\n    this.radiusDynamic = radius\n    this.radiusDynamic.subscribe(this)\n    this.update()\n    this.setVisibilityColorThicknessAndDashed()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      fillColor: this.fillColor,\n      fillOpacity: this.fillOpacity,\n      idCenter: this.center.id,\n      idRadius: this.radiusDynamic.id,\n    }\n  }\n\n  update(): void {\n    if (\n      this.radiusDynamic?.value === undefined ||\n      this.center.x === undefined ||\n      this.center.y === undefined\n    )\n      return\n    const xSvg = this.figure.xToSx(this.center.x)\n    const ySvg = this.figure.yToSy(this.center.y)\n    const rSvg =\n      this.figure.pixelsPerUnit * this.radiusDynamic?.value * this.figure.scale\n    this._radius = this.radiusDynamic.value\n    this.groupSvg.setAttribute('cx', `${xSvg}`)\n    this.groupSvg.setAttribute('cy', `${ySvg}`)\n    if (Number.isFinite(rSvg)) this.groupSvg.setAttribute('r', `${rSvg}`)\n    this.notify()\n  }\n}\n\nexport default CircleCenterDynamicRadius\n","import Distance from '../../dynamicNumbers/Distance'\nimport type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport type Circle from './Circle'\nimport CircleCenterDynamicRadius from './CircleCenterDyamicRadius'\nimport type Segment from './Segment'\n\n/**\n * Trace un cercle défini par un centre et une distance dynamique\n * Cela servira au report de longueur ou pour tracer un cercle dont le rayon est géré par un curseur\n */\nclass CircleCenterPoint extends CircleCenterDynamicRadius {\n  point: Point\n  constructor(\n    figure: Figure,\n    {\n      center,\n      point,\n      ...options\n    }: { center: Point; point: Point } & OptionsElement2D,\n  ) {\n    const radius = new Distance(figure, {\n      isChild: true,\n      point1: center,\n      point2: point,\n    })\n    super(figure, { center, radius, ...options })\n    this.type = 'CircleCenterPoint'\n    this.point = point\n    this.point.subscribe(this)\n  }\n\n  dilate(\n    center: Point,\n    factor: number,\n    options?: OptionsElement2D,\n  ): CircleCenterPoint {\n    const newCenter = this.center.dilate(center, factor, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint = this.point.dilate(center, factor, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('CircleCenterPoint', {\n      center: newCenter,\n      point: newPoint,\n      ...options,\n    })\n    newCircle.transformation = { center, factor, origin: this, type: 'dilate' }\n    return newCircle\n  }\n\n  reflect(center: Point, options?: OptionsElement2D): CircleCenterPoint {\n    const newCenter = this.center.reflect(center, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint = this.point.reflect(center, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('CircleCenterPoint', {\n      center: newCenter,\n      point: newPoint,\n      ...options,\n    })\n    newCircle.transformation = { center, origin: this, type: 'reflect' }\n    return newCircle\n  }\n\n  reflectOverLine(\n    line: Segment,\n    options?: OptionsElement2D,\n  ): CircleCenterPoint {\n    const newCenter = this.center.reflectOverLine(line, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint = this.point.reflectOverLine(line, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('CircleCenterPoint', {\n      center: newCenter,\n      point: newPoint,\n      ...options,\n    })\n    newCircle.transformation = { line, origin: this, type: 'reflectOverLine' }\n    return newCircle\n  }\n\n  rotate(center: Point, angle: number, options?: OptionsElement2D): Circle {\n    const newCenter = this.center.rotate(center, angle, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint = this.point.rotate(center, angle, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('CircleCenterPoint', {\n      center: newCenter,\n      point: newPoint,\n      ...options,\n    })\n    newCircle.transformation = { center, angle, origin: this, type: 'rotation' }\n    return newCircle\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      fillColor: this.fillColor,\n      fillOpacity: this.fillOpacity,\n      idCenter: this.center.id,\n      idPoint: this.point.id,\n    }\n  }\n\n  translate(\n    point1: Point,\n    point2: Point,\n    options?: OptionsElement2D,\n  ): CircleCenterPoint {\n    const newCenter = this.center.translate(point1, point2, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newPoint = this.point.translate(point1, point2, {\n      isChild: true,\n      isVisible: false,\n    })\n    const newCircle = this.figure.create('CircleCenterPoint', {\n      center: newCenter,\n      point: newPoint,\n      ...options,\n    })\n    newCircle.transformation = {\n      origin: this,\n      point1,\n      point2,\n      type: 'translation',\n    }\n    return newCircle\n  }\n\n  get description(): string {\n    if (this.transformation?.type === 'reflect') {\n      return `Image du cercle $${(this.transformation.origin as Circle).notation}$ dans la symétrie de centre $${this.transformation?.center.notation}$`\n    }\n    if (this.transformation?.type === 'reflectOverLine') {\n      return `Image du cercle $${(this.transformation.origin as Circle).notation}$ dans la symétrie d'axe $${this.transformation?.line.notation}$`\n    }\n    if (this.transformation?.type === 'dilate') {\n      return `Image du cercle $${(this.transformation.origin as Circle).notation}$ dans l'homothétie de centre $${this.transformation?.center.notation}$ et de rapport $${this.transformation.factor}$`\n    }\n    if (this.transformation?.type === 'rotation') {\n      return `Image du cercle $${(this.transformation.origin as Circle).notation}$ dans la rotation de centre $${this.transformation.center.notation}$ et d'angle $${Math.abs(this.transformation.angle)}\\\\degree$ dans le sens ${this.transformation.angle > 0 ? 'anti-horaire' : 'horaire'}`\n    }\n    if (this.transformation?.type === 'translation') {\n      return `Image du cercle $${(this.transformation.origin as Circle).notation}$ dans la translation qui transforme $${this.transformation.point1.notation}$ en $${this.transformation.point2.notation}$`\n    }\n    const centerName =\n      this.center.label !== '' ? this.center.label : this.center.id\n    const pointName = this.point.label !== '' ? this.point.label : this.point.id\n    return `Cercle de centre $${centerName}$ et passant par le point $${pointName}$`\n  }\n}\n\nexport default CircleCenterPoint\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport type Vector from '../vector/Vector'\nimport Line from './Line'\n\nclass LineByPointVector extends Line {\n  point: Point\n  vector: Vector\n  constructor(\n    figure: Figure,\n    {\n      point,\n      vector,\n      ...options\n    }: { point: Point; vector: Vector } & OptionsElement2D,\n  ) {\n    const point2 = point.translateVector(vector)\n    point2.isVisible = false\n    point2.isSelectable = true\n    point2.isVisible = false\n    point2.shape = point.shape\n    super(figure, { point1: point, point2, shape: '', ...options })\n    this.type = 'LineByPointVector'\n    this.point = point\n    this.vector = vector\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idPoint: this.point.id,\n      idVector: this.vector.id,\n    }\n  }\n}\n\nexport default LineByPointVector\n","import type Figure from '../../Figure'\nimport { parallelCoords } from '../calculus/Coords'\nimport type { OptionsElement2D, OptionsLineParallel } from '../interfaces'\nimport type Point from '../points/Point'\nimport Line from './Line'\n\nclass LineParallel extends Line {\n  /** Droite parallèle qui la définit */\n  line: Line\n  /** Point par lequel passe cette droite */\n  point: Point\n  constructor(\n    figure: Figure,\n    { line, point, ...options }: OptionsLineParallel & OptionsElement2D,\n  ) {\n    const { x1, y1, x2, y2 } = parallelCoords({ line, point, figure })\n    const point1 = figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      isVisible: false,\n      x: x1,\n      y: y1,\n    })\n    const point2 = figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      isVisible: false,\n      x: x2,\n      y: y2,\n    })\n    super(figure, { point1, point2, ...options })\n    this.type = 'LineParallel'\n    this.line = line\n    this.point = point\n    this.line.subscribe(this)\n    this.point.subscribe(this)\n    this.point1.unsubscribe(this)\n    this.point2.unsubscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idLine: this.line.id,\n      idPoint: this.point.id,\n    }\n  }\n\n  update(): void {\n    const { x1, y1, x2, y2 } = parallelCoords({\n      line: this.line,\n      point: this.point,\n      figure: this.figure,\n    })\n    this.point1.moveTo(x1, y1)\n    this.point2.moveTo(x2, y2)\n    super.update()\n  }\n\n  get description(): string {\n    const pointName = this.point.label !== '' ? this.point.label : this.point.id\n    if (\n      this.line.point1.label !== '' &&\n      this.line.point2.label !== '' &&\n      this.point.label !== ''\n    ) {\n      return `Droite parallèle à $${this.line.notation}$ et passant par le point $${pointName}$`\n    }\n    const parallelLines = [...this.figure.elements.values()].filter(\n      (element) => element instanceof LineParallel,\n    ) as LineParallel[]\n    const index = parallelLines.indexOf(this)\n    return `Droite parallèle n°${index + 1}`\n  }\n}\n\nexport default LineParallel\n","import type Figure from '../../Figure'\nimport {\n  type Coords,\n  orthogonalProjectionCoord,\n  rotationCoord,\n} from '../calculus/Coords'\nimport type { OptionsElement2D, OptionsLinePerpendicular } from '../interfaces'\nimport type Point from '../points/Point'\nimport Line from './Line'\n\nclass LinePerpendicular extends Line {\n  /** Droite perpendiculaire qui la définit */\n  line: Line\n  /** Point par lequel passe cette droite */\n  point: Point\n  constructor(\n    figure: Figure,\n    { line, point, ...options }: OptionsLinePerpendicular & OptionsElement2D,\n  ) {\n    const x1 = point.x\n    const y1 = point.y\n    let result: Coords\n    if (x1 === line.point1.x && y1 === line.point1.y) {\n      result = rotationCoord(line.point2, line.point1, 90)\n    } else if (x1 === line.point2.x && y1 === line.point2.y) {\n      result = rotationCoord(line.point1, point, 90)\n    } else if (point.isOnline(line)) {\n      result = rotationCoord(line.point1, point, 90)\n    } else {\n      result = orthogonalProjectionCoord(point, line)\n    }\n    const x2 = result.x\n    const y2 = result.y\n    const point1 = figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      isVisible: false,\n      color: '',\n      x: x1,\n      y: y1,\n    })\n    const point2 = figure.create('Point', {\n      isChild: true,\n      isFree: false,\n      isVisible: false,\n      color: '',\n      x: x2,\n      y: y2,\n    })\n    super(figure, { point1, point2, ...options })\n    this.type = 'LinePerpendicular'\n    this.line = line\n    this.point = point\n    this.line.subscribe(this)\n    this.point.subscribe(this)\n    this.point1.unsubscribe(this)\n    this.point2.unsubscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idLine: this.line.id,\n      idPoint: this.point.id,\n    }\n  }\n\n  update(): void {\n    const x1 = this.point.x\n    const y1 = this.point.y\n    let result: Coords\n    if (x1 === this.line.point1.x && y1 === this.line.point1.y) {\n      result = rotationCoord(this.line.point2, this.line.point1, 90)\n    } else if (x1 === this.line.point2.x && y1 === this.line.point2.y) {\n      result = rotationCoord(this.line.point1, this.point, 90)\n    } else if (this.point.isOnline(this.line)) {\n      result = rotationCoord(this.line.point1, this.point, 90)\n    } else {\n      result = orthogonalProjectionCoord(this.point, this.line)\n    }\n    const x2 = result.x\n    const y2 = result.y\n    this.point1.moveTo(x1, y1)\n    this.point2.moveTo(x2, y2)\n    super.update()\n  }\n\n  get description(): string {\n    const pointName = this.point.label !== '' ? this.point.label : this.point.id\n    if (\n      this.line.point1.label !== '' &&\n      this.line.point2.label !== '' &&\n      this.point.label !== ''\n    ) {\n      return `Droite perpendiculaire à $${this.line.notation}$ et passant par le point $${pointName}$`\n    }\n    const perpendicularLines = [...this.figure.elements.values()].filter(\n      (element) => element instanceof LinePerpendicular,\n    ) as LinePerpendicular[]\n    const index = perpendicularLines.indexOf(this)\n    return `Droite perpendiculaire n°${index + 1}`\n  }\n}\n\nexport default LinePerpendicular\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\nimport LinePerpendicular from './LinePerpendicular'\nimport type Segment from './Segment'\n\nclass PerpendicularBisector extends LinePerpendicular {\n  notationSegment: string\n  constructor(\n    figure: Figure,\n    { segment, ...options }: { segment: Segment } & OptionsElement2D,\n  ) {\n    const middlePoint = figure.create('Middle', {\n      isChild: true,\n      isSelectable: true,\n      isVisible: false,\n      point1: segment.point1,\n      point2: segment.point2,\n      shape: '',\n    })\n    super(figure, { line: segment, point: middlePoint, ...options })\n    this.type = 'PerpendicularBisector'\n    this.notationSegment = segment.notation\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idSegment: this.line.id,\n    }\n  }\n\n  get description(): string {\n    return `Médiatrice du segment $${this.notationSegment}$`\n  }\n\n  get notation(): string {\n    return `\\\\text{médiatrice de }${this.notationSegment}`\n  }\n}\n\nexport default PerpendicularBisector\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport PerpendicularBisector from './PerpendicularBisector'\n\nclass PerpendicularBisectorByPoints extends PerpendicularBisector {\n  constructor(\n    figure: Figure,\n    {\n      point1,\n      point2,\n      ...options\n    }: { point1: Point; point2: Point } & OptionsElement2D,\n  ) {\n    const segment = figure.create('Segment', {\n      isChild: true,\n      isSelectable: true,\n      isVisible: false,\n      point1,\n      point2,\n    })\n    super(figure, { segment, ...options })\n    this.type = 'PerpendicularBisectorByPoints'\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idPoint1: this.line.point1.id,\n      idPoint2: this.line.point2.id,\n    }\n  }\n\n  get description(): string {\n    const point1Name =\n      this.line.point1.label !== ''\n        ? this.line.point1.label\n        : this.line.point1.id\n    const point2Name =\n      this.line.point2.label !== ''\n        ? this.line.point2.label\n        : this.line.point2.id\n    return `Médiatrice du segment $[${point1Name}${point2Name}]$`\n  }\n}\n\nexport default PerpendicularBisectorByPoints\n","import type Figure from '../../Figure'\nimport { colorLatex } from '../../lib/handleColors'\nimport type { Coords } from '../calculus/Coords'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\nimport type Segment from './Segment'\n\n/**\n * Trace une polygone\n */\n\nclass Polygon extends Element2D {\n  _fillColor = 'none'\n  _fillOpacity = 0.5\n  /** Est-ce qu'on créé un segment pour chaque côté ? */\n  isBuiltWithSegments: boolean\n  /** Liste des sommets */\n  points: Point[]\n  /** Liste des côtés */\n  readonly segments: Segment[]\n  /** Forme des sommets */\n  shape: '' | 'o' | 'x'\n  constructor(\n    figure: Figure,\n    {\n      fillColor = 'none',\n      fillOpacity = figure.options.fillOpacity,\n      isBuiltWithSegments = true,\n      points,\n      shape = '',\n      ...options\n    }: {\n      fillColor?: string\n      fillOpacity?: number\n      isBuiltWithSegments?: boolean\n      points: Point[] | Coords[]\n      shape?: '' | 'o' | 'x'\n    } & OptionsElement2D,\n  ) {\n    super(figure, options)\n    this.type = 'Polygon'\n    if (isStricCoords(points[0])) {\n      this.points = []\n      for (const coord of points as Coords[]) {\n        this.points.push(\n          this.figure.create('Point', {\n            x: coord.x,\n            y: coord.y,\n            isVisible: false,\n            isChild: false,\n          }),\n        )\n      }\n    } else {\n      this.points = points as Point[]\n    }\n    this.shape = shape\n    this.segments = []\n    this.fillColor = fillColor\n    this.fillOpacity = fillOpacity\n    this.isBuiltWithSegments = isBuiltWithSegments\n    for (const point of this.points) {\n      point.subscribe(this)\n    }\n  }\n\n  /** Créer un segment caché pour chacun des côtés du polygone et ainsi permettre de placer des milieux, tracer des perpendiculaires... */\n  createSegments(): void {\n    for (let i = 0; i < this.points.length; i++) {\n      const point1 = this.points.at(i % this.points.length) as Point\n      const point2 = this.points.at((i + 1) % this.points.length) as Point\n      const segment = this.figure.create('Segment', {\n        color: '',\n        id: `${this.id}_segment${i.toString()}`,\n        isChild: true,\n        point1,\n        point2,\n      })\n      this.segments.push(segment)\n    }\n    for (const segment of this.segments) {\n      segment.createdBy = this\n    }\n  }\n\n  dilate(center: Point, factor: number, options?: OptionsElement2D): Polygon {\n    const newPoints = []\n    for (const point of this.points) {\n      newPoints.push(\n        point.dilate(center, factor, { isChild: true, isVisible: false }),\n      )\n    }\n    const newPolygon = this.figure.create('Polygon', {\n      points: newPoints,\n      ...options,\n    })\n    newPolygon.transformation = { center, factor, origin: this, type: 'dilate' }\n    return newPolygon\n  }\n\n  distancePointer(x: number, y: number): number {\n    if (\n      this.figure.currentState === 'FILL' &&\n      this.figure.pointer.isInPolygon(this)\n    )\n      return 0\n    let minDistance = Number.POSITIVE_INFINITY\n    for (const segment of this.segments) {\n      const distance = segment.distancePointer(x, y)\n      if (distance < minDistance) minDistance = distance\n    }\n    return minDistance\n  }\n\n  draw(): void {\n    this.groupSvg = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'polygon',\n    )\n    this.groupSvg.setAttribute('fill', this.fillColor ?? 'none')\n    this.groupSvg.setAttribute('fill-opacity', this.fillOpacity.toString())\n    this.setVisibilityColorThicknessAndDashed()\n    if (this.isBuiltWithSegments) {\n      this.createSegments()\n    }\n    this.update()\n  }\n\n  reflect(center: Point, options?: OptionsElement2D): Polygon {\n    const newPoints = []\n    for (const point of this.points) {\n      newPoints.push(point.reflect(center, { isChild: true, isVisible: false }))\n    }\n    const newPolygon = this.figure.create('Polygon', {\n      points: newPoints,\n      ...options,\n    })\n    newPolygon.transformation = { center, origin: this, type: 'reflect' }\n    return newPolygon\n  }\n\n  reflectOverLine(line: Segment, options?: OptionsElement2D): Polygon {\n    const newPoints = []\n    for (const point of this.points) {\n      newPoints.push(\n        point.reflectOverLine(line, { isChild: true, isVisible: false }),\n      )\n    }\n    const newPolygon = this.figure.create('Polygon', {\n      points: newPoints,\n      ...options,\n    })\n    newPolygon.transformation = { line, origin: this, type: 'reflectOverLine' }\n    return newPolygon\n  }\n\n  rotate(center: Point, angle: number, options?: OptionsElement2D): Polygon {\n    const newPoints = []\n    for (const point of this.points) {\n      newPoints.push(\n        point.rotate(center, angle, { isChild: true, isVisible: false }),\n      )\n    }\n    const newPolygon = this.figure.create('Polygon', {\n      points: newPoints,\n      ...options,\n    })\n    newPolygon.transformation = {\n      center,\n      origin: this,\n      angle,\n      type: 'rotation',\n    }\n    return newPolygon\n  }\n\n  remove(): void {\n    super.remove()\n    for (const segment of this.segments) {\n      segment.remove()\n    }\n  }\n\n  toJSON(): object {\n    const idPoints = []\n    for (const point of this.points) {\n      idPoints.push(point.id)\n    }\n    return {\n      ...this.jsonOptions(),\n      idPoints,\n    }\n  }\n\n  translate(point1: Point, point2: Point, options?: OptionsElement2D): Polygon {\n    const newPoints = []\n    for (const point of this.points) {\n      newPoints.push(\n        point.translate(point1, point2, { isChild: true, isVisible: false }),\n      )\n    }\n    const newPolygon = this.figure.create('Polygon', {\n      points: newPoints,\n      ...options,\n    })\n    newPolygon.transformation = {\n      origin: this,\n      point1,\n      point2,\n      type: 'translation',\n    }\n    return newPolygon\n  }\n\n  update(): void {\n    this.notify()\n    if (!allCoordsAreNumber(this.points)) {\n      this.groupSvg.removeAttribute('points')\n    } else {\n      let pointsCoords = ''\n      for (const point of this.points) {\n        pointsCoords += `${this.figure.xToSx(point.x).toString()},${this.figure.yToSy(point.y).toString()} `\n      }\n      this.groupSvg.setAttribute('points', pointsCoords)\n    }\n  }\n\n  get description(): string {\n    if (this.transformation?.type === 'reflect') {\n      return `Image du polygone $${(this.transformation.origin as Polygon).notation}$ dans la symétrie de centre $${this.transformation?.center.notation}$`\n    }\n    if (this.transformation?.type === 'reflectOverLine') {\n      return `Image du polygone $${(this.transformation.origin as Polygon).notation}$ dans la symétrie d'axe $${this.transformation?.line.notation}$`\n    }\n    if (this.transformation?.type === 'dilate') {\n      return `Image du polygone $${(this.transformation.origin as Polygon).notation}$ dans l'homothétie de centre $${this.transformation?.center.notation}$ et de rapport $${this.transformation.factor}$`\n    }\n    if (this.transformation?.type === 'rotation') {\n      return `Image du polygone $${(this.transformation.origin as Polygon).notation}$ dans la rotation de centre $${this.transformation.center.notation}$ et d'angle $${Math.abs(this.transformation.angle)}\\\\degree$ dans le sens ${this.transformation.angle > 0 ? 'anti-horaire' : 'horaire'}`\n    }\n    if (this.transformation?.type === 'translation') {\n      return `Image du polygone $${(this.transformation.origin as Polygon).notation}$ dans la translation qui transforme $${this.transformation.point1.notation}$ en $${this.transformation.point2.notation}$`\n    }\n    return `Polygone $${this.notation}$`\n  }\n\n  /** Couleur de remplissage au format HTML */\n  get fillColor(): string {\n    return this._fillColor\n  }\n\n  /** Change la couleur des tracés de l'élément */\n  set fillColor(color: string) {\n    this._fillColor = color\n    this.groupSvg.setAttribute('fill', this._fillColor)\n  }\n\n  /** Couleur de remplissage au format HTML */\n  get fillOpacity(): number {\n    return this._fillOpacity ?? this.figure.options.fillOpacity\n  }\n\n  /** Change la couleur des tracés de l'élément */\n  set fillOpacity(opacity: number) {\n    this._fillOpacity = opacity\n    if (opacity !== undefined)\n      this.groupSvg.setAttribute('fill-opacity', opacity.toString())\n  }\n\n  get latex(): string {\n    let result = `% Polygone ${this.points.reduce((acc, point) => acc + point.label, '')}`\n    result += `\\n \\\\draw [color=${colorLatex(this.color ? this.color : 'none')},fill=${colorLatex(this.fillColor ? this.fillColor : 'none')},fill opacity=${this.fillOpacity},line width=${this.thickness}] `\n    for (const point of this.points) {\n      result += `(${point.x.toFixed(2)},${point.y.toFixed(2)}) -- `\n    }\n    result += ' cycle;'\n    return result\n  }\n\n  get notation(): string {\n    return this.points.reduce((acc, point) => {\n      const pointName = point.label === '' ? point.id : point.label\n      return acc + pointName\n    }, '')\n  }\n}\n\nexport default Polygon\n\nfunction allCoordsAreNumber(points: Point[] | Coords[]): boolean {\n  for (const point of points) {\n    if (!Number.isFinite(point.x) || !Number.isFinite(point.y)) return false\n  }\n  return true\n}\n\n/**\n * Vérifie si l'objet est uniquement de type Coords et n'a que les clés x et y\n * @param obj\n * @returns\n */\nexport function isStricCoords(obj: Coords): obj is { x: number; y: number } {\n  if (\n    typeof obj === 'object' &&\n    obj !== null &&\n    Object.keys(obj).length === 2\n  ) {\n    if (\n      'x' in obj &&\n      'y' in obj &&\n      typeof obj.x === 'number' &&\n      typeof obj.y === 'number'\n    ) {\n      return true\n    }\n  }\n  return false\n}\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D, OptionsPolyline } from '../interfaces'\nimport type Point from '../points/Point'\n\n/**\n * Trace une ligne brisée\n */\nclass Polyline extends Element2D {\n  /** Liste des sommets */\n  points: Point[]\n  /** Détermine s'il faut afficher les deux extrémités, que celle de gauche ou que celle de droite */\n  shape?: '' | '|-' | '|-' | '|-|'\n  constructor(\n    figure: Figure,\n    { points, ...options }: OptionsPolyline & OptionsElement2D,\n  ) {\n    super(figure, options)\n    this.type = 'Polyline'\n    this.points = points\n    for (const point of points) {\n      point.subscribe(this)\n    }\n  }\n\n  draw(): void {\n    this.groupSvg = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'polyline',\n    )\n    this.groupSvg.setAttribute('fill', 'none')\n    this.setVisibilityColorThicknessAndDashed()\n    this.update()\n  }\n\n  toJSON(): object {\n    const idPoints = []\n    for (const point of this.points) {\n      idPoints.push(point.id)\n    }\n    return {\n      ...this.jsonOptions(),\n      idPoints,\n    }\n  }\n\n  update(): void {\n    this.notify()\n    if (!allCoordsAreNumber(this.points)) {\n      this.groupSvg.removeAttribute('points')\n    } else {\n      let pointsCoords = ''\n      for (const point of this.points) {\n        pointsCoords += `${this.figure.xToSx(point.x).toString()},${this.figure.yToSy(point.y).toString()} `\n      }\n      this.groupSvg.setAttribute('points', pointsCoords)\n    }\n  }\n}\n\nexport default Polyline\n\nfunction allCoordsAreNumber(points: Point[]): boolean {\n  for (const point of points) {\n    if (!Number.isFinite(point.x) || !Number.isFinite(point.y)) return false\n  }\n  return true\n}\n","import renderMathInElement from 'katex/dist/contrib/auto-render.js'\nimport 'katex/dist/katex.min.css'\n\nimport type Figure from '../../Figure'\n\nimport { round } from '../../lib/format'\nimport Element2D from '../Element2D'\nimport type Grid from '../grid/Grid'\n\n/**\n * Créé un div contenant un texte qui est mis au dessus du svg\n * par défaut KaTeX s'occupe du rendu du div\n */\nclass TextByPosition extends Element2D {\n  /** Angle avec l'horizontal exprimé en degrés */\n  _angleWithHorizontalInDegres = 0\n  private _backgroundColor?: string\n  _color: string\n  private _fontSize: string\n  private _text!: string\n  private _x!: number\n  private _y!: number\n  /** Ancrage du texte */\n  anchor:\n    | 'bottomCenter'\n    | 'bottomLeft'\n    | 'bottomRight'\n    | 'middleCenter'\n    | 'middleLeft'\n    | 'middleRight'\n    | 'topCenter'\n    | 'topLeft'\n    | 'topRight'\n  /** Le texte est mis dans un div qui s'affichera par dessus le SVG */\n  div!: HTMLDivElement\n  dxInPixels: number\n  dyInPixels: number\n\n  constructor(\n    figure: Figure,\n    {\n      anchor = 'middleCenter',\n      backgroundColor,\n      color = 'black',\n      dxInPixels = 0,\n      dyInPixels = 0,\n      fontSize = figure.options.fontSize,\n      id,\n      isChild = false,\n      isVisible = true,\n      text,\n      x,\n      y,\n    }: {\n      anchor?:\n        | 'bottomCenter'\n        | 'bottomLeft'\n        | 'bottomRight'\n        | 'middleCenter'\n        | 'middleLeft'\n        | 'middleRight'\n        | 'topCenter'\n        | 'topLeft'\n        | 'topRight'\n      backgroundColor?: string\n      color?: string\n      dx?: number\n      dxInPixels?: number\n      dy?: number\n      dyInPixels?: number\n      fontSize?: string\n      id?: string\n      isChild?: boolean\n      isSelectable?: boolean\n      isVisible?: boolean\n      text: string\n      x: number\n      y: number\n    },\n  ) {\n    super(figure, { id, isChild })\n    this.type = 'TextByPosition'\n    this._x = x\n    this._y = y\n    this.div = document.createElement('div')\n    this._fontSize = fontSize\n    this.dxInPixels = dxInPixels\n    this.dyInPixels = dyInPixels\n    this._text = text\n    this.backgroundColor = backgroundColor\n    this._color = color\n    this.anchor = anchor\n    this.isVisible = isVisible\n  }\n\n  draw(): void {\n    this.div.style.position = 'absolute'\n    this.div.style.pointerEvents = 'none'\n    this.figure.divFigure?.appendChild(this.div)\n    if (this.color !== 'black') this.div.style.color = this.color\n    if (this.backgroundColor !== undefined)\n      this.div.style.backgroundColor = this.backgroundColor\n    this.text = this._text\n    this.x = this._x\n    this.y = this._y\n    if (this._angleWithHorizontalInDegres !== 0) {\n      this.div.style.transform = this.div.style.transform.replace(\n        /rotate\\([0-9.]+deg\\)/,\n        '',\n      )\n      this.div.style.transformOrigin = 'center'\n      this.div.style.transform += ` rotate(${this._angleWithHorizontalInDegres}deg)`\n      this.div.style.transform += 'translateY(-50%)'\n      this.div.style.verticalAlign = 'middle'\n    }\n    this.div.style.alignItems = 'center'\n    if (this.figure.scale - this.figure.initial.scale !== 0) {\n      /* MGU essaie de augmnter le texte avec le zoom */\n      if (this._fontSize.includes('em')) {\n        // rien à faire, c'est en fonction de la taille du caractère m\n      } else if (this._fontSize.includes('pt')) {\n        this.fontSize = `${Number.parseFloat(this._fontSize) * (1 + (this.figure.scale - this.figure.initial.scale))}pt`\n      }\n    }\n  }\n\n  /** Déplace le texte aux coordonnées données */\n  moveTo(x: number, y: number): void {\n    this.x = x\n    this.y = y\n  }\n\n  remove(): void {\n    this.figure.elements.delete(this.id)\n    this.div.remove()\n    for (const element of this.observers) {\n      element.remove()\n    }\n  }\n\n  update(): void {\n    if (this.x !== undefined && this.y !== undefined) {\n      this.moveTo(this.x, this.y)\n    }\n    this.notify()\n    const divRect = this.div.getBoundingClientRect()\n    const svgRect = this.figure.svg?.getBoundingClientRect()\n    if (\n      svgRect &&\n      (divRect.right < svgRect.left ||\n        divRect.left > svgRect.right ||\n        divRect.bottom < svgRect.top ||\n        divRect.top > svgRect.bottom)\n    ) {\n      this.div.style.visibility = 'hidden'\n    } else {\n      this.div.style.visibility = 'visible'\n    }\n  }\n\n  get isVisible(): boolean {\n    return this._isVisible\n  }\n\n  set isVisible(isVisible: boolean) {\n    this._isVisible = isVisible\n    if (isVisible) {\n      this.figure.divFigure?.appendChild(this.div)\n    } else {\n      this.div.remove()\n    }\n  }\n\n  get opacity(): number {\n    return this._opacity\n  }\n\n  set opacity(opacity: number) {\n    this._opacity = opacity\n    this.div.style.opacity = opacity.toString()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      backgroundColor: this.backgroundColor,\n      color: this.color,\n      name: this.id,\n      text: this.text,\n      x: round(this.x),\n      y: round(this.y),\n      anchor: this.anchor,\n    }\n  }\n\n  set angleWithHorizontalInDegres(angle: number) {\n    this._angleWithHorizontalInDegres = angle\n    this.div.style.transform = this.div.style.transform.replace(\n      /rotate\\([0-9.]+deg\\)/,\n      '',\n    )\n    this.div.style.transformOrigin = 'center'\n    this.div.style.transform += ` rotate(${angle}deg)`\n  }\n\n  get angleWithHorizontalInDegres(): number {\n    return this._angleWithHorizontalInDegres\n  }\n\n  get backgroundColor(): string | undefined {\n    return this._backgroundColor\n  }\n\n  set backgroundColor(color: string | undefined) {\n    this._backgroundColor = color\n    if (color !== undefined) {\n      this.div.style.backgroundColor = color\n    }\n  }\n\n  get color(): string {\n    return this._color\n  }\n\n  set color(color: string) {\n    this._color = color\n    this.div.style.color = color\n  }\n\n  get fontSize(): string {\n    return this._fontSize\n  }\n\n  set fontSize(fontSize: string) {\n    this._fontSize = fontSize\n    this.div.style.fontSize = fontSize\n  }\n\n  get latex(): string {\n    // On exclue les labels de la grille car ils sont gérés par l'environnement axis\n    const grid = [...this.figure.elements.values()].filter(\n      (e) => e.type === 'Grid',\n    )[0] as Grid\n    if (grid && grid.labels.indexOf(this) !== -1) return ''\n    return this.text !== '$$' && this.text !== ''\n      ? `\\\\node[${this.latexOptions}] at (${this.x},${this.y}) {${this.text}};`\n      : ''\n  }\n\n  get latexOptions(): string {\n    const superOptions = super.latexOptions\n    const options =\n      superOptions === ''\n        ? []\n        : superOptions.substring(1, superOptions.length - 1).split(',')\n    const alignment = []\n    if (this.dyInPixels > 0) alignment.push('above')\n    else if (this.dyInPixels < 0) alignment.push('below')\n    if (this.dxInPixels > 0) alignment.push('right')\n    else if (this.dxInPixels < 0) alignment.push('left')\n    const alignmentString = alignment.join(' ')\n    if (alignment.length > 0) options.push(alignmentString)\n    return options.join(',')\n  }\n\n  get text(): string {\n    return this._text\n  }\n\n  set text(text: string) {\n    this._text = text\n    this.div.innerHTML = text\n    renderMathInElement(this.div, {\n      delimiters: [\n        { display: true, left: '\\\\[', right: '\\\\]' },\n        { display: false, left: '$', right: '$' },\n      ],\n      errorColor: '#CC0000',\n      preProcess: (chaine: string) =>\n        chaine.replaceAll(String.fromCharCode(160), '\\\\,'),\n      strict: 'warn',\n      throwOnError: true,\n      trust: false,\n    })\n  }\n\n  get x(): number {\n    return this._x\n  }\n\n  set x(x: number) {\n    let styleTransform = ''\n    if (this.anchor.includes('Left')) {\n      this.div.style.left = `${this.figure.xToSx(x - this.figure.xMin).toString()}px`\n    } else if (this.anchor.includes('Right')) {\n      // this.div.style.right = this.figure.xToSx(-x + this.figure.xMax).toString() + 'px'\n      if (\n        this.figure.divFigure?.clientWidth !== undefined &&\n        this.figure.divFigure.clientWidth > this.figure.width\n      ) {\n        this.div.style.right = `${(this.figure.xToSx(-x + this.figure.xMax) + Math.max(0, this.figure.divFigure.clientWidth - this.figure.width)).toString()}px`\n      } else {\n        this.div.style.right = `${this.figure.xToSx(-x + this.figure.xMax).toString()}px`\n      }\n    } else if (this.anchor.includes('Center')) {\n      this.div.style.left = `${this.figure.xToSx(x - this.figure.xMin).toString()}px`\n      styleTransform += 'translateX(-50%)'\n    }\n    if (this.anchor.includes('middle')) {\n      styleTransform += 'translateY(-50%)'\n    }\n    if (this.dxInPixels !== 0 || this.dyInPixels !== 0) {\n      styleTransform += ` translate(${this.dxInPixels.toString()}px, ${-this.dyInPixels.toString()}px)`\n    }\n    this.div.style.fontSize = this._fontSize\n    this.div.style.transform = styleTransform\n    this._x = x\n  }\n\n  get y(): number {\n    return this._y\n  }\n\n  set y(y: number) {\n    if (this.anchor.includes('top')) {\n      this.div.style.top = `${this.figure.yToSy(y - this.figure.yMax).toString()}px`\n    } else if (this.anchor.includes('bottom')) {\n      this.div.style.bottom = `${this.figure.yToSy(-y + this.figure.yMin).toString()}px`\n    } else if (this.anchor.includes('middle')) {\n      this.div.style.top = `${this.figure.yToSy(y - this.figure.yMax).toString()}px`\n    }\n    this._y = y\n  }\n}\n\nexport default TextByPosition\n","import type Figure from '../../Figure'\nimport { angleWithHorizontalInDegres } from '../calculus/Coords'\nimport Element2D from '../Element2D'\nimport type Point from '../points/Point'\n\nimport TextByPosition from '../text/TextByPosition'\n\nclass MarkSegment extends TextByPosition {\n  point1: Point\n  point2: Point\n  constructor(\n    figure: Figure,\n    {\n      color = figure.options.color,\n      fontSize = figure.options.fontSize,\n      point1,\n      point2,\n      text = figure.options.mark,\n    }: {\n      color?: string\n      fontSize?: string\n      point1: Point\n      point2: Point\n      text?: string\n    },\n  ) {\n    const x = (point1.x + point2.x) / 2\n    const y = (point1.y + point2.y) / 2\n    super(figure, { color, fontSize, text, x, y })\n    this.type = 'MarkSegment'\n    this.fontSize = fontSize\n    this._color = color\n    this.point1 = point1\n    this.point2 = point2\n    this.point1.subscribe(this)\n    this.point2.subscribe(this)\n    const angle = angleWithHorizontalInDegres(this.point1, this.point2)\n    this.angleWithHorizontalInDegres = -angle\n    this.type = 'MarkBetweenPoints'\n    this.erasePreviousMarks()\n  }\n\n  draw(): void {\n    super.draw()\n    this.update()\n  }\n\n  erasePreviousMarks(): void {\n    const marks = [...this.figure.elements.values()].filter(\n      (e) => e instanceof Element2D && e.type === 'MarkBetweenPoints',\n    ) as MarkSegment[]\n    for (const mark of marks) {\n      if (mark.id === this.id) {\n        continue\n      }\n      if (\n        mark.point1.id === this.point1.id &&\n        mark.point2.id === this.point2.id\n      ) {\n        mark.remove()\n      } else if (\n        mark.point1.id === this.point2.id &&\n        mark.point2.id === this.point1.id\n      ) {\n        mark.remove()\n      }\n    }\n  }\n\n  update(): void {\n    this.x = (this.point1.x + this.point2.x) / 2\n    this.y = (this.point1.y + this.point2.y) / 2\n    if (this.div !== undefined) {\n      if (this.text !== '||' && this.text !== '|||') {\n        this.div.style.fontFamily = 'Courier New'\n        // Police qui permet de centrer verticalement les symboles\n        // mais qui met trop d'espacement entre les | pour ||\n      }\n      this.div.style.fontWeight = 'bold'\n      this.div.style.fontSize = this.fontSize\n      this.div.style.transformOrigin = 'center center'\n      this.div.style.transformBox = 'fill-box'\n      this.div.style.transform = 'translate(-50%, -50%)'\n      this.div.classList.add('-tracking-2')\n      const angle = angleWithHorizontalInDegres(this.point1, this.point2)\n      this.div.style.transform += `rotate(${-angle}deg)`\n      const divRect = this.div.getBoundingClientRect()\n      const svgRect = this.figure.svg?.getBoundingClientRect()\n      if (\n        svgRect &&\n        (divRect.right < svgRect.left ||\n          divRect.left > svgRect.right ||\n          divRect.bottom < svgRect.top ||\n          divRect.top > svgRect.bottom)\n      ) {\n        this.div.style.visibility = 'hidden'\n      } else {\n        this.div.style.visibility = 'visible'\n      }\n    }\n    this.notify()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      color: this.color,\n      text: this.text,\n      idPoint1: this.point1.id,\n      idPoint2: this.point2.id,\n    }\n  }\n}\n\nexport default MarkSegment\n","import type Figure from '../../Figure'\nimport { distance, homothetieCoord, rotationCoord } from '../calculus/Coords'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Point from '../points/Point'\n\nexport default class MarkRightAngle extends Element2D {\n  /* Point qui indique la direction du 2e sommet du carré */\n  directionPoint: Point\n  /* Point qui indique le sommet du carré */\n  point: Point\n  /* Taille du carré en unités de la figure */\n  size: number\n  svgPolygon: SVGPolygonElement\n  constructor(\n    figure: Figure,\n    {\n      point,\n      directionPoint,\n      size = 0.4,\n      ...options\n    }: {\n      point: Point\n      directionPoint: Point\n      size?: number\n    } & OptionsElement2D,\n  ) {\n    super(figure, { ...options })\n    this.directionPoint = directionPoint\n    this.point = point\n    this.size = size\n    this.type = 'MarkRightAngle'\n    this.point.subscribe(this)\n    this.directionPoint.subscribe(this)\n    this.svgPolygon = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'polygon',\n    )\n    this.groupSvg.appendChild(this.svgPolygon)\n    this.update()\n    this.setVisibilityColorThicknessAndDashed()\n  }\n\n  draw(): void {\n    this.update()\n  }\n\n  update(): void {\n    const x1 = this.figure.xToSx(this.point.x)\n    const y1 = this.figure.yToSy(this.point.y)\n    const sommet2 = homothetieCoord(\n      this.directionPoint,\n      this.point,\n      this.size / distance(this.point, this.directionPoint),\n    )\n    const x2 = this.figure.xToSx(sommet2.x)\n    const y2 = this.figure.yToSy(sommet2.y)\n    const sommet3 = rotationCoord(this.point, sommet2, -90)\n    const x3 = this.figure.xToSx(sommet3.x)\n    const y3 = this.figure.yToSy(sommet3.y)\n    const sommet4 = rotationCoord(sommet2, this.point, 90)\n    const x4 = this.figure.xToSx(sommet4.x)\n    const y4 = this.figure.yToSy(sommet4.y)\n    this.svgPolygon.setAttribute(\n      'points',\n      `${x1},${y1} ${x2},${y2} ${x3},${y3} ${x4},${y4}`,\n    )\n    this.svgPolygon.setAttribute('fill', 'none')\n    this.notify()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      color: this.color,\n      idPoint: this.point.id,\n      idDirectionPoint: this.directionPoint.id,\n    }\n  }\n\n  get latex(): string {\n    const sommet2 = homothetieCoord(\n      this.directionPoint,\n      this.point,\n      this.size / distance(this.point, this.directionPoint),\n    )\n    const sommet3 = rotationCoord(this.point, sommet2, -90)\n    const sommet4 = rotationCoord(sommet2, this.point, 90)\n    let result = `% Angle droit en ${this.point.label}`\n    result += `\\n\\\\draw${this.latexOptions} (${this.point.x},${this.point.y}) -- (${sommet2.x},${sommet2.y}) -- (${sommet3.x},${sommet3.y}) -- (${sommet4.x},${sommet4.y}) -- cycle;`\n    return result\n  }\n}\n","import type Figure from '../../Figure'\n\nimport type { OptionsElement2D } from '../interfaces'\nimport Point from './Point'\n\nclass Barycenter extends Point {\n  points: Point[]\n  constructor(\n    figure: Figure,\n    { points, ...options }: { points: Point[] } & OptionsElement2D,\n  ) {\n    const x = points.reduce((acc, point) => acc + point.x, 0) / points.length\n    const y = points.reduce((acc, point) => acc + point.y, 0) / points.length\n    super(figure, { x, y, ...options })\n    this.type = 'Barycenter'\n    this.points = points\n    for (const point of this.points) {\n      point.subscribe(this)\n    }\n  }\n\n  update(): void {\n    const x =\n      this.points.reduce((acc, point) => acc + point.x, 0) / this.points.length\n    const y =\n      this.points.reduce((acc, point) => acc + point.y, 0) / this.points.length\n    this._x = x\n    this._y = y\n    super.update()\n  }\n}\n\nexport default Barycenter\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\n\nimport Point from './Point'\n\n/**\n * Trace le milieu défini par deux points\n */\nclass Middle extends Point {\n  /** Première extrémité */\n  point1: Point\n  /** Deuxième extrémité */\n  point2: Point\n  constructor(\n    figure: Figure,\n    {\n      point1,\n      point2,\n      ...options\n    }: {\n      isChild?: boolean\n      isSelectable?: boolean\n      isVisible?: boolean\n      label?: string\n      labelDxInPixels?: number\n      labelDyInPixels?: number\n      point1: Point\n      point2: Point\n      shape?: '' | 'o' | 'x'\n      size?: number\n    } & OptionsElement2D,\n  ) {\n    const [x, y] = coordsMiddle(point1, point2)\n    super(figure, { isFree: false, x, y, ...options })\n    this.type = 'Middle'\n    this.point1 = point1\n    this.point2 = point2\n    this.point1.subscribe(this)\n    this.point2.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idPoint1: this.point1.id,\n      idPoint2: this.point2.id,\n    }\n  }\n\n  update(): void {\n    if (\n      this.point1?.x === undefined ||\n      this.point2?.x === undefined ||\n      this.point1?.y === undefined ||\n      this.point2?.y === undefined ||\n      Number.isNaN(this.point1.x) ||\n      Number.isNaN(this.point1.y) ||\n      Number.isNaN(this.point2.x) ||\n      Number.isNaN(this.point2.y)\n    ) {\n      this._x = Number.NaN\n      this._y = Number.NaN\n    } else {\n      this._x = (this.point1.x + this.point2.x) / 2\n      this._y = (this.point1.y + this.point2.y) / 2\n    }\n    super.update()\n    this.notify()\n  }\n\n  get description(): string {\n    const point1Name =\n      this.point1.label !== '' ? this.point1.label : this.point1.id\n    const point2Name =\n      this.point2.label !== '' ? this.point2.label : this.point2.id\n    return `Milieu de $[${point1Name}${point2Name}]$`\n  }\n}\n\nfunction coordsMiddle(point1: Point, point2: Point): [number, number] {\n  if (\n    Number.isNaN(point1.x) ||\n    Number.isNaN(point1.y) ||\n    Number.isNaN(point2.x) ||\n    Number.isNaN(point2.y)\n  )\n    return [Number.NaN, Number.NaN]\n  return [(point1.x + point2.x) / 2, (point1.y + point2.y) / 2]\n}\n\nexport default Middle\n","import type Figure from '../../Figure'\nimport type Graph from '../calculus/Graph'\nimport type GraphByParts from '../calculus/GraphByParts'\nimport type { OptionsElement2D } from '../interfaces'\n\nimport Point from './Point'\n\nclass PointOnGraph extends Point {\n  graph: Graph | GraphByParts\n  constructor(\n    figure: Figure,\n    {\n      abscissa = false,\n      graph,\n      ordinate = false,\n      x = 1,\n      ...options\n    }: {\n      abscissa?: boolean\n      color?: string\n      graph: Graph | GraphByParts\n      id?: string\n      isChild?: boolean\n      isFree?: boolean\n      isVisible?: boolean\n      label?: string\n      labelDxInPixels?: number\n      labelDyInPixels?: number\n      ordinate?: boolean\n      shape?: '' | '|' | 'o' | 'x'\n      size?: number\n      thickness?: number\n      x?: number\n    } & OptionsElement2D,\n  ) {\n    super(figure, { x, y: graph.f(x), ...options })\n    this.type = 'PointOnGraph'\n    this.graph = graph\n    this.graph.subscribe(this)\n  }\n\n  moveTo(x: number): void {\n    let newX = x\n    if (x > this.graph.xMax) newX = this.graph.xMax\n    if (x < this.graph.xMin) newX = this.graph.xMin\n    this.x = newX\n    // y est en lecture seule\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idGraph: this.graph.id,\n      label: this.label,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n      x: this.x,\n    }\n  }\n\n  get x(): number {\n    return this._x\n  }\n\n  set x(x) {\n    if (\n      x > this.figure.xMax ||\n      x < this.figure.xMin ||\n      this.graph.f(x) > this.figure.yMax ||\n      this.graph.f(x) < this.figure.yMin\n    )\n      return\n    this._x = x\n    this._y = this.graph.f(x)\n    this.update()\n  }\n\n  get y(): number {\n    return this.graph.f(this.x)\n  }\n}\n\nexport default PointOnGraph\n","import type Figure from '../../Figure'\nimport { orthogonalProjectionCoord } from '../calculus/Coords'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Segment from '../lines/Segment'\nimport Point from './Point'\n\nclass PointByProjection extends Point {\n  line: Segment\n  origin: Point\n  constructor(\n    figure: Figure,\n    {\n      line,\n      origin,\n      ...options\n    }: {\n      line: Segment\n      origin: Point\n      shape?: '' | '|' | 'o' | 'x'\n      sizeInPixels?: number\n    } & OptionsElement2D,\n  ) {\n    const { x, y } = orthogonalProjectionCoord(origin, line)\n    super(figure, { isFree: false, x, y, ...options })\n    this.type = 'PointByProjection'\n    this.origin = origin\n    this.line = line\n    this.origin.subscribe(this)\n    this.line.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idLine: this.line.id,\n      idOrigin: this.origin.id,\n      label: this.label,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    }\n  }\n\n  update(): void {\n    const { x, y } = orthogonalProjectionCoord(this.origin, this.line)\n    this._x = x\n    this._y = y\n    super.update()\n  }\n\n  get description(): string {\n    const lineName = this.line.notation\n    const originName =\n      this.origin.label !== '' ? this.origin.label : this.origin.id\n    return `Projection orthogonale de $${originName}$ sur $${lineName}$`\n  }\n}\n\nexport default PointByProjection\n","import type Figure from '../../Figure'\n\nimport type { OptionsElement2D } from '../interfaces'\nimport Point from './Point'\n\nclass PointByProjectionOnAxisX extends Point {\n  origin: Point\n  constructor(\n    figure: Figure,\n    { origin, ...options }: { origin: Point } & OptionsElement2D,\n  ) {\n    super(figure, { isFree: false, x: origin.x, y: 0, ...options })\n    this.type = 'PointByProjectionOnAxisX'\n    this.origin = origin\n    this.origin.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idOrigin: this.origin.id,\n      label: this.label,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    }\n  }\n\n  update(): void {\n    this._x = this.origin.x\n    this._y = 0\n    super.update()\n  }\n}\n\nexport default PointByProjectionOnAxisX\n","import type Figure from '../../Figure'\n\nimport type { OptionsElement2D } from '../interfaces'\nimport Point from './Point'\n\nclass PointByProjectionOnAxisY extends Point {\n  origin: Point\n  constructor(\n    figure: Figure,\n    { origin, ...options }: { origin: Point } & OptionsElement2D,\n  ) {\n    super(figure, { isFree: false, x: 0, y: origin.x, ...options })\n    this.type = 'PointByProjectionOnAxisY'\n    this.origin = origin\n    this.origin.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idOrigin: this.origin.id,\n      label: this.label,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    }\n  }\n\n  update(): void {\n    this._x = 0\n    this._y = this.origin.y\n    super.update()\n  }\n}\n\nexport default PointByProjectionOnAxisY\n","import type Figure from '../../Figure'\nimport { intersectionCCCoord } from '../calculus/Coords'\nimport type { OptionsElement2D, OptionsIntersectionCC } from '../interfaces'\nimport type Circle from '../lines/Circle'\nimport Point from './Point'\n\n/**\n * Créé les points à l'intersection de deux cercles\n */\nexport class PointIntersectionCC extends Point {\n  /** Premier cercle */\n  circle1: Circle\n  /** Deuxième cercle */\n  circle2: Circle\n  /** Numéro de l'intersection */\n  n: 1 | 2\n  constructor(\n    figure: Figure,\n    {\n      circle1,\n      circle2,\n      isChild,\n      n,\n      ...options\n    }: OptionsIntersectionCC & OptionsElement2D,\n  ) {\n    const coords = intersectionCCCoord(circle1, circle2, n)\n    super(figure, {\n      isChild,\n      isFree: false,\n      x: coords.x,\n      y: coords.y,\n      ...options,\n    })\n    this.type = 'PointIntersectionCC'\n    this.circle1 = circle1\n    this.circle2 = circle2\n    this.n = n ?? 1\n    this.circle1.subscribe(this)\n    this.circle2.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idCircle1: this.circle1.id,\n      idCircle2: this.circle2.id,\n      label: this.label,\n      n: this.n,\n      shape: this.shape,\n    }\n  }\n\n  update(): void {\n    if (this.circle1 == null || this.circle2 == null) return\n    try {\n      const { x, y } = intersectionCCCoord(this.circle1, this.circle2, this.n)\n      this._x = x\n      this._y = y\n      super.update()\n    } catch (error) {\n      console.error('Erreur dans PointIntersectionLL.update()', error)\n    }\n    this.notify()\n  }\n\n  get description(): string {\n    if (this.label) {\n      return `Point ${this.label}, intersection du cercle $${this.circle1.label}$ et du cercle $${this.circle2.label}$`\n    }\n    return `Intersection du cercle $${this.circle1.label}$ et du cercle $${this.circle2.label}$`\n  }\n}\n\nexport default PointIntersectionCC\n","import type Figure from '../../Figure'\nimport { intersectionLCCoord } from '../calculus/Coords'\nimport type { OptionsElement2D, OptionsIntersectionLC } from '../interfaces'\nimport type Circle from '../lines/Circle'\nimport type Line from '../lines/Line'\nimport Point from './Point'\n\n/**\n * Créé les points à l'intersection de deux cercles\n */\nexport class PointIntersectionLC extends Point {\n  /** Deuxième cercle */\n  circle: Circle\n  /** Premier cercle */\n  line: Line\n  /** Numéro de l'intersection */\n  n: 1 | 2\n  constructor(\n    figure: Figure,\n    { circle, line, n, ...options }: OptionsIntersectionLC & OptionsElement2D,\n  ) {\n    const coords = intersectionLCCoord(line, circle, n)\n    super(figure, { isFree: false, x: coords.x, y: coords.y, ...options })\n    this.type = 'PointIntersectionLC'\n    this.line = line\n    this.circle = circle\n    this.n = n ?? 1\n    this.line.subscribe(this)\n    this.circle.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idCircle: this.circle.id,\n      idLine: this.line.id,\n      label: this.label,\n      n: this.n,\n      shape: this.shape,\n    }\n  }\n\n  update(): void {\n    if (this.line === undefined || this.circle === undefined) return\n    try {\n      const { x, y } = intersectionLCCoord(this.line, this.circle, this.n)\n      this._x = x\n      this._y = y\n      if (!this.isOnline(this.line)) {\n        this._x = Number.NaN\n        this._y = Number.NaN\n      }\n      super.update()\n    } catch (error) {\n      console.error('Erreur dans PointIntersectionLL.update()', error)\n    }\n    this.notify()\n  }\n\n  get description(): string {\n    const lineName = this.line.notation\n    const circleName = this.circle.id\n    return `Intersection de la droite $${lineName}$ et du cercle $${circleName}$`\n  }\n}\n\nexport default PointIntersectionLC\n","import type Figure from '../../Figure'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Circle from '../lines/Circle'\n\nimport Point from './Point'\n\nclass PointOnCircle extends Point {\n  angleWithHorizontal: number\n  circle: Circle\n  figure: Figure\n  constructor(\n    figure: Figure,\n    {\n      angleWithHorizontal,\n      circle,\n      label,\n      ...options\n    }: {\n      angleWithHorizontal?: number\n      circle: Circle\n      label?: string\n    } & OptionsElement2D,\n  ) {\n    if (angleWithHorizontal === undefined)\n      angleWithHorizontal = Math.random() * 2 * Math.PI\n    super(figure, {\n      label,\n      x: circle.center.x + circle.radius * Math.cos(angleWithHorizontal),\n      y: circle.center.y + circle.radius * Math.sin(angleWithHorizontal),\n      ...options,\n    })\n    this.figure = figure\n    this.circle = circle\n    this.angleWithHorizontal = angleWithHorizontal\n    this.isFree = true\n    this.type = 'PointOnCircle'\n    this.circle.subscribe(this)\n  }\n\n  moveTo(x: number, y: number): void {\n    const angleWithHorizontal = Math.atan2(\n      y - this.circle.center.y,\n      x - this.circle.center.x,\n    )\n    this.angleWithHorizontal = angleWithHorizontal\n    this.x =\n      this.circle.center.x + this.circle.radius * Math.cos(angleWithHorizontal)\n    this.y =\n      this.circle.center.y + this.circle.radius * Math.sin(angleWithHorizontal)\n    this.update()\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      angleWithHorizontal: this.angleWithHorizontal,\n      idCircle: this.circle.id,\n      label: this.label,\n    }\n  }\n\n  update(): void {\n    this._x =\n      this.circle.center.x +\n      this.circle.radius * Math.cos(this.angleWithHorizontal)\n    this._y =\n      this.circle.center.y +\n      this.circle.radius * Math.sin(this.angleWithHorizontal)\n    super.update()\n  }\n\n  get description(): string {\n    return `Point sur le cercle $${this.circle.label}$`\n  }\n}\n\nexport default PointOnCircle\n","import type Figure from '../../Figure'\nimport { homothetieCoord } from '../calculus/Coords'\nimport { distance as calculDistance } from '../calculus/utils'\nimport type { OptionsElement2D, OptionsPointBy } from '../interfaces'\nimport type Line from '../lines/Line'\nimport Point from './Point'\n\nclass PointOnLineAtDistance extends Point {\n  distance: number\n  line: Line\n  constructor(\n    figure: Figure,\n    {\n      distance,\n      line,\n      ...options\n    }: { distance: number; line: Line } & OptionsPointBy & OptionsElement2D,\n  ) {\n    const { x, y } = homothetieCoord(\n      line.point1,\n      line.point2,\n      distance / calculDistance(line.point1, line.point2),\n    )\n    super(figure, { x, y, ...options })\n    this.line = line\n    this.distance = distance\n    this.line.subscribe(this)\n  }\n\n  update(): void {\n    const { x, y } = homothetieCoord(\n      this.line.point1,\n      this.line.point2,\n      this.distance / calculDistance(this.line.point1, this.line.point2),\n    )\n    this._x = x\n    this._y = y\n    super.update()\n  }\n}\n\nexport default PointOnLineAtDistance\n","import type Figure from '../../Figure'\nimport type Polyline from '../lines/Polyline'\nimport Point from './Point'\n\n/**\n *\n * @param polyline Fonction pour interpoler la valeur de y xorrespondant à x sur une polyline dont les points sont ordonnés comme ceux d'une fonction\n * Ne fonctionne que pour des polylines du type d'une fonction spline par exemple.\n * @param x\n */\nfunction interpolateCoords(polyline: Polyline, x: number) {\n  const lesX: number[] = polyline.points.map((el: Point) => el.x)\n  const lesY: number[] = polyline.points.map((el: Point) => el.y)\n  let i = 0\n  while (i < lesX.length - 1 && x > lesX[i + 1]) {\n    i++\n  }\n  if (i === lesX.length - 1) {\n    // On est arrivé au dernier segment de la courbe et x n'est pas dans cet intervalle, il n'est pas possible de détérminer y\n    return Number.NaN\n  }\n  const x0 = lesX[i]\n  const x1 = lesX[i + 1]\n  const y0 = lesY[i]\n  const y1 = lesY[i + 1]\n  return y0 + ((y1 - y0) * (x - x0)) / (x1 - x0)\n}\nclass PointOnPolyline extends Point {\n  dx?: number\n  polyline: Polyline\n  size?: number\n  abscissa: boolean\n  ordinate: boolean\n  lesX: number[]\n  constructor(\n    figure: Figure,\n    {\n      polyline,\n      x,\n      dx = 0.05,\n      shape = '|',\n      abscissa = false,\n      ordinate = false,\n      ...options\n    }: {\n      polyline: Polyline\n      x?: number\n      abscissa?: boolean\n      ordinate?: boolean\n      dx?: number\n      shape?: 'x' | 'o' | '' | '|'\n      size?: number\n      label?: string\n      labelDx?: number\n      labelDy?: number\n      color?: string\n      thickness?: number\n      isChild?: boolean\n      isFree?: boolean\n      isVisible?: boolean\n      id?: string\n    },\n  ) {\n    const lesX: number[] = polyline.points.map((el: Point) => el.x)\n    const x0 = x ?? lesX[Math.floor(lesX.length / 2)]\n    super(figure, { x: x0, y: interpolateCoords(polyline, x0), ...options })\n    this.lesX = [...lesX]\n    // Mauvais type pour this.type, il devrait être 'PointOnSpline' et non 'PointOnGraph' Et PointOnSpline devrait être défini dans apiGeom.\n    // PointOnSpline devraiy d'ailleurs s'appeler PointOnPolyline\n    this.type = 'PointOnPolyline'\n    this.polyline = polyline\n    this.dx = dx\n    // @fixme c'est juste pour qu'eslint cesse de râler mais ces propriétés ne servent pas !\n    this.abscissa = abscissa\n    this.ordinate = ordinate\n  }\n\n  get x(): number {\n    return this._x\n  }\n\n  set x(x) {\n    if (this.dx !== undefined) {\n      this._x = Math.round(x / this.dx) * this.dx\n    } else {\n      this._x = x\n    }\n\n    this._y = interpolateCoords(this.polyline, this._x)\n    this.update()\n  }\n\n  get y(): number {\n    return interpolateCoords(this.polyline, this._x)\n  }\n\n  moveTo(x: number): void {\n    if (x > this.lesX[0] && x < this.lesX[this.lesX.length - 1]) {\n      this.x = x\n    }\n    // y est en lecture seule\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      x: this.x,\n      dx: this.dx,\n      idPolyline: this.polyline.id,\n    }\n  }\n}\n\nexport default PointOnPolyline\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D, OptionsIntersectionCC } from '../interfaces'\nimport type Circle from '../lines/Circle'\nimport type Point from './Point'\n\nclass PointsIntersectionCC extends Element2D {\n  /** Premier cercle */\n  circle1: Circle\n  /** Deuxième cercle */\n  circle2: Circle\n  /** Point d'intersection avec la plus grande ordonnée */\n  point1!: Point\n  /** Point d'intersection avec la plus petite ordonnée */\n  point2!: Point\n  shape: '' | '|' | 'o' | 'x'\n  sizeInPixels?: number\n  constructor(\n    figure: Figure,\n    {\n      circle1,\n      circle2,\n      shape,\n      sizeInPixels,\n      ...options\n    }: OptionsIntersectionCC & OptionsElement2D,\n  ) {\n    super(figure, options)\n    this.type = 'PointsIntersectionCC'\n    this.circle1 = circle1\n    this.circle2 = circle2\n    this.shape = shape ?? 'x'\n    this.sizeInPixels = sizeInPixels\n  }\n\n  draw(): void {\n    this.point1 = this.figure.create('PointIntersectionCC', {\n      circle1: this.circle1,\n      circle2: this.circle2,\n      id: `${this.id}_1`,\n      n: 1,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    })\n    this.point2 = this.figure.create('PointIntersectionCC', {\n      circle1: this.circle1,\n      circle2: this.circle2,\n      id: `${this.id}_2`,\n      n: 2,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    })\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idCircle1: this.circle1.id,\n      idCircle2: this.circle2.id,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    }\n  }\n}\n\nexport default PointsIntersectionCC\n","import type Figure from '../../Figure'\nimport Element2D from '../Element2D'\nimport type { OptionsElement2D } from '../interfaces'\nimport type Circle from '../lines/Circle'\nimport type Line from '../lines/Line'\nimport type Point from './Point'\n\nclass PointsIntersectionLC extends Element2D {\n  /** Deuxième cercle */\n  circle: Circle\n  /** Droite ou segment ou demi-droite */\n  line: Line\n  /** Point d'intersection avec la plus grande ordonnée */\n  point1: Point\n  /** Point d'intersection avec la plus petite ordonnée */\n  point2: Point\n  shape: '' | 'o' | 'x'\n  sizeInPixels?: number\n  constructor(\n    figure: Figure,\n    {\n      circle,\n      line,\n      shape = 'x',\n      sizeInPixels,\n      ...options\n    }: {\n      circle: Circle\n      line: Line\n      shape?: '' | 'o' | 'x'\n      sizeInPixels?: number\n    } & OptionsElement2D,\n  ) {\n    super(figure, options)\n    this.type = 'PointsIntersectionLC'\n    sizeInPixels = sizeInPixels ?? figure.options.pointSize\n    this.line = line\n    this.circle = circle\n    this.point1 = figure.create('PointIntersectionLC', {\n      circle,\n      line,\n      n: 1,\n      shape,\n      sizeInPixels,\n      ...options,\n    })\n    this.point2 = figure.create('PointIntersectionLC', {\n      circle,\n      line,\n      n: 2,\n      shape,\n      sizeInPixels,\n      ...options,\n    })\n    this.shape = shape\n    this.sizeInPixels = sizeInPixels\n  }\n\n  draw(): void {}\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idCircle: this.circle.id,\n      idLine: this.line.id,\n      shape: this.shape,\n      sizeInPixels: this.sizeInPixels,\n    }\n  }\n}\n\nexport default PointsIntersectionLC\n","import type Figure from '../../Figure'\nimport type { OptionsRestrictedText } from '../interfaces'\nimport type Point from '../points/Point'\nimport TextByPosition from './TextByPosition'\n\n/**\n * Créé un texte qui suivra la position d'un point\n */\nexport class TextByPoint extends TextByPosition {\n  /** Décalage vertical par rapport au point */\n  dxInPixels: number\n  /** Décalage vertical par rapport au point */\n  dyInPixels: number\n  /** Point sur lequel apparaitra le texte */\n  point: Point\n  constructor(\n    figure: Figure,\n    {\n      color = 'black',\n      dxInPixels = 0,\n      dyInPixels = 0,\n      id,\n      isChild,\n      point,\n      text,\n      ...options\n    }: OptionsRestrictedText,\n  ) {\n    super(figure, {\n      color,\n      dxInPixels,\n      dyInPixels,\n      id,\n      isChild,\n      text,\n      x: point.x,\n      y: point.y,\n      ...options,\n    })\n    this.type = 'TextByPoint'\n    this.dxInPixels = dxInPixels\n    this.dyInPixels = dyInPixels\n    this.point = point\n    this.point.subscribe(this)\n  }\n\n  /** Déplace le texte aux coordonnées données */\n  moveTo(x: number, y: number): void {\n    const [oldX, oldY] = [this.x, this.y]\n    this.dxInPixels =\n      Math.round(\n        this.figure.xToSx(x - this.point.x) / this.figure.options.moveTextGrid,\n      ) * this.figure.options.moveTextGrid\n    this.dyInPixels =\n      Math.round(\n        this.figure.yToSy(this.point.y - y) / this.figure.options.moveTextGrid,\n      ) * this.figure.options.moveTextGrid\n    this.point.labelDxInPixels = this.dxInPixels\n    this.point.labelDyInPixels = this.dyInPixels\n    this.x = oldX\n    this.y = oldY\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      point: this.point.id,\n      text: this.text,\n    }\n  }\n\n  update(): void {\n    if (this.point?.x !== undefined && this.point?.y !== undefined)\n      super.moveTo(this.point.x, this.point.y)\n    this.notify()\n  }\n}\n\nexport default TextByPoint\n","import type DynamicNumber from '../../dynamicNumbers/DynamicNumber'\nimport type Figure from '../../Figure'\n\nimport { round } from '../../lib/format'\nimport { displayDigits } from '../defaultValues'\nimport type { OptionsDynamicText } from '../interfaces'\nimport TextByPosition from './TextByPosition'\n\n/**\n * Créé un div contenant un texte qui est mis au dessus du svg\n * par défaut KaTeX s'occupe du rendu du div\n */\nclass TextDynamicByPosition extends TextByPosition {\n  private readonly dynamicNumber: DynamicNumber\n  maximumFractionDigits: number\n  minimumFractionDigits: number\n  textAfter: string\n  textBefore: string\n\n  constructor(\n    figure: Figure,\n    {\n      color = 'black',\n      dynamicNumber,\n      isChild = false,\n      maximumFractionDigits = displayDigits,\n      minimumFractionDigits = 0,\n      textAfter = '',\n      textBefore = '',\n      x,\n      y,\n    }: OptionsDynamicText,\n  ) {\n    const value =\n      textBefore +\n      Intl.NumberFormat('fr-FR', {\n        maximumFractionDigits,\n        minimumFractionDigits,\n      }).format(dynamicNumber.value) +\n      textAfter\n    super(figure, { color, isChild, text: value, x, y })\n    this.type = 'TextDynamicByPosition'\n    this.dynamicNumber = dynamicNumber\n    this.textBefore = textBefore\n    this.textAfter = textAfter\n    this.minimumFractionDigits = minimumFractionDigits\n    this.maximumFractionDigits = maximumFractionDigits\n    dynamicNumber.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idDynamicNumber: this.dynamicNumber.id,\n      maximumFractionDigits: this.maximumFractionDigits,\n      minimumFractionDigits: this.minimumFractionDigits,\n      textAfter: this.textAfter,\n      textBefore: this.textBefore,\n      x: round(this.x),\n      y: round(this.y),\n    }\n  }\n\n  update(): void {\n    this.text =\n      this.textBefore +\n      Intl.NumberFormat('fr-FR', {\n        maximumFractionDigits: this.maximumFractionDigits,\n        minimumFractionDigits: this.minimumFractionDigits,\n      }).format(this.dynamicNumber.value) +\n      this.textAfter\n  }\n}\n\nexport default TextDynamicByPosition\n","import type Figure from '../../Figure'\nimport { round } from '../../lib/format'\nimport { labelCoords } from '../calculus/Coords'\nimport Element2D from '../Element2D'\nimport type Segment from '../lines/Segment'\nimport type Point from '../points/Point'\nimport type TextByPosition from '../text/TextByPosition'\n\nclass Vector extends Element2D {\n  private _label?: string\n  private _labelColor: string\n  elementTextLabel?: TextByPosition\n  /** Extrémité de la représentation du vecteur */\n  end!: Point\n  labelDxInPixels?: number\n  labelDyInPixels?: number\n  /** Origine pour la représentation du vecteur */\n  readonly origin: Point\n  /** Représentation du vecteur */\n  representation?: Segment\n  x: number\n  y: number\n  constructor(\n    figure: Figure,\n    {\n      color,\n      id,\n      isChild,\n      isDashed,\n      isVisible = true,\n      label,\n      labelColor,\n      labelDxInPixels,\n      labelDyInPixels,\n      origin,\n      opacity,\n      thickness,\n      x,\n      y,\n      ...options\n    }: {\n      color?: string\n      isVisible?: boolean\n      label?: string\n      labelColor?: string\n      labelDxInPixels?: number\n      labelDyInPixels?: number\n      id?: string\n      isChild?: boolean\n      isDashed?: boolean\n      origin: Point\n      opacity?: number\n      thickness?: number\n      x: number\n      y: number\n    },\n  ) {\n    super(figure, {\n      color,\n      id,\n      isChild,\n      isDashed,\n      thickness,\n      isVisible,\n      ...options,\n    })\n    this.type = 'Vector'\n    this.x = x\n    this.y = y\n    this.origin = origin\n    this._labelColor = labelColor ?? this._color\n    this.label = label\n    this.labelDxInPixels = labelDxInPixels ?? 0\n    this.labelDyInPixels = labelDyInPixels ?? 0\n  }\n\n  draw(): void {\n    if (this.origin !== undefined) {\n      this.origin.subscribe(this)\n      this.end = this.figure.create('Point', {\n        isChild: true,\n        isFree: false,\n        isSelectable: true,\n        isVisible: this.isVisible,\n        shape: '',\n        x: this.origin.x + this.x,\n        y: this.origin.y + this.y,\n      })\n      this.representation = this.figure.create('Segment', {\n        color: this.color,\n        isChild: true,\n        isDashed: this.isDashed,\n        isSelectable: true,\n        isVisible: this.isVisible,\n        point1: this.origin,\n        point2: this.end,\n        shape: '->',\n        thickness: this.thickness,\n      })\n    }\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idOrigin: this.origin?.id,\n      x: round(this.x),\n      y: round(this.y),\n      label: this.label,\n      labelColor: this.labelColor,\n    }\n  }\n\n  update(): void {\n    this.notify()\n    if (this.origin !== undefined && this.end !== undefined) {\n      this.end.x = this.origin.x + this.x\n      this.end.y = this.origin.y + this.y\n    }\n    if (this.elementTextLabel !== undefined) {\n      const { x, y } = labelCoords(this.origin, this.end)\n      this.elementTextLabel.x = x\n      this.elementTextLabel.y = y\n    }\n  }\n\n  get color(): string {\n    return this._color\n  }\n\n  set color(color: string) {\n    this._color = color\n    if (this.representation !== undefined) {\n      this.representation.color = color\n    }\n  }\n\n  get isDashed(): boolean {\n    return this._isDashed\n  }\n\n  set isDashed(isDashed: boolean) {\n    this._isDashed = isDashed\n    if (this.representation !== undefined) {\n      this.representation.isDashed = isDashed\n    }\n  }\n\n  get isVisible(): boolean {\n    return this._isVisible\n  }\n\n  set isVisible(isVisible: boolean) {\n    this._isVisible = isVisible\n    if (this.representation !== undefined) {\n      this.representation.isVisible = isVisible\n    }\n    if (this.elementTextLabel !== undefined) {\n      this.elementTextLabel.isVisible = isVisible\n    }\n  }\n\n  get label(): string {\n    if (this._label === undefined) return ''\n    return this._label\n  }\n\n  set label(label: string | undefined) {\n    this._label = label\n    if (label !== undefined) {\n      if (this.elementTextLabel === undefined) {\n        const xEnd = this.origin.x + this.x\n        const yEnd = this.origin.y + this.y\n        const { x, y } = labelCoords(this.origin, { x: xEnd, y: yEnd })\n        this.elementTextLabel = this.figure.create('TextByPosition', {\n          color: this._labelColor ?? this._color,\n          dxInPixels: this.labelDxInPixels,\n          dyInPixels: this.labelDyInPixels,\n          id: `${this.id}_label`,\n          isChild: true,\n          isSelectable: true,\n          isVisible: this.isVisible,\n          x,\n          y,\n          text: `$${label}$`,\n        })\n      } else {\n        this.elementTextLabel.text = `$${label}$`\n        this.elementTextLabel.color = this._labelColor ?? 'currentColor'\n      }\n    }\n  }\n\n  get labelColor(): string {\n    return this._labelColor\n  }\n\n  set labelColor(color: string) {\n    this._labelColor = color\n    if (this.elementTextLabel !== undefined) {\n      this.elementTextLabel.color = color\n    }\n  }\n\n  get notation(): string {\n    if (this.label !== '') return this.label\n    return this.id\n  }\n\n  get opacity(): number {\n    return this._opacity\n  }\n\n  set opacity(opacity: number) {\n    this._opacity = opacity\n    if (this.representation !== undefined) {\n      this.representation.opacity = opacity\n    }\n    if (this.elementTextLabel !== undefined) {\n      this.elementTextLabel.opacity = opacity\n    }\n  }\n\n  get thickness(): number {\n    return this._thickness\n  }\n\n  set thickness(thickness: number) {\n    this._thickness = thickness\n    if (this.representation !== undefined) {\n      this.representation.thickness = thickness\n    }\n  }\n}\n\nexport default Vector\n","import type Figure from '../../Figure'\nimport { labelCoords } from '../calculus/Coords'\nimport type { OptionsElement2D } from '../interfaces'\nimport Segment from '../lines/Segment'\nimport type Point from '../points/Point'\nimport type TextByPosition from '../text/TextByPosition'\n\nclass VectorByPoints extends Segment {\n  _label?: string\n  elementTextLabel?: TextByPosition\n  _colorLabel?: string\n  labelDxInPixels?: number\n  labelDyInPixels?: number\n  constructor(\n    figure: Figure,\n    {\n      point1,\n      point2,\n      label,\n      ...options\n    }: {\n      isChild?: boolean\n      isFree?: boolean\n      isSelectable?: boolean\n      isVisible?: boolean\n      label?: string\n      labelDxInPixels?: number\n      labelDyInPixels?: number\n      point1: Point\n      point2: Point\n    } & OptionsElement2D,\n  ) {\n    super(figure, { point1, point2, ...options })\n    this.type = 'VectorByPoints'\n    this.shape = '->'\n    this.label = label\n    this.labelDxInPixels = options.labelDxInPixels ?? 0\n    this.labelDyInPixels = options.labelDyInPixels ?? 0\n  }\n\n  get label(): string {\n    if (this._label === undefined) return ''\n    return this._label\n  }\n\n  set label(label: string | undefined) {\n    this._label = label\n    if (label !== undefined) {\n      if (this.elementTextLabel === undefined) {\n        const { x, y } = labelCoords(this.point1, this.point2)\n        this.elementTextLabel = this.figure.create('TextByPosition', {\n          color: this._colorLabel ?? this.color,\n          dxInPixels: this.labelDxInPixels,\n          dyInPixels: this.labelDyInPixels,\n          id: `${this.id}_label`,\n          isChild: true,\n          isSelectable: true,\n          x,\n          y,\n          text: `$${label}$`,\n        })\n      } else {\n        this.elementTextLabel.text = `$${label}$`\n        this.elementTextLabel.color = this._colorLabel ?? 'currentColor'\n      }\n    }\n  }\n\n  get x() {\n    return this.point2.x - this.point1.x\n  }\n\n  get y() {\n    return this.point2.y - this.point1.y\n  }\n\n  update(): void {\n    super.update()\n    if (this.elementTextLabel !== undefined) {\n      const { x, y } = labelCoords(this.point1, this.point2)\n      this.elementTextLabel.x = x\n      this.elementTextLabel.y = y\n    }\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idPoint1: this.point1.id,\n      idPoint2: this.point2.id,\n      label: this.label,\n    }\n  }\n}\n\nexport default VectorByPoints\n","import type Figure from '../../Figure'\nimport type { OptionsVectorPerpendicular } from '../interfaces'\nimport type Line from '../lines/Line'\nimport type Point from '../points/Point'\nimport Vector from './Vector'\n\nclass VectorUnitPerpendicular extends Vector {\n  /** Droite perpendiculaire au vecteur */\n  line: Line\n  /** Origine de la représentation vecteur */\n  origin: Point\n  constructor(\n    figure: Figure,\n    { line, origin, ...options }: OptionsVectorPerpendicular,\n  ) {\n    const [x, y] = line.equation\n    super(figure, { origin, x, y, ...options })\n    this.type = 'VectorPerpendicular'\n    this.line = line\n    this.origin = origin\n    line.subscribe(this)\n    origin.subscribe(this)\n  }\n\n  toJSON(): object {\n    return {\n      ...this.jsonOptions(),\n      idLine: this.line.id,\n      idOrigin: this.origin.id,\n    }\n  }\n\n  update(): void {\n    this.notify()\n    const [x, y] = this.line.equation\n    this.x = x\n    this.y = y\n    if (this.end !== undefined) {\n      this.end.x = this.origin.x + this.x\n      this.end.y = this.origin.y + this.y\n    }\n  }\n}\n\nexport default VectorUnitPerpendicular\n","export function isLocalStorageAvailable() {\n  try {\n    window.localStorage.setItem('__test__', '__test__')\n    window.localStorage.removeItem('__test__')\n    return true\n  } catch {\n    return false\n  }\n}\n","import { defaultDistanceClick } from '../elements/defaultValues'\n\nimport Element2D from '../elements/Element2D'\nimport Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\nexport default function handleHover(\n  figure: Figure,\n  pointerX: number,\n  pointerY: number,\n): void {\n  const elements = [...figure.elements.values()].filter(\n    (e) => e instanceof Element2D,\n  ) as Element2D[]\n  figure.hoverPoints.clear()\n  for (const element of elements) {\n    element.isHover =\n      element.type !== 'pointer' &&\n      element.isVisible &&\n      element.isSelectable &&\n      figure.filter(element) &&\n      element.distancePointer(pointerX, pointerY) * figure.pixelsPerUnit <\n        defaultDistanceClick\n    if (element.isHover && element instanceof Point && element.isFree) {\n      figure.hoverPoints.add(element)\n    }\n    if (\n      figure.hoverPoints.size > 0 &&\n      // @ts-expect-error\n      typeof figure?.ui?.state?.value === 'object' &&\n      // @ts-expect-error\n      // biome-ignore lint/correctness/noUnsafeOptionalChaining: problème avec xstate\n      'POINT' in figure?.ui?.state?.value\n    ) {\n      figure.divFigure.style.cursor = 'move'\n    } else {\n      figure.divFigure.style.cursor = 'default'\n    }\n  }\n}\n","import renderMathInElement from 'katex/dist/contrib/auto-render.js'\nimport { distance } from '../elements/calculus/Coords'\nimport {\n  colors,\n  defaultDeltaXModal,\n  defaultDistanceClick,\n} from '../elements/defaultValues'\nimport Element2D from '../elements/Element2D'\nimport Circle from '../elements/lines/Circle'\nimport Segment from '../elements/lines/Segment'\nimport Point from '../elements/points/Point'\nimport TextByPosition from '../elements/text/TextByPosition'\nimport type Figure from '../Figure'\n\nexport default function handlePointerAction(\n  figure: Figure,\n  event: PointerEvent,\n): void {\n  const [pointerX, pointerY] = figure.getPointerCoord(event)\n  const [x, y] = [pointerX, pointerY]\n  if (x > figure.xMax || x < figure.xMin || y > figure.yMax || y < figure.yMin)\n    return\n  if (figure.currentState === 'POINT') {\n    const pointsOnFigure = [...figure.elements.values()].filter((e) =>\n      e.type.includes('Point'),\n    ) as Point[]\n    for (const point of pointsOnFigure) {\n      if (\n        distance({ x, y }, { x: point.x, y: point.y }) <\n        figure.options.distanceWithoutNewPoint\n      ) {\n        return\n      }\n    }\n  }\n  const possibleElements = []\n  figure.modal?.remove()\n  const elements = [...figure.elements.values()].filter(\n    (e) => e instanceof Element2D,\n  ) as Element2D[]\n  const elementsFiltered = elements\n    .filter(figure.filter)\n    .filter((e) => e.type !== 'pointer' && e.isVisible && e.isSelectable)\n  for (const element of elementsFiltered) {\n    if (\n      element.distancePointer(pointerX, pointerY) * figure.pixelsPerUnit <\n        defaultDistanceClick &&\n      element.isSelectable\n    ) {\n      possibleElements.push(element)\n    }\n  }\n  if (possibleElements.length === 1) {\n    sendToMachine(figure, { element: possibleElements[0], x, y })\n  } else if (\n    figure.currentState === 'POINT_INTERSECTION' &&\n    possibleElements.length === 2 &&\n    (possibleElements[0] instanceof Segment ||\n      possibleElements[0] instanceof Circle) &&\n    (possibleElements[1] instanceof Segment ||\n      possibleElements[1] instanceof Circle)\n  ) {\n    sendToMachine(figure, { element: undefined, possibleElements, x, y })\n  } else if (possibleElements.length > 1) {\n    const points = possibleElements.filter((e) => e instanceof Point)\n    if (points.length === 1) {\n      sendToMachine(figure, { element: points[0], x, y })\n      return\n    }\n    const elementText = new TextByPosition(figure, {\n      isChild: true,\n      isSelectable: false,\n      text: '',\n      x: pointerX + defaultDeltaXModal,\n      y: Math.min(pointerY, figure.yMax - 2),\n    })\n    elementText.draw()\n    figure.modal = elementText.div\n    figure.modal.style.pointerEvents = 'auto'\n    figure.modal.style.padding = '10px'\n    figure.modal.style.overflowY = 'auto'\n    figure.modal.style.backgroundColor = colors.titlelight\n    figure.modal.style.color = colors.title\n    figure.modal.style.boxShadow =\n      '0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)'\n    figure.modal.style.touchAction = 'none'\n    figure.modal.innerText = 'Quel élément souhaitez-vous sélectionner ?'\n    const divs = []\n    for (const element of possibleElements) {\n      const div = document.createElement('div')\n      div.innerText =\n        element.description !== ''\n          ? element.description\n          : `${element.type} ${element.id}`\n      div.addEventListener('click', () => {\n        elementText.remove()\n        sendToMachine(figure, { element, x, y })\n      })\n      div.addEventListener('mouseenter', () => {\n        div.style.backgroundColor = colors.lightest\n      })\n      div.addEventListener('mouseleave', () => {\n        div.style.backgroundColor = colors.titlelight\n      })\n      div.style.marginTop = '5px'\n      div.style.marginLeft = '10px'\n      div.style.userSelect = 'none'\n      div.style.cursor = 'default'\n      divs.push(div)\n      renderMathInElement(div, {\n        delimiters: [\n          { display: true, left: '\\\\[', right: '\\\\]' },\n          { display: false, left: '$', right: '$' },\n        ],\n        errorColor: '#CC0000',\n        preProcess: (chaine: string) =>\n          chaine.replaceAll(String.fromCharCode(160), '\\\\,'),\n        strict: 'warn',\n        throwOnError: true,\n        trust: false,\n      })\n    }\n    for (const div of divs) {\n      figure.modal.appendChild(div)\n    }\n    sendToMachine(figure, {\n      element: undefined,\n      possibleElements,\n      waitingWithModal: true,\n      x,\n      y,\n    })\n  } else {\n    sendToMachine(figure, { element: undefined, x, y })\n  }\n}\n\nfunction sendToMachine(\n  figure: Figure,\n  {\n    element,\n    possibleElements,\n    waitingWithModal,\n    x,\n    y,\n  }: {\n    element?: Element2D\n    possibleElements?: Element2D[]\n    waitingWithModal?: boolean\n    x: number\n    y: number\n  },\n): void {\n  if (figure.ui !== undefined) {\n    figure.ui.send('clickLocation', {\n      element,\n      possibleElements,\n      waitingWithModal: waitingWithModal ?? false,\n      x,\n      y,\n    })\n  }\n}\n","export default \"__VITE_ASSET__D8HsEGKV__\"","export default \"__VITE_ASSET__DbR9m$Gu__\"","export default \"__VITE_ASSET__SlOcvlal__\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='172'%20height='172'%20viewBox='0%200%20172%20172'%20id='svg4328'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='CercOA.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs4330'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='10.627907'%20inkscape:cx='86.094092'%20inkscape:cy='86.282276'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20units='px'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata4333'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-33.585071,-34.933635)'%3e%3cellipse%20cy='121.43363'%20cx='117.08508'%20style='color:%23000000;display:inline;overflow:visible;visibility:visible;fill:none;stroke:%230e232e;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate'%20id='path3386'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\CercOA.png'%20inkscape:export-xdpi='24.994829'%20inkscape:export-ydpi='24.994829'%20rx='67.943108'%20ry='67.00219'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round'%20d='m%20130.56652,103.50458%20-13.30307,12.46222%20-12.46223,-13.30306%20-5.644494,5.28773%2012.462224,13.30306%20-13.303059,12.46224%205.287729,5.64451%2013.30308,-12.46224%2012.46356,13.30449%205.6445,-5.28774%20-12.46357,-13.30448%2013.30307,-12.46224%20z'%20/%3e%3cpath%20id='path916'%20style='fill:%23d40000;stroke:%23800000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round'%20d='m%20198.31269,101.52865%20-13.30307,12.46222%20-12.46223,-13.30306%20-5.64449,5.28773%2012.46222,13.30306%20-13.30306,12.46224%205.28773,5.64451%2013.30308,-12.46224%2012.46356,13.30449%205.6445,-5.28774%20-12.46357,-13.30448%2013.30307,-12.46224%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"__VITE_ASSET__CkxR9FCv__\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M8%2016h8v2H8zm0-4h8v2H8zm6-10H6c-1.1%200-2%20.9-2%202v16c0%201.1.89%202%201.99%202H18c1.1%200%202-.9%202-2V8l-6-6zm4%2018H6V4h7v5h5v11z'/%3e%3c/svg%3e\"","export default \"__VITE_ASSET__TRrX_ORw__\"","export default \"__VITE_ASSET__DDfxJIYG__\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='172'%20height='172'%20viewBox='0%200%20172%20172'%20id='svg4328'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='CercOA.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs4330'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='10.627907'%20inkscape:cx='86.094092'%20inkscape:cy='86.282276'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20units='px'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata4333'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-33.585071,-34.933635)'%3e%3cellipse%20cy='121.43363'%20cx='117.08508'%20style='fill-opacity:0.5;color:%23000000;display:inline;overflow:visible;visibility:visible;fill:%23216D9A;stroke:%230e232e;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate'%20id='path3386'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\CercOA.png'%20inkscape:export-xdpi='24.994829'%20inkscape:export-ydpi='24.994829'%20rx='67.943108'%20ry='67.00219'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round'%20d='m%20130.56652,103.50458%20-13.30307,12.46222%20-12.46223,-13.30306%20-5.644494,5.28773%2012.462224,13.30306%20-13.303059,12.46224%205.287729,5.64451%2013.30308,-12.46224%2012.46356,13.30449%205.6445,-5.28774%20-12.46357,-13.30448%2013.30307,-12.46224%20z'%20/%3e%3cpath%20id='path916'%20style='fill:%23d40000;stroke:%23800000;stroke-width:1;stroke-linecap:round;stroke-linejoin:round'%20d='m%20198.31269,101.52865%20-13.30307,12.46222%20-12.46223,-13.30306%20-5.64449,5.28773%2012.46222,13.30306%20-13.30306,12.46224%205.28773,5.64451%2013.30308,-12.46224%2012.46356,13.30449%205.6445,-5.28774%20-12.46357,-13.30448%2013.30307,-12.46224%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg7795'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='DeplacerCroix.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs7797'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.1671513'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1620'%20inkscape:window-height='2786'%20inkscape:window-x='-11'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata7800'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-222.57143,-232.07648)'%3e%3cpath%20id='rect1225-3'%20style='fill:%234d4d4d;stroke:%23333333;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20273.42827,258.65045%20-4.28859,16.54236%20-16.54238,-4.28858%20-1.81965,7.01893%2016.54237,4.28859%20-4.28859,16.54237%207.01893,1.81966%204.2886,-16.54237%2016.54415,4.28905%201.81964,-7.01894%20-16.54414,-4.28905%204.2886,-16.54237%20z'%20/%3e%3cpath%20id='rect1575'%20style='fill:%230000ff;stroke:%23000080;stroke-width:2.8125;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none'%20d='m%20315.17268,274.25336%20-19.96665,22.76627%2015.01387,-0.10537%20v%2019.32699%20h%20-19.76077%20l%200.10773,-14.6843%20-23.27726,19.52834%2022.98522,20.47654%200.10289,-14.18562%20h%2019.84217%20v%2019.327%20l%20-15.01389,-0.10537%2019.96665,22.76629%2020.93614,-22.48065%20-14.504,-0.10067%20v%20-19.40659%20h%2019.84216%20l%200.10289,14.18562%2022.98523,-20.47655%20-23.27728,-19.52833%200.10773,14.6843%20h%20-19.7608%20V%20296.8347%20l%2014.50399,-0.10067%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20xmlns:dc='http://purl.org/dc/elements/1.1/'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20width='50'%20height='50'%20id='svg3076'%20version='1.1'%20inkscape:version='0.48.3.1%20r9886'%20sodipodi:docname='Translation24.svg'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\Translation24.png'%20inkscape:export-xdpi='43.200001'%20inkscape:export-ydpi='43.200001'%3e%3cdefs%20id='defs3078'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.6'%20inkscape:cx='11.559973'%20inkscape:cy='41.015213'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20inkscape:window-width='1301'%20inkscape:window-height='752'%20inkscape:window-x='1771'%20inkscape:window-y='114'%20inkscape:window-maximized='0'%20/%3e%3cmetadata%20id='metadata3081'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3cdc:title%3e%3c/dc:title%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(0,-1002.3622)'%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%2021.06238,1030.9464%20-9.997195,0%200,6.6937%20-9.4258535,-10.5188%209.1402445,-9.0845%200,6.2156%209.997072,0%20z'%20id='path3084-3'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%2021.177764,1023.6809%200,-9.9972%20-6.6937,0%2010.5188,-9.4259%209.0845,9.1403%20-6.2156,0%200,9.997%20z'%20id='path3084-3-2'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%2029.03845,1024.2542%209.9972,0%200,-6.6937%209.4259,10.5188%20-9.1403,9.0845%200,-6.2156%20-9.997,0%20z'%20id='path3084-3-21'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%2028.286522,1031.0435%200,9.9972%206.6937,0%20-10.5188,9.4259%20-9.0845,-9.1403%206.2156,0%200,-9.997%20z'%20id='path3084-3-6'%20inkscape:connector-curvature='0'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M419.1,337.45a3.94,3.94,0,0,0-6.1,0c-10.5,12.4-45,46.55-45,77.66,0,27,21.5,48.89,48,48.89h0c26.5,0,48-22,48-48.89C464,384,429.7,349.85,419.1,337.45Z'%20style='fill:none;stroke:%23000;stroke-miterlimit:10;stroke-width:32px'/%3e%3cpath%20d='M387,287.9,155.61,58.36a36,36,0,0,0-51,0l-5.15,5.15a36,36,0,0,0,0,51l52.89,52.89,57-57L56.33,263.2a28,28,0,0,0,.3,40l131.2,126a28.05,28.05,0,0,0,38.9-.1c37.8-36.6,118.3-114.5,126.7-122.9,5.8-5.8,18.2-7.1,28.7-7.1h.3A6.53,6.53,0,0,0,387,287.9Z'%20style='fill:none;stroke:%23000;stroke-miterlimit:10;stroke-width:32px'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20xmlns:dc='http://purl.org/dc/elements/1.1/'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20width='48px'%20height='48px'%20id='svg2985'%20version='1.1'%20inkscape:version='0.48.3.1%20r9886'%20sodipodi:docname='RepQuadrille.svg'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\RepQuadrille.png'%20inkscape:export-xdpi='45'%20inkscape:export-ydpi='45'%3e%3cdefs%20id='defs2987'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='7'%20inkscape:cx='8.6892489'%20inkscape:cy='24'%20inkscape:current-layer='layer1'%20showgrid='true'%20inkscape:grid-bbox='true'%20inkscape:document-units='px'%20inkscape:window-width='1920'%20inkscape:window-height='1018'%20inkscape:window-x='1272'%20inkscape:window-y='-8'%20inkscape:window-maximized='1'%20/%3e%3cmetadata%20id='metadata2990'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3cdc:title%3e%3c/dc:title%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20id='layer1'%20inkscape:label='Layer%201'%20inkscape:groupmode='layer'%3e%3cpath%20style='fill:%239eabb0;stroke:%23364e59;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='m%2019.714286,2.8571429%200,42.0000001'%20id='path3777'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%23364e59;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='m%2031.857143,44.428571%200,-41.5714281'%20id='path3779'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%23364e59;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='m%203.0000002,27.928571%2042.0000008,0'%20id='path3777-1'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%23364e59;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1'%20d='m%2044.571429,15.785714%20-41.5714288,0'%20id='path3779-7'%20inkscape:connector-curvature='0'%20/%3e%3cg%20id='g3769'%20transform='translate(-15.714286,-0.57142857)'%3e%3cpath%20inkscape:connector-curvature='0'%20id='path2993'%20d='m%2022.285714,45.142857%200,-41.9999999'%20style='fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20/%3e%3cpath%20inkscape:connector-curvature='0'%20id='path3765'%20d='m%2018.571429,9.5714287%203.714285,-6.0000001%204,6.1428571'%20style='fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20sodipodi:nodetypes='ccc'%20/%3e%3c/g%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='m%202.1428571,39.857142%2043.4285719,0'%20id='path2995'%20inkscape:connector-curvature='0'%20/%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none'%20d='M%2040.285715,36.285713%2045.285714,39.857142%2040,43.142857'%20id='path3767'%20inkscape:connector-curvature='0'%20sodipodi:nodetypes='ccc'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg7795'%20version='1.1'%20inkscape:version='1.2-alpha1%20(b6a15bb,%202022-02-23)'%20sodipodi:docname='Cacher.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs7797'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='3.6342001'%20inkscape:cx='49.529469'%20inkscape:cy='89.153045'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1440'%20inkscape:window-height='900'%20inkscape:window-x='0'%20inkscape:window-y='0'%20inkscape:window-maximized='0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20/%3e%3cmetadata%20id='metadata7800'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-222.57143,-232.07648)'%3e%3ccircle%20style='fill:%23333333;stroke:none;stroke-width:4.6875;stroke-linecap:round;stroke-linejoin:round'%20id='path1103'%20cx='309.63495'%20cy='310.36917'%20r='20.379314'%20/%3e%3cpath%20id='circle1221'%20style='fill:none;stroke:%23333333;stroke-width:4.68749;stroke-linecap:round;stroke-linejoin:round'%20d='m%20309.82851,284.44282%20a%2046.111419,35.599308%200%200%200%20-44.46899,26.22253%2046.111419,35.599308%200%200%200%2045.24353,29.11194%2046.111419,35.599308%200%200%200%2044.52576,-26.3562%2046.111419,35.599308%200%200%200%20-45.3003,-28.97827%20z'%20/%3e%3cpath%20style='fill:none;stroke:%23ffffff;stroke-width:4.6875;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20283.58039,349.32202%2056.23658,-75.97098'%20id='path1337'%20sodipodi:nodetypes='cc'%20/%3e%3cpath%20style='fill:none;stroke:%23333333;stroke-width:5.71875;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20277.90514,349.19304%2056.23658,-75.97098'%20id='path1728'%20sodipodi:nodetypes='cc'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3cpath%20d='M8%206.9834C7.44772%206.9834%207%207.43111%207%207.9834C7%208.53568%207.44772%208.9834%208%208.9834H16C16.5523%208.9834%2017%208.53568%2017%207.9834C17%207.43111%2016.5523%206.9834%2016%206.9834H8Z'%20fill='currentColor'%20/%3e%3cpath%20d='M7%2012C7%2011.4477%207.44772%2011%208%2011H16C16.5523%2011%2017%2011.4477%2017%2012C17%2012.5523%2016.5523%2013%2016%2013H8C7.44772%2013%207%2012.5523%207%2012Z'%20fill='currentColor'%20/%3e%3cpath%20d='M8%2015.017C7.44772%2015.017%207%2015.4647%207%2016.017C7%2016.5693%207.44772%2017.017%208%2017.017H16C16.5523%2017.017%2017%2016.5693%2017%2016.017C17%2015.4647%2016.5523%2015.017%2016%2015.017H8Z'%20fill='currentColor'%20/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M22%2012C22%2017.5228%2017.5228%2022%2012%2022C6.47715%2022%202%2017.5228%202%2012C2%206.47715%206.47715%202%2012%202C17.5228%202%2022%206.47715%2022%2012ZM20%2012C20%2016.4183%2016.4183%2020%2012%2020C7.58172%2020%204%2016.4183%204%2012C4%207.58172%207.58172%204%2012%204C16.4183%204%2020%207.58172%2020%2012Z'%20fill='currentColor'%20/%3e%3c/svg%3e\"","export default \"__VITE_ASSET__Mcv0p6c3__\"","export default \"__VITE_ASSET__G1b16E2G__\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg6059'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='DteAB.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs6061'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.139535'%20inkscape:cx='85.999998'%20inkscape:cy='85.999998'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata6064'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-239.71429,-146.3622)'%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20259.24625,169.42969%20132.93607,136.4716%200,0'%20id='path5210'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\DteAB.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20313.58289,199.16932%20-17.05023,1.15379%20-1.1538,-17.05024%20-7.23443,0.48955%201.15379,17.05024%20-17.05024,1.15379%200.48956,7.23443%2017.05024,-1.15379%201.15391,17.05207%207.23443,-0.48956%20-1.15392,-17.05206%2017.05025,-1.15379%20z'%20/%3e%3cpath%20id='rect1225-6'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20374.77181,262.24024%20-17.08874,0.12894%20-0.12895,-17.08875%20-7.25076,0.0547%200.12894,17.08874%20-17.08875,0.12895%200.0547,7.25077%2017.08875,-0.12894%200.12896,17.09058%207.25077,-0.0547%20-0.12896,-17.09057%2017.08875,-0.12894%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg8379'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='DtePar.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs8381'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata8384'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-188.28571,-232.07648)'%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%20209.93899,362.6242%20322.36896,252.31555'%20id='path5128-6'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\DtePar.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%20229.38443,387.37294%20341.8144,277.06429'%20id='path5128-6-1'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\DtePar.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20265.33198,286.22826%20-2.70865,16.87321%20-16.87321,-2.70864%20-1.14928,7.15931%2016.87321,2.70864%20-2.70864,16.87322%207.15931,1.14927%202.70865,-16.87321%2016.87502,2.70894%201.14927,-7.15932%20-16.87501,-2.70893%202.70864,-16.87321%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg10117'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='DtePer.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs10119'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata10122'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-373.99999,-383.50506)'%3e%3crect%20style='color:%23000000;display:inline;overflow:visible;visibility:visible;fill:none;stroke:%23000000;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;marker:none;enable-background:accumulate'%20id='rect5356-5'%20width='22.627417'%20height='22.627417'%20x='651.37585'%20y='-49.423424'%20transform='matrix(0.67181757,0.74071665,-0.74071665,0.67181757,0,0)'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\DtePer.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%20396.71395,402.68345%20507.02258,515.11342'%20id='path5128-6-0'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\DtePer.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%20415.09871,538.8015%20527.52869,428.49286'%20id='path5128-6-1-6'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\DtePer.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20420.04977,407.25998%20-0.69256,17.07519%20-17.0752,-0.69256%20-0.29386,7.24501%2017.0752,0.69257%20-0.69256,17.07519%207.24501,0.29386%200.69257,-17.0752%2017.07703,0.69264%200.29385,-7.24502%20-17.07702,-0.69263%200.69256,-17.07521%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg9584'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='MarqueAngNor.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs9586'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata9589'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-85.428573,-169.21935)'%3e%3cpath%20sodipodi:type='arc'%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0'%20id='path6264'%20sodipodi:cx='109.4986'%20sodipodi:cy='316.49066'%20sodipodi:rx='68'%20sodipodi:ry='68'%20d='M%20138.13417,254.81405%20A%2068,68%200%200%201%20174.048,295.10436'%20sodipodi:start='5.1470592'%20sodipodi:end='5.9632507'%20sodipodi:open='true'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\MarqueAngNor.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20sodipodi:arc-type='arc'%20/%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20246.4986,270.49066%20-138,48%2061,-134.00001'%20id='path6262'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\MarqueAngNor.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%2093.803141,303.52038%2010.528829,13.46052%20-13.460534,10.52884%204.467379,5.7113%2013.460535,-10.52882%2010.52883,13.46052%205.7113,-4.46738%20-10.52882,-13.46053%2013.46198,-10.52996%20-4.4674,-5.71131%20-13.46196,10.52996%20-10.528836,-13.46054%20z'%20/%3e%3cpath%20id='rect1225-3'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20228.00548,256.64656%20-4.24057,16.55473%20-16.55475,-4.24058%20-1.79927,7.02419%2016.55473,4.24058%20-4.24057,16.55474%207.02418,1.79928%204.24058,-16.55474%2016.55652,4.24103%201.79928,-7.02419%20-16.55651,-4.24102%204.24058,-16.55476%20z'%20/%3e%3cpath%20id='rect1225-4'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20154.71904,190.33971%20-0.69256,17.07519%20-17.0752,-0.69256%20-0.29385,7.24501%2017.07519,0.69257%20-0.69256,17.07519%207.24501,0.29386%200.69257,-17.0752%2017.07703,0.69264%200.29385,-7.24502%20-17.07702,-0.69263%200.69256,-17.07521%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg11955'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='MarqueSegment.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs11957'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata11960'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-202.57143,-183.50506)'%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20223.57144,228.50504%20128,89'%20id='path10603'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\MarqueSegment.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20289.57144,252.50504%20-17,34'%20id='path10630'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\MarqueSegment.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20302.07144,262.50504%20-17,34'%20id='path10630-7'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\MarqueSegment.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20222.84001,208.38909%20-0.69256,17.07519%20-17.0752,-0.69256%20-0.29386,7.24501%2017.0752,0.69257%20-0.69256,17.07519%207.24501,0.29386%200.69257,-17.0752%2017.07703,0.69264%200.29385,-7.24502%20-17.07702,-0.69263%200.69256,-17.07521%20z'%20/%3e%3cpath%20id='rect1225-7'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20347.88816,297.11776%20-0.69256,17.07519%20-17.0752,-0.69256%20-0.29386,7.24501%2017.0752,0.69257%20-0.69256,17.07519%207.24501,0.29386%200.69257,-17.0752%2017.07703,0.69264%200.29385,-7.24502%20-17.07702,-0.69263%200.69256,-17.07521%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"__VITE_ASSET__A7PzNn3a__\"","export default \"__VITE_ASSET__nqn$F7dW__\"","export default \"__VITE_ASSET__CufPzIOP__\"","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iNDguNTQyMjIxbW0iCiAgIGhlaWdodD0iNDguNTQyMjIxbW0iCiAgIHZpZXdCb3g9IjAgMCAxNzIgMTcyIgogICBpZD0ic3ZnNzc5NSIKICAgdmVyc2lvbj0iMS4xIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIxLjItYWxwaGExIChiNmExNWJiLCAyMDIyLTAyLTIzKSIKICAgc29kaXBvZGk6ZG9jbmFtZT0ibW92ZUxhYmVsLnN2ZyIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczc3OTciIC8+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjMuNTE2NjMwNiIKICAgICBpbmtzY2FwZTpjeD0iMzkuNTI2NDcyIgogICAgIGlua3NjYXBlOmN5PSI5Ni4zOTkwOTMiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImxheWVyMSIKICAgICBzaG93Z3JpZD0iZmFsc2UiCiAgICAgZml0LW1hcmdpbi10b3A9IjAiCiAgICAgZml0LW1hcmdpbi1sZWZ0PSIwIgogICAgIGZpdC1tYXJnaW4tcmlnaHQ9IjAiCiAgICAgZml0LW1hcmdpbi1ib3R0b209IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxNDQwIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjkwMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIwIgogICAgIGlua3NjYXBlOnBhZ2VjaGVja2VyYm9hcmQ9IjAiCiAgICAgaW5rc2NhcGU6ZGVza2NvbG9yPSIjZDFkMWQxIj4KICAgIDxpbmtzY2FwZTpncmlkCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBpZD0iZ3JpZDY4NjgiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNzgwMCI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iQ2FscXVlIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIgogICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMjIuNTcxNDMsLTIzMi4wNzY0OCkiPgogICAgPHRleHQKICAgICAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgICAgICBzdHlsZT0iZm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2xpbmUtaGVpZ2h0OjAlO2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7bGV0dGVyLXNwYWNpbmc6MHB4O3dvcmQtc3BhY2luZzowcHg7ZmlsbDojNGQ0ZDRkO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lIgogICAgICAgeD0iMjU5LjM1NzUxIgogICAgICAgeT0iMzEzLjg1MDgiCiAgICAgICBpZD0idGV4dDM2NzMiCiAgICAgICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9IkM6XFVzZXJzXFNlYlxEb3dubG9hZHNcbWF0aHNcTWF0aGdyYXBoMzJcSWNvbmVzXHBuZ1w0OFxOb21tZXIucG5nIgogICAgICAgaW5rc2NhcGU6ZXhwb3J0LXhkcGk9IjI1LjExNjI4IgogICAgICAgaW5rc2NhcGU6ZXhwb3J0LXlkcGk9IjI1LjExNjI4Ij48dHNwYW4KICAgICAgICAgc29kaXBvZGk6cm9sZT0ibGluZSIKICAgICAgICAgaWQ9InRzcGFuMzY3NSIKICAgICAgICAgeD0iMjU5LjM1NzUxIgogICAgICAgICB5PSIzMTMuODUwOCIKICAgICAgICAgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjk3Ljg5MnB4O2xpbmUtaGVpZ2h0OjEuMjU7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZjstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOidTYW5zIEJvbGQnO2ZpbGw6IzRkNGQ0ZDtmaWxsLW9wYWNpdHk6MSI+QTwvdHNwYW4+PC90ZXh0PgogICAgPHBhdGgKICAgICAgIGlkPSJyZWN0MTIyNSIKICAgICAgIHN0eWxlPSJmaWxsOiM0ZDRkNGQ7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MDAwMDA7c3Ryb2tlLXdpZHRoOjAuOTM3NTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQiCiAgICAgICBkPSJtIDM3MS45NDQ3MiwzMzIuMTYxMSAtMTIuMDgzOTEsMTIuMDgzOTEgLTEyLjA4MzkyLC0xMi4wODM5MSAtNS4xMjcyMSw1LjEyNzIxIDEyLjA4MzkxLDEyLjA4MzkxIC0xMi4wODM5MSwxMi4wODM5MiA1LjEyNzIxLDUuMTI3MjEgMTIuMDgzOTIsLTEyLjA4MzkxIDEyLjA4NTIxLDEyLjA4NTIxIDUuMTI3MjEsLTUuMTI3MjIgLTEyLjA4NTIxLC0xMi4wODUyIDEyLjA4MzkyLC0xMi4wODM5MiB6IiAvPgogICAgPHBhdGgKICAgICAgIGlkPSJyZWN0MTU3NSIKICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwZmY7c3Ryb2tlOiMwMDAwODA7c3Ryb2tlLXdpZHRoOjIuODEyNTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmUiCiAgICAgICBkPSJtIDI5My45MTY5NiwzMDMuMDcxNzMgLTE5Ljk2NjY1LDIyLjc2NjI3IDE1LjAxMzg3LC0wLjEwNTM3IHYgMTkuMzI2OTkgaCAtMTkuNzYwNzcgbCAwLjEwNzczLC0xNC42ODQzIC0yMy4yNzcyNiwxOS41MjgzNCAyMi45ODUyMiwyMC40NzY1NCAwLjEwMjg5LC0xNC4xODU2MiBoIDE5Ljg0MjE3IHYgMTkuMzI3IGwgLTE1LjAxMzg5LC0wLjEwNTM3IDE5Ljk2NjY1LDIyLjc2NjI5IDIwLjkzNjE0LC0yMi40ODA2NSAtMTQuNTA0LC0wLjEwMDY3IHYgLTE5LjQwNjU5IGggMTkuODQyMTYgbCAwLjEwMjg5LDE0LjE4NTYyIDIyLjk4NTIzLC0yMC40NzY1NSAtMjMuMjc3MjgsLTE5LjUyODMzIDAuMTA3NzMsMTQuNjg0MyBoIC0xOS43NjA4IHYgLTE5LjQwNjU2IGwgMTQuNTAzOTksLTAuMTAwNjcgeiIgLz4KICA8L2c+Cjwvc3ZnPgo=\"","export default \"__VITE_ASSET__DgE8bv$5__\"","export default \"data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%20fill='currentColor'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.956%206h.05a2.99%202.99%200%200%201%202.117.879%203.003%203.003%200%200%201%200%204.242%202.99%202.99%200%200%201-2.117.879h-1.995v-1h1.995a2.002%202.002%200%200%200%200-4h-.914l-.123-.857a2.49%202.49%200%200%200-2.126-2.122A2.478%202.478%200%200%200%206.23%205.5l-.333.762-.809-.189A2.49%202.49%200%200%200%204.523%206c-.662%200-1.297.263-1.764.732A2.503%202.503%200%200%200%204.523%2011h2.494v1H4.523a3.486%203.486%200%200%201-2.628-1.16%203.502%203.502%200%200%201-.4-4.137A3.497%203.497%200%200%201%203.853%205.06c.486-.09.987-.077%201.468.041a3.486%203.486%200%200%201%203.657-2.06A3.479%203.479%200%200%201%2011.956%206zm-1.663%203.853L8.979%208.54v5.436h-.994v-5.4L6.707%209.854%206%209.146%208.146%207h.708L11%209.146l-.707.707z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M10%204H5v16h5V4zm9%200h-5v16h5V4z'%20fill='currentColor'/%3e%3c/svg%3e\"","export default \"__VITE_ASSET__WprUuh5n__\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M133,440a35.37,35.37,0,0,1-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37,7.46-27.53,19.46-34.33a35.13,35.13,0,0,1,35.77.45L399.12,225.48a36,36,0,0,1,0,61L151.23,434.88A35.5,35.5,0,0,1,133,440Z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M112,64a16,16,0,0,1,16,16V216.43L360.77,77.11a35.13,35.13,0,0,1,35.77-.44c12,6.8,19.46,20,19.46,34.33V401c0,14.37-7.46,27.53-19.46,34.33a35.14,35.14,0,0,1-35.77-.45L128,295.57V432a16,16,0,0,1-32,0V80A16,16,0,0,1,112,64Z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%20512%20512'%3e%3cpath%20d='M400,64a16,16,0,0,0-16,16V216.43L151.23,77.11a35.13,35.13,0,0,0-35.77-.44C103.46,83.47,96,96.63,96,111V401c0,14.37,7.46,27.53,19.46,34.33a35.14,35.14,0,0,0,35.77-.45L384,295.57V432a16,16,0,0,0,32,0V80A16,16,0,0,0,400,64Z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg9132'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='PointLibre.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs9134'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata9137'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-396.85714,-289.21935)'%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20494.9404,357.8194%20-12.08391,12.08391%20-12.08392,-12.08391%20-5.12721,5.12721%2012.08391,12.08391%20-12.08391,12.08392%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg6777'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='Int.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs6779'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata6782'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-53.999999,-106.3622)'%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%2093.999977,241.36218%20c%2032.000003,-89%20108.000003,-96%20108.000003,-96'%20id='path6486'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\Int.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%23005c94;stroke-width:8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%2078.999977,140.36218%20c%2086.000003,17%20126.000003,101%20126.000003,101'%20id='path6488'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\Int.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20143.4937,149.03765%20-2.57947,16.89344%20-16.89344,-2.57946%20-1.09447,7.16789%2016.89344,2.57947%20-2.57946,16.89344%207.16789,1.09447%202.57948,-16.89344%2016.89525,2.57974%201.09446,-7.1679%20-16.89525,-2.57974%202.57947,-16.89344%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg10307'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='PointLie.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs10309'%3e%3cmarker%20inkscape:stockid='TriangleOutM'%20orient='auto'%20refY='0'%20refX='0'%20id='TriangleOutM-49'%20style='overflow:visible'%3e%3cpath%20inkscape:connector-curvature='0'%20id='path4275-6'%20d='m%205.77,0%20-8.65,5%200,-10%208.65,5%20z'%20style='fill-rule:evenodd;stroke:%23000000;stroke-width:1pt;marker-start:none'%20transform='scale(0.4,0.4)'%20/%3e%3c/marker%3e%3c/defs%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.139535'%20inkscape:cx='85.999998'%20inkscape:cy='85.999998'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata10312'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-76.857139,-83.505057)'%3e%3cpath%20style='fill:none;stroke:%230084c8;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%2097.85712,214.50507%20138,-73'%20id='path4062'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\PointLie.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cg%20id='path4124'%3e%3cpath%20style='color:%23000000;fill:%23000000;-inkscape-stroke:none'%20d='m%20113.33398,103.50586%20v%206%20c%2020.12366,0%2029.8666,9.66997%2035.22852,19.55273%205.36192,9.88276%205.82031,19.82227%205.82031,19.82227%20l%205.99414,-0.25586%20c%200,0%20-0.44223,-11.18683%20-6.54101,-22.42773%20-6.09879,-11.2409%20-18.3783,-22.69141%20-40.50196,-22.69141%20z'%20id='path846'%20/%3e%3cg%20id='g836'%3e%3cg%20id='path838'%3e%3cpath%20style='color:%23000000;fill:%23000000;fill-rule:evenodd;stroke-width:2.4pt;-inkscape-stroke:none'%20d='m%20157.96842,162.58791%20-12.87175,-20.23105%2023.9783,-1.02036%20z'%20id='path842'%20/%3e%3cpath%20style='color:%23000000;fill:%23000000;fill-rule:evenodd;-inkscape-stroke:none'%20d='m%20171.77734,139.61914%20-29.51953,1.25781%2015.84571,24.9043%201.2832,-2.45313%20z%20m%20-5.40625,3.43359%20-8.53711,16.3418%20-9.89843,-15.55664%20z'%20id='path844'%20/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20165.4772,160.34679%20-5.65672,16.12585%20-16.12586,-5.65672%20-2.40016,6.84221%2016.12586,5.65673%20-5.65672,16.12586%206.84221,2.40015%205.65673,-16.12586%2016.12759,5.65734%202.40015,-6.84222%20-16.12759,-5.65733%205.65673,-16.12587%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"__VITE_ASSET__B5XCLbhp__\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg5485'%20version='1.1'%20inkscape:version='1.2-alpha1%20(b6a15bb,%202022-02-23)'%20sodipodi:docname='ray.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs5487'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='1.843718'%20inkscape:cx='126.91746'%20inkscape:cy='180.61331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1440'%20inkscape:window-height='900'%20inkscape:window-x='0'%20inkscape:window-y='0'%20inkscape:window-maximized='0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20/%3e%3cmetadata%20id='metadata5490'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(23.142857,-109.21934)'%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%2010.531241,246.13103%20122.96121,135.82237'%20id='path5128'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\DemiDt.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%207.0994717,225.37249%20-0.6925638,17.07519%20-17.0751979,-0.69256%20-0.293855,7.24501%2017.0751903,0.69257%20-0.692557,17.07519%207.2450127,0.29386%200.692571,-17.0752%2017.077028,0.69264%200.293848,-7.24502%20-17.07702,-0.69263%200.692564,-17.07521%20z'%20/%3e%3cpath%20id='path1390'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%2082.099475,150.37249%20-0.692563,17.07519%20-17.075199,-0.69256%20-0.293855,7.24501%2017.075191,0.69257%20-0.692557,17.07519%207.245013,0.29386%200.692571,-17.0752%2017.077024,0.69264%200.29385,-7.24502%20-17.077018,-0.69263%200.692564,-17.07521%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20viewBox='0%200%20512%20512'%20version='1.1'%20id='svg11'%20sodipodi:docname='redo.svg'%20inkscape:version='1.2-alpha1%20(b6a15bb,%202022-02-23)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs15'%20/%3e%3csodipodi:namedview%20id='namedview13'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:pageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20showgrid='false'%20inkscape:zoom='0.4609375'%20inkscape:cx='-156.20339'%20inkscape:cy='256'%20inkscape:window-width='1440'%20inkscape:window-height='900'%20inkscape:window-x='0'%20inkscape:window-y='0'%20inkscape:window-maximized='0'%20inkscape:current-layer='svg11'%20/%3e%3cpath%20d='m%20289.42871,234.78304%20h%20168.45736%20c%205.5336,0%2010.06934,-4.12064%2010.06934,-9.2057%20V%2072.324346%20c%200,-5.08505%20-4.53574,-9.2057%20-10.06934,-9.2057%20h%20-40.36809%20c%20-5.53359,0%20-10.06933,4.12065%20-10.06933,9.2057%20V%20132.11756%20C%20368.98558,93.190596%20313.10527,68.817416%20250.96563,69.255776%20135.84856,70.044836%2043.773036,154.64961%2044.045186,259.50693%20c%200.18143,104.5943%2093.436244,189.37442%20208.462594,189.37442%2053.88459,0%20102.9613,-18.58675%20139.97293,-49.18475%204.2636,-3.50693%204.44503,-9.64406%200.36286,-13.32634%20l%20-28.57516,-26.03899%20c%20-3.71931,-3.41926%20-9.7972,-3.5946%20-13.78865,-0.43836%20-26.03514,21.12927%20-60.41605,33.84191%20-97.97198,33.84191%20-81.73402,0%20-147.95582,-60.23159%20-147.95582,-134.75393%200,-74.43467%2066.13108,-134.75393%20147.95582,-134.75393%2049.16742,0%2092.71052,21.83066%20119.5621,55.32188%20h%20-82.64117%20c%20-5.53361,0%20-10.06935,4.12065%20-10.06935,9.2057%20v%2036.73513%20c%200,5.08505%204.53574,9.2057%2010.06935,9.2057%20z'%20id='path9'%20style='stroke-width:0.891811'%20/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg6604'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='SymCentrale.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs6606'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata6609'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-242.57143,-206.3622)'%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20262.79014,214.45852%200,44.10483%2073.98869,0%20z'%20id='path3045-4-7'%20inkscape:connector-curvature='0'%20inkscape:transform-center-x='28.537028'%20inkscape:transform-center-y='-56.288402'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\SymCentrale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%230e232e;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20394.33944,369.23811%20-0.27728,-44.10402%20-73.98735,0.42829%20z'%20id='path3045-4-7-1'%20inkscape:connector-curvature='0'%20inkscape:transform-center-x='-28.885614'%20inkscape:transform-center-y='55.147417'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\SymCentrale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.937498;stroke-linecap:round;stroke-linejoin:round'%20d='m%20336.51961,280.10863%20-8.2544,8.61959%20-8.61959,-8.2544%20-3.50236,3.6573%208.6196,8.2544%20-8.25439,8.61959%203.65729,3.50234%208.25441,-8.61958%208.62052,8.25528%203.50235,-3.6573%20-8.62053,-8.25528%208.25441,-8.6196%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20xmlns:dc='http://purl.org/dc/elements/1.1/'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg6028'%20version='1.1'%20inkscape:version='0.91%20r13725'%20sodipodi:docname='SymAxiale.svg'%3e%3cdefs%20id='defs6030'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.139535'%20inkscape:cx='85.999998'%20inkscape:cy='85.999998'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='1920'%20inkscape:window-height='1017'%20inkscape:window-x='1272'%20inkscape:window-y='-8'%20inkscape:window-maximized='1'%20/%3e%3cmetadata%20id='metadata6033'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3cdc:title%3e%3c/dc:title%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-93.999999,-123.50506)'%3e%3crect%20style='color:%23000000;display:inline;overflow:visible;visibility:visible;opacity:0.1;fill:none;stroke:%23000000;stroke-width:0.81904763;stroke-miterlimit:4;stroke-dasharray:none;marker:none;enable-background:accumulate'%20id='rect5045-5-5-7'%20width='171.18095'%20height='171.18095'%20x='94.409523'%20y='123.91458'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\SymAxiale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:%2319aeff;stroke:%23005c94;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20130.46906,156.13811%2013.33444,38.77103%2062.4119,-21.4652%20z'%20id='path3045-8'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\SymAxiale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:%239eabb0;stroke:%230e232e;stroke-width:6;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20170.47238,272.4512%20-13.33444,-38.77103%2062.4119,-21.4652%20z'%20id='path3045-8-4'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\SymAxiale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:6;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:24,%2012,%206,%2012;stroke-dashoffset:0;stroke-opacity:1'%20d='M%20117.84631,225.5151%20251.65365,179.49502'%20id='path3961'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\24\\\\SymAxiale.png'%20inkscape:export-xdpi='12.55814'%20inkscape:export-ydpi='12.55814'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20width='600'%20height='600'%20style='border-radius:300px'%20version='1.1'%20id='svg24'%20sodipodi:docname='corbeille.svg'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs28'%20/%3e%3csodipodi:namedview%20id='namedview26'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20showgrid='false'%20inkscape:zoom='1.455'%20inkscape:cx='299.65636'%20inkscape:cy='299.65636'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:current-layer='svg24'%20/%3e%3c!--%20Created%20with%20SVG-edit%20-%20http://svg-edit.googlecode.com/%20--%3e%3cline%20stroke-linecap='round'%20x1='180'%20y1='159.25'%20x2='420'%20y2='159.25'%20style='stroke:%23333333;stroke-width:30;fill:%23e2e3db'%20id='line7'%20/%3e%3crect%20x='250'%20y='129.25'%20rx='20'%20ry='20'%20width='100'%20height='30'%20style='stroke:%23333333;stroke-width:10;fill:%23e2e3db'%20id='rect9'%20/%3e%3cline%20stroke-linecap='round'%20x1='189'%20y1='198.75'%20x2='200'%20y2='466.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20id='line11'%20/%3e%3cline%20id='bottom'%20stroke-linecap='round'%20x1='411'%20y1='198.75'%20x2='400'%20y2='466.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20/%3e%3cline%20stroke-linecap='square'%20x1='189'%20y1='198.75'%20x2='411'%20y2='198.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20id='line14'%20/%3e%3cline%20stroke-linecap='round'%20x1='203'%20y1='470.75'%20x2='397'%20y2='470.75'%20style='stroke:%23333333;stroke-width:30;fill:%23e2e3db'%20id='line16'%20/%3e%3cline%20stroke-linecap='round'%20x1='260'%20y1='198.75'%20x2='265'%20y2='470.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20id='line18'%20/%3e%3cline%20stroke-linecap='round'%20x1='340'%20y1='198.75'%20x2='335'%20y2='470.75'%20style='stroke:%23333333;stroke-width:25;fill:%23e2e3db'%20id='line20'%20/%3e%3c/svg%3e%3c!----%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20version='1.1'%20id='mdi-restart'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12,4C14.1,4%2016.1,4.8%2017.6,6.3C20.7,9.4%2020.7,14.5%2017.6,17.6C15.8,19.5%2013.3,20.2%2010.9,19.9L11.4,17.9C13.1,18.1%2014.9,17.5%2016.2,16.2C18.5,13.9%2018.5,10.1%2016.2,7.7C15.1,6.6%2013.5,6%2012,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15%203.3,11%205.1,7.9L6.6,9.4C5.5,11.6%205.9,14.4%207.8,16.2C8.3,16.7%208.9,17.1%209.6,17.4L9,19.4C8,19%207.1,18.4%206.3,17.6Z'%20/%3e%3c/svg%3e\"","export default \"__VITE_ASSET__7uo6GkGD__\"","export default \"data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%20fill='currentColor'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.957%206h.05a2.99%202.99%200%200%201%202.116.879%203.003%203.003%200%200%201%200%204.242%202.99%202.99%200%200%201-2.117.879v-1a2.002%202.002%200%200%200%200-4h-.914l-.123-.857a2.49%202.49%200%200%200-2.126-2.122A2.478%202.478%200%200%200%206.231%205.5l-.333.762-.809-.189A2.49%202.49%200%200%200%204.523%206c-.662%200-1.297.263-1.764.732A2.503%202.503%200%200%200%204.523%2011h.498v1h-.498a3.486%203.486%200%200%201-2.628-1.16%203.502%203.502%200%200%201%201.958-5.78%203.462%203.462%200%200%201%201.468.04%203.486%203.486%200%200%201%203.657-2.06A3.479%203.479%200%200%201%2011.957%206zm-5.25%205.121l1.314%201.314V7h.994v5.4l1.278-1.279.707.707-2.146%202.147h-.708L6%2011.829l.707-.708z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg11267'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='Segment.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs11269'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='9.963663'%20inkscape:cx='91.733331'%20inkscape:cy='91.733331'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata11272'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(17.428573,-43.505061)'%3e%3cpath%20style='fill:none;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='M%209.4170928,107.94873%20C%20133.86789,156.73909%20133.86789,156.73909%20133.86789,156.73909'%20id='path5172'%20inkscape:connector-curvature='0'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\Segment.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='M%2019.68314,89.52305%207.59923,101.60696%20-4.48469,89.52305%20-9.6119,94.65026%202.47201,106.73417%20-9.6119,118.81809%20l%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3cpath%20id='rect1225-1'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20146.33084,139.67403%20-12.08391,12.08391%20-12.08392,-12.08391%20-5.12721,5.12721%2012.08391,12.08391%20-12.08391,12.08392%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"__VITE_ASSET__Dy75rR$R__\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='icon'%20viewBox='0%200%201024%201024'%3e%3cpath%20d='M324%20666a48%2048%200%201%200%2096%200%2048%2048%200%201%200-96%200zm616.7-309.6L667.6%2083.2C655.2%2070.9%20638.7%2064%20621.1%2064s-34.1%206.8-46.5%2019.2L83.3%20574.5a65.85%2065.85%200%200%200%200%2093.1l273.2%20273.2c12.3%2012.3%2028.9%2019.2%2046.5%2019.2s34.1-6.8%2046.5-19.2l491.3-491.3c25.6-25.7%2025.6-67.5-.1-93.1zM403%20880.1L143.9%20621l477.2-477.2%20259%20259.2L403%20880.1zM152.8%20373.7a7.9%207.9%200%200%200%2011.2%200L373.7%20164a7.9%207.9%200%200%200%200-11.2l-38.4-38.4a7.9%207.9%200%200%200-11.2%200L114.3%20323.9a7.9%207.9%200%200%200%200%2011.2l38.5%2038.6zm718.6%20276.6a7.9%207.9%200%200%200-11.2%200L650.3%20860.1a7.9%207.9%200%200%200%200%2011.2l38.4%2038.4a7.9%207.9%200%200%200%2011.2%200L909.7%20700a7.9%207.9%200%200%200%200-11.2l-38.3-38.5z'/%3e%3c/svg%3e\"","export default \"__VITE_ASSET__z2SSgntD__\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20viewBox='0%200%20512%20512'%20version='1.1'%20id='svg11'%20sodipodi:docname='undo.svg'%20inkscape:version='1.2-alpha1%20(b6a15bb,%202022-02-23)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs15'%20/%3e%3csodipodi:namedview%20id='namedview13'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:pageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20showgrid='false'%20inkscape:zoom='0.4609375'%20inkscape:cx='-156.20339'%20inkscape:cy='256'%20inkscape:window-width='1440'%20inkscape:window-height='900'%20inkscape:window-x='0'%20inkscape:window-y='0'%20inkscape:window-maximized='0'%20inkscape:current-layer='svg11'%20/%3e%3cpath%20d='M%20222.57129,234.78304%20H%2054.113924%20c%20-5.5336,0%20-10.06934,-4.12064%20-10.06934,-9.2057%20V%2072.324346%20c%200,-5.08505%204.53574,-9.2057%2010.06934,-9.2057%20h%2040.36809%20c%205.533596,0%2010.069336,4.12065%2010.069336,9.2057%20v%2059.793214%20c%2038.46307,-38.926964%2094.34338,-63.300144%20156.48302,-62.861784%20115.11707,0.78906%20207.19259,85.393834%20206.92044,190.251154%20-0.18143,104.5943%20-93.43624,189.37442%20-208.46259,189.37442%20-53.88459,0%20-102.9613,-18.58675%20-139.97293,-49.18475%20-4.2636,-3.50693%20-4.44503,-9.64406%20-0.36286,-13.32634%20l%2028.57516,-26.03899%20c%203.71931,-3.41926%209.7972,-3.5946%2013.78865,-0.43836%2026.03514,21.12927%2060.41605,33.84191%2097.97198,33.84191%2081.73402,0%20147.95582,-60.23159%20147.95582,-134.75393%200,-74.43467%20-66.13108,-134.75393%20-147.95582,-134.75393%20-49.16742,0%20-92.71052,21.83066%20-119.5621,55.32188%20h%2082.64117%20c%205.53361,0%2010.06935,4.12065%2010.06935,9.2057%20v%2036.73513%20c%200,5.08505%20-4.53574,9.2057%20-10.06935,9.2057%20z'%20id='path9'%20style='stroke-width:0.891811'%20/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20width='48.542221mm'%20height='48.542221mm'%20viewBox='0%200%20172%20172'%20id='svg12430'%20version='1.1'%20inkscape:version='1.1.1%20(3bf5ae0d25,%202021-09-20)'%20sodipodi:docname='Vecteur.svg'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23'%20xmlns:cc='http://creativecommons.org/ns%23'%20xmlns:dc='http://purl.org/dc/elements/1.1/'%3e%3cdefs%20id='defs12432'%20/%3e%3csodipodi:namedview%20id='base'%20pagecolor='%23ffffff'%20bordercolor='%23666666'%20borderopacity='1.0'%20inkscape:pageopacity='0.0'%20inkscape:pageshadow='2'%20inkscape:zoom='5.139535'%20inkscape:cx='85.999998'%20inkscape:cy='85.999998'%20inkscape:document-units='px'%20inkscape:current-layer='layer1'%20showgrid='false'%20fit-margin-top='0'%20fit-margin-left='0'%20fit-margin-right='0'%20fit-margin-bottom='0'%20inkscape:window-width='3840'%20inkscape:window-height='2066'%20inkscape:window-x='1609'%20inkscape:window-y='-11'%20inkscape:window-maximized='1'%20inkscape:pagecheckerboard='0'%20/%3e%3cmetadata%20id='metadata12435'%3e%3crdf:RDF%3e%3ccc:Work%20rdf:about=''%3e%3cdc:format%3eimage/svg+xml%3c/dc:format%3e%3cdc:type%20rdf:resource='http://purl.org/dc/dcmitype/StillImage'%20/%3e%3c/cc:Work%3e%3c/rdf:RDF%3e%3c/metadata%3e%3cg%20inkscape:label='Calque%201'%20inkscape:groupmode='layer'%20id='layer1'%20transform='translate(-114,-203.50506)'%3e%3cpath%20id='rect1225'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20147.91469,269.51062%20-12.08391,12.08391%20-12.08392,-12.08391%20-5.12721,5.12721%2012.08391,12.08391%20-12.08391,12.08392%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3cpath%20id='rect1225-6'%20style='fill:%23d40000;stroke:%23800000;stroke-width:0.9375;stroke-linecap:round;stroke-linejoin:round'%20d='m%20277.66556,270.01925%20-12.08391,12.08391%20-12.08392,-12.08391%20-5.12721,5.12721%2012.08391,12.08391%20-12.08391,12.08392%205.12721,5.12721%2012.08392,-12.08391%2012.08521,12.08521%205.12721,-5.12722%20-12.08521,-12.0852%2012.08392,-12.08392%20z'%20/%3e%3cpath%20style='fill:%230e232e;stroke:%230e232e;stroke-width:8;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;marker-mid:none;marker-end:none'%20d='m%20137.2703,286.72174%20122.66222,0.61695'%20id='path3926'%20inkscape:connector-curvature='0'%20sodipodi:nodetypes='cc'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\Vecteur.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3cpath%20style='fill:none;stroke:%23000000;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1'%20d='m%20230.52355,266.89496%2031.16924,20.38028%20-30.82986,20.71317'%20id='path6358'%20inkscape:connector-curvature='0'%20sodipodi:nodetypes='ccc'%20inkscape:export-filename='C:\\\\Users\\\\Seb\\\\Downloads\\\\maths\\\\Mathgraph32\\\\Icones\\\\png\\\\48\\\\Vecteur.png'%20inkscape:export-xdpi='25.11628'%20inkscape:export-ydpi='25.11628'%20/%3e%3c/g%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.5%2014.5C8.94772%2014.5%208.5%2014.0523%208.5%2013.5V11.5H6.5C5.94772%2011.5%205.5%2011.0523%205.5%2010.5V9.5C5.5%208.94772%205.94772%208.5%206.5%208.5H8.5V6.5C8.5%205.94772%208.94772%205.5%209.5%205.5H10.5C11.0523%205.5%2011.5%205.94772%2011.5%206.5V8.5H13.5C14.0523%208.5%2014.5%208.94772%2014.5%209.5V10.5C14.5%2011.0523%2014.0523%2011.5%2013.5%2011.5H11.5V13.5C11.5%2014.0523%2011.0523%2014.5%2010.5%2014.5H9.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M0.5%2010C0.5%204.75329%204.75329%200.5%2010%200.5C15.2467%200.5%2019.5%204.75329%2019.5%2010C19.5%2012.082%2018.8302%2014.0076%2017.6944%2015.5731L22.4142%2020.2929C22.8047%2020.6834%2022.8047%2021.3166%2022.4142%2021.7071L21.7071%2022.4142C21.3166%2022.8047%2020.6834%2022.8047%2020.2929%2022.4142L15.5731%2017.6944C14.0076%2018.8302%2012.082%2019.5%2010%2019.5C4.75329%2019.5%200.5%2015.2467%200.5%2010ZM10%203.5C6.41015%203.5%203.5%206.41015%203.5%2010C3.5%2013.5899%206.41015%2016.5%2010%2016.5C13.5899%2016.5%2016.5%2013.5899%2016.5%2010C16.5%206.41015%2013.5899%203.5%2010%203.5Z'%20fill='%23000000'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.5%208.5C5.94772%208.5%205.5%208.94771%205.5%209.5V10.5C5.5%2011.0523%205.94772%2011.5%206.5%2011.5H13.5C14.0523%2011.5%2014.5%2011.0523%2014.5%2010.5V9.5C14.5%208.94772%2014.0523%208.5%2013.5%208.5H6.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M0.5%2010C0.5%204.75329%204.75329%200.5%2010%200.5C15.2467%200.5%2019.5%204.75329%2019.5%2010C19.5%2012.082%2018.8302%2014.0076%2017.6944%2015.5731L22.4142%2020.2929C22.8047%2020.6834%2022.8047%2021.3166%2022.4142%2021.7071L21.7071%2022.4142C21.3166%2022.8047%2020.6834%2022.8047%2020.2929%2022.4142L15.5731%2017.6944C14.0076%2018.8302%2012.082%2019.5%2010%2019.5C4.75329%2019.5%200.5%2015.2467%200.5%2010ZM10%203.5C6.41015%203.5%203.5%206.41015%203.5%2010C3.5%2013.5899%206.41015%2016.5%2010%2016.5C13.5899%2016.5%2016.5%2013.5899%2016.5%2010C16.5%206.41015%2013.5899%203.5%2010%203.5Z'%20fill='%23000000'/%3e%3c/svg%3e\"","export default function setButtonStyle(element: HTMLElement): void {\n  element.style.width = '40px'\n  element.style.height = '40px'\n  element.style.margin = '4px'\n  element.style.cursor = 'pointer'\n  element.style.borderRadius = '5px'\n  element.style.border = '1px solid black'\n  element.style.backgroundColor = 'white'\n  element.style.boxShadow = '0px 0px 2px 0px rgba(0,0,0,0.75)'\n  element.style.padding = '2px'\n  element.onmouseover = () => {\n    element.style.boxShadow = '0px 0px 5px 0px rgba(0,0,0,0.75)'\n  }\n  element.onmouseout = () => {\n    element.style.boxShadow = '0px 0px 2px 0px rgba(0,0,0,0.75)'\n  }\n}\n","import bisectorByPoints from '../assets/svg/bisectorByPoints.svg'\nimport circle from '../assets/svg/circle.svg'\nimport circleCompass from '../assets/svg/circleCompass.svg'\nimport circlePoint from '../assets/svg/circlePoint.svg'\nimport cursor from '../assets/svg/cursor.svg'\nimport description from '../assets/svg/description.svg'\nimport dilate from '../assets/svg/dilate.svg'\nimport disc from '../assets/svg/disc.svg'\nimport discPoint from '../assets/svg/discPoint.svg'\nimport drag from '../assets/svg/drag.svg'\nimport dragAll from '../assets/svg/dragAll.svg'\nimport fill from '../assets/svg/fill.svg'\nimport grid from '../assets/svg/grid.svg'\nimport hide from '../assets/svg/hide.svg'\nimport informations from '../assets/svg/informations.svg'\nimport latex from '../assets/svg/latex.svg'\nimport latexSvg from '../assets/svg/latexSvg.svg'\nimport line from '../assets/svg/line.svg'\nimport lineParallel from '../assets/svg/lineParallel.svg'\nimport linePerpendicular from '../assets/svg/linePerpendicular.svg'\nimport markAngle from '../assets/svg/markAngle.svg'\nimport matkSegment from '../assets/svg/markSegment.svg'\nimport mesureAngle from '../assets/svg/mesureAngle.svg'\nimport mesureSegment from '../assets/svg/mesureSegment.svg'\nimport middle from '../assets/svg/middle.svg'\nimport moveLabel from '../assets/svg/moveLabel.svg'\nimport namePoint from '../assets/svg/namePoint.svg'\nimport open from '../assets/svg/open.svg'\nimport pause from '../assets/svg/pause.svg'\nimport perpendicularBisector from '../assets/svg/perpendicularBisector.svg'\nimport play from '../assets/svg/play.svg'\nimport playSkipBack from '../assets/svg/playSkipBack.svg'\nimport playSkipForward from '../assets/svg/playSkipForward.svg'\nimport point from '../assets/svg/point.svg'\nimport pointIntersection from '../assets/svg/pointIntersection.svg'\nimport pointOn from '../assets/svg/pointOn.svg'\nimport polygon from '../assets/svg/polygon.svg'\nimport ray from '../assets/svg/ray.svg'\nimport redo from '../assets/svg/redo.svg'\nimport reflection from '../assets/svg/reflection.svg'\nimport reflectionOverLine from '../assets/svg/reflectionOverLine.svg'\nimport remove from '../assets/svg/remove.svg'\nimport restart from '../assets/svg/restart.svg'\nimport rotate from '../assets/svg/rotate.svg'\nimport save from '../assets/svg/save.svg'\nimport segment from '../assets/svg/segment.svg'\nimport setOptions from '../assets/svg/setOptions.svg'\nimport shake from '../assets/svg/shake.svg'\nimport translation from '../assets/svg/translation.svg'\nimport undo from '../assets/svg/undo.svg'\nimport vector from '../assets/svg/vector.svg'\nimport zoomIn from '../assets/svg/zoomIn.svg'\nimport zoomOut from '../assets/svg/zoomOut.svg'\nimport type Figure from '../Figure'\nimport type { eventName } from '../uiMachine'\nimport setButtonStyle from './setButtonStyle'\n\n// La clé devrait être de type availableButtons\nconst availableIcons = new Map<string, { tooltip: string; url: string }>([\n  ['BISECTOR_BY_POINTS', { tooltip: 'Bissectrice', url: bisectorByPoints }],\n  ['CIRCLE_CENTER_POINT', { tooltip: 'Cercle centre-point', url: circlePoint }],\n  [\n    'CIRCLE_COMPASS',\n    { tooltip: 'Cercle par report de longueur', url: circleCompass },\n  ],\n  ['CIRCLE_RADIUS', { tooltip: 'Cercle centre-rayon', url: circle }],\n  ['CURSOR', { tooltip: 'Curseur', url: cursor }],\n  [\n    'DESCRIPTION',\n    { tooltip: 'Afficher le programme de construction', url: description },\n  ],\n  ['DILATE', { tooltip: 'Homothétie', url: dilate }],\n  ['DISC_CENTER_POINT', { tooltip: 'Disque centre-point', url: discPoint }],\n  ['DISC_RADIUS', { tooltip: 'Disque centre-rayon', url: disc }],\n  [\n    'DOWNLOAD_LATEX_SVG',\n    { tooltip: 'Exporter la figure au format LaTeX ou SVG', url: latexSvg },\n  ],\n  ['DRAG_ALL', { tooltip: 'Déplacer la figure', url: dragAll }],\n  ['DRAG', { tooltip: 'Déplacer les points', url: drag }],\n  ['FILL', { tooltip: 'Remplir / Vider', url: fill }],\n  ['GRID', { tooltip: 'Afficher le repère', url: grid }],\n  ['HIDE', { tooltip: 'Masquer un élément', url: hide }],\n  [\n    'INFORMATIONS',\n    { tooltip: \"Obtenir les informations sur l'élément\", url: informations },\n  ],\n  ['LATEX', { tooltip: 'Export LaTeX', url: latex }],\n  ['LINE_PARALLEL', { tooltip: 'Droite parallèle', url: lineParallel }],\n  [\n    'LINE_PERPENDICULAR',\n    { tooltip: 'Droite perpendiculaire', url: linePerpendicular },\n  ],\n  ['LINE', { tooltip: 'Droite', url: line }],\n  ['MARK_ANGLE', { tooltip: 'Coder un angle', url: markAngle }],\n  ['MARK_BETWEEN_POINTS', { tooltip: 'Coder un segment', url: matkSegment }],\n  ['MESURE_ANGLE', { tooltip: 'Mesurer un angle', url: mesureAngle }],\n  ['MESURE_SEGMENT', { tooltip: 'Mesurer une distance', url: mesureSegment }],\n  ['MIDDLE', { tooltip: 'Milieu', url: middle }],\n  ['MOVE_LABEL', { tooltip: \"Déplacer le nom d'un point\", url: moveLabel }],\n  ['NAME_POINT', { tooltip: 'Renommer un point', url: namePoint }],\n  ['OPEN', { tooltip: 'Charger un fichier', url: open }],\n  ['PAUSE', { tooltip: 'Pause', url: pause }],\n  [\n    'PERPENDICULAR_BISECTOR',\n    { tooltip: 'Médiatrice', url: perpendicularBisector },\n  ],\n  ['PLAY_SKIP_BACK', { tooltip: 'Étape précédente', url: playSkipBack }],\n  ['PLAY_SKIP_FORWARD', { tooltip: 'Étape suivante', url: playSkipForward }],\n  ['PLAY', { tooltip: 'Lecture', url: play }],\n  [\n    'POINT_INTERSECTION',\n    { tooltip: \"Point à l'intersection\", url: pointIntersection },\n  ],\n  ['POINT_ON', { tooltip: 'Point sur', url: pointOn }],\n  ['POINT', { tooltip: 'Point', url: point }],\n  ['POLYGON', { tooltip: 'Polygone', url: polygon }],\n  ['RAY', { tooltip: 'Demi-droite', url: ray }],\n  ['REDO', { tooltip: 'Rétablir', url: redo }],\n  [\n    'REFLECTION_OVER_LINE',\n    { tooltip: 'Symétrie axiale', url: reflectionOverLine },\n  ],\n  ['REFLECTION', { tooltip: 'Symétrie centrale', url: reflection }],\n  ['REMOVE', { tooltip: 'Supprimer', url: remove }],\n  ['RESTART', { tooltip: 'Recommencer', url: restart }],\n  ['ROTATE', { tooltip: 'Rotation', url: rotate }],\n  ['SAVE', { tooltip: 'Sauvegarder', url: save }],\n  ['SEGMENT', { tooltip: 'Segment', url: segment }],\n  ['SET_OPTIONS', { tooltip: 'Modifier le style', url: setOptions }],\n  ['SHAKE', { tooltip: 'Secouer la figure', url: shake }],\n  ['TRANSLATION', { tooltip: 'Translation', url: translation }],\n  ['UNDO', { tooltip: 'Annuler la dernière action', url: undo }],\n  ['VECTOR', { tooltip: 'Vecteur', url: vector }],\n  ['ZOOM_IN', { tooltip: 'Zoom avant', url: zoomIn }],\n  ['ZOOM_OUT', { tooltip: 'Zoom arrière', url: zoomOut }],\n])\n\nexport default function addButtons(\n  list: string,\n  figure: Figure,\n): HTMLImageElement[] {\n  const imgList = []\n  const buttons = list.split(' ')\n  for (const key of buttons) {\n    const button = key.toUpperCase()\n    if (!availableIcons.has(button)) {\n      console.error(`Le bouton ${button} n'existe pas`)\n      continue\n    }\n    const img = document.createElement('img')\n    const icon = availableIcons.get(button)\n    if (icon == null) {\n      console.error(`L'icône pour le bouton ${button} n'existe pas`)\n      continue\n    }\n    img.src = icon.url\n    img.title = icon.tooltip\n    setButtonStyle(img)\n    img.onclick = () => {\n      figure.ui?.send(button as eventName)\n    }\n    figure.buttons.set(button as eventName, img)\n    imgList.push(img)\n  }\n  return imgList\n}\n","import { orangeMathaleaLight } from '../elements/defaultValues'\nimport type Figure from '../Figure'\nimport setButtonStyle from './setButtonStyle'\n\n/**\n *\n * action : fonction à exécuter lors du clic sur le bouton\n * figure : figure à laquelle le bouton est associé\n * tooltip : texte affiché au survol du bouton\n * url : url de l'image du bouton\n * text : texte du bouton si url est null\n * container : conteneur du bouton\n * record : si true, le bouton est enregistré dans la liste des boutons de la figure et s'allumera lorsqu'il est cliqué et s'eteindra lorsqu'un autre bouton de figure.buttons est cliqué\n * @returns\n */\nexport default function addCustomButton({\n  action,\n  figure,\n  tooltip = '',\n  url,\n  text,\n  container,\n  record = true,\n  userMessage = '',\n}: {\n  action: () => void\n  figure: Figure\n  tooltip?: string\n  url?: string\n  text?: string\n  container?: HTMLDivElement\n  record?: boolean\n  userMessage?: string\n}): HTMLElement {\n  if (url == null && text == null) {\n    throw new Error('addCustomButton doit spécifier une url ou un texte')\n  }\n  let element: HTMLImageElement | HTMLDivElement\n  if (url != null) {\n    element = document.createElement('img') as HTMLImageElement\n    const img = element as HTMLImageElement\n    img.src = url\n  } else {\n    element = document.createElement('div')\n    const div = element as HTMLDivElement\n    div.textContent = text as string\n    element.style.textAlign = 'center'\n    element.style.lineHeight = '40px'\n    element.style.fontSize = '20px'\n    element.style.letterSpacing = '1px'\n    element.style.fontFamily = 'Arial'\n  }\n  element.title = tooltip\n  setButtonStyle(element)\n  if (container == null) {\n    figure.divButtons.appendChild(element)\n  } else {\n    container.appendChild(element)\n  }\n  element.onclick = () => {\n    action()\n    figure.userMessage = userMessage\n  }\n  if (record) {\n    const id =\n      window.crypto.randomUUID !== undefined\n        ? window.crypto.randomUUID()\n        : getNumberId()\n    figure.buttons.set(id as string, element)\n    element.addEventListener('click', () => {\n      for (const button of figure.buttons.values()) {\n        button.style.backgroundColor = 'white'\n      }\n      element.style.backgroundColor = orangeMathaleaLight\n    })\n  }\n  return element\n}\n\n/* MGu : HACK pour les connexions HTTP \ncar window.crypto.randomUUID est undefined pour les connexions HTTP\n*/\nlet numberId = 0\nfunction getNumberId() {\n  numberId++\n  return numberId\n}\n","import type Figure from '../Figure'\n\nexport default function addThicknessChoice(figure: Figure): HTMLDivElement {\n  const div = document.createElement('div')\n  div.style.marginTop = '30px'\n  div.style.fontWeight = 'bold'\n  const title = document.createElement('div')\n  title.style.marginBottom = '10px'\n  title.textContent = `Épaisseur : ${figure.options.thickness}`\n  const range = document.createElement('input')\n  range.type = 'range'\n  range.value = `${figure.options.thickness}`\n  range.min = '1'\n  range.max = '4'\n  div.appendChild(title)\n  div.appendChild(range)\n  range.addEventListener('input', () => {\n    figure.options.thickness = Number(range.value)\n    title.textContent = `Épaisseur : ${figure.options.thickness}`\n  })\n  return div\n}\n","import { marks, orangeMathaleaLight } from '../elements/defaultValues'\nimport type Figure from '../Figure'\n\nexport default function addMarkPalette({\n  figure,\n  container,\n}: {\n  figure: Figure\n  container: HTMLDivElement\n}): void {\n  const buttonsMark: HTMLElement[] = []\n  for (const mark of marks) {\n    const button = figure.addCustomButton({\n      record: false,\n      text: mark,\n      action: () => {\n        figure.options.mark = mark\n      },\n      container: container,\n    })\n    if (mark === figure.options.mark) {\n      button.style.backgroundColor = orangeMathaleaLight\n    }\n    buttonsMark.push(button)\n    button.addEventListener('click', handleClick)\n  }\n  function handleClick(this: HTMLElement): void {\n    for (const button of buttonsMark) {\n      button.style.backgroundColor = 'white'\n    }\n    this.style.backgroundColor = orangeMathaleaLight\n  }\n}\n","import { defaultTools } from '../elements/defaultValues'\nimport type Figure from '../Figure'\nimport addMarkPalette from './addMarkPalette'\n\nimport type { availableButtons } from './availableButtons'\n\nexport default function setToolbar(\n  figure: Figure,\n  {\n    nbCols,\n    position = 'left',\n    showStyles,\n    tools = defaultTools,\n  }: {\n    nbCols?: number\n    position?: 'left' | 'top' | 'none'\n    showStyles?: boolean\n    tools?: availableButtons[]\n  },\n): void {\n  figure.divButtons.innerHTML = ''\n  figure.divButtons.style.zIndex = '100'\n  if (position === 'none') {\n    figure.divButtons.style.display = 'none'\n    return\n  }\n  if (position === 'left') {\n    if (showStyles === undefined) showStyles = true\n    if (nbCols === undefined) nbCols = 4\n    figure.divButtons.style.display = 'grid'\n    if (window.matchMedia('(min-width: 768px)').matches) {\n      figure.container.style.gridTemplateColumns = '230px 1fr'\n    } else {\n      figure.container.style.gridTemplateColumns = '50px 1fr'\n    }\n    figure.container.style.display = 'grid'\n    if (window.matchMedia('(min-width: 768px)').matches) {\n      figure.divButtons.style.gridTemplateColumns = `repeat(${nbCols}, auto)`\n    } else {\n      figure.divButtons.style.gridTemplateColumns = 'auto'\n    }\n    figure.divButtons.style.gridAutoRows = 'min-content'\n    figure.divButtons.style.justifyContent = 'start'\n  }\n  if (position === 'top') {\n    if (showStyles === undefined) showStyles = false\n    if (nbCols === undefined) nbCols = 8\n    figure.container.style.display = 'block'\n    figure.divButtons.style.display = 'grid'\n    figure.divButtons.style.gridTemplateColumns = `repeat(${nbCols}, auto)`\n    figure.divButtons.style.gridAutoRows = 'min-content'\n    if (tools.length < 6) {\n      figure.divButtons.style.justifyContent = 'start'\n    } else {\n      figure.divButtons.style.justifyContent = 'center'\n    }\n  }\n  if (showStyles === false) {\n    const index = tools.indexOf('SET_OPTIONS')\n    if (index > -1) {\n      tools.splice(index, 1)\n    }\n  }\n  const imgs = figure.addButtons(tools.join(' '))\n  figure.divButtons.append(...imgs)\n  for (const img of imgs) {\n    figure.divButtons.appendChild(img)\n  }\n  if (showStyles === true) {\n    const divStyles = document.createElement('div')\n    divStyles.style.gridColumn = '1 / -1'\n    figure.divButtons.appendChild(divStyles)\n    divStyles.appendChild(figure.addColorPalette(['black', 'blue', 'red']))\n    divStyles.appendChild(\n      figure.addColorPalette(['green', 'orange', 'lightgray']),\n    )\n    divStyles.appendChild(figure.addDashedChoice())\n    divStyles.appendChild(figure.addThicknessChoice())\n  }\n  if (tools.indexOf('MARK_BETWEEN_POINTS')) {\n    figure.divMarkPalette = document.createElement('div')\n    figure.divMarkPalette.style.display = 'flex'\n    figure.divToolbar2.appendChild(figure.divMarkPalette)\n    addMarkPalette({ figure, container: figure.divMarkPalette })\n    figure.divMarkPalette.style.display = 'none'\n  }\n}\n","import renderMathInElement from 'katex/dist/contrib/auto-render.js'\nimport 'katex/dist/katex.min.css'\n\nimport { loadJson } from './actions/loadJson'\nimport checkAngle from './check/checkAngle'\nimport checkCircleRadius from './check/checkCircleRadius'\nimport checkCoords from './check/checkCoords'\nimport checkDistance from './check/checkDistance'\nimport checkLine from './check/checkLine'\nimport checkParallel from './check/checkParallel'\nimport checkPerpendicularBisector from './check/checkPerpendicularBisector'\nimport checkPoint from './check/checkPoint'\nimport checkPointBetween2Points from './check/checkPointBetween2Points'\nimport checkPointOnIntersectionLL from './check/checkPointOnIntersectionLL'\nimport checkPointOnLine from './check/checkPointOnLine'\nimport checkPolygon from './check/checkPolygon'\nimport checkPolygonByLabels from './check/checkPolygonByLabels'\nimport checkRay from './check/checkRay'\nimport checkSameDistance from './check/checkSameDistance'\nimport checkSegment from './check/checkSegment'\nimport checkVector from './check/checkVector'\nimport shake from './check/shake'\nimport Angle from './dynamicNumbers/Angle'\nimport Distance from './dynamicNumbers/Distance'\nimport DynamicCalcul from './dynamicNumbers/DynamicCalcul'\nimport type DynamicNumber from './dynamicNumbers/DynamicNumber'\nimport DynamicX from './dynamicNumbers/DynamicX'\nimport DynamicY from './dynamicNumbers/DynamicY'\nimport type { Coords } from './elements/calculus/Coords'\nimport Graph from './elements/calculus/Graph'\nimport Graph2 from './elements/calculus/Graph2'\nimport GraphByParts from './elements/calculus/GraphByParts'\nimport defaultOptions, {\n  defaultButtonsWidth,\n  defaultDivUserMessageFontSize,\n  defaultDivUserMessageHeight,\n  defaultDragAllDelta,\n  defaultFooterHeight,\n  defaultHistorySize,\n  defaultMinHeight,\n  defaultMinWidth,\n} from './elements/defaultValues'\nimport CircleFractionDiagram from './elements/diagrams/CircleFractionDiagram'\nimport LineFractionDiagram from './elements/diagrams/LineFractionDiagram'\nimport RectangleFractionDiagram from './elements/diagrams/RectangleFractionDiagram'\nimport Element2D from './elements/Element2D'\nimport GraduatedLine from './elements/grid/GraduatedLine'\nimport Grid from './elements/grid/Grid'\nimport type { FigureOptions, SaveJson } from './elements/interfaces'\nimport Arc from './elements/lines/Arc'\nimport ArcBy3PointsAndRadius from './elements/lines/ArcBy3PointsAndRadius'\nimport ArcByCenterRadiusAndAngles from './elements/lines/ArcByCenterRadiusAndAngles'\nimport BisectorByPoints from './elements/lines/BisectorByPoints'\nimport Circle from './elements/lines/Circle'\nimport CircleCenterDynamicRadius from './elements/lines/CircleCenterDyamicRadius'\nimport CircleCenterPoint from './elements/lines/CircleCenterPoint'\nimport Line from './elements/lines/Line'\nimport LineByPointVector from './elements/lines/LineByPointVector'\nimport LineParallel from './elements/lines/LineParallel'\nimport LinePerpendicular from './elements/lines/LinePerpendicular'\nimport PerpendicularBisector from './elements/lines/PerpendicularBisector'\nimport PerpendicularBisectorByPoints from './elements/lines/PerpendicularBisectorByPoints'\nimport Polygon from './elements/lines/Polygon'\nimport Polyline from './elements/lines/Polyline'\nimport Ray from './elements/lines/Ray'\nimport Segment from './elements/lines/Segment'\nimport MarkBetweenPoints from './elements/mark/MarkBetweenPoints'\nimport MarkRightAngle from './elements/mark/MarkRightAngle'\nimport Barycenter from './elements/points/Barycenter'\nimport Middle from './elements/points/Middle'\nimport PointOnGraph from './elements/points/PoinrOnGraph'\nimport Point from './elements/points/Point'\nimport PointByProjection from './elements/points/PointByProjection'\nimport PointByProjectionOnAxisX from './elements/points/PointByProjectionOnAxisX'\nimport PointByProjectionOnAxisY from './elements/points/PointByProjectionOnAxisY'\nimport PointIntersectionCC from './elements/points/PointIntersectionCC'\nimport PointIntersectionLC from './elements/points/PointIntersectionLC'\nimport PointIntersectionLL from './elements/points/PointIntersectionLL'\nimport PointOnCircle from './elements/points/PointOnCircle'\nimport PointOnLine from './elements/points/PointOnLine'\nimport PointOnLineAtDistance from './elements/points/PointOnLineAtDistance'\nimport PointOnPolyline from './elements/points/PointOnPolyline'\nimport PointsIntersectionCC from './elements/points/PointsIntersectionCC'\nimport PointsIntersectionLC from './elements/points/PointsIntersectionLC'\nimport TextByPoint from './elements/text/TextByPoint'\nimport TextByPosition from './elements/text/TextByPosition'\nimport TextDynamicByPosition from './elements/text/TextDynamicByPosition'\nimport Vector from './elements/vector/Vector'\nimport VectorByPoints from './elements/vector/VectorByPoints'\nimport VectorPerpendicular from './elements/vector/VectorPerpendicular'\nimport { isLocalStorageAvailable } from './lib/storage'\nimport handleHover from './pointerActions/handleHover'\nimport handlePointerAction from './pointerActions/handlePointerAction'\nimport type { eventName, eventOptions } from './uiMachine'\nimport addButtons from './userInterface/addButtons'\nimport addColorPalette from './userInterface/addColorPalette'\nimport addCustomButton from './userInterface/addCustomButton'\nimport addDashedChoice from './userInterface/addDashedChoice'\nimport addThicknessChoice from './userInterface/addThicknessChoice'\nimport type { availableButtons } from './userInterface/availableButtons'\nimport setToolbar from './userInterface/setToolbar'\n\n/**\n * Créé un espace de travail dans lequel on peut\n * générer des figures de géométrie statique ou dynamique\n */\nclass Figure {\n  /** Tableau de callBacks à exécuter quand la figure est sauvegardée */\n  private _actionsOnChange: Array<() => void> = []\n  /** Boutons qui interagissent avec la figure */\n  buttons: Map<string, HTMLDivElement> = new Map<string, HTMLDivElement>()\n  /** Element parent divUserMessage, du svg et des différents div pours les texte */\n  container!: HTMLElement\n  /** Etat de la machine pour l'interface graphique */\n  currentState = ''\n  /** div dans lequel sont placés tous les boutons de l'interface graphique  */\n  divButtons: HTMLDivElement\n  /** div dans lequel s'affichera le svg et les div des textes en surimpression du svg */\n  divFigure: HTMLDivElement\n  /** parent de divFigure et de divUserMessage */\n  divFigureAndUserMessage: HTMLDivElement\n  /** div dans lequel sera écrit la dernière sauvegarde automatique au format JSON */\n  divSave: HTMLDivElement | null\n  /** div dans lequel on affiche l'aide pour l'action en cours */\n  divUserMessage: HTMLDivElement\n  /** div supplémentaire pour les options */\n  divToolbar2: HTMLDivElement\n  /** div avec le choix des marques */\n  divMarkPalette?: HTMLDivElement\n  /** Si l'option snapGrid est active, cela détermine la distance horizontale entre deux lieux de dépot du point */\n  dx: number\n  /** Si l'option snapGrid est active, cela détermine la distance verticale entre deux lieux de dépot du point */\n  dy: number\n  /** La clé est par défaut element0, element1, element2... ou le nom de l'élément et la valeur est l'élément géométrique (segment, point, polygone...) */\n  elements: Map<string, DynamicNumber | Element2D>\n  /** Filtre utilisé sur les éléments pour savoir ceux qui réagissent au clic */\n  filter: (e: Element2D) => boolean\n  /** Quadrillage de la figure */\n  grid?: Grid\n  /** Hauteur en pixels du SVG */\n  height: number\n  /** Points à proximité du pointeur utilisés pour proposer un déplacement au lieu d'une création de point */\n  hoverPoints: Set<Element2D>\n  /** Identifiant de la figure pour la gestion de l'interactivité dans MathALÉA */\n  id = ''\n  /** Point actuellement en train d'être déplacé par la souris */\n  inDrag: Point | TextByPosition | undefined\n  /** Dimensions initiales utilisées pour le zoom */\n  initial: {\n    height: number\n    scale: number\n    width: number\n    xMin: number\n    yMin: number\n  }\n  /** Figure dynamique ou statique */\n  isDynamic: boolean\n  /** Eventuel div dans lequel on attend une réponse de l'utilisateur */\n  modal?: HTMLDivElement\n\n  /** Options courante pour tous les tracés */\n  options: FigureOptions\n\n  /** Nombre de pixels poun une unité (soit 1 cm en sortie papier) par défaut à 30 */\n  pixelsPerUnit: number\n  /** Point virtuel qui suit le pointer */\n  pointer: Point\n  /** Abscisse du pointeur dans le repère de la figure */\n  pointerX: null | number\n  /** Ordonnée du pointeur dans le repère de la figure */\n  pointerY: null | number\n  /** div (ou p ou svg…) dans lequel sera inséré le SVG et les div avec le texte mathématiques */\n  /** Échelle globale */\n  _scale: number\n  /** Tableau d'éléments sélectionnés (utilisé dans l'interface graphique pour faire une construction à plusieurs entrées) */\n  selectedElements: Element2D[]\n  /** Si l'option snapGrid est active, le point sera aimanté */\n  snapGrid: boolean\n  /** Un tableau des différentes sauvegardes automatiques utilisé pour les redo */\n  stackRedo: string[]\n  /** Un tableau des différentes sauvegardes automatiques utilisé pour les undo */\n  stackUndo: string[]\n  /** SVG de la figure géométrique */\n  svg: SVGElement\n  /** Élément temporaire (utilisé dans l'interface graphique pour donner un aperçu de le construction en cours) */\n  tmpElements: Element2D[]\n  /** Machine qui gère l'état de l'interface utilisateur */\n  ui!: { send: (e: eventName, opt?: eventOptions) => void }\n  /** Largeur en pixels du SVG */\n  width: number\n  /** Abscisse du coin en bas à droite */\n  xMax: number\n  /** Abscisse du coin en bas à gauche */\n  xMin: number\n  /** Échelle horizontale */\n  xScale: number\n  /** Ordonnée du point en haut à droite */\n  yMax: number\n  /** Ordonnée du coin en bas à gauche */\n  yMin: number\n  /** Échelle verticale */\n  yScale: number\n  /** Niveau de zoom */\n  zoomLevel = 1\n\n  /**\n   * @param __namedParameters width - Largeur en pixels du SVG\n   * @param __namedParameters height - Hauteur en pixels du SVG\n   * @param pixelsPerUnit - Nombres de pixels pour une unité de la figure, par défaut 30 pixels (l'unité sera le cm en sortie LaTeX)\n   * @param xMin - Abscisse du coin en bas à gauche\n   * @param yMin - Ordonnée du coin en bas à gauche\n   * @param isDynamic - Figure dynamique ou statique\n   * @param dx - Si l'option snapGrid est activée, cela correspond à la distance horizontale du quadrillage sur lequel les points peuvent être déposés\n   * @param dy - Si l'option snapGrid est activée, cela correspond à la distance verticale du quadrillage sur lequel les points peuvent être déposés\n   */\n  constructor({\n    border = false,\n    dx = 1,\n    dy = 1,\n    height = document.documentElement.clientHeight - defaultFooterHeight,\n    isDynamic = true,\n    pixelsPerUnit = 30,\n    scale = 1,\n    snapGrid = false,\n    width = document.documentElement.clientWidth - defaultButtonsWidth,\n    xMin = -10,\n    xScale = 1,\n    yMin = -6,\n    yScale = 1,\n  }: {\n    border?: boolean\n    dx?: number\n    dy?: number\n    height?: number\n    isDynamic?: boolean\n    pixelsPerUnit?: number\n    scale?: number\n    snapGrid?: boolean\n    width?: number\n    xMin?: number\n    xScale?: number\n    yMin?: number\n    yScale?: number\n  } = {}) {\n    this.elements = new Map()\n    this.stackUndo = []\n    this.stackRedo = []\n    this.width = width\n    this.height = height\n    this.pixelsPerUnit = pixelsPerUnit\n    this.xMin = xMin\n    this.xMax = xMin + width / pixelsPerUnit / scale / xScale\n    this.yMin = yMin\n    this.yMax = yMin + height / pixelsPerUnit / scale / yScale\n    this.dx = dx\n    this.dy = dy\n    this.hoverPoints = new Set()\n    this.xScale = xScale\n    this.yScale = yScale\n    this._scale = scale\n    this.isDynamic = isDynamic\n    this.pointerX = null\n    this.pointerY = null\n    this.selectedElements = []\n    this.tmpElements = []\n    this.options = { ...defaultOptions }\n    this.snapGrid = snapGrid\n\n    this.container = document.createElement('div')\n    this.container.id = 'containerApigeom'\n    this.divFigureAndUserMessage = document.createElement('div')\n    this.divFigureAndUserMessage.id = 'divFigureAndUserMessage'\n    this.divFigure = document.createElement('div')\n    this.divFigure.id = 'divFigure'\n    this.svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n    this.divSave = null\n    this.divButtons = document.createElement('div')\n    this.divButtons.id = 'divButtons'\n    this.divUserMessage = document.createElement('div')\n    this.divUserMessage.id = 'divUserMessage'\n    this.divUserMessage.style.fontSize = defaultDivUserMessageFontSize\n    this.divUserMessage.style.height = defaultDivUserMessageHeight\n    this.divUserMessage.style.width = '90%'\n    this.divUserMessage.style.textAlign = 'right'\n    this.divUserMessage.style.right = '0'\n    this.divUserMessage.style.color = 'blue'\n    this.divUserMessage.style.margin = '3px'\n    this.divUserMessage.style.padding = '0.5em'\n    this.divUserMessage.style.fontSize = '1.5em'\n    this.divToolbar2 = document.createElement('div')\n    this.divToolbar2.id = 'divToolbar2'\n    this.divToolbar2.style.display = 'flex'\n\n    this.container.appendChild(this.divButtons)\n    this.container.appendChild(this.divFigureAndUserMessage)\n    this.divFigureAndUserMessage.appendChild(this.divToolbar2)\n    this.divFigureAndUserMessage.appendChild(this.divUserMessage)\n    this.divFigureAndUserMessage.appendChild(this.divFigure)\n    this.divFigure.appendChild(this.svg)\n    if (border) this.svg.style.border = 'solid'\n    // Pour éviter le scroll quand on manipule la figure sur un écran tactile\n    this.svg.style.touchAction = 'none'\n    this.clearHtml()\n    if (this.isDynamic) this.listenPointer()\n    this.pointer = new Point(this, {\n      isChild: true,\n      isFree: false,\n      isVisible: false,\n      isSelectable: false,\n      color: 'black',\n      shape: '',\n      x: 0,\n      y: 0,\n    })\n    this.pointer.type = 'pointer'\n    this.filter = (e) => e instanceof Point && e.isFree\n    this.saveState()\n    this.initial = {\n      height: this.height,\n      width: this.width,\n      scale: this._scale,\n      xMin: this.xMin,\n      yMin: this.yMin,\n    }\n    // this.handleDragAll()\n    // Les boutons n'existe pas encore\n    setTimeout(() => {\n      this.handleUndoRedoButtons()\n    }, 100)\n  }\n\n  addButtons(buttons: string): HTMLImageElement[] {\n    return addButtons(buttons, this)\n  }\n\n  addColorPalette(colors: string[]): HTMLDivElement {\n    return addColorPalette(colors, this)\n  }\n\n  addCustomButton({\n    action,\n    container,\n    record,\n    text,\n    tooltip = '',\n    url,\n    userMessage,\n  }: {\n    action: () => void\n    tooltip?: string\n    url?: string\n    text?: string\n    container?: HTMLDivElement\n    record?: boolean\n    userMessage?: string\n  }): HTMLElement {\n    return addCustomButton({\n      action,\n      figure: this,\n      tooltip,\n      url,\n      text,\n      container,\n      record,\n      userMessage,\n    })\n  }\n\n  addDashedChoice(): HTMLDivElement {\n    return addDashedChoice(this)\n  }\n\n  addThicknessChoice(): HTMLDivElement {\n    return addThicknessChoice(this)\n  }\n\n  /** Ajuste la taille pour être la plus grande possible en tenant compte d'une barre d'outils sur le côté et un footer en dessous */\n  adjustSize(): void {\n    if (this.width < defaultMinWidth) this.width = defaultMinWidth\n    if (this.height < defaultMinHeight) this.height = defaultMinHeight\n    this.xMax =\n      this.xMin + this.width / this.pixelsPerUnit / this.scale / this.xScale\n    this.yMax =\n      this.yMin + this.height / this.pixelsPerUnit / this.scale / this.yScale\n    if (this.divFigure !== null && this.svg !== null) {\n      this.divFigure.style.width = `${this.width.toString()}px`\n      this.divFigure.style.height = `${this.height.toString()}px`\n      this.svg.setAttribute('width', this.width.toString())\n      this.svg.setAttribute('height', this.height.toString())\n      this.svg.setAttribute(\n        'viewBox',\n        `${this.xToSx(this.xMin)} ${this.yToSy(this.yMax)} ${this.width} ${this.height}`,\n      )\n    }\n    for (const e of this.elements.values()) {\n      if (e instanceof Element2D) e.update()\n    }\n  }\n\n  /** Met à jour la taille de l'espace de travail en cas de changements sur la fenêtre du navigateur */\n  autoAdjustSize(): void {\n    window.addEventListener('resize', () => {\n      getMaxSize()\n      this.adjustSize()\n    })\n    window.addEventListener('orientationchange', () => {\n      getMaxSize()\n      this.adjustSize()\n    })\n    window.addEventListener('fullscreenchange', () => {\n      getMaxSize()\n      this.adjustSize()\n    })\n\n    const getMaxSize = (): void => {\n      this.width = document.documentElement.clientWidth - defaultButtonsWidth\n      this.height = document.documentElement.clientHeight - defaultFooterHeight\n    }\n  }\n\n  /**\n   * Test l'existance d'un point et éventuellement son label\n   * le feedback ne parle pas des coordonnées\n   */\n  checkPoint({\n    label,\n    x,\n    y,\n    color,\n  }: {\n    label?: string\n    x: number\n    y: number\n    color?: string\n  }): { isValid: boolean; message: string; points: Point[] } {\n    return checkPoint({ figure: this, label, x, y, color })\n  }\n\n  /**\n   * Vérifie si un point appartient à une ligne (droite, demi-droite ou segment)\n   * @param {string} labelPt // Nom du point\n   * @param {string[]|string} nameLine // Nom de la ligne ou bien tableau contenant les noms de la ligne\n   * @example figure.checkPointOnLine({labelPt:'A',nameline:'CD'}) -> Vérifie que le point A appartienne à tout segment, demi-droite ou droite dont le nom contient CD.\n   * @example figure.checkPointOnLine({labelPt:'A',nameline:['(CD)','(DC)'}) -> Vérifie que le point A appartienne à la droite nommée (CD) ou (DC).\n   * @author Eric Elter\n   * @returns {{ isValid: boolean, message: string }}\n   */\n  checkPointOnLine({\n    labelPt,\n    nameLine,\n  }: {\n    labelPt: string\n    nameLine: string[] | string\n  }): { isValid: boolean; message: string } {\n    return checkPointOnLine({ figure: this, labelPt, nameLine })\n  }\n\n  /**\n   * Vérifie si un point appartient à une intersection de deux lignes (droites, demi-droites ou segments)\n   * @param {string} labelPt // Nom du point\n   * @param {string[]|string} nameLine1 // Nom de la ligne1 ou bien tableau contenant les noms de la ligne1\n   * @param {string[]|string} nameLine2 // Nom de la ligne2 ou bien tableau contenant les noms de la ligne2\n   * @example figure.checkPointOnIntersectionLL({labelPt:'A',nameline1:'CD',nameline2:'EF'}) -> Vérifie que le point A est le point d'intersection de tout segment, demi-droite ou droite dont le nom contient CD et de tout segment, demi-droite ou droite dont le nom contient EF\n   * @example figure.checkPointOnIntersectionLL({labelPt:'A',nameline1:['(CD)','(DC)'},nameline1:['[EF)'}) -> Vérifie que le point A est le point d'intersection de la droite nommée (CD) ou (DC) et de la demi-droite [EF).\n   * @author Eric Elter\n   * @returns {{ isValid: boolean, message: string }}\n   */\n  checkPointOnIntersectionLL({\n    labelPt,\n    nameLine1,\n    nameLine2,\n  }: {\n    figure: Figure\n    labelPt: string\n    nameLine1: string[] | string\n    nameLine2: string[] | string\n  }): { isValid: boolean; message: string } {\n    return checkPointOnIntersectionLL({\n      figure: this,\n      labelPt,\n      nameLine1,\n      nameLine2,\n    })\n  }\n\n  /**\n   * Vérifie si un point est sur le segment point1-point2 sans que le segment ne soit tracé mais la droite ou la demi-droite doit l'être.\n   * @param {string} labelPt // Nom du point\n   * @param {string} labelPt1 // Nom du point1\n   * @param {string} labelPt2 // Nom du point2\n   * @example figure.checkPointBetween2Points({ labelPt: 'A', labelPt1: 'E', labelPt2: 'F'}) -> Vérifie que le point A est sur le segment [EF] sans que le segment ne soit tracé mais la droite ou la demi-droite doit l'être.\n   * @author Eric Elter\n   * @returns {{ isValid: boolean, message: string }}\n   */\n  checkPointBetween2Points({\n    labelPt,\n    labelPt1, // Je passe par un label et pas par un pt car cela pourrait être un pointOnLine ou un PointIntersectionLL ou .....\n    labelPt2,\n  }: {\n    labelPt: string\n    labelPt1: string\n    labelPt2: string\n  }): { isValid: boolean; message: string } {\n    return checkPointBetween2Points({\n      figure: this,\n      labelPt,\n      labelPt1,\n      labelPt2,\n    })\n  }\n\n  checkAngle({\n    angle,\n    label1,\n    label2,\n    label3,\n  }: {\n    angle: number\n    label1: string\n    label2: string\n    label3: string\n  }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkAngle({ angle, figure: this, label1, label2, label3 })\n  }\n\n  checkPerpendicularBisector({\n    color,\n    label1,\n    label2,\n  }: {\n    color?: string\n    label1: string\n    label2: string\n  }) {\n    return checkPerpendicularBisector({ figure: this, label1, label2, color })\n  }\n\n  checkCircleRadius({\n    center,\n    labelCenter,\n    radius,\n  }: {\n    center: Coords\n    labelCenter?: string\n    radius: number\n  }): {\n    isValid: boolean\n    message: string\n    element?: Circle\n  } {\n    return checkCircleRadius({ center, figure: this, labelCenter, radius })\n  }\n\n  checkCoords({\n    checkOnlyAbscissa,\n    label,\n    x,\n    y,\n    color,\n  }: {\n    checkOnlyAbscissa?: boolean\n    label?: string\n    x: number\n    y?: number\n    color?: string\n  }): {\n    isValid: boolean\n    message: string\n    points: Point[]\n  } {\n    return checkCoords({ checkOnlyAbscissa, figure: this, label, x, y, color })\n  }\n\n  checkDistance({\n    distance,\n    label1,\n    label2,\n  }: {\n    distance: number\n    label1: string\n    label2: string\n  }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkDistance({ distance, figure: this, label1, label2 })\n  }\n\n  checkLine({\n    point1,\n    point2,\n    color,\n  }: {\n    point1: Coords\n    point2: Coords\n    color?: string\n  }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkLine({ figure: this, point1, point2, color })\n  }\n\n  checkSegment({\n    point1,\n    point2,\n    color,\n  }: {\n    point1: Coords\n    point2: Coords\n    color?: string\n  }): { isValid: boolean; message: string } {\n    return checkSegment({ figure: this, point1, point2, color })\n  }\n\n  checkParallel({ label1, label2 }: { label1: string; label2: string }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkParallel({ figure: this, label1, label2 })\n  }\n\n  checkPolygon({ acceptSegments, points, color }: { acceptSegments?: boolean; points: Coords[]; color?: string }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkPolygon({ figure: this, acceptSegments, points, color })\n  }\n\n  checkPolygonByLabels({\n    labels,\n    color,\n  }: {\n    labels: string[]\n    color?: string\n  }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkPolygonByLabels({ figure: this, labels, color })\n  }\n\n  checkSameDistance({ label1, label2 }: { label1: string; label2: string }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkSameDistance({ figure: this, label1, label2 })\n  }\n\n  checkRay({\n    point1,\n    point2,\n    color,\n  }: {\n    point1: Coords\n    point2: Coords\n    color?: string\n  }): {\n    isValid: boolean\n    message: string\n  } {\n    return checkRay({ figure: this, point1, point2, color })\n  }\n\n  checkVector({\n    color,\n    labelOrigin,\n    labelPoint2,\n    x,\n    xOrigin,\n    y,\n    yOrigin,\n  }: {\n    color?: string\n    labelOrigin?: string\n    labelPoint2?: string\n    x: number\n    xOrigin?: number\n    y: number\n    yOrigin?: number\n  }): { isValid: boolean; message: string; vectors: VectorByPoints[] } {\n    return checkVector({\n      color,\n      figure: this,\n      labelOrigin,\n      labelPoint2,\n      x,\n      xOrigin,\n      y,\n      yOrigin,\n    })\n  }\n\n  clearHtml(): void {\n    this.svg.innerHTML = ''\n    const style = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'style',\n    )\n    this.svg.appendChild(style)\n    style.type = 'text/css'\n    style.innerHTML = '.onlyOver:hover { opacity: 1; }'\n    this.options = { ...defaultOptions }\n  }\n\n  copy(): Figure {\n    const save = this.getJsonWithHistory()\n    const figure = new Figure()\n    figure.loadJson(JSON.parse(save))\n    if (this.elements.size !== figure.elements.size) {\n      throw new Error('Erreur lors de la copie de la figure')\n    }\n    return figure\n  }\n\n  create<T extends keyof typeof classes>(\n    typeStr: T,\n    // Les constructeurs sont de type [figure, options], donc on récupère le type des deuxièmes arguments des constructeurs\n    options?: ConstructorParameters<(typeof classes)[T]>[1],\n  ): InstanceType<(typeof classes)[T]> {\n    // @ts-expect-error Typage très complexe\n    const element = new classes[typeStr](this, { ...options })\n    if ('draw' in element) element.draw()\n    // @ts-expect-error Typage très complexe\n    return element\n  }\n\n  getContainer(): HTMLElement | null {\n    return this.container\n  }\n\n  getJsonWithHistory(): string {\n    const save = {\n      apiGeomVersion: APP_VERSION,\n      options: this.options,\n      ...Object.fromEntries(this.elements),\n      history: this.stackUndo,\n    }\n    return JSON.stringify(save, filter, 2)\n  }\n\n  /**\n   * Renvoie le premier point trouvé dans la figure avec le label donné ou null s'il n'existe pas\n   */\n  getPointByLabel(label: string): Point | null {\n    const points = [...this.elements.values()].filter(\n      (e) => e instanceof Point && e.label === label,\n    )\n    if (points.length > 0) {\n      return points[0] as Point\n    }\n    return null\n  }\n\n  /** Récupère les coordonnées du pointeur dans le repère de la figure */\n  getPointerCoord(event: PointerEvent): [number, number] {\n    event.preventDefault()\n    const rect = this.svg.getBoundingClientRect()\n    const pointerX =\n      (event.clientX - rect.x) / this.pixelsPerUnit / this.xScale / this.scale +\n      this.xMin\n    const pointerY =\n      -(event.clientY - rect.y) /\n        this.pixelsPerUnit /\n        this.yScale /\n        this.scale +\n      this.yMax\n    return [pointerX, pointerY]\n  }\n\n  /** Renvoie un string avec le code HTML et SVG de la figure */\n  getStaticHtml({ center = false }: { center?: boolean } = {}): string {\n    const currentIsDynamic = this.isDynamic\n    this.isDynamic = false\n    let result = ''\n    if (this.container.childElementCount < 5) {\n      const newContainer = document.createElement('div')\n      this.setContainer(newContainer)\n    } else {\n      this.isDynamic = currentIsDynamic\n    }\n    this.divFigure.style.display = 'block'\n    if (center) {\n      this.divFigure.style.margin = '0 auto'\n    }\n    result = this.divFigure.outerHTML\n    return result\n  }\n\n  /** Déplace le repère de la figure à l'aide des flèches */\n  handleDragAll(): void {\n    window.addEventListener('keydown', (e) => {\n      const direction = { x: 0, y: 0 }\n      const step = defaultDragAllDelta\n      if (e.key === 'ArrowLeft') {\n        direction.x = step\n      }\n      if (e.key === 'ArrowRight') {\n        direction.x = -step\n      }\n      if (e.key === 'ArrowUp') {\n        direction.y = -step\n      }\n      if (e.key === 'ArrowDown') {\n        direction.y = +step\n      }\n      // Shift + flèche => 10x plus rapide\n      if (e.shiftKey) {\n        direction.x *= 10\n        direction.y *= 10\n      }\n      if (!isModalOpen() && (direction.x !== 0 || direction.y !== 0)) {\n        e.preventDefault()\n        this.xMin += direction.x\n        this.yMin += direction.y\n        this.zoom(this.zoomLevel)\n      }\n    })\n  }\n\n  handleUndoRedoButtons(): void {\n    const btnRedo = this.buttons.get('REDO')\n    const btnUndo = this.buttons.get('UNDO')\n    if (btnRedo !== undefined) {\n      btnRedo.style.opacity = this.stackRedo.length === 0 ? '0.5' : '1'\n    }\n    if (btnUndo !== undefined) {\n      btnUndo.style.opacity = this.stackUndo.length < 2 ? '0.5' : '1'\n    }\n  }\n\n  /** Génère le code LaTeX de la figure (EE : Avec ou sans préambule */\n  latex({\n    xMax = this.xMin + this.options.latexWidth,\n    xMin = this.xMin,\n    yMax = this.yMax,\n    yMin = this.yMax - this.options.latexHeight,\n    includePreambule = true,\n  }: {\n    xMax?: number\n    xMin?: number\n    yMax?: number\n    yMin?: number\n    includePreambule?: boolean\n  } = {}): string {\n    let latex = ''\n    if (includePreambule) {\n      latex += '\\\\documentclass[french,a4paper]{article}'\n      latex += '\\n\\\\usepackage[francais]{babel}'\n      latex += '\\n\\\\usepackage[utf8]{inputenc}'\n      latex += '\\n\\\\usepackage{tkz-base}'\n      latex += '\\n\\\\usepackage{pgfplots}'\n      latex += '\\n\\\\begin{document}'\n    }\n    latex += this.tikz({ xMax, xMin, yMax, yMin })\n    if (includePreambule) latex += '\\n\\\\end{document}'\n    // ToFix Il peut y avoir un problème si un nombre est en écriture scientifique\n    latex = latex.replace(/\\d+\\.\\d+/g, (number: string) =>\n      (Math.round(1000000 * Number.parseFloat(number)) / 1000000).toString(),\n    )\n    return latex\n  }\n\n  /** Démarre les listenners sur la figure lorsqu'elle est dynamique */\n  listenPointer(): void {\n    // On créé des listenners pour envoyer les information à la machine à états this.ui\n    this.svg.addEventListener('pointerdown', (event: PointerEvent) => {\n      if (!this.isDynamic) return\n      // MGU nécessaire de le faire car sur tablette, le pointermove ne fonctionne pas\n      const [pointerX, pointerY] = this.getPointerCoord(event)\n      this.pointer.moveTo(pointerX, pointerY)\n      handlePointerAction(this, event)\n    })\n\n    const stopDrag = (): void => {\n      if (!this.isDynamic) return\n      /** MGu pour sortir de l'object sélectionné */\n      this.pointer.moveTo(Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY)\n      handleHover(this, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY)\n      if (this.inDrag !== undefined) {\n        this.inDrag = undefined\n        if (this.divFigure !== null) this.divFigure.style.cursor = 'auto'\n        this.saveState()\n      }\n    }\n    this.svg.addEventListener('pointerup', stopDrag)\n    this.svg.addEventListener('pointerleave', stopDrag)\n\n    this.svg.addEventListener('pointermove', (event) => {\n      if (!this.isDynamic) return\n      const [pointerX, pointerY] = this.getPointerCoord(event)\n      this.pointer.moveTo(pointerX, pointerY)\n      handleHover(this, pointerX, pointerY)\n      if (this.inDrag === undefined) return\n      this.inDrag.moveTo(pointerX, pointerY)\n    })\n  }\n\n  /** Exécuter tous les callbacks enregistrés avec onChange */\n  private _hasChanged(): void {\n    for (const action of this._actionsOnChange) {\n      action()\n    }\n  }\n\n  /** Efface la figure actuelle et charge une nouvelle figure à partir du code généré par this.json  */\n  loadJson(json: SaveJson, eraseHistory?: boolean): void {\n    loadJson(this, json, eraseHistory)\n  }\n\n  /** Ajoute une fonction à la liste de celles qui seront exécutées lorsque l'état de la figure est modifiée */\n  onChange(action: () => void): void {\n    this._actionsOnChange.push(action)\n  }\n\n  /** Reharge la figure stockée redoStack   */\n  redo(): void {\n    const lastRedo = this.stackRedo.at(-1)\n    if (lastRedo !== undefined) {\n      this.stackUndo.push(lastRedo)\n      this.stackRedo.pop()\n      this.loadJson(JSON.parse(lastRedo))\n      this.handleUndoRedoButtons()\n    }\n    this._hasChanged()\n  }\n\n  restart(level = 1): void {\n    if (this.stackUndo.length === 0) return\n    const stop = Number.isInteger(level) && level > 1 ? level : 1\n    while (this.stackUndo.length > stop) {\n      const lastUndo = this.stackUndo.at(-2)\n      if (lastUndo !== undefined) {\n        this.stackRedo.push(this.stackUndo.at(-1) as string)\n        this.stackUndo.pop()\n        if (this.stackUndo.length + 1 === stop) {\n          // chargement une seule fois au moins...\n          this.loadJson(JSON.parse(lastUndo))\n          this.handleUndoRedoButtons()\n        }\n      }\n    }\n    this._hasChanged()\n  }\n\n  /**  - Sauvegarde la figure\n   *   - Met à jour l'historique et l'inscrit dans le div this.divSave\n   *   - Réinitialise les éléments temporaires */\n  saveState(): void {\n    const save = this.json\n    if (isLocalStorageAvailable())\n      // Sauvegarde dans le localStorage\n      localStorage.setItem('apiGeom', save)\n    if (this.divSave !== null) {\n      this.divSave.textContent = save\n    }\n    this.stackUndo.push(save)\n    this.stackRedo = []\n    if (this.stackUndo.length > defaultHistorySize)\n      this.stackUndo = this.stackUndo.slice(-defaultHistorySize)\n    this.handleUndoRedoButtons()\n    for (const e of this.tmpElements) {\n      e.remove()\n    }\n    this.tmpElements = []\n    this.selectedElements = []\n    this._hasChanged()\n  }\n\n  setContainer(parentContainer: HTMLElement): void {\n    if (!(parentContainer instanceof HTMLElement))\n      throw Error('grandParentContainer doit être un HTMLElement')\n    parentContainer.appendChild(this.container)\n    this.divFigure.style.position = 'relative'\n    // this.container.style.overflow = 'hidden'\n    this.divFigure.style.display = 'inline-block'\n    this.divFigure.style.margin = '0'\n    this.divFigure.style.padding = '0'\n    this.divFigure.style.boxSizing = 'border-box'\n    this.divFigure.style.border = 'none'\n    // Si this.divButtons est vide\n    if (this.divButtons.childElementCount === 0 && this.isDynamic) {\n      this.setToolbar()\n    }\n    this.adjustSize()\n  }\n\n  setToolbar({\n    nbCols,\n    position = 'left',\n    showStyles,\n    tools,\n  }: {\n    nbCols?: number\n    position?: 'left' | 'top' | 'none'\n    showStyles?: boolean\n    tools?: availableButtons[]\n  } = {}): void {\n    setToolbar(this, { nbCols, position, showStyles, tools })\n  }\n\n  async shake({\n    delta = 3,\n    repeat = 5,\n    time = 1,\n  }: {\n    delta?: number\n    repeat?: number\n    time?: number\n  } = {}): Promise<void> {\n    await shake({ delta, figure: this, repeat, time })\n  }\n\n  /** Abscisse du SVG converti dans nos coordonnées */\n  sxTox(x: number): number {\n    return x / this.pixelsPerUnit / this.xScale / this.scale\n  }\n\n  /** Abscisse du SVG converti dans nos coordonnées */\n  syToy(y: number): number {\n    return -y / this.pixelsPerUnit / this.yScale / this.scale\n  }\n\n  tempCreate(\n    typeStr: string,\n    options?: ConstructorParameters<(typeof classes)[keyof typeof classes]>[1],\n  ): Element2D {\n    // @ts-expect-error Typage très complexe\n    const element = this.create(typeStr, {\n      isChild: true,\n      isSelectable: false,\n      ...options,\n    }) as Element2D\n    element.color = this.options.tmpColor\n    element.thickness = this.options.tmpThickness\n    if ('isDashed' in element && !(element instanceof Point))\n      element.isDashed = this.options.tmpIsDashed\n    if ('fillColor' in element) element.fillColor = this.options.tmpFillColor\n    if ('fillOpacity' in element)\n      element.fillOpacity = this.options.tmpFillOpacity\n    this.tmpElements.push(element)\n    return element\n  }\n\n  /** Génère le code TikZ de la figure */\n  tikz({\n    xMax = Math.min(this.xMax, this.xMin + this.options.latexWidth),\n    xMin = this.xMin,\n    yMax = this.yMax,\n    yMin = Math.max(this.yMin, this.yMax - this.options.latexHeight),\n    anchor = 'north',\n  }: {\n    xMax?: number\n    xMin?: number\n    yMax?: number\n    yMin?: number\n    anchor?: 'north' | 'south' | 'east' | 'west' | 'center' | 'mid' | 'base'\n  } = {}): string {\n    const stringScale = this.scale !== 1 ? `, scale=${this.scale}` : ''\n    const xScale = this.xScale !== 1 ? `, xScale=${this.xScale}` : ''\n    const yScale = this.yScale !== 1 ? `, yScale=${this.yScale}` : ''\n    let tikz = `\\n\\\\begin{tikzpicture}[baseline={(current bounding box.${anchor})}${stringScale}${xScale}${yScale}]`\n    tikz += `\\n\\\\clip(${xMin}, ${yMin}) rectangle (${xMax}, ${yMax});`\n    for (const element of this.elements.values()) {\n      if (\n        element instanceof Element2D &&\n        element.latex !== undefined &&\n        element.latex !== '' &&\n        element.isVisible &&\n        element.color !== '' &&\n        element.color !== 'none'\n      ) {\n        tikz += `\\n${element.latex}`\n      }\n    }\n    tikz += '\\n\\\\end{tikzpicture}'\n    // ToFix Il peut y avoir un problème si un nombre est en écriture scientifique\n    tikz = tikz.replace(/\\d+\\.\\d+/g, (number: string) =>\n      (Math.round(1000000 * Number.parseFloat(number)) / 1000000).toString(),\n    )\n    return tikz\n  }\n\n  /** Charge la figure stockée dans stackUndo */\n  undo(): void {\n    const lastUndo = this.stackUndo.at(-2)\n    if (lastUndo !== undefined) {\n      this.stackRedo.push(this.stackUndo.at(-1) as string)\n      this.stackUndo.pop()\n      this.loadJson(JSON.parse(lastUndo))\n      this.handleUndoRedoButtons()\n    }\n    this._hasChanged()\n  }\n\n  async wait(milliseconds = 1500): Promise<void> {\n    await new Promise((resolve) => {\n      setTimeout(resolve, milliseconds)\n    })\n  }\n\n  /** Abscisse dans nos coordonnées converti en abscisse du SVG */\n  xToSx(x: number): number {\n    return x * this.pixelsPerUnit * this.xScale * this.scale\n  }\n\n  /** Abscisse dans nos coordonnées converti en abscisse du SVG */\n  yToSy(y: number): number {\n    return -y * this.pixelsPerUnit * this.yScale * this.scale\n  }\n\n  zoom(\n    factor: number,\n    {\n      changeWidth = true,\n      changeHeight = true,\n      changeLeft = true,\n      changeBottom = true,\n    } = {},\n  ): void {\n    if (factor <= 0) return\n    if (changeWidth) this.width = this.initial.width * factor\n    if (changeHeight) this.height = this.initial.height * factor\n    this.scale = this.initial.scale * factor\n    if (changeLeft) this.xMin = this.initial.xMin / factor\n    if (changeBottom) this.yMin = this.initial.yMin / factor\n    this.adjustSize()\n    const json = this.getJsonWithHistory()\n    const options = this.options\n    this.loadJson(JSON.parse(json), false)\n    this.options = options\n  }\n\n  get htmlDescription(): HTMLUListElement {\n    const ul = document.createElement('ul')\n    ul.style.lineHeight = '2'\n    for (const element of this.elements.values()) {\n      if ('description' in element && !element.isChild) {\n        const li = document.createElement('li')\n        li.textContent = element.description\n        ul.appendChild(li)\n      }\n    }\n    return ul\n  }\n\n  /** Génère le code JSON de la figure qui permettra de la recharger */\n  get json(): string {\n    // Le JSON est personnalisé avec la méthode toJSON() des éléments\n    const save = {\n      apiGeomVersion: APP_VERSION,\n      options: this.options,\n      ...Object.fromEntries(this.elements),\n    }\n    return JSON.stringify(save, filter, 2)\n  }\n\n  get scale(): number {\n    return this._scale\n  }\n\n  set scale(scale: number) {\n    this._scale = scale\n    this.adjustSize()\n  }\n\n  get userMessage(): string {\n    return this.divUserMessage.textContent ?? ''\n  }\n\n  set userMessage(message: string) {\n    this.divUserMessage.textContent = message\n    renderMathInElement(this.divUserMessage, {\n      delimiters: [\n        { display: true, left: '\\\\[', right: '\\\\]' },\n        { display: false, left: '$', right: '$' },\n      ],\n      errorColor: '#CC0000',\n      preProcess: (chaine: string) =>\n        chaine.replaceAll(String.fromCharCode(160), '\\\\,'),\n      strict: 'warn',\n      throwOnError: true,\n      trust: false,\n    })\n  }\n}\n\nconst classes = {\n  Angle,\n  Arc,\n  ArcBy3PointsAndRadius,\n  ArcByCenterRadiusAndAngles,\n  Barycenter,\n  BisectorByPoints,\n  Circle,\n  CircleCenterDynamicRadius,\n  CircleCenterPoint,\n  CircleFractionDiagram,\n  Distance,\n  DynamicCalcul,\n  DynamicX,\n  DynamicY,\n  GraduatedLine,\n  Graph,\n  Graph2,\n  GraphByParts,\n  Grid,\n  Line,\n  LineByPointVector,\n  LineFractionDiagram,\n  RectangleFractionDiagram,\n  LineParallel,\n  LinePerpendicular,\n  MarkBetweenPoints,\n  MarkRightAngle,\n  Middle,\n  PerpendicularBisector,\n  PerpendicularBisectorByPoints,\n  Point,\n  PointByProjection,\n  PointByProjectionOnAxisX,\n  PointByProjectionOnAxisY,\n  PointIntersectionCC,\n  PointIntersectionLC,\n  PointIntersectionLL,\n  PointOnCircle,\n  PointOnGraph,\n  PointOnLine,\n  PointOnPolyline,\n  PointOnLineAtDistance,\n  PointsIntersectionCC,\n  PointsIntersectionLC,\n  Polygon,\n  Polyline,\n  Ray,\n  Segment,\n  TextByPoint,\n  TextByPosition,\n  TextDynamicByPosition,\n  Vector,\n  VectorByPoints,\n  VectorPerpendicular,\n}\n\nexport default Figure\n\nfunction filter(key: string, value: Element2D): Element2D | undefined {\n  if (value?.isChild) {\n    return undefined\n  }\n  if (key === 'isChild') {\n    return undefined\n  }\n  return value\n}\n\nfunction isModalOpen(): boolean {\n  const dialogs = Array.from(document.querySelectorAll('dialog'))\n  return dialogs.some((modal) => {\n    if (modal.open) {\n      return true\n    }\n    return false\n  })\n}\n","import renderMathInElement from 'katex/dist/contrib/auto-render.js'\n\nimport type Figure from '../Figure'\nimport { isLocalStorageAvailable } from '../lib/storage'\n\nexport function createDialoxBoxRadius(figure: Figure): HTMLDialogElement {\n  let dialog = document.querySelector('dialog')\n  if (dialog != null) {\n    dialog.remove()\n  }\n  dialog = document.createElement('dialog')\n  dialog.style.border = '1px solid black'\n  dialog.style.backgroundColor = 'white'\n  dialog.style.padding = '20px'\n  const label = document.createElement('label')\n  label.innerHTML = 'Rayon : '\n  const input = document.createElement('input')\n  input.type = 'text'\n  input.style.marginLeft = '10px'\n  const button = document.createElement('button')\n  button.innerHTML = 'Valider'\n  button.style.marginLeft = '10px'\n  dialog.appendChild(label)\n  dialog.appendChild(input)\n  dialog.appendChild(button)\n  document.body.appendChild(dialog)\n  dialog.addEventListener('close', () => {\n    if (figure.ui != null) {\n      if (input.value.match(/[a-zA-Z]/)) {\n        figure.ui.send('RADIUS', { radius: input.value })\n      } else {\n        figure.ui.send('RADIUS', {\n          radius: String(Number(input.value.replace(',', '.'))),\n        })\n      }\n    }\n  })\n  button.addEventListener('click', () => {\n    dialog.close()\n  })\n  input.addEventListener('keydown', (e) => {\n    if (e.key === 'Enter' || e.key === 'Escape') {\n      e.preventDefault()\n      dialog.close()\n    } else if (e.key === '.') {\n      e.preventDefault()\n      input.value += ','\n    }\n  })\n  return dialog\n}\n\nexport function createDialoxBoxK(figure: Figure): HTMLDialogElement {\n  const dialog = document.createElement('dialog')\n  dialog.style.border = '1px solid black'\n  dialog.style.backgroundColor = 'white'\n  dialog.style.padding = '20px'\n  const label = document.createElement('label')\n  label.innerHTML = \"Coefficient de l'homothétie : \"\n  const input = document.createElement('input')\n  input.type = 'number'\n  input.min = '-10'\n  input.max = '10'\n  input.value = '2'\n  input.style.marginLeft = '10px'\n  const button = document.createElement('button')\n  button.innerHTML = 'Valider'\n  button.style.marginLeft = '10px'\n  dialog.appendChild(label)\n  dialog.appendChild(input)\n  dialog.appendChild(button)\n  document.body.appendChild(dialog)\n  dialog.addEventListener('close', () => {\n    if (figure.ui != null) {\n      figure.ui.send('DILATE_COEF', { coefficient: Number(input.value) })\n    }\n  })\n  button.addEventListener('click', () => {\n    dialog.close()\n  })\n  input.addEventListener('keyup', (e) => {\n    if (e.key === 'Enter' || e.key === 'Escape') {\n      e.preventDefault()\n      dialog.close()\n    }\n  })\n  return dialog\n}\n\nexport function createDialoxBoxName(figure: Figure): HTMLDialogElement {\n  const dialog = document.createElement('dialog')\n  dialog.style.border = '1px solid black'\n  dialog.style.backgroundColor = 'white'\n  dialog.style.padding = '20px'\n  const label = document.createElement('label')\n  // Si le label est \"Nom du point\" alors Safari propose de l'autocomplétion même si on a mis autocomplete=\"off\"\n  // Hack : on met un nom contenant search pour bloquer l'autocompletion\n  label.innerHTML = 'Nom du point'\n  const input = document.createElement('input')\n  input.type = 'text'\n  input.name = 'search'\n  input.style.marginLeft = '10px'\n  input.setAttribute('autocomplete', 'off')\n  input.setAttribute('spellcheck', 'false')\n  input.setAttribute('autocorrect', 'off')\n  input.setAttribute('autocapitalize', 'none')\n\n  const button = document.createElement('button')\n  button.innerHTML = 'Valider'\n  button.style.marginLeft = '10px'\n  dialog.appendChild(label)\n  dialog.appendChild(input)\n  dialog.appendChild(button)\n  document.body.appendChild(dialog)\n  dialog.addEventListener('close', () => {\n    if (figure.ui != null) {\n      figure.ui.send('TEXT_FROM_DIALOG', { text: input.value })\n    }\n  })\n  button.addEventListener('click', () => {\n    dialog.close()\n  })\n  input.addEventListener('keyup', (e) => {\n    if (e.key === 'Enter' || e.key === 'Escape') {\n      e.preventDefault()\n      dialog.close()\n    }\n  })\n  return dialog\n}\n\nexport function createDialoxBoxAngle(figure: Figure): HTMLDialogElement {\n  const dialog = document.createElement('dialog')\n  dialog.style.border = '1px solid black'\n  dialog.style.backgroundColor = 'white'\n  dialog.style.padding = '20px'\n  const label = document.createElement('label')\n  label.innerHTML = 'Angle (en degrés) : '\n  const input = document.createElement('input')\n  input.type = 'number'\n  input.style.marginLeft = '10px'\n  input.value = '90'\n  const choice = document.createElement('select')\n  choice.style.marginLeft = '10px'\n  choice.innerHTML =\n    '<option value=\"-1\">Sens horaire</option><option value=\"1\">Sens anti-horaire</option>'\n  const button = document.createElement('button')\n  button.innerHTML = 'Valider'\n  button.style.marginLeft = '10px'\n  dialog.appendChild(label)\n  dialog.appendChild(input)\n  dialog.appendChild(choice)\n  dialog.appendChild(button)\n  document.body.appendChild(dialog)\n  dialog.addEventListener('close', () => {\n    const angle = Number(input.value) * Number.parseInt(choice.value)\n    if (figure.ui != null) {\n      figure.ui.send('ANGLE', { angle })\n    }\n  })\n  button.addEventListener('click', () => {\n    dialog.close()\n  })\n  input.addEventListener('keyup', (e) => {\n    if (e.key === 'Enter' || e.key === 'Escape') {\n      e.preventDefault()\n      dialog.close()\n    }\n  })\n  return dialog\n}\n\nexport function createDialogBoxLoadAuto(figure: Figure): HTMLDialogElement {\n  const dialog = document.createElement('dialog')\n  dialog.style.border = '1px solid black'\n  dialog.style.backgroundColor = 'white'\n  dialog.style.padding = '20px'\n  const label = document.createElement('label')\n  label.innerHTML = 'Souhaitez-vous charger la dernière construction ?'\n  const buttonCancel = document.createElement('button')\n  buttonCancel.innerHTML = 'Non'\n  const button = document.createElement('button')\n  button.innerHTML = 'Oui'\n  button.style.marginLeft = '10px'\n  button.style.marginRight = '10px'\n  dialog.appendChild(label)\n  dialog.appendChild(button)\n  dialog.appendChild(buttonCancel)\n  document.body.appendChild(dialog)\n  button.addEventListener('click', () => {\n    if (isLocalStorageAvailable()) {\n      const figureInLocalStorage = localStorage.getItem('apiGeom')\n      if (figureInLocalStorage !== null) {\n        figure.loadJson(JSON.parse(figureInLocalStorage))\n      }\n    }\n    dialog.close()\n  })\n  buttonCancel.addEventListener('click', () => {\n    dialog.close()\n  })\n  dialog.addEventListener('keyup', (e) => {\n    if (e.key === 'Enter' || e.key === 'Escape') {\n      e.preventDefault()\n      dialog.close()\n    }\n  })\n  return dialog\n}\n\nexport function createModalDescription(figure: Figure): HTMLDialogElement {\n  const dialog = document.createElement('dialog')\n  dialog.id = 'dialog'\n  dialog.style.position = 'absolute'\n  dialog.style.top = '0'\n  dialog.style.left = '0'\n  dialog.style.width = '50%'\n  dialog.style.height = '90%'\n  dialog.style.border = 'none'\n  dialog.style.background = 'white'\n  dialog.style.zIndex = '100'\n  dialog.appendChild(figure.htmlDescription)\n  renderMathInElement(dialog, {\n    delimiters: [\n      { display: true, left: '\\\\[', right: '\\\\]' },\n      { display: false, left: '$', right: '$' },\n    ],\n    errorColor: '#CC0000',\n    preProcess: (chaine: string) =>\n      chaine.replaceAll(String.fromCharCode(160), '\\\\,'),\n    strict: 'warn',\n    throwOnError: true,\n    trust: false,\n  })\n  dialog.addEventListener('click', () => {\n    dialog.close()\n  })\n  document.body.appendChild(dialog)\n  dialog.showModal()\n  return dialog\n}\n","import type Figure from '../Figure'\n\nexport default function selectionRectangle(figure: Figure): HTMLDivElement {\n  const div = document.createElement('div')\n  div.style.position = 'absolute'\n  div.style.top = '0'\n  div.style.left = '0'\n  div.style.border = '1px solid black'\n  div.style.backgroundColor = 'rgba(0, 0, 0, 0.1)'\n  div.style.pointerEvents = 'none'\n  div.style.zIndex = '1000'\n  const buttonSvg = document.createElement('button')\n  buttonSvg.style.position = 'absolute'\n  buttonSvg.style.border = '1px solid black'\n  buttonSvg.style.pointerEvents = 'auto'\n  buttonSvg.style.zIndex = '1001'\n  buttonSvg.innerHTML = 'SVG'\n  const buttonLatex = document.createElement('button')\n  buttonLatex.style.position = 'absolute'\n  buttonLatex.style.border = '1px solid black'\n  buttonLatex.style.pointerEvents = 'auto'\n  buttonLatex.style.zIndex = '1001'\n  buttonLatex.innerHTML = 'LaTeX'\n  buttonLatex.style.top = '50px'\n  buttonLatex.style.right = '10%'\n  buttonLatex.style.cursor = 'pointer'\n  buttonSvg.style.cursor = 'pointer'\n  buttonLatex.style.backgroundColor = 'white'\n  buttonSvg.style.backgroundColor = 'white'\n  buttonLatex.style.boxShadow = '0px 0px 5px 0px rgba(0,0,0,0.75)'\n  buttonSvg.style.boxShadow = '0px 0px 5px 0px rgba(0,0,0,0.75)'\n  const container = figure.divFigure\n  const rectangleContainer = container.getBoundingClientRect()\n  const containerLeft = rectangleContainer.left\n  const containerTop = rectangleContainer.top\n  container.appendChild(div)\n  div.appendChild(buttonSvg)\n  div.appendChild(buttonLatex)\n  buttonSvg.style.top = '100px'\n  buttonSvg.style.right = '10%'\n  buttonSvg.style.cursor = 'pointer'\n  div.style.width = `${figure.divFigure.clientWidth - 100}px`\n  div.style.height = `${figure.divFigure.clientHeight - 200}px`\n  let isNearCorner = false\n  let isNearLeftCorner = false\n  let isNearRightCorner = false\n  let isNearTopCorner = false\n  let isNearBottomCorner = false\n  let isNearTopLeftCorner = false\n  let isNearTopRightCorner = false\n  let isNearBottomLeftCorner = false\n  let isNearBottomRightCorner = false\n  window.addEventListener('mousemove', (event) => {\n    const rect = div.getBoundingClientRect()\n    const x = event.clientX\n    const y = event.clientY\n    container.style.cursor = 'default'\n    if (Math.abs(x - rect.left) < 10) {\n      isNearLeftCorner = true\n      container.style.cursor = 'ew-resize'\n    } else if (Math.abs(x - rect.right) < 10) {\n      isNearRightCorner = true\n      container.style.cursor = 'ew-resize'\n    } else {\n      isNearLeftCorner = false\n      isNearRightCorner = false\n    }\n    if (Math.abs(y - rect.top) < 10) {\n      isNearTopCorner = true\n      container.style.cursor = 'n-resize'\n    } else if (Math.abs(y - rect.bottom) < 10) {\n      isNearBottomCorner = true\n      container.style.cursor = 's-resize'\n    } else {\n      isNearTopCorner = false\n      isNearBottomCorner = false\n    }\n    if (isNearLeftCorner && isNearTopCorner) {\n      isNearTopLeftCorner = true\n      container.style.cursor = 'nw-resize'\n    } else if (isNearRightCorner && isNearTopCorner) {\n      isNearTopRightCorner = true\n      container.style.cursor = 'ne-resize'\n    } else if (isNearLeftCorner && isNearBottomCorner) {\n      isNearBottomLeftCorner = true\n      container.style.cursor = 'sw-resize'\n    } else if (isNearRightCorner && isNearBottomCorner) {\n      isNearBottomRightCorner = true\n      container.style.cursor = 'se-resize'\n    } else {\n      isNearTopLeftCorner = false\n      isNearTopRightCorner = false\n      isNearBottomLeftCorner = false\n      isNearBottomRightCorner = false\n    }\n    isNearCorner =\n      isNearLeftCorner ||\n      isNearRightCorner ||\n      isNearTopCorner ||\n      isNearBottomCorner ||\n      isNearTopLeftCorner ||\n      isNearTopRightCorner ||\n      isNearBottomLeftCorner ||\n      isNearBottomRightCorner\n  })\n\n  window.addEventListener('pointerdown', () => {\n    if (isNearCorner) {\n      const rect = div.getBoundingClientRect()\n      const width = rect.width\n      const height = rect.height\n      const left = rect.left\n      const top = rect.top\n      const resize = (event: MouseEvent): void => {\n        const dx = event.clientX - left\n        const dy = event.clientY - top\n        if (isNearLeftCorner) {\n          div.style.left = `${left + dx - containerLeft}px`\n          div.style.width = `${width - dx}px`\n        } else if (isNearRightCorner) {\n          div.style.width = `${dx}px`\n        }\n        if (isNearTopCorner) {\n          div.style.top = `${top + dy - containerTop}px`\n          div.style.height = `${height - dy}px`\n        } else if (isNearBottomCorner) {\n          div.style.height = `${dy}px`\n        }\n        if (isNearTopLeftCorner) {\n          div.style.left = `${left + dx - containerLeft}px`\n          div.style.width = `${width - dx}px`\n          div.style.top = `${top + dy}px`\n          div.style.height = `${height - dy}px`\n        } else if (isNearTopRightCorner) {\n          div.style.width = `${dx}px`\n          div.style.top = `${top + dy}px`\n          div.style.height = `${height - dy}px`\n        } else if (isNearBottomLeftCorner) {\n          div.style.left = `${left + dx - containerLeft}px`\n          div.style.width = `${width - dx}px`\n          div.style.height = `${dy}px`\n        } else if (isNearBottomRightCorner) {\n          div.style.width = `${dx}px`\n          div.style.height = `${dy}px`\n        }\n      }\n      const stopResize = (): void => {\n        window.removeEventListener('pointermove', resize)\n        window.removeEventListener('pointerup', stopResize)\n      }\n      window.addEventListener('pointermove', resize)\n      window.addEventListener('pointerup', stopResize)\n    }\n  })\n\n  buttonSvg.addEventListener('click', () => {\n    const rect = div.getBoundingClientRect()\n    const xMin = rect.left - containerLeft\n    const yMax = rect.top - containerTop\n    const width = rect.width\n    const height = rect.height\n    figure.ui?.send('SELECTION_AREA_TO_SVG', { height, width, xMin, yMax })\n  })\n\n  buttonLatex.addEventListener('click', () => {\n    const rect = div.getBoundingClientRect()\n    const xMin = rect.left - containerLeft\n    const yMax = rect.top - containerTop\n    const width = rect.width\n    const height = rect.height\n    figure.ui?.send('SELECTION_AREA_TO_LATEX', { height, width, xMin, yMax })\n  })\n\n  return div\n}\n","/* eslint-disable @typescript-eslint/no-misused-promises */\nimport { type AnyEventObject, createMachine } from 'xstate'\nimport { distance } from './elements/calculus/Coords'\nimport Graph from './elements/calculus/Graph'\nimport {\n  defaultZoomInFactor,\n  defaultZoomOutFactor,\n  orangeMathaleaLight,\n} from './elements/defaultValues'\nimport Element2D from './elements/Element2D'\nimport type Grid from './elements/grid/Grid'\nimport Arc from './elements/lines/Arc'\nimport Circle from './elements/lines/Circle'\nimport Polygon from './elements/lines/Polygon'\nimport Segment from './elements/lines/Segment'\nimport Point from './elements/points/Point'\nimport type Figure from './Figure'\nimport {\n  createDialoxBoxAngle,\n  createDialoxBoxK,\n  createDialoxBoxName,\n  createDialoxBoxRadius,\n  createModalDescription,\n} from './userInterface/handleDialog'\nimport selectionRectangle from './userInterface/selectionRectangle'\n\ninterface MyContext {\n  figure: Figure\n}\n\nexport type eventName =\n  | 'ANGLE'\n  | 'BISSECTOR_BY_POINTS'\n  | 'CIRCLE_CENTER_POINT'\n  | 'CIRCLE_RADIUS'\n  | 'clickLocation'\n  | 'COLOR'\n  | 'DESCRIPTION'\n  | 'DILATE_COEF'\n  | 'DILATE'\n  | 'DISC_CENTER_POINT'\n  | 'DISC_RADIUS'\n  | 'DOWNLOAD_LATEX_SVG'\n  | 'DRAG'\n  | 'FILL'\n  | 'GRID'\n  | 'HIDE'\n  | 'INFORMATIONS'\n  | 'INIT'\n  | 'LATEX'\n  | 'LINE_PARALLEL'\n  | 'LINE_PERPENDICULAR'\n  | 'LINE'\n  | 'MARK_BETWEEN_POINTS'\n  | 'MIDDLE'\n  | 'MOVE_LABEL'\n  | 'NAME_POINT'\n  | 'OPEN'\n  | 'PAUSE'\n  | 'PERPENDICULAR_BISECTOR'\n  | 'PLAY_SKIP_BACK'\n  | 'PLAY_SKIP_FORWARD'\n  | 'PLAY'\n  | 'POINT_INTERSECTION'\n  | 'POINT_ON'\n  | 'POINT'\n  | 'POLYGON'\n  | 'RADIUS'\n  | 'RAY'\n  | 'REDO'\n  | 'REFLECTION_OVER_LINE'\n  | 'REFLECTION'\n  | 'REMOVE'\n  | 'RESTART'\n  | 'ROTATE'\n  | 'SAVE'\n  | 'SEGMENT'\n  | 'SELECTION_AREA_TO_LATEX'\n  | 'SELECTION_AREA_TO_SVG'\n  | 'SET_OPTIONS'\n  | 'SHAKE'\n  | 'TEXT_FROM_DIALOG'\n  | 'TRANSLATION'\n  | 'UNDO'\n  | 'VECTOR'\n  | 'ZOOM_IN'\n  | 'ZOOM_OUT'\n\nexport type eventOptions =\n  | { angle: number }\n  | { coefficient: number }\n  | {\n      element?: Element2D\n      possibleElements?: Element2D[]\n      waitingWithModal: boolean\n      x: number\n      y: number\n    }\n  | { height: number; width: number; xMin: number; yMax: number }\n  | { radius: string }\n  | { text: string }\n  | { text: string }\n\ninterface MyEvent extends AnyEventObject {\n  element?: Element2D\n  text?: string\n  waitingWithModal?: boolean\n  x?: number\n  y?: number\n}\n\ninterface Context {\n  figure: Figure\n  intervalId?: ReturnType<typeof setInterval>\n  temp: {\n    elements: Element2D[]\n    htmlElement: HTMLElement[]\n    values: number[]\n  }\n}\n\nconst ui = createMachine<Context>(\n  {\n    /* eslint-disable-next-line @typescript-eslint/consistent-type-assertions */\n    context: {\n      figure: {} as Figure,\n      temp: { elements: [], htmlElement: [], values: [] },\n    },\n    entry: ['highlightButton', 'eraseTempElements', 'eraseUserMessage'],\n    id: 'apiGeomUI',\n    initial: 'INIT',\n    on: {\n      BISECTOR_BY_POINTS: 'BISECTOR_BY_POINTS',\n      CIRCLE_CENTER_POINT: 'CIRCLE_CENTER_POINT',\n      CIRCLE_RADIUS: 'CIRCLE_RADIUS',\n      COLOR: 'COLOR',\n      DESCRIPTION: 'DESCRIPTION',\n      DILATE: 'DILATE',\n      DISC_CENTER_POINT: 'DISC_CENTER_POINT',\n      DISC_RADIUS: 'DISC_RADIUS',\n      DOWNLOAD_LATEX_SVG: 'DOWNLOAD_LATEX_SVG',\n      DRAG: 'DRAG',\n      FILL: 'FILL',\n      GRID: 'GRID',\n      HIDE: 'HIDE',\n      INFORMATIONS: 'INFORMATIONS',\n      LATEX: 'LATEX',\n      LINE: 'LINE',\n      LINE_PARALLEL: 'LINE_PARALLEL',\n      LINE_PERPENDICULAR: 'LINE_PERPENDICULAR',\n      MARK_BETWEEN_POINTS: 'MARK_BETWEEN_POINTS',\n      MIDDLE: 'MIDDLE',\n      MOVE_LABEL: 'MOVE_LABEL',\n      NAME_POINT: 'NAME_POINT',\n      OPEN: 'OPEN',\n      PAUSE: 'PAUSE',\n      PERPENDICULAR_BISECTOR: 'PERPENDICULAR_BISECTOR',\n      PLAY: 'PLAY',\n      PLAY_SKIP_BACK: 'PLAY_SKIP_BACK',\n      PLAY_SKIP_FORWARD: 'PLAY_SKIP_FORWARD',\n      POINT: 'POINT',\n      POINT_INTERSECTION: 'POINT_INTERSECTION',\n      POINT_ON: 'POINT_ON',\n      POLYGON: 'POLYGON',\n      RAY: 'RAY',\n      REDO: 'REDO',\n      REFLECTION: 'REFLECTION',\n      REFLECTION_OVER_LINE: 'REFLECTION_OVER_LINE',\n      REMOVE: 'REMOVE',\n      RESTART: 'RESTART',\n      ROTATE: 'ROTATE',\n      SAVE: 'SAVE',\n      SEGMENT: 'SEGMENT',\n      SET_OPTIONS: 'SET_OPTIONS',\n      SHAKE: 'SHAKE',\n      TRANSLATION: 'TRANSLATION',\n      UNDO: 'UNDO',\n      VECTOR: 'VECTOR',\n      ZOOM_IN: 'ZOOM_IN',\n      ZOOM_OUT: 'ZOOM_OUT',\n    },\n    /** @xstate-layout N4IgpgJg5mDOIC5QEMAOBLA4mA9gWwFUBJAYgAUB5IgOQBUBtABgF1FRUdZ0AXdHAOzYgAHogAsAJgA0IAJ7iAjBIB0CgMwB2BQA4NAVgC+BmWiy5CpADI0Aok1ZIQHLrwFDRCSTPkINYxsoSemKahsYgptj4xCQAyjaYALI2dPZCzjx8go4eXnKICowAbEXKYoVFQUYmGFEWJAAiAEoAgphpjhmu2aC50vkI6kV6ysOMEozaatMzEtURteYxZDZNK9QNRADCBJYtTR3snJluOeL9PgpF46piYTVm0aRk+y2WljaWh07H3e7n3gKAE5GGJlNpGEp7gtHvVKJYAJqYCjUb5dLL-TwXRASCRA0qaIGheaRJakLZEJpbD5o34Ys5YwEIIISUraCTlEpcrnaEmLJ4kLYUSwUA4sdJ0069AEDCQaNQBEG4oFXblFXnhUkClZrFKbHZ7JoAfQAQkRYvEtrRRbSXPTpYzZUSwUCIZy1eq+bCYjRaKtLbQiCjbSceiIZT41KyFKo1B7uRqHnVllQ6Ebg+LOpKw30mQoVcpIWINCr4xovcmiMpmm0SABjAA26DrAGtLDg68huiG-gy1HoRkENNooXmORoytpdNCtRZlJRfcoAO7ITL8KAAMRwACd253uvWm62912sj37eHmYxB9oQZU9Ez-CNGK6oRWycp4kkUrRl6veOuW7bhu6DbrA3A2A2YB4GA-DcIezZth2p4COeUqXiEKhiNoIT6HmCiFMoKrFFUmr8nOX7JHQf5rpuO6xGAdYCBAkHQbB8GNohJ7dpmRx2uhuRRpOuEPgMhQKGC0ykUmH4UlSHw0QBdHbls7FgNuCHHshPEOHxoaYpoMZ3Goo6ynoWjKFG7oeomMKVsocnUjYinoIBO5kDgrkcUeSH7mevE-PxOaIIZZR6CZQRMuOYJ+Nc1k8u+TzKNY1DOSutFASBYEQVBMFwZpvkofwaHBQgahAioI6RQMELaIEwTEmR3pVilaX-q5ykMUx-Asbl7EFdx-m6YF+l9hV4KmT4WgxkUGj3olc46us+q7PsLlucBoHgaxeXeVx2lDRKQWYthYISDoeFiUUYilNdM7kcQ86rMt2yrU062dYxzE7f1nFaX5qEBeiAniDhgQXaJlwDgExTqvoC2PS8rTvJ8H2ZVtOVsflf2FTpR2jQ6ISSSJeZAmIQKWZC0l2R+SNvB8lho-RX09T92M+YNgPDcDpVE5ZJNidoegqBoEgRfdzVPbqGyvYaprmgGopM5t2Vs3t-1FSVmLmaUKr+PeUVAiWk6gqqaq2bOiPPXqsv7PLFo2FaSvpUpQFdd9fXs-tAPFUD2aYtdahEXNegG7KU4qEqeJmwlTX2fCSIonE1pkAnyKon7x0MhMpTmVVkM4hIUzgiWjUyUlacosork8CQWsMgOMYh2HPjncbuhEvDce08KifUB9asDQdXP472DpTDFagC63Vx1VcJYx7H5eLb36cD576u42eCjc-7Dd6E3wwt4XegBCWcWL8MCNVpX-exCnt915nBOXo3yjN9VrcKjGeIXx6Ev2V9P6R2gYq4uw6ujVWG8h4+3roTIoFNyokQLmVKMFMhjxhKBbB6VYgFNADEGfu4CNru1ZtAnGnNfa7yzvAxBd5P4hTFioAcQt4pYOvvOVMtB0zUBgZrZ+Y9Lz9kHHnSaiARzKGFkYcI-AcAQDgEIS2RBR4Xg8AAWiKEyNRIxXSMD0fogxeixAcJrJgFRINBg3SIudaceYp4U1htODhC46DmNKuoOe+sGHMg0AEPQr5qZKM4YuYhylKFuMxDoUoElkFMlPrdOagScGfgSFRWgESGQKH8aMKM+cmQVTZFGABH5KI-mVllbaG8MkOgmBOIouSxGDHGBOYc7Jo5qnLN3JKpTqKhLdizXqWNuDVNfiCVQ3jCgKkCBHdp3JOnL0eo5D4IyPAxMpjdWxso1C6ECDdU2NkOFLLahlHcqk4LqRWQUKc6y4YoI5NciYCgNC+KmDMaYhzKROWVh5LylyEDCwcZ3O55Mz6QmeZMN57yulzlan8giFN8QvlCHE55qhEnFKSq1cpGM1ZwtmkRa4QKmSixGOofMC8PQcKxX05m3VBm7T+dDMK4tiVyhyeS0sapnHWxlgafYfzzoxjjFoTZlwbrMKwV3BZN8eUrUNNiqBQyBXZOFRDPMocg7C1ZPsuZ3LpZyrWjS7cpD6XsT+S86xaqxKh1KOMbVbD5k0wrq8FGlg8VGQqlay4IdAhizfNCxGLqGYKsqUqrMNDLwTApuTGxl1LjaBKGiqcwRF6OqCXTV1ysTW4vDS-DwwwHEbLjVc9UoxWkpo6Xql6fLjRmgdk7JofyFRglibKEsIx-DKkvtgyWS0bY1vtord6RqKmYwZbmwRHh+wqFba3W8BI9AQgmK8t5Vb+1vUHSA527USEDJzXpSd4jISjCeV6nEt46pCyXRCyFzjV4ojhYuyRw5Gk5wnB3MuTqV6IjXjXYZE7VEhR2fKaeOIskjEJJ+9N96iE7qgPukah6EC6CwuULxdzWQU1ijqhMd6f1V3vhQVOMGm0SNPaKwu1wS5Ao4XgghD6AMWPzLnJBx8yovjqteVh3baN0GAVaQhIax1msY6VDkYJwr0JQVGTQ-M5o4fYQG3BfH8EgME0a7NVTRMBzZYwFlAwozXVUBCIFhi1B3t9DwuFZGRXFsGMXDjShyZAhc65nt9khQikbdpzJodLUUZ8YwCcUdOW4ekUAA */\n    predictableActionArguments: true,\n    states: {\n      BISECTOR_BY_POINTS: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: (context) => {\n              userMessage(\n                \"Cliquer sur un premier point (autre que le sommet de l'angle).\",\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  context.figure.selectedElements[0] = event.element as Point\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: (context) => {\n              userMessage(\"Cliquer sur le sommet de l'angle.\", context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  context.figure.selectedElements[1] = event.element as Point\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForThirdElement',\n              },\n            },\n          },\n          waitingForThirdElement: {\n            entry: (context) => {\n              userMessage('Cliquer sur un troisième point.', context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  context.figure.selectedElements[2] = event.element as Point\n                  const [pointOnSide1, origin, pointOnSide2] = context.figure\n                    .selectedElements as Point[]\n                  context.figure.create('BisectorByPoints', {\n                    origin,\n                    pointOnSide1,\n                    pointOnSide2,\n                  })\n                  context.figure.saveState()\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      CIRCLE_CENTER_POINT: {\n        initial: 'waitingForCenter',\n        states: {\n          waitingForCenter: {\n            entry: (context) => {\n              userMessage('Cliquer sur le centre du cercle.', context.figure)\n              context.figure.filter = (e) =>\n                e instanceof Point\n              context.figure.currentState = 'POINT_INTERSECTION'\n            },\n            exit: (context) => {\n              context.figure.currentState = ''\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    context.figure.tempCreate('CircleCenterPoint', {\n                      center: context.figure.selectedElements[0] as Point,\n                      point: context.figure.pointer,\n                    })\n                  }\n                  context.figure.filter = (e) => e instanceof Point\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForPoint',\n              },\n            },\n          },\n          waitingForPoint: {\n            entry: (context) => {\n              userMessage('Cliquer sur un point du cercle.', context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[1] = newPoint\n                    const [center, point] = context.figure.selectedElements as [\n                      Point,\n                      Point,\n                    ]\n                    context.figure.create('CircleCenterPoint', {\n                      center,\n                      point,\n                    })\n                    context.figure.saveState()\n                  }\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForCenter',\n              },\n            },\n          },\n        },\n      },\n      CIRCLE_RADIUS: {\n        initial: 'waitingForCenter',\n        states: {\n          waitingForCenter: {\n            entry: (context) => {\n              userMessage('Cliquer sur le centre du cercle.', context.figure)\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    const dialog = createDialoxBoxRadius(context.figure)\n                    dialog.showModal()\n                  }\n                  context.figure.filter = (e) => e instanceof Point\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForRadius',\n              },\n            },\n          },\n          waitingForRadius: {\n            on: {\n              RADIUS: {\n                actions: (context, event) => {\n                  const radius = event.radius\n                  const center = context.figure.selectedElements[0] as Point\n                  const points = testRadiusIsSegment(\n                    event.radius,\n                    context.figure,\n                  )\n                  if (points !== undefined) {\n                    const dynamicRadius = context.figure.create('Distance', {\n                      point1: points[0],\n                      point2: points[1],\n                    })\n                    context.figure.create('CircleCenterDynamicRadius', {\n                      center,\n                      radius: dynamicRadius,\n                    })\n                    context.figure.saveState()\n                  } else if (radius > 0) {\n                    context.figure.create('Circle', { center, radius })\n                    context.figure.saveState()\n                  }\n                },\n                target: 'waitingForCenter',\n              },\n            },\n          },\n        },\n      },\n      COLOR: {\n        entry: (context, event) => {\n          context.figure.options.color = event.text\n        },\n      },\n      DESCRIPTION: {\n        entry: (context) => {\n          createModalDescription(context.figure)\n        },\n      },\n      DILATE: {\n        entry: (context) => {\n          context.figure.filter = (e) => e instanceof Point\n        },\n        exit: (context) => {\n          context.figure.selectedElements = []\n          for (const e of context.figure.tmpElements) {\n            e.remove()\n          }\n        },\n        initial: 'waitingForCenter',\n        states: {\n          waitingForCenter: {\n            entry: (context) => {\n              userMessage(\n                \"Cliquer sur le centre de l'homothétie.\",\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    const dialog = createDialoxBoxK(context.figure)\n                    dialog.showModal()\n                  }\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForCoefficient',\n              },\n            },\n          },\n          waitingForCoefficient: {\n            on: {\n              DILATE_COEF: {\n                actions: (context, event) => {\n                  context.temp.values[0] = event.coefficient\n                },\n                target: 'waitingForElement',\n              },\n            },\n          },\n          waitingForElement: {\n            entry: (context) => {\n              context.figure.filter = (e) =>\n                e instanceof Point ||\n                e instanceof Segment ||\n                e instanceof Circle ||\n                e instanceof Polygon\n              const center = context.figure.selectedElements[0] as Point\n              const k = context.temp.values[0]\n              context.figure.tmpElements.push(\n                context.figure.pointer.dilate(center, k, {\n                  color: context.figure.options.tmpColor,\n                  isChild: true,\n                }),\n              )\n              userMessage(\n                \"Cliquer sur l'élément à transformer.\",\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const center = context.figure.selectedElements[0] as Point\n                  const origin = event.element\n                  const k = context.temp.values[0]\n                  origin.dilate(center, k)\n                  context.figure.saveState()\n                  context.figure.selectedElements[0] = center\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForElement',\n              },\n            },\n          },\n        },\n      },\n      DISC_CENTER_POINT: {\n        initial: 'waitingForCenter',\n        states: {\n          waitingForCenter: {\n            entry: (context) => {\n              userMessage('Cliquer sur le centre du disque.', context.figure)\n              context.figure.filter = (e) =>\n                e instanceof Point || e instanceof Segment\n              context.figure.currentState = 'POINT_INTERSECTION'\n            },\n            exit: (context) => {\n              context.figure.currentState = ''\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    context.figure.tempCreate('CircleCenterPoint', {\n                      center: context.figure.selectedElements[0] as Point,\n                      point: context.figure.pointer,\n                    })\n                  }\n                  context.figure.filter = (e) => e instanceof Point\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForPoint',\n              },\n            },\n          },\n          waitingForPoint: {\n            entry: (context) => {\n              userMessage('Cliquer sur un point du disque.', context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[1] = newPoint\n                    const [center, point] = context.figure.selectedElements as [\n                      Point,\n                      Point,\n                    ]\n                    context.figure.create('CircleCenterPoint', {\n                      center,\n                      point,\n                      fillColor: context.figure.options.color,\n                      fillOpacity: context.figure.options.discFillOpacity,\n                    })\n                    context.figure.saveState()\n                  }\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForCenter',\n              },\n            },\n          },\n        },\n      },\n      DISC_RADIUS: {\n        initial: 'waitingForCenter',\n        states: {\n          waitingForCenter: {\n            entry: (context) => {\n              userMessage('Cliquer sur le centre du disque.', context.figure)\n              context.figure.filter = (e) =>\n                e instanceof Point || e instanceof Segment\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    const dialog = createDialoxBoxRadius(context.figure)\n                    dialog.showModal()\n                  }\n                  context.figure.filter = (e) => e instanceof Point\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForRadius',\n              },\n            },\n          },\n          waitingForRadius: {\n            on: {\n              RADIUS: {\n                actions: (context, event) => {\n                  const radius = event.radius\n                  const center = context.figure.selectedElements[0] as Point\n                  const points = testRadiusIsSegment(\n                    event.radius,\n                    context.figure,\n                  )\n                  if (points !== undefined) {\n                    const dynamicRadius = context.figure.create('Distance', {\n                      point1: points[0],\n                      point2: points[1],\n                    })\n                    context.figure.create('CircleCenterDynamicRadius', {\n                      center,\n                      radius: dynamicRadius,\n                      fillColor: context.figure.options.color,\n                      fillOpacity: context.figure.options.discFillOpacity,\n                    })\n                    context.figure.saveState()\n                  } else if (radius > 0) {\n                    context.figure.create('Circle', {\n                      center,\n                      radius,\n                      fillColor: context.figure.options.color,\n                      fillOpacity: context.figure.options.discFillOpacity,\n                    })\n                    context.figure.saveState()\n                  }\n                },\n                target: 'waitingForCenter',\n              },\n            },\n          },\n        },\n      },\n      DOWNLOAD_LATEX_SVG: {\n        entry: (context) => {\n          context.temp.htmlElement[0] = selectionRectangle(context.figure)\n          // const svg = context.figure.svg.outerHTML\n        },\n        on: {\n          SELECTION_AREA_TO_LATEX: {\n            actions: (context, event) => {\n              const xMin =\n                context.figure.xMin + context.figure.sxTox(event.xMin)\n              const xMax = xMin + context.figure.sxTox(event.width)\n              const yMax =\n                context.figure.yMax + context.figure.syToy(event.yMax)\n              const yMin = yMax + context.figure.syToy(event.height)\n              context.temp.htmlElement[0].remove()\n              const latex = context.figure.latex({ xMax, xMin, yMax, yMin })\n              const blob = new Blob([latex], { type: 'text/plain' })\n              const url = window.URL.createObjectURL(blob)\n              const a = document.createElement('a')\n              a.style.display = 'none'\n              a.href = url\n              a.download = 'figure.tex'\n              document.body.appendChild(a)\n              a.click()\n              window.URL.revokeObjectURL(url)\n              document.body.removeChild(a)\n              context.figure.buttons.get('DRAG')?.click()\n            },\n            target: 'DRAG',\n          },\n          SELECTION_AREA_TO_SVG: {\n            actions: (context, event) => {\n              const xMin = context.figure.xToSx(\n                context.figure.xMin + context.figure.sxTox(event.xMin),\n              )\n              const yMax = context.figure.yToSy(\n                context.figure.yMax + context.figure.syToy(event.yMax),\n              )\n              context.temp.htmlElement[0].remove()\n              const svg = context.figure.svg.cloneNode(true) as SVGElement\n              svg.setAttribute('width', event.width.toString())\n              svg.setAttribute('height', event.height.toString())\n              svg.setAttribute(\n                'viewBox',\n                `${xMin} ${yMax} ${event.width as number} ${event.height as number}`,\n              )\n              const blob = new Blob([svg.outerHTML], { type: 'image/svg+xml' })\n              const url = window.URL.createObjectURL(blob)\n              const a = document.createElement('a')\n              a.style.display = 'none'\n              a.href = url\n              a.download = 'figure.svg'\n              document.body.appendChild(a)\n              a.click()\n              window.URL.revokeObjectURL(url)\n              document.body.removeChild(a)\n              context.figure.buttons.get('DRAG')?.click()\n            },\n            target: 'DRAG',\n          },\n        },\n      },\n      DRAG: {\n        entry: (context) => {\n          if (context.figure.elements.size > 1) {\n            userMessage(\n              'Cliquer sur un point pour le déplacer.',\n              context.figure,\n            )\n          } else {\n            userMessage('', context.figure)\n          }\n          context.figure.filter = (e) => e instanceof Point && e.isFree\n        },\n        exit: (context) => {\n          context.figure.divFigure.style.cursor = 'default'\n          context.figure.inDrag = undefined\n        },\n        on: {\n          clickLocation: {\n            actions: (context, event) => {\n              context.figure.inDrag = event.element\n              context.figure.divFigure.style.cursor = 'move'\n            },\n            cond: (_, event) => event.element !== undefined,\n            target: 'DRAG',\n          },\n        },\n      },\n      FILL: {\n        entry: (context) => {\n          context.figure.filter = (e) =>\n            e instanceof Polygon || e instanceof Circle || e instanceof Arc\n          context.figure.currentState = 'FILL'\n        },\n        exit: (context) => {\n          context.figure.currentState = ''\n          for (const e of context.figure.tmpElements) {\n            e.isSelected = false\n          }\n        },\n        on: {\n          clickLocation: {\n            actions: (context, event) => {\n              const element = event.element\n              if (element !== undefined) {\n                if (element.fillColor === context.figure.options.color) {\n                  element.fillColor = 'none'\n                } else {\n                  element.fillColor = context.figure.options.color\n                }\n                context.figure.saveState()\n              }\n            },\n          },\n        },\n      },\n      GRID: {\n        entry: (context) => {\n          if (context.figure.grid === undefined) {\n            context.figure.grid = context.figure.create('Grid', {\n              color: 'black',\n            }) as Grid\n          } else {\n            if (context.figure.grid.isVisible) {\n              context.figure.grid.isVisible = false\n              context.figure.snapGrid = false\n            } else {\n              context.figure.grid.isVisible = true\n              context.figure.snapGrid = true\n            }\n          }\n          context.figure.saveState()\n        },\n      },\n      HIDE: {\n        entry: (context) => {\n          context.figure.currentState = 'HIDE'\n          userMessage(\n            \"Cliquer sur l'élément à masquer ou à démasquer.\",\n            context.figure,\n          )\n          context.figure.filter = (e) => e.isVisible\n          for (const e of context.figure.elements) {\n            if (e instanceof Element2D && e.isHidden) {\n              e.tempShow()\n            }\n          }\n        },\n        exit: (context) => {\n          context.figure.currentState = ''\n          for (const e of context.figure.elements) {\n            if (e instanceof Element2D && e.isHidden) {\n              e.hide()\n            }\n          }\n        },\n        on: {\n          clickLocation: {\n            actions: (context, event) => {\n              if (event.element.isHidden === true) {\n                event.element.show()\n                event.element.isHidden = false\n              } else {\n                event.element.tempShow()\n                event.element.isHidden = true\n              }\n              context.figure.saveState()\n            },\n            cond: (_, event) => event.element !== undefined,\n            target: 'HIDE',\n          },\n        },\n      },\n      INFORMATIONS: {\n        entry: (context) => {\n          userMessage(\"Cliquer sur l'élément\", context.figure)\n          context.figure.filter = (e) => e.isVisible\n        },\n        on: {\n          clickLocation: {\n            actions: (_, event) => {\n              console.info(event.element)\n            },\n            cond: (_, event) => event.element !== undefined,\n            target: 'INFORMATIONS',\n          },\n        },\n      },\n      INIT: {\n        entry: (context) => {\n          context.figure.userMessage = ''\n        },\n      },\n      LATEX: {\n        entry: (context) => {\n          const latex = context.figure.latex\n          const blob = new Blob([latex()], { type: 'text/plain' })\n          const url = window.URL.createObjectURL(blob)\n          const a = document.createElement('a')\n          a.style.display = 'none'\n          a.href = url\n          a.download = 'figure.tex'\n          document.body.appendChild(a)\n          a.click()\n          window.URL.revokeObjectURL(url)\n          document.body.removeChild(a)\n          context.figure.buttons.get('DRAG')?.click()\n        },\n      },\n      LINE: {\n        entry: (context) => {\n          context.figure.filter = (e) => e instanceof Point\n        },\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: (context) => {\n              userMessage(\n                'Cliquer sur un premier point de la droite.',\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    context.figure.tempCreate('Line', {\n                      point1: context.figure.selectedElements[0] as Point,\n                      point2: context.figure.pointer,\n                    })\n                  }\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: (context) => {\n              userMessage(\n                'Cliquer sur un deuxième point de la droite.',\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[1] = newPoint\n                    const [point1, point2] = context.figure\n                      .selectedElements as [Point, Point]\n                    context.figure.create('Line', { point1, point2 })\n                    context.figure.saveState()\n                  }\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      LINE_PARALLEL: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: (context) => {\n              userMessage('Cliquer sur un point ou une droite.', context.figure)\n              context.figure.filter = (e) =>\n                e instanceof Segment || e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  context.figure.selectedElements[0] = event.element\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: (context) => {\n              if (context.figure.selectedElements[0] instanceof Point) {\n                userMessage('Cliquer sur une droite.', context.figure)\n                context.figure.filter = (e) => e instanceof Segment\n              } else {\n                userMessage('Cliquer sur un point.', context.figure)\n                context.figure.filter = (e) => e instanceof Point\n              }\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  context.figure.selectedElements[1] = event.element\n                  let point: Point\n                  let line: Segment\n                  if (context.figure.selectedElements[0] instanceof Point) {\n                    ;[point, line] = context.figure.selectedElements as [\n                      Point,\n                      Segment,\n                    ]\n                  } else {\n                    ;[line, point] = context.figure.selectedElements as [\n                      Segment,\n                      Point,\n                    ]\n                  }\n                  context.figure.create('LineParallel', { line, point })\n                  context.figure.saveState()\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      LINE_PERPENDICULAR: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: (context) => {\n              userMessage('Cliquer sur un point ou une droite.', context.figure)\n              context.figure.filter = (e) =>\n                e instanceof Segment || e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  context.figure.selectedElements[0] = event.element\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: (context) => {\n              if (context.figure.selectedElements[0] instanceof Point) {\n                userMessage('Cliquer sur une droite.', context.figure)\n                context.figure.filter = (e) => e instanceof Segment\n              } else {\n                userMessage('Cliquer sur un point.', context.figure)\n                context.figure.filter = (e) => e instanceof Point\n              }\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  context.figure.selectedElements[1] = event.element\n                  let point: Point\n                  let line: Segment\n                  if (context.figure.selectedElements[0] instanceof Point) {\n                    ;[point, line] = context.figure.selectedElements as [\n                      Point,\n                      Segment,\n                    ]\n                  } else {\n                    ;[line, point] = context.figure.selectedElements as [\n                      Segment,\n                      Point,\n                    ]\n                  }\n                  context.figure.create('LinePerpendicular', { line, point })\n                  context.figure.saveState()\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      MARK_BETWEEN_POINTS: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: (context) => {\n              userMessage(\n                'Cliquer sur la première extrémité du segment ou sur un segment.',\n                context.figure,\n              )\n              if (context.figure?.divMarkPalette !== undefined) {\n                context.figure.divMarkPalette.style.display = 'flex'\n              }\n              context.figure.filter = (e) =>\n                e instanceof Point || e instanceof Segment\n            },\n            on: {\n              clickLocation: [\n                {\n                  actions: (context, event) => {\n                    context.figure.selectedElements[0] = event.element\n                  },\n                  cond: (_, event) =>\n                    event.element !== undefined &&\n                    event.element instanceof Point,\n                  target: 'waitingForSecondElement',\n                },\n                {\n                  actions: (context, event) => {\n                    const segment = event.element as Segment\n                    const point1 = segment.point1\n                    const point2 = segment.point2\n                    context.figure.create('MarkBetweenPoints', {\n                      point1,\n                      point2,\n                    })\n                    context.figure.saveState()\n                  },\n                  cond: (_, event) =>\n                    event.element !== undefined &&\n                    event.element instanceof Segment,\n                  target: 'waitingForFirstElement',\n                },\n              ],\n            },\n            exit: (context) => {\n              if (context.figure?.divMarkPalette !== undefined) {\n                context.figure.divMarkPalette.style.display = 'none'\n              }\n            },\n          },\n          waitingForSecondElement: {\n            entry: (context) => {\n              if (context.figure?.divMarkPalette !== undefined) {\n                context.figure.divMarkPalette.style.display = 'flex'\n              }\n              userMessage(\n                'Cliquer sur la deuxième extrémité du segment.',\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  context.figure.selectedElements[1] = event.element\n                  const [point1, point2] = context.figure.selectedElements as [\n                    Point,\n                    Point,\n                  ]\n                  context.figure.create('MarkBetweenPoints', {\n                    point1,\n                    point2,\n                  })\n                  context.figure.saveState()\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      MIDDLE: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: (context) => {\n              userMessage(\n                'Cliquer sur la première extrémité du segment ou sur un segment.',\n                context.figure,\n              )\n              context.figure.filter = (e) =>\n                e instanceof Point || e instanceof Segment\n            },\n            on: {\n              clickLocation: [\n                {\n                  actions: (context, event) => {\n                    context.figure.selectedElements[0] = event.element\n                  },\n                  cond: (_, event) =>\n                    event.element !== undefined &&\n                    event.element instanceof Point,\n                  target: 'waitingForSecondElement',\n                },\n                {\n                  actions: (context, event) => {\n                    const segment = event.element as Segment\n                    const point1 = segment.point1\n                    const point2 = segment.point2\n                    context.figure.create('Middle', { point1, point2 })\n                  },\n                  cond: (_, event) =>\n                    event.element !== undefined &&\n                    event.element instanceof Segment,\n                  target: 'waitingForFirstElement',\n                },\n              ],\n            },\n          },\n          waitingForSecondElement: {\n            entry: (context) => {\n              userMessage(\n                'Cliquer sur la deuxième extrémité du segment.',\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  context.figure.selectedElements[1] = event.element\n                  const [point1, point2] = context.figure.selectedElements as [\n                    Point,\n                    Point,\n                  ]\n                  context.figure.create('Middle', { point1, point2 })\n                  context.figure.saveState()\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      MOVE_LABEL: {\n        entry: (context) => {\n          userMessage(\n            'Cliquer sur le point pour déplacer son nom.',\n            context.figure,\n          )\n          context.figure.filter = (e) => e instanceof Point\n        },\n        initial: 'waitingForPoint',\n        states: {\n          waitingForPoint: {\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const point = event.element\n                  context.figure.inDrag = point.elementTextLabel\n                },\n                target: 'waitingForPoint',\n              },\n            },\n          },\n        },\n      },\n      NAME_POINT: {\n        initial: 'waitingForPoint',\n        states: {\n          waitingForName: {\n            entry: (context) => {\n              const dialog = createDialoxBoxName(context.figure)\n              dialog.showModal()\n            },\n            on: {\n              TEXT_FROM_DIALOG: {\n                actions: (context, event) => {\n                  const point = context.temp.elements[0] as Point\n                  point.label = event.text\n                  context.figure.saveState()\n                },\n                target: 'waitingForPoint',\n              },\n            },\n          },\n          waitingForPoint: {\n            entry: (context) => {\n              context.figure.filter = (e) => e instanceof Point\n              userMessage('Cliquer sur un point à renommer.', context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                    false,\n                  )\n                  if (newPoint !== undefined) {\n                    context.temp.elements[0] = newPoint\n                  }\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForName',\n              },\n            },\n          },\n        },\n      },\n      OPEN: {\n        entry: (context) => {\n          const input = document.createElement('input')\n          input.type = 'file'\n          input.accept = '.json'\n          input.onchange = (e: Event) => {\n            const file = (e.target as HTMLInputElement).files?.[0]\n            if (file === undefined) {\n              return\n            }\n            const reader = new FileReader()\n            reader.readAsText(file, 'UTF-8')\n            reader.onload = (readerEvent: ProgressEvent<FileReader>) => {\n              const content =\n                (readerEvent?.target?.result as null | string) ?? ''\n              if (typeof content === 'string' && content !== '') {\n                context.figure.loadJson(JSON.parse(content), true)\n              }\n            }\n          }\n          input.click()\n          // context.figure.buttons.get('DRAG')?.click()\n        },\n      },\n      PAUSE: {\n        entry: (context) => {\n          userMessage('', context.figure)\n          if (context.intervalId !== undefined) {\n            clearInterval(context.intervalId)\n          }\n        },\n      },\n      PERPENDICULAR_BISECTOR: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: (context) => {\n              userMessage(\n                'Cliquer sur la première extrémité du segment.',\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  context.figure.selectedElements[0] = event.element\n                  context.figure.tempCreate('PerpendicularBisectorByPoints', {\n                    point1: context.figure.selectedElements[0] as Point,\n                    point2: context.figure.pointer,\n                  })\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: (context) => {\n              userMessage(\n                'Cliquer sur la deuxième extrémité du segment.',\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  context.figure.selectedElements[1] = event.element\n                  const [point1, point2] = context.figure.selectedElements as [\n                    Point,\n                    Point,\n                  ]\n                  context.figure.create('PerpendicularBisectorByPoints', {\n                    point1,\n                    point2,\n                  })\n                  context.figure.saveState()\n                },\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      PLAY: {\n        entry: (context) => {\n          userMessage('', context.figure)\n          clearInterval(context.intervalId)\n          context.figure.redo()\n          context.intervalId = setInterval(() => {\n            if (context.figure.stackRedo.length === 0) {\n              context.figure.buttons.get('PAUSE')?.click()\n              clearInterval(context.intervalId)\n              return\n            }\n            context.figure.redo()\n          }, context.figure.options.animationStepInterval)\n        },\n      },\n      PLAY_SKIP_BACK: {\n        entry: (context) => {\n          userMessage('', context.figure)\n          context.figure.undo()\n        },\n      },\n      PLAY_SKIP_FORWARD: {\n        entry: (context) => {\n          userMessage('', context.figure)\n          context.figure.redo()\n        },\n      },\n      POINT: {\n        entry: (context) => {\n          userMessage('Cliquer pour créer un point.', context.figure)\n          context.figure.filter = (e) => e instanceof Point\n          context.figure.currentState = 'POINT'\n        },\n        initial: 'waitingForLocation',\n        states: {\n          waitingForLocation: {\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  if (context.figure.hoverPoints.size > 0) {\n                    const point = [...context.figure.hoverPoints][0] as Point\n                    context.figure.inDrag = point\n                    context.figure.divFigure.style.cursor = 'move'\n                  } else {\n                    const { x, y } = event\n                    const limitNumberOfPoint =\n                      context.figure.options.limitNumberOfElement?.get(\n                        'Point',\n                      ) ?? Number.POSITIVE_INFINITY\n                    const noLimit =\n                      limitNumberOfPoint === undefined ||\n                      !Number.isFinite(limitNumberOfPoint)\n                    const limitReached =\n                      [...context.figure.elements.values()].filter(\n                        (e) => e instanceof Point,\n                      ).length > limitNumberOfPoint\n                    const samePosition =\n                      !context.figure.options.gridWithTwoPointsOnSamePosition &&\n                      [...context.figure.elements.values()].filter(\n                        (e) =>\n                          e instanceof Point &&\n                          e.isSelectable &&\n                          e.isVisible &&\n                          e.x ===\n                            Math.round(x / context.figure.dx) *\n                              context.figure.dx &&\n                          e.y ===\n                            Math.round(y / context.figure.dy) *\n                              context.figure.dy,\n                      ).length > 0\n                    if (!samePosition && (noLimit || !limitReached)) {\n                      const label = getAutomaticLabelOrUndefined(context.figure)\n                      context.figure.create('Point', { x, y, label })\n                    }\n                  }\n                  context.figure.saveState()\n                },\n                target: 'waitingForLocation',\n              },\n            },\n          },\n        },\n        exit: (context) => {\n          context.figure.currentState = ''\n        },\n      },\n      POINT_INTERSECTION: {\n        entry: (context) => {\n          context.figure.filter = (e) =>\n            e instanceof Segment || e instanceof Circle\n          context.figure.currentState = 'POINT_INTERSECTION'\n        },\n        exit: (context) => {\n          context.figure.selectedElements = []\n          for (const e of context.figure.tmpElements) {\n            e.remove()\n          }\n          context.figure.currentState = ''\n        },\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: (context) => {\n              userMessage(\n                'Cliquer sur une droite, une demi-droite, un segment ou un cercle.',\n                context.figure,\n              )\n            },\n            exit: (context) => {\n              if (context.figure.selectedElements[0]?.isSelected)\n                context.figure.selectedElements[0].isSelected = false\n            },\n            on: {\n              clickLocation: [\n                {\n                  actions: (context, event) => {\n                    context.figure.selectedElements[0] = event.element\n                    event.element.isSelected = true\n                  },\n                  cond: (_, event) => event.element !== undefined,\n                  target: 'waitingForSecondElement',\n                },\n                {\n                  actions: (context, event) => {\n                    context.figure.selectedElements[0] =\n                      event.possibleElements[0]\n                    context.figure.selectedElements[1] =\n                      event.possibleElements[1]\n                    const [element1, element2] = context.figure.selectedElements\n                    const label = getAutomaticLabelOrUndefined(context.figure)\n                    if (element1 instanceof Segment) {\n                      if (element2 instanceof Segment) {\n                        context.figure.create('PointIntersectionLL', {\n                          line1: element1,\n                          line2: element2,\n                          label,\n                        })\n                      }\n                      if (element2 instanceof Circle) {\n                        context.figure.create('PointsIntersectionLC', {\n                          circle: element2,\n                          line: element1,\n                        })\n                      }\n                      context.figure.saveState()\n                    } else if (element1 instanceof Circle) {\n                      if (element2 instanceof Segment) {\n                        context.figure.create('PointsIntersectionLC', {\n                          circle: element1,\n                          line: element2,\n                        })\n                      }\n                      if (element2 instanceof Circle) {\n                        context.figure.create('PointsIntersectionCC', {\n                          circle1: element1,\n                          circle2: element2,\n                        })\n                      }\n                      context.figure.saveState()\n                    }\n                  },\n                  cond: (_, event) => event.possibleElements.length === 2,\n                  target: 'waitingForFirstElement',\n                },\n              ],\n            },\n          },\n          waitingForSecondElement: {\n            exit: (context) => {\n              for (const e of context.figure.selectedElements) {\n                e.isSelected = false\n              }\n              for (const e of context.figure.tmpElements) {\n                e.isSelected = false\n              }\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  context.figure.selectedElements[1] = event.element\n                  const [element1, element2] = context.figure.selectedElements\n                  if (element1 instanceof Segment) {\n                    if (element2 instanceof Segment) {\n                      context.figure.create('PointIntersectionLL', {\n                        line1: element1,\n                        line2: element2,\n                      })\n                    }\n                    if (element2 instanceof Circle) {\n                      context.figure.create('PointsIntersectionLC', {\n                        circle: element2,\n                        line: element1,\n                      })\n                    }\n                    context.figure.saveState()\n                  } else if (element1 instanceof Circle) {\n                    if (element2 instanceof Segment) {\n                      context.figure.create('PointsIntersectionLC', {\n                        circle: element1,\n                        line: element2,\n                      })\n                    }\n                    if (element2 instanceof Circle) {\n                      context.figure.create('PointsIntersectionCC', {\n                        circle1: element1,\n                        circle2: element2,\n                      })\n                    }\n                    context.figure.saveState()\n                  }\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      POINT_ON: {\n        entry: (context) => {\n          context.figure.filter = (e) =>\n            e instanceof Segment || e instanceof Circle || e instanceof Graph\n          userMessage(\n            'Cliquer sur un segment, un cercle ou une courbe.',\n            context.figure,\n          )\n        },\n        on: {\n          clickLocation: {\n            actions: (context, event) => {\n              context.figure.selectedElements[0] = event.element\n              if (event.element instanceof Segment) {\n                const [point1, point2] = [\n                  event.element.point1,\n                  event.element.point2,\n                ]\n                const k =\n                  ((event.x - point1.x) * (point2.x - point1.x) +\n                    (event.y - point1.y) * (point2.y - point1.y)) /\n                  distance(point1, point2) ** 2\n                const label = getAutomaticLabelOrUndefined(context.figure)\n                context.figure.create('PointOnLine', {\n                  k,\n                  line: event.element,\n                  label,\n                })\n                context.figure.saveState()\n              } else if (event.element instanceof Circle) {\n                const angleWithHorizontal = Math.atan2(\n                  event.y - event.element.center.y,\n                  event.x - event.element.center.x,\n                )\n                context.figure.create('PointOnCircle', {\n                  angleWithHorizontal,\n                  circle: event.element,\n                })\n                context.figure.saveState()\n              } else if (event.element instanceof Graph) {\n                const x = event.x\n                context.figure.create('PointOnGraph', {\n                  x,\n                  graph: event.element,\n                })\n                context.figure.saveState()\n              }\n            },\n            target: 'POINT_ON',\n          },\n        },\n      },\n      POLYGON: {\n        id: 'polygon',\n        initial: 'init',\n        on: {\n          STOPPOLYGON: '#polygon.STOPPOLYGON',\n        },\n        states: {\n          init: {\n            always: 'waitingElement',\n            entry: (context) => {\n              userMessage('Cliquer sur un sommet du polygone.', context.figure)\n              context.figure.filter = (e) => e instanceof Point\n            },\n          },\n          STOPPOLYGON: {\n            always: {\n              target: '#polygon.waitingElement',\n            },\n            entry: (context) => {\n              const polygon = context.figure.create('Polygon', {\n                points: context.figure.selectedElements as Point[],\n                fillColor: context.figure.options.fillColor,\n              })\n              for (const point of polygon.points) {\n                point.color = context.figure.options.colorPointPolygon\n              }\n              userMessage(\n                'Cliquer sur un sommet pour créer un autre polygone.',\n                context.figure,\n              )\n              context.figure.saveState()\n            },\n          },\n          waitingElement: {\n            exit: (context) => {\n              for (const e of context.figure.tmpElements) {\n                e.remove()\n              }\n            },\n            on: {\n              clickLocation: [\n                {\n                  actions: (context, event) => {\n                    if (context.figure.selectedElements.length > 0) {\n                      userMessage(\n                        'Cliquer sur un nouveau sommet ou sur le premier sommet pour terminer.',\n                        context.figure,\n                      )\n                    } else {\n                      userMessage(\n                        'Cliquer sur un sommet du polygone.',\n                        context.figure,\n                      )\n                    }\n                    const newPoint = getExistingPointOrCreatedPoint(\n                      context,\n                      event,\n                    )\n                    if (newPoint !== undefined) {\n                      newPoint.shape = context.figure.options.tmpShape\n                      newPoint.color = context.figure.options.tmpColor\n                      context.figure.selectedElements.push(newPoint)\n                      const points = [\n                        ...context.figure.selectedElements,\n                        context.figure.pointer,\n                      ] as Point[]\n                      context.figure.tempCreate('Polygon', {\n                        isBuiltWithSegments: false,\n                        isChild: true,\n                        color: context.figure.options.tmpColor,\n                        fillColor: context.figure.options.tmpFillColor,\n                        points,\n                      })\n                    }\n                  },\n                  cond: (context, event) => {\n                    if (context.figure.selectedElements.length < 2) {\n                      return getExistingPointOrCreatetPoindWasASuccess(event)\n                    }\n                    const last = event.element as Point\n                    const first = context.figure.selectedElements[0] as Point\n                    const isClickOnFirstPoint = last?.id === first?.id\n                    return (\n                      getExistingPointOrCreatetPoindWasASuccess(event) &&\n                      !isClickOnFirstPoint\n                    )\n                  },\n                  target: 'waitingElement',\n                },\n                {\n                  cond: (context, event) => {\n                    if (context.figure.selectedElements.length > 1) {\n                      const last = event.element as Point\n                      const first = context.figure.selectedElements[0] as Point\n                      return last?.id === first?.id\n                    }\n                    return false\n                  },\n                  target: 'STOPPOLYGON',\n                },\n              ],\n            },\n          },\n        },\n      },\n      RAY: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: (context) => {\n              userMessage(\n                \"Cliquer sur l'origine de la demi-droite.\",\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    context.figure.tempCreate('Ray', {\n                      point1: context.figure.selectedElements[0] as Point,\n                      point2: context.figure.pointer,\n                    })\n                  }\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: (context) => {\n              userMessage('Cliquer un point de la demi-droite.', context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[1] = newPoint\n                    const [point1, point2] = context.figure\n                      .selectedElements as [Point, Point]\n                    context.figure.create('Ray', { point1, point2 })\n                    context.figure.saveState()\n                  }\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      REDO: {\n        entry: (context) => {\n          context.figure.redo()\n          context.figure.buttons.get('DRAG')?.click()\n        },\n      },\n      REFLECTION: {\n        entry: (context) => {\n          userMessage('Cliquer sur le centre de la symétrie.', context.figure)\n          context.figure.filter = (e) => e instanceof Point\n        },\n        exit: (context) => {\n          context.figure.selectedElements = []\n          for (const e of context.figure.tmpElements) {\n            e.remove()\n          }\n        },\n        initial: 'waitingForCenter',\n        states: {\n          waitingForCenter: {\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  context.figure.selectedElements[0] = event.element\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForElement',\n              },\n            },\n          },\n          waitingForElement: {\n            entry: (context) => {\n              userMessage(\n                \"Cliquer sur l'élément à transformer.\",\n                context.figure,\n              )\n              context.figure.filter = (e) =>\n                e instanceof Point ||\n                e instanceof Segment ||\n                e instanceof Circle ||\n                e instanceof Polygon\n              const center = context.figure.selectedElements[0] as Point\n              if (center !== undefined) {\n                context.figure.selectedElements[0] = center\n                context.figure.tmpElements.push(\n                  context.figure.pointer.reflect(center, {\n                    color: context.figure.options.tmpColor,\n                    isChild: true,\n                    isSelectable: false,\n                  }),\n                )\n              }\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const origin = event.element as\n                    | Circle\n                    | Point\n                    | Polygon\n                    | Segment\n                  const center = context.figure.selectedElements[0] as Point\n                  if (origin !== undefined) {\n                    origin.reflect(center)\n                    context.figure.saveState()\n                    // Le saveState initialise selectedElements à []\n                    context.figure.selectedElements[0] = center\n                  }\n                },\n                target: 'waitingForElement',\n              },\n            },\n          },\n        },\n      },\n      REFLECTION_OVER_LINE: {\n        entry: (context) => {\n          userMessage(\"Cliquer sur l'axe de la symétrie.\", context.figure)\n          context.figure.filter = (e) => e instanceof Segment\n        },\n        exit: (context) => {\n          context.figure.selectedElements = []\n          for (const e of context.figure.tmpElements) {\n            e.remove()\n          }\n        },\n        initial: 'waitingForAxis',\n        states: {\n          waitingForAxis: {\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  context.figure.selectedElements[0] = event.element\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForOrigin',\n              },\n            },\n          },\n          waitingForOrigin: {\n            entry: (context) => {\n              userMessage(\n                \"Cliquer sur l'élément à transformer.\",\n                context.figure,\n              )\n              context.figure.filter = (e) =>\n                e instanceof Point ||\n                e instanceof Segment ||\n                e instanceof Circle ||\n                e instanceof Polygon\n              const line = context.figure.selectedElements[0] as Segment\n              if (line !== undefined) {\n                context.figure.selectedElements[0] = line\n                context.figure.tmpElements.push(\n                  context.figure.pointer.reflectOverLine(line, {\n                    color: context.figure.options.tmpColor,\n                    isChild: true,\n                    isSelectable: false,\n                  }),\n                )\n              }\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const origin = event.element as\n                    | Circle\n                    | Point\n                    | Polygon\n                    | Segment\n                  const line = context.figure.selectedElements[0] as Segment\n                  if (origin !== undefined) {\n                    origin.reflectOverLine(line)\n                    context.figure.saveState()\n                    // Le saveState initialise selectedElements à []\n                    context.figure.selectedElements[0] = line\n                  }\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForOrigin',\n              },\n            },\n          },\n        },\n      },\n      REMOVE: {\n        entry: (context) => {\n          userMessage(\"Cliquer sur l'élément à supprimer.\", context.figure)\n          context.figure.filter = (e) => e.isVisible\n        },\n        on: {\n          clickLocation: {\n            actions: (context, event) => {\n              event.element.remove()\n              context.figure.saveState()\n            },\n            cond: (_, event) => event.element !== undefined,\n            target: 'REMOVE',\n          },\n        },\n      },\n      RESTART: {\n        entry: (context) => {\n          userMessage('', context.figure)\n          context.figure.restart()\n        },\n      },\n      ROTATE: {\n        entry: (context) => {\n          context.figure.filter = (e) =>\n            e instanceof Point || e instanceof Segment\n        },\n        exit: (context) => {\n          context.figure.selectedElements = []\n          for (const e of context.figure.tmpElements) {\n            e.remove()\n          }\n        },\n        initial: 'waitingForCenter',\n        states: {\n          waitingForAngle: {\n            on: {\n              ANGLE: {\n                actions: (context, event) => {\n                  const angle = event.angle\n                  context.temp.values[0] = angle\n                },\n                target: 'waitingForOrigin',\n              },\n            },\n          },\n          waitingForCenter: {\n            entry: (context) => {\n              userMessage('Cliquer sur le centre de rotation.', context.figure)\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    const dialog = createDialoxBoxAngle(context.figure)\n                    dialog.showModal()\n                  }\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForAngle',\n              },\n            },\n          },\n          waitingForOrigin: {\n            entry: (context) => {\n              const center = context.figure.selectedElements[0] as Point\n              const angle = context.temp.values[0]\n              context.figure.tmpElements.push(\n                context.figure.pointer.rotate(center, angle, {\n                  color: context.figure.options.tmpColor,\n                  isChild: true,\n                  isSelectable: false,\n                }),\n              )\n              userMessage(\n                \"Cliquer sur l'élément à transformer.\",\n                context.figure,\n              )\n              context.figure.filter = (e) =>\n                e instanceof Point ||\n                e instanceof Segment ||\n                e instanceof Circle ||\n                e instanceof Polygon\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const center = context.figure.selectedElements[0] as Point\n                  const origin = event.element as\n                    | Circle\n                    | Point\n                    | Polygon\n                    | Segment\n                  const angle = context.temp.values[0]\n                  origin.rotate(center, angle)\n                  context.figure.saveState()\n                  context.figure.selectedElements[0] = center\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForOrigin',\n              },\n            },\n          },\n        },\n      },\n      SAVE: {\n        entry: (context) => {\n          const jsonContent = context.figure.getJsonWithHistory()\n          const blob = new Blob([jsonContent], { type: 'text/plain' })\n          const url = window.URL.createObjectURL(blob)\n\n          const a = document.createElement('a')\n          a.style.display = 'none'\n          a.href = url\n          a.download = 'figure.json'\n          document.body.appendChild(a)\n          a.click()\n          window.URL.revokeObjectURL(url)\n          document.body.removeChild(a)\n          context.figure.buttons.get('DRAG')?.click()\n        },\n      },\n      SEGMENT: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: (context) => {\n              userMessage(\n                'Cliquer sur la première extrémité du segment.',\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    context.figure.tempCreate('Segment', {\n                      point1: context.figure.selectedElements[0] as Point,\n                      point2: context.figure.pointer,\n                    })\n                  }\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: (context) => {\n              userMessage(\n                'Cliquer sur la deuxième extrémité du segment.',\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[1] = newPoint\n                    const [point1, point2] = context.figure\n                      .selectedElements as [Point, Point]\n                    context.figure.create('Segment', { point1, point2 })\n                    context.figure.saveState()\n                  }\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      SET_OPTIONS: {\n        entry: (context) => {\n          context.figure.filter = (e) => e instanceof Element2D\n          context.figure.currentState = 'SET_OPTIONS'\n        },\n        on: {\n          clickLocation: {\n            actions: (context, event) => {\n              const element = event.element\n              if (element !== undefined) {\n                element.color = context.figure.options.color\n                element.thickness = context.figure.options.thickness\n                if ('isDashed' in element)\n                  element.isDashed = context.figure.options.isDashed\n                if (context.figure.options.fillColorAndBorderColorAreSame) {\n                  if ('fillColor' in element && element.fillColor !== 'none')\n                    element.fillColor = context.figure.options.color\n                  // if ('fillOpacity' in element) element.fillOpacity = context.figure.options.fillOpacity\n                }\n              }\n            },\n          },\n        },\n      },\n      SHAKE: {\n        always: 'DRAG',\n        entry: async (context) => {\n          await context.figure.shake()\n          context.figure.saveState()\n        },\n      },\n      TRANSLATION: {\n        exit: (context) => {\n          for (const e of context.figure.tmpElements) {\n            e.isSelectable = false\n          }\n        },\n        initial: 'waitingForFistPoint',\n        states: {\n          waitingForFistPoint: {\n            entry: (context) => {\n              context.figure.filter = (e) => e instanceof Point\n              userMessage(\n                'Cliquer sur le premier point qui définit de la translation.',\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const point1 = event.element as Point\n                  context.temp.elements[0] = point1\n                  point1.isSelected = true\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForSecondPoint',\n              },\n            },\n          },\n          waitingForOrigin: {\n            entry: (context) => {\n              userMessage(\"Cliquer sur l'objet à transformer.\", context.figure)\n              context.figure.filter = (e) =>\n                e instanceof Point ||\n                e instanceof Segment ||\n                e instanceof Circle ||\n                e instanceof Polygon\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const [point1, point2] = context.temp.elements as [\n                    Point,\n                    Point,\n                  ]\n                  const origin = event.element\n                  origin.translate(point1, point2)\n                  context.figure.saveState()\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForOrigin',\n              },\n            },\n          },\n          waitingForSecondPoint: {\n            entry: (context) => {\n              userMessage(\n                'Cliquer sur le deuxième point qui définit de la translation.',\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const point2 = event.element as Point\n                  context.temp.elements[1] = point2\n                  point2.isSelected = true\n                },\n                cond: (_, event) => event.element !== undefined,\n                target: 'waitingForOrigin',\n              },\n            },\n          },\n        },\n      },\n      UNDO: {\n        entry: (context) => {\n          context.figure.undo()\n          context.figure.buttons.get('DRAG')?.click()\n        },\n      },\n      VECTOR: {\n        initial: 'waitingForFirstElement',\n        states: {\n          waitingForFirstElement: {\n            entry: (context) => {\n              userMessage(\n                \"Cliquer sur l'origine de la représentation du vecteur.\",\n                context.figure,\n              )\n              context.figure.filter = (e) => e instanceof Point\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[0] = newPoint\n                    context.figure.tempCreate('Segment', {\n                      point1: context.figure.selectedElements[0] as Point,\n                      point2: context.figure.pointer,\n                      shape: '->',\n                    })\n                  }\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForSecondElement',\n              },\n            },\n          },\n          waitingForSecondElement: {\n            entry: (context) => {\n              userMessage(\n                \"Cliquer sur l'extrémité de la représentation du vecteur.\",\n                context.figure,\n              )\n            },\n            on: {\n              clickLocation: {\n                actions: (context, event) => {\n                  const newPoint = getExistingPointOrCreatedPoint(\n                    context,\n                    event,\n                  )\n                  if (newPoint !== undefined) {\n                    context.figure.selectedElements[1] = newPoint\n                    const [point1, point2] = context.figure\n                      .selectedElements as [Point, Point]\n                    context.figure.create('VectorByPoints', {\n                      point1,\n                      point2,\n                    })\n                    point1.color = ''\n                    point2.color = ''\n                    context.figure.saveState()\n                  }\n                },\n                cond: (_, event) =>\n                  getExistingPointOrCreatetPoindWasASuccess(event),\n                target: 'waitingForFirstElement',\n              },\n            },\n          },\n        },\n      },\n      ZOOM_IN: {\n        initial: 'zoom_in',\n        states: {\n          zoom_in: {\n            entry: (context) => {\n              context.figure.zoomLevel *= defaultZoomInFactor\n              context.figure.zoom(context.figure.zoomLevel)\n            },\n          },\n        },\n      },\n      ZOOM_OUT: {\n        initial: 'zoom_out',\n        states: {\n          zoom_out: {\n            entry: (context) => {\n              context.figure.zoomLevel *= defaultZoomOutFactor\n              context.figure.zoom(context.figure.zoomLevel)\n            },\n          },\n        },\n      },\n    },\n  },\n  {\n    actions: {\n      eraseTempElements: (context) => {\n        for (const e of context.figure.tmpElements) {\n          e.remove()\n        }\n      },\n      highlightButton: (context, event) => {\n        const button = context.figure.buttons.get(event.type)\n        if (button !== undefined) {\n          button.style.backgroundColor = orangeMathaleaLight\n        }\n        context.figure.buttons.forEach((value, key) => {\n          if (key !== event.type) {\n            value.style.backgroundColor = 'white'\n          }\n        })\n      },\n      eraseUserMessage: (context) => {\n        userMessage('', context.figure)\n      },\n    },\n  },\n)\n\nfunction getExistingPointOrCreatedPoint(\n  context: MyContext,\n  event: MyEvent,\n  labelAutomatic?: boolean,\n): Point | undefined {\n  if (event.element instanceof Point) {\n    return event.element\n  }\n  const [x, y] = [event.x as number, event.y as number]\n  if (\n    event.possibleElements !== undefined &&\n    event.possibleElements.length === 2\n  ) {\n    if (\n      event.possibleElements[0] instanceof Segment &&\n      event.possibleElements[1] instanceof Segment\n    ) {\n      return context.figure.create('PointIntersectionLL', {\n        line1: event.possibleElements[0],\n        line2: event.possibleElements[1],\n      })\n    }\n  }\n  if (event.element instanceof Segment) {\n    const [point1, point2] = [event.element.point1, event.element.point2]\n    const k =\n      ((x - point1.x) * (point2.x - point1.x) +\n        (y - point1.y) * (point2.y - point1.y)) /\n      distance(point1, point2) ** 2\n    return context.figure.create('PointOnLine', { k, line: event.element })\n  }\n  if (event.waitingWithModal === true) return undefined\n  const label = getAutomaticLabelOrUndefined(context.figure)\n  if (labelAutomatic) {\n    return context.figure.create('Point', { x, y, label })\n  }\n  return context.figure.create('Point', { x, y })\n}\n\nfunction getExistingPointOrCreatetPoindWasASuccess(event: MyEvent): boolean {\n  return event.waitingWithModal === false\n}\n\nfunction userMessage(text: string, figure: Figure): void {\n  if (!figure.options.automaticUserMessage) return\n  const div = figure.divUserMessage\n  if (div != null) div.innerHTML = figure.isDynamic ? text : ''\n}\n\nfunction testRadiusIsSegment(\n  radius: string,\n  figure: Figure,\n): [Point, Point] | undefined {\n  if (radius === undefined || typeof radius !== 'string') return\n  const [label1, label2] = radius.split('')\n  const points = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer' && e.type?.includes('Point'),\n  ) as Point[]\n  const matchPoints1 = points.filter((p) => p.label === label1)\n  const matchPoints2 = points.filter((p) => p.label === label2)\n  if (matchPoints1.length !== 1 || matchPoints2.length !== 1) return\n  return [matchPoints1[0], matchPoints2[0]]\n}\n\nfunction getAutomaticLabelOrUndefined(figure: Figure): string | undefined {\n  let label: string | undefined\n  if (figure.options.labelAutomaticBeginsWith !== undefined) {\n    let indiceCurrentLetter =\n      figure.options.labelAutomaticBeginsWith.charCodeAt(0)\n    const indiceLetterZ = 90\n    label = figure.options.labelAutomaticBeginsWith\n    const isPrime = label.endsWith(\"'\")\n    if (isPrime) {\n      label = label.slice(0, -1)\n    }\n    while (\n      [...figure.elements.values()].some((e) => {\n        if (!('label' in e)) return false\n        return e.label === label + (isPrime ? \"'\" : '')\n      })\n    ) {\n      indiceCurrentLetter++\n      if (indiceCurrentLetter > indiceLetterZ) {\n        indiceCurrentLetter = 65\n      }\n      label = String.fromCharCode(indiceCurrentLetter)\n    }\n    label += isPrime ? \"'\" : ''\n  }\n  return label\n}\n\nexport default ui\n","import { interpret } from 'xstate'\n\nimport Figure from './Figure'\nimport ui from './uiMachine'\n\nclass SuperFigure extends Figure {\n  constructor({\n    border = false,\n    dx = 1,\n    dy = 1,\n    height = 400,\n    isDynamic = true,\n    pixelsPerUnit = 30,\n    scale = 1,\n    snapGrid = false,\n    width = 400,\n    xMin = -10,\n    xScale = 1,\n    yMin = -6,\n    yScale = 1,\n  }: {\n    border?: boolean\n    dx?: number\n    dy?: number\n    height?: number\n    isDynamic?: boolean\n    pixelsPerUnit?: number\n    scale?: number\n    snapGrid?: boolean\n    width?: number\n    xMin?: number\n    xScale?: number\n    yMin?: number\n    yScale?: number\n  } = {}) {\n    super({\n      border,\n      dx,\n      dy,\n      height,\n      isDynamic,\n      pixelsPerUnit,\n      scale,\n      snapGrid,\n      width,\n      xMin,\n      xScale,\n      yMin,\n      yScale,\n    })\n    const machineWithContext = ui.withContext({\n      figure: this,\n      temp: { elements: [], htmlElement: [], values: [] },\n    })\n    this.ui = interpret(machineWithContext).start()\n  }\n}\n\nexport default SuperFigure\n","export default \"data:image/svg+xml,%3csvg%20fill='currentColor'%20viewBox='0%200%20256%20256'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m223.57%2081.81-41.38-41.38a22%2022%200%200%200-31.12%200L32.43%20159.07a22%2022%200%200%200%200%2031.11l30.07%2030.06a6%206%200%200%200%204.24%201.76H216a6%206%200%200%200%200-12h-89.51l97.08-97.08a22%2022%200%200%200%200-31.11ZM109.51%20210H69.22l-28.3-28.3a10%2010%200%200%201%200-14.15L96%20112.48%20151.52%20168Zm105.57-105.56L160%20159.51%20104.48%20104l55.08-55.07a10%2010%200%200%201%2014.14%200l41.38%2041.37a10%2010%200%200%201%200%2014.14Z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20fill='currentColor'%20viewBox='0%200%20256%20256'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M174%20128a6%206%200%200%201-6%206H88a6%206%200%200%201%200-12h80a6%206%200%200%201%206%206Zm56%200A102%20102%200%201%201%20128%2026a102.12%20102.12%200%200%201%20102%20102Zm-12%200a90%2090%200%201%200-90%2090%2090.1%2090.1%200%200%200%2090-90Z'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20fill='currentColor'%20viewBox='0%200%20256%20256'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M128%2026a102%20102%200%201%200%20102%20102A102.12%20102.12%200%200%200%20128%2026Zm0%20192a90%2090%200%201%201%2090-90%2090.1%2090.1%200%200%201-90%2090Zm46-90a6%206%200%200%201-6%206h-34v34a6%206%200%200%201-12%200v-34H88a6%206%200%200%201%200-12h34V88a6%206%200%200%201%2012%200v34h34a6%206%200%200%201%206%206Z'/%3e%3c/svg%3e\"","import type Element2D from '../elements/Element2D'\nimport type Circle from '../elements/lines/Circle'\nimport type Line from '../elements/lines/Line'\nimport type Ray from '../elements/lines/Ray'\nimport type Segment from '../elements/lines/Segment'\nimport type Point from '../elements/points/Point'\nimport type Figure from '../Figure'\n\ninterface PointElement {\n  label: string\n  type: 'Point'\n}\ninterface LineElement {\n  point1: string\n  point2: string\n  type: 'Line' | 'Ray' | 'Segment'\n}\ninterface CircleElement {\n  center: string\n  radius: number\n  type: 'Circle'\n}\ninterface CircleCenterPointElement {\n  center: string\n  radius: number\n  type: 'CircleCenterPoint'\n}\n\ntype Element =\n  | CircleCenterPointElement\n  | CircleElement\n  | LineElement\n  | PointElement\ntype CheckElementExistResult =\n  | { isValid: boolean; result: Circle[]; type: 'Circle' }\n  | { isValid: boolean; result: Circle[]; type: 'CircleCenterPoint' }\n  | { isValid: boolean; result: Line[]; type: 'Line' }\n  | { isValid: boolean; result: Point[]; type: 'Point' }\n  | { isValid: boolean; result: Ray[]; type: 'Ray' }\n  | { isValid: boolean; result: Segment[]; type: 'Segment' }\n  | { isValid: false; result: []; type: '' }\n\nexport default function checkElementExist(\n  element: Element,\n  figure: Figure,\n): CheckElementExistResult {\n  const elements = [...figure.elements.values()].filter(\n    (e) => e.type !== 'pointer',\n  ) as Element2D[]\n  let filteredElements = elements.filter((e) => e.type === element.type) as\n    | Circle[]\n    | Line[]\n    | Point[]\n    | Ray[]\n    | Segment[]\n  switch (element.type) {\n    case 'Point':\n      filteredElements = filteredElements.filter(\n        (e) => e.type === 'Point',\n      ) as Point[]\n      filteredElements = filteredElements.filter(\n        (e) => e.label === element.label,\n      )\n      return {\n        isValid: filteredElements.length === 1,\n        result: filteredElements,\n        type: element.type,\n      }\n    case 'Line':\n      filteredElements = filteredElements.filter(\n        (e) => e.type === 'Line',\n      ) as Line[]\n      filteredElements = filteredElements.filter(\n        (e) =>\n          (e.point1.label === element.point1 &&\n            e.point2.label === element.point2) ||\n          (e.point1.label === element.point2 &&\n            e.point2.label === element.point1),\n      )\n      return {\n        isValid: filteredElements.length === 1,\n        result: filteredElements,\n        type: element.type,\n      }\n    case 'Segment':\n      filteredElements = filteredElements.filter(\n        (e) => e.type === 'Segment',\n      ) as Line[]\n      filteredElements = filteredElements.filter(\n        (e) =>\n          (e.point1.label === element.point1 &&\n            e.point2.label === element.point2) ||\n          (e.point1.label === element.point2 &&\n            e.point2.label === element.point1),\n      )\n      return {\n        isValid: filteredElements.length === 1,\n        result: filteredElements,\n        type: element.type,\n      }\n    case 'Ray':\n      filteredElements = filteredElements.filter(\n        (e) => e.type === 'Ray',\n      ) as Line[]\n      filteredElements = filteredElements.filter(\n        (e) =>\n          e.point1.label === element.point1 &&\n          e.point2.label === element.point2,\n      )\n      return {\n        isValid: filteredElements.length === 1,\n        result: filteredElements,\n        type: element.type,\n      }\n    case 'Circle':\n      filteredElements = filteredElements.filter(\n        (e) => e.type === 'Circle',\n      ) as Circle[]\n      filteredElements = filteredElements.filter(\n        (e) => e.center.label === element.center && e.radius === element.radius,\n      )\n      return {\n        isValid: filteredElements.length === 1,\n        result: filteredElements,\n        type: element.type,\n      }\n    case 'CircleCenterPoint':\n      filteredElements = filteredElements.filter(\n        (e) => e.type === 'CircleCenterPoint',\n      ) as Circle[]\n      filteredElements = filteredElements.filter(\n        (e) => e.center.label === element.center && e.radius === element.radius,\n      )\n      return {\n        isValid: filteredElements.length === 1,\n        result: filteredElements,\n        type: element.type,\n      }\n    default:\n      filteredElements = []\n  }\n  return { isValid: false, result: [], type: '' }\n}\n"],"names":["addColorPalette","colors","figure","div","color","button","translateColor","showSelectedColor","_a","buttons","element","colorMap","dashed","noDashed","addDashedChoice","choice","img","showSelectedStyle","image","loadJson","json","eraseHistory","options","key","value","center","start","dynamicAngle","radius","startAngle","endAngle","origin","pointOnSide1","pointOnSide2","point","indicesSectorsInColor","point1","point2","line","circle","vector","indicesRectanglesInColor","directionPoint","segment","factor","angle","line1","line2","circle1","circle2","graph","polyline","points","idPoint","dynamicNumber","history","defaultDistanceClick","defaultHistorySize","displayDigits","defaultMaxSlope","defaultMinSlope","defaultDeltaXModal","defaultButtonsWidth","defaultFooterHeight","defaultMinWidth","defaultMinHeight","defaultDivUserMessageHeight","defaultDivUserMessageFontSize","defaultDragAllDelta","defaultZoomInFactor","defaultZoomOutFactor","marks","orangeMathalea","orangeMathaleaLight","defaultOptions","defaultTools","Coords","x","y","angleWithHorizontalInDegres","A","B","intersectionCCCoord","n","O1","O2","r0","r1","x0","x1","y0","y1","dx","dy","d","a","x2","y2","h","rx","ry","xi","xiPrime","yi","yiPrime","intersectionLLCoord","da","db","dc","fa","fb","fc","isIntersectionExisting","error","distance","equationLine","b","c","intersectionLCCoord","D","C","O","r","xO","yO","Delta","delta","orthogonalProjectionCoord","k","rotationCoord","homothetieCoord","similitudeCoord","angleRadian","reflectOverLineCoord","translateCoords","angleOriented","v","u","OA","OB","scalaire","labelCoords","midX","midY","perpX","perpY","length","normPerpX","normPerpY","offsetX","offsetY","parallelCoords","round","precision","displayNumber","syncShake","repeat","time","timePeranimation","nearX","newX","nearY","newY","freePoints","e","p","_","checkAngle","label1","label2","label3","matchPoints1","matchPoints2","matchPoints3","isValid","point3","i","calculAngle","checkCircle","labelCenter","allCircles","circlesWithGoodLabelCenter","goodCircle","goodCircleWithGoodLabelCenter","hexToTikzRgb","hex","hexWithoutHashtag","bigint","g","rgbaToTikzRgb","rgba","rgbaValues","colorLatex","Element2D","id","isChild","isDashed","isSelectable","isVisible","opacity","thickness","cpt","fixedColor","__","_b","_c","_d","_e","observers","observer","changeThickness","isHover","isSelected","checkCoords","checkOnlyAbscissa","label","matchPoints","message","checkDistance","shake","calculDistance","checkLineFromLabels","nameLine","lines","lines1","lines2","nomLigne1","checkLine","aa","bb","cc","a2","b2","c2","areCoincident","a1","b1","c1","slope1","slope2","intercept1","intercept2","checkParallel","matchPointsA","matchPointsB","matchPointsC","matchPointsD","pointA","pointB","pointC","pointD","Segment","borderSize","shape","newPoint1","newPoint2","type","newSegment","pointerCoords","distanceToP1","distanceToP2","segmentLength","projection","closestX","closestY","l","x1Svg","x2Svg","y1Svg","y2Svg","axSvg","aySvg","allAreNumbers","bxSvg","bySvg","result","_f","_g","_h","_i","_j","_k","allOptions","point1Name","point2Name","numbers","number","checkPerpendicularBisector","distAM","distBM","distAN","distBN","checkPoint","areNumbersOrdered","isIncreasing","isDecreasing","checkPointBetween2Points","labelPt","labelPt1","labelPt2","getLargeSweep","large","sweep","normalizeAngle","polarToCartesian","angleInDegrees","angleInRadians","Grid","axeX","axeY","grid","labelX","labelY","stepX","stepY","subGrid","subGridDivisions","xMax","xMin","yMax","yMin","strokeWidthGrid","thickThickness","thickHeight","repereOij","defs","marker","path","svgAxeX","svgLine","svgAxeY","svgGrid","svgSubGrid","Point","colorLabel","isFree","labelIsVisible","labelDxInPixels","labelDyInPixels","sizeInPixels","x3Svg","x4Svg","y3Svg","y4Svg","xSvg","ySvg","rSvg","_l","M","dilated","pointerX","pointerY","arc","distanceToCenter","angleStart","angleEnd","polygon","reflected","rotated","translated","size","ele","inFigure","inGrid","PointIntersectionLL","coords","line1Name","line2Name","checkPointOnIntersectionLL","nameLine1","nameLine2","nomLigne2","Line","projectionCoords","getCoordsOut","pente","xOutLeft","yOutLeft","xOutRight","yOutRight","Ray","rayDirection","rayLength","normalizedRayDirection","getRayCoordsOut","x1Screen","y1Screen","x2Screen","y2Screen","parentFigure","PointOnLine","isPositive","ray","o","newX1","newY1","newX2","newY2","checkPointOnLine","nomLigne","checkPolygon","acceptSegments","polygons","segments","eq","allEdges","p1","p2","s","samePolygone","sameRotation","src","tgt","offset","ok","checkPolygonByLabels","labels","index","reveseLabels","indexReverse","checkRayFromLabels","nameRay","rays","ray1","ray2","nomRay1","checkRay","directionRay","directionCheck","checkSameDistance","checkSegmentFromLabels","nameSegment","segment1","segment2","nomSegment1","checkSegment","segmentsCoincident","checkVector","labelOrigin","labelPoint2","xOrigin","yOrigin","matchVectors","verifOnlyLabelOrigin","matchVectors2","verifOnlyLabelOriginAndPoint2","verifOnlyOrigin","verifOnlyLabelOriginAndOrigin","verifLabelOriginAndPoint2AndOrigin","pointsOnFigure","allPointsStayOnFigure","delay","milliseconds","resolve","DynamicNumber","textAfter","textBefore","maximumFractionDigits","minimumFractionDigits","Angle","end","Distance","_error","DynamicCalcul","calculus","dynamicNumbers","values","DynamicX","DynamicY","config","math","create","parseDependencies","evaluateDependencies","addDependencies","subtractDependencies","multiplyDependencies","divideDependencies","powDependencies","unaryMinusDependencies","mathImport","Graph","expression","prohibitedValues","step","fNode","pointsCoords","getListOfPoints","minDistance","f","Graph2","GraphByParts","parts","el","groups","part","groupSvg","group","latex","notation","CircleFractionDiagram","denominator","gap","numberOfCircle","numerator","sector","LineFractionDiagram","height","min","max","thickHeightInPixels","verticalDistanceForClick","width","fractionWidth","createRectangleByOriginWidthAndHeight","rectangle","indice","xTranslate","newPoints","RectangleFractionDiagram","numberOfRectangles","GraduatedLine","addLeft","addRight","labelInterval","stepBis","thick","yLabel","text","labelSize","Arc","addBorders","fillColor","fillOpacity","ArcBy3PointsAndRadius","tempLine","newStart","Const","ArcByCenterRadiusAndAngles","BisectorByPoints","bisectorPoint","originName","pointOnSide1Name","pointOnSide2Name","Circle","newCenter","newCircle","centerName","CircleCenterDynamicRadius","CircleCenterPoint","newPoint","pointName","LineByPointVector","LineParallel","LinePerpendicular","PerpendicularBisector","middlePoint","PerpendicularBisectorByPoints","Polygon","isBuiltWithSegments","isStricCoords","coord","newPolygon","idPoints","allCoordsAreNumber","acc","obj","Polyline","TextByPosition","anchor","backgroundColor","dxInPixels","dyInPixels","fontSize","divRect","svgRect","superOptions","alignment","alignmentString","renderMathInElement","chaine","styleTransform","MarkSegment","mark","MarkRightAngle","sommet2","sommet3","x3","y3","sommet4","x4","y4","Barycenter","Middle","coordsMiddle","PointOnGraph","abscissa","ordinate","PointByProjection","lineName","PointByProjectionOnAxisX","PointByProjectionOnAxisY","PointIntersectionCC","PointIntersectionLC","circleName","PointOnCircle","angleWithHorizontal","PointOnLineAtDistance","interpolateCoords","lesX","lesY","PointOnPolyline","PointsIntersectionCC","PointsIntersectionLC","TextByPoint","oldX","oldY","TextDynamicByPosition","Vector","labelColor","xEnd","yEnd","VectorByPoints","VectorUnitPerpendicular","isLocalStorageAvailable","handleHover","elements","handlePointerAction","event","possibleElements","elementsFiltered","sendToMachine","elementText","divs","waitingWithModal","bisectorByPoints","circleCompass","circlePoint","cursor","description","dilate","disc","discPoint","drag","dragAll","fill","hide","informations","latexSvg","lineParallel","linePerpendicular","markAngle","matkSegment","mesureAngle","mesureSegment","middle","moveLabel","namePoint","open","pause","perpendicularBisector","play","playSkipBack","playSkipForward","pointIntersection","pointOn","redo","reflection","reflectionOverLine","remove$1","remove","rotate","save","setOptions","translation","undo","zoomIn","zoomOut","setButtonStyle","availableIcons","restart","addButtons","list","imgList","icon","addCustomButton","action","tooltip","url","container","record","userMessage","getNumberId","numberId","addThicknessChoice","title","range","addMarkPalette","buttonsMark","handleClick","setToolbar","nbCols","position","showStyles","tools","imgs","divStyles","Figure","border","isDynamic","pixelsPerUnit","scale","snapGrid","xScale","yScale","getMaxSize","checkCircleRadius","style","typeStr","classes","filter","rect","currentIsDynamic","newContainer","direction","isModalOpen","btnRedo","btnUndo","includePreambule","stopDrag","lastRedo","level","stop","lastUndo","parentContainer","stringScale","tikz","changeWidth","changeHeight","changeLeft","changeBottom","ul","li","MarkBetweenPoints","VectorPerpendicular","modal","createDialoxBoxRadius","dialog","input","createDialoxBoxK","createDialoxBoxName","createDialoxBoxAngle","createModalDescription","selectionRectangle","buttonSvg","buttonLatex","rectangleContainer","containerLeft","containerTop","isNearCorner","isNearLeftCorner","isNearRightCorner","isNearTopCorner","isNearBottomCorner","isNearTopLeftCorner","isNearTopRightCorner","isNearBottomLeftCorner","isNearBottomRightCorner","left","top","resize","stopResize","ui","createMachine","context","getExistingPointOrCreatedPoint","getExistingPointOrCreatetPoindWasASuccess","testRadiusIsSegment","dynamicRadius","blob","svg","file","reader","readerEvent","content","limitNumberOfPoint","noLimit","limitReached","getAutomaticLabelOrUndefined","element1","element2","last","first","isClickOnFirstPoint","jsonContent","labelAutomatic","indiceCurrentLetter","indiceLetterZ","isPrime","SuperFigure","machineWithContext","interpret","erase","minus","plus","checkElementExist","filteredElements"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157]}