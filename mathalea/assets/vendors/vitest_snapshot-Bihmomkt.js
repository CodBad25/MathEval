const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendors/magic-string-gzk5IGc9.js","assets/vendors/jridgewell_sourcemap-codec-4CHRs_FM.js"])))=>i.map(i=>d[i]);
var lt=Object.defineProperty;var ht=(t,e,n)=>e in t?lt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var f=(t,e,n)=>ht(t,typeof e!="symbol"?e+"":e,n);import{_ as ut}from"./instrumenpoche-CSnohZOK.js";import{p as ft,f as dt}from"./pretty-format-E1hu3i6x.js";import{r as pt}from"./pathe-CM51XWwG.js";function mt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var V={exports:{}};/*
 * @version    1.4.0
 * @date       2015-10-26
 * @stability  3 - Stable
 * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
 * @license    MIT License
 */var M=function(t,e){var n,s,r=1,i=0,a=0,o=String.alphabet;function c(l,u,h){if(h){for(n=u;h=c(l,n),h<76&&h>65;)++n;return+l.slice(u-1,n)}return h=o&&o.indexOf(l.charAt(u)),h>-1?h+76:(h=l.charCodeAt(u)||0,h<45||h>127?h:h<46?65:h<48?h-1:h<58?h+18:h<65?h-11:h<91?h+11:h<97?h-37:h<123?h+5:h-63)}if((t+="")!=(e+="")){for(;r;)if(s=c(t,i++),r=c(e,a++),s<76&&r<76&&s>66&&r>66&&(s=c(t,i,i),r=c(e,a,i=n),a=n),s!=r)return s<r?-1:1}return 0};try{V.exports=M}catch{String.naturalCompare=M}var _t=V.exports,St=mt(_t);function G(t){return t!=null}function gt(t){return t===null||typeof t!="function"&&typeof t!="object"}function y(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}function vt(t){let e=-1,n=null,s=0,r=0,i=null;for(;e<=t.length;){i=t[e],e++;const a=t[e];if((a==='"'||a==="'"||a==="`")&&i!=="\\"&&(n===a?n=null:n||(n=a)),n||(a==="("&&s++,a===")"&&r++),s&&r&&s===r)return e}return null}let wt=()=>"Promise{â€¦}";try{const{getPromiseDetails:t,kPending:e,kRejected:n}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(wt=(s,r)=>{const[i,a]=t(s);return i===e?"Promise{<pending>}":`Promise${i===n?"!":""}{${r.inspect(a,r)}}`})}catch{}let N=!1;try{const t=require("util");N=t.inspect?t.inspect.custom:!1}catch{N=!1}const I=/\r?\n/;function yt(t,e,n){const s=t.split(I),r=/\r\n/.test(t)?2:1;let i=0;if(e>s.length)return t.length;for(let a=0;a<e-1;a++)i+=s[a].length+r;return i+n}function Et(t,e){if(e>t.length)throw new Error(`offset is longer than source length! offset ${e} > length ${t.length}`);const n=t.split(I),s=/\r\n/.test(t)?2:1;let r=0,i=0;for(;i<n.length;i++){const a=n[i].length+s;if(r+a>=e)break;r+=a}return i+1}var Q;Q=/\r?\n|[\r\u2028\u2029]/y;RegExp(Q.source);var X={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"]};new Set(X.keyword);new Set(X.strict);const bt=(t,e,n,s,r,i)=>{const a=t.getMockName(),o=a==="vi.fn()"?"":` ${a}`;let c="";if(t.mock.calls.length!==0){const l=n+e.indent;c=` {${e.spacingOuter}${l}"calls": ${i(t.mock.calls,e,l,s,r)}${e.min?", ":","}${e.spacingOuter}${l}"results": ${i(t.mock.results,e,l,s,r)}${e.min?"":","}${e.spacingOuter}${n}}`}return`[MockFunction${o}]${c}`},xt=t=>t&&!!t._isMockFunction,$t={serialize:bt,test:xt},{DOMCollection:Rt,DOMElement:It,Immutable:Ot,ReactElement:At,ReactTestComponent:Pt,AsymmetricMatcher:Ct}=ft;let $=[Pt,At,It,Rt,Ot,Ct,$t];function Ue(t){$=[t].concat($)}function kt(){return $}function Mt(t,e){return`${t} ${e}`}function Nt(t){if(!/ \d+$/.test(t))throw new Error("Snapshot keys must end with a number.");return t.replace(/ \d+$/,"")}function Ft(t,e){const n=e.updateSnapshot,s=Object.create(null);let r="",i=!1;if(t!=null)try{r=t,new Function("exports",r)(s)}catch{}return(n==="all"||n==="new")&&r&&(i=!0),{data:s,dirty:i}}function jt(t){return t.includes(`
`)?`
${t}
`:t}function F(t){return t.length>2&&t.startsWith(`
`)&&t.endsWith(`
`)?t.slice(1,-1):t}const Dt=!0,Tt=!1;function Kt(t,e=2,n={}){return O(dt(t,{escapeRegex:Dt,indent:e,plugins:kt(),printFunctionName:Tt,...n}))}function Lt(t){return t.replace(/`|\\|\${/g,"\\$&")}function j(t){return`\`${Lt(t)}\``}function O(t){return t.replace(/\r\n|\r/g,`
`)}async function Wt(t,e,n){const s=Object.keys(e).sort(St).map(o=>`exports[${j(o)}] = ${j(O(e[o]))};`),r=`${t.getHeader()}

${s.join(`

`)}
`,i=await t.readSnapshotFile(n);i!=null&&i===r||await t.saveSnapshotFile(n,r)}function D(t){function e(){var r,i;const a=/^( +)}\s+$/m.exec(t||""),o=(r=a==null?void 0:a[1])==null?void 0:r.length;if(o)return o;const c=/^\n( +)"/.exec(t||"");return((i=c==null?void 0:c[1])==null?void 0:i.length)||0}const n=e();let s=t==null?void 0:t.trim();return n&&(s=s==null?void 0:s.replace(new RegExp(`^${" ".repeat(n)}`,"gm"),"").replace(/ +}$/,"}")),s}function R(t=[],e=[]){const n=Array.from(t);return e.forEach((s,r)=>{const i=n[r];Array.isArray(t[r])?n[r]=R(t[r],s):y(i)?n[r]=A(t[r],s):n[r]=s}),n}function A(t,e){if(y(t)&&y(e)){const n={...t};return Object.keys(e).forEach(s=>{y(e[s])&&!e[s].$$typeof?s in t?n[s]=A(t[s],e[s]):Object.assign(n,{[s]:e[s]}):Array.isArray(e[s])?n[s]=R(t[s],e[s]):Object.assign(n,{[s]:e[s]})}),n}else if(Array.isArray(t)&&Array.isArray(e))return R(t,e);return t}const Bt=44,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ut=new Uint8Array(64),J=new Uint8Array(128);for(let t=0;t<T.length;t++){const e=T.charCodeAt(t);Ut[t]=e,J[e]=t}function qt(t){const e=new Int32Array(5),n=[];let s=0;do{const r=zt(t,s),i=[];let a=!0,o=0;e[0]=0;for(let c=s;c<r;c++){let l;c=g(t,c,e,0);const u=e[0];u<o&&(a=!1),o=u,K(t,c,r)?(c=g(t,c,e,1),c=g(t,c,e,2),c=g(t,c,e,3),K(t,c,r)?(c=g(t,c,e,4),l=[u,e[1],e[2],e[3],e[4]]):l=[u,e[1],e[2],e[3]]):l=[u],i.push(l)}a||Ht(i),n.push(i),s=r+1}while(s<=t.length);return n}function zt(t,e){const n=t.indexOf(";",e);return n===-1?t.length:n}function g(t,e,n,s){let r=0,i=0,a=0;do{const c=t.charCodeAt(e++);a=J[c],r|=(a&31)<<i,i+=5}while(a&32);const o=r&1;return r>>>=1,o&&(r=-2147483648|-r),n[s]+=r,e}function K(t,e,n){return e>=n?!1:t.charCodeAt(e)!==Bt}function Ht(t){t.sort(Vt)}function Vt(t,e){return t[0]-e[0]}const Gt=/^[\w+.-]+:\/\//,Qt=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,Xt=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i;var d;(function(t){t[t.Empty=1]="Empty",t[t.Hash=2]="Hash",t[t.Query=3]="Query",t[t.RelativePath=4]="RelativePath",t[t.AbsolutePath=5]="AbsolutePath",t[t.SchemeRelative=6]="SchemeRelative",t[t.Absolute=7]="Absolute"})(d||(d={}));function Jt(t){return Gt.test(t)}function Zt(t){return t.startsWith("//")}function Z(t){return t.startsWith("/")}function Yt(t){return t.startsWith("file:")}function L(t){return/^[.?#]/.test(t)}function v(t){const e=Qt.exec(t);return Y(e[1],e[2]||"",e[3],e[4]||"",e[5]||"/",e[6]||"",e[7]||"")}function te(t){const e=Xt.exec(t),n=e[2];return Y("file:","",e[1]||"","",Z(n)?n:"/"+n,e[3]||"",e[4]||"")}function Y(t,e,n,s,r,i,a){return{scheme:t,user:e,host:n,port:s,path:r,query:i,hash:a,type:d.Absolute}}function W(t){if(Zt(t)){const n=v("http:"+t);return n.scheme="",n.type=d.SchemeRelative,n}if(Z(t)){const n=v("http://foo.com"+t);return n.scheme="",n.host="",n.type=d.AbsolutePath,n}if(Yt(t))return te(t);if(Jt(t))return v(t);const e=v("http://foo.com/"+t);return e.scheme="",e.host="",e.type=t?t.startsWith("?")?d.Query:t.startsWith("#")?d.Hash:d.RelativePath:d.Empty,e}function ee(t){if(t.endsWith("/.."))return t;const e=t.lastIndexOf("/");return t.slice(0,e+1)}function ne(t,e){tt(e,e.type),t.path==="/"?t.path=e.path:t.path=ee(e.path)+t.path}function tt(t,e){const n=e<=d.RelativePath,s=t.path.split("/");let r=1,i=0,a=!1;for(let c=1;c<s.length;c++){const l=s[c];if(!l){a=!0;continue}if(a=!1,l!=="."){if(l===".."){i?(a=!0,i--,r--):n&&(s[r++]=l);continue}s[r++]=l,i++}}let o="";for(let c=1;c<r;c++)o+="/"+s[c];(!o||a&&!o.endsWith("/.."))&&(o+="/"),t.path=o}function se(t,e){if(!t&&!e)return"";const n=W(t);let s=n.type;if(e&&s!==d.Absolute){const i=W(e),a=i.type;switch(s){case d.Empty:n.hash=i.hash;case d.Hash:n.query=i.query;case d.Query:case d.RelativePath:ne(n,i);case d.AbsolutePath:n.user=i.user,n.host=i.host,n.port=i.port;case d.SchemeRelative:n.scheme=i.scheme}a>s&&(s=a)}tt(n,s);const r=n.query+n.hash;switch(s){case d.Hash:case d.Query:return r;case d.RelativePath:{const i=n.path.slice(1);return i?L(e||t)&&!L(i)?"./"+i+r:i+r:r||"."}case d.AbsolutePath:return n.path+r;default:return n.scheme+"//"+n.user+n.host+n.port+n.path+r}}function B(t,e){return e&&!e.endsWith("/")&&(e+="/"),se(t,e)}function re(t){if(!t)return"";const e=t.lastIndexOf("/");return t.slice(0,e+1)}const m=0,ie=1,ae=2,oe=3,ce=4;function le(t,e){const n=U(t,0);if(n===t.length)return t;e||(t=t.slice());for(let s=n;s<t.length;s=U(t,s+1))t[s]=ue(t[s],e);return t}function U(t,e){for(let n=e;n<t.length;n++)if(!he(t[n]))return n;return t.length}function he(t){for(let e=1;e<t.length;e++)if(t[e][m]<t[e-1][m])return!1;return!0}function ue(t,e){return e||(t=t.slice()),t.sort(fe)}function fe(t,e){return t[m]-e[m]}let E=!1;function de(t,e,n,s){for(;n<=s;){const r=n+(s-n>>1),i=t[r][m]-e;if(i===0)return E=!0,r;i<0?n=r+1:s=r-1}return E=!1,n-1}function pe(t,e,n){for(let s=n+1;s<t.length&&t[s][m]===e;n=s++);return n}function me(t,e,n){for(let s=n-1;s>=0&&t[s][m]===e;n=s--);return n}function _e(){return{lastKey:-1,lastNeedle:-1,lastIndex:-1}}function Se(t,e,n,s){const{lastKey:r,lastNeedle:i,lastIndex:a}=n;let o=0,c=t.length-1;if(s===r){if(e===i)return E=a!==-1&&t[a][m]===e,a;e>=i?o=a===-1?0:a:c=a}return n.lastKey=s,n.lastNeedle=e,n.lastIndex=de(t,e,o,c)}const ge="`line` must be greater than 0 (lines start at line 1)",ve="`column` must be greater than or equal to 0 (columns start at column 0)",q=-1,we=1;let z,et;class ye{constructor(e,n){const s=typeof e=="string";if(!s&&e._decodedMemo)return e;const r=s?JSON.parse(e):e,{version:i,file:a,names:o,sourceRoot:c,sources:l,sourcesContent:u}=r;this.version=i,this.file=a,this.names=o||[],this.sourceRoot=c,this.sources=l,this.sourcesContent=u;const h=B(c||"",re(n));this.resolvedSources=l.map(_=>B(_||"",h));const{mappings:p}=r;typeof p=="string"?(this._encoded=p,this._decoded=void 0):(this._encoded=void 0,this._decoded=le(p,s)),this._decodedMemo=_e(),this._bySources=void 0,this._bySourceMemos=void 0}}z=t=>t._decoded||(t._decoded=qt(t._encoded)),et=(t,{line:e,column:n,bias:s})=>{if(e--,e<0)throw new Error(ge);if(n<0)throw new Error(ve);const r=z(t);if(e>=r.length)return w(null,null,null,null);const i=r[e],a=Ee(i,t._decodedMemo,e,n,s||we);if(a===-1)return w(null,null,null,null);const o=i[a];if(o.length===1)return w(null,null,null,null);const{names:c,resolvedSources:l}=t;return w(l[o[ie]],o[ae]+1,o[oe],o.length===5?c[o[ce]]:null)};function w(t,e,n,s){return{source:t,line:e,column:n,name:s}}function Ee(t,e,n,s,r){let i=Se(t,s,e,n);return E?i=(r===q?pe:me)(t,s,i):r===q&&i++,i===-1||i===t.length?-1:i}const nt=/^\s*at .*(\S+:\d+|\(native\))/m,be=/^(eval@)?(\[native code])?$/,xe=["node:internal",/\/packages\/\w+\/dist\//,/\/@vitest\/\w+\/dist\//,"/vitest/dist/","/vitest/src/","/vite-node/dist/","/vite-node/src/","/node_modules/chai/","/node_modules/tinypool/","/node_modules/tinyspy/","/deps/chai.js",/__vitest_browser__/];function st(t){if(!t.includes(":"))return[t];const n=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(t.replace(/^\(|\)$/g,""));if(!n)return[t];let s=n[1];return(s.startsWith("http:")||s.startsWith("https:"))&&(s=new URL(s).pathname),s.startsWith("/@fs/")&&(s=s.slice(typeof process<"u"&&process.platform==="win32"?5:4)),[s,n[2]||void 0,n[3]||void 0]}function $e(t){let e=t.trim();if(be.test(e)||(e.includes(" > eval")&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),!e.includes("@")&&!e.includes(":")))return null;const n=/((.*".+"[^@]*)?[^@]*)(?:@)/,s=e.match(n),r=s&&s[1]?s[1]:void 0,[i,a,o]=st(e.replace(n,""));return!i||!a||!o?null:{file:i,method:r||"",line:Number.parseInt(a),column:Number.parseInt(o)}}function Re(t){let e=t.trim();if(!nt.test(e))return null;e.includes("(eval ")&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));let n=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,"");const s=n.match(/ (\(.+\)$)/);n=s?n.replace(s[0],""):n;const[r,i,a]=st(s?s[1]:n);let o=s&&n||"",c=r&&["eval","<anonymous>"].includes(r)?void 0:r;return!c||!i||!a?null:(o.startsWith("async ")&&(o=o.slice(6)),c.startsWith("file://")&&(c=c.slice(7)),c=pt(c),o&&(o=o.replace(/__vite_ssr_import_\d+__\./g,"")),{method:o,file:c,line:Number.parseInt(i),column:Number.parseInt(a)})}function Ie(t,e={}){const{ignoreStackEntries:n=xe}=e;let s=nt.test(t)?Ae(t):Oe(t);return n.length&&(s=s.filter(r=>!n.some(i=>r.file.match(i)))),s.map(r=>{var i;const a=(i=e.getSourceMap)==null?void 0:i.call(e,r.file);if(!a||typeof a!="object"||!a.version)return r;const o=new ye(a),{line:c,column:l}=et(o,r);return c!=null&&l!=null?{...r,line:c,column:l}:r})}function Oe(t){return t.split(`
`).map(e=>$e(e)).filter(G)}function Ae(t){return t.split(`
`).map(e=>Re(e)).filter(G)}function Pe(t,e={}){if(!t||gt(t))return[];if(t.stacks)return t.stacks;const n=t.stack||t.stackStr||"";let s=Ie(n,e);return e.frameFilter&&(s=s.filter(r=>e.frameFilter(t,r)!==!1)),t.stacks=s,s}async function Ce(t,e){const n=(await ut(async()=>{const{default:r}=await import("./magic-string-gzk5IGc9.js");return{default:r}},__vite__mapDeps([0,1]))).default,s=new Set(e.map(r=>r.file));await Promise.all(Array.from(s).map(async r=>{const i=e.filter(l=>l.file===r),a=await t.readSnapshotFile(r),o=new n(a);for(const l of i){const u=yt(a,l.line,l.column);je(a,o,u,l.snapshot)}const c=o.toString();c!==a&&await t.saveSnapshotFile(r,c)}))}const ke=/(?:toMatchInlineSnapshot|toThrowErrorMatchingInlineSnapshot)\s*\(\s*(?:\/\*[\S\s]*\*\/\s*|\/\/.*\s+)*\s*({)/m;function Me(t,e,n,s){let r=t.slice(n);const i=ke.exec(r);if(!i)return!1;r=r.slice(i.index);let a=vt(r);if(a===null)return!1;a+=n+i.index;const o=n+i.index+i[0].length,c=Ne(t,o),l=`, ${rt(s,t,n)}`;return c===a?e.appendLeft(a,l):e.overwrite(c,a,l),!0}function Ne(t,e){let n=1,s=0;for(;n!==s&&e<t.length;){const r=t[e++];r==="{"?n++:r==="}"&&s++}return e}function rt(t,e,n){const s=Et(e,n),i=e.split(I)[s-1].match(/^\s*/)[0]||"",a=i.includes("	")?`${i}	`:`${i}  `,o=t.trim().replace(/\\/g,"\\\\").split(/\n/g),c=o.length<=1,l="`";return c?`${l}${o.join(`
`).replace(/`/g,"\\`").replace(/\${/g,"\\${")}${l}`:`${l}
${o.map(u=>u?a+u:"").join(`
`).replace(/`/g,"\\`").replace(/\${/g,"\\${")}
${i}${l}`}const Fe=/(?:toMatchInlineSnapshot|toThrowErrorMatchingInlineSnapshot)\s*\(\s*(?:\/\*[\S\s]*\*\/\s*|\/\/.*\s+)*\s*[\w_$]*(['"`\)])/m;function je(t,e,n,s){const r=t.slice(n),i=Fe.exec(r),a=/toMatchInlineSnapshot|toThrowErrorMatchingInlineSnapshot/.exec(r);if(!i||i.index!==(a==null?void 0:a.index))return Me(t,e,n,s);const o=i[1],c=n+i.index+i[0].length,l=rt(s,t,n);if(o===")")return e.appendRight(c-1,l),!0;const h=new RegExp(`(?:^|[^\\\\])${o}`).exec(t.slice(c));if(!h)return!1;const p=c+h.index+h[0].length;return e.overwrite(c-1,p,l),!0}const De=/^([^\S\n]*)\S/m;function qe(t){const e=t.match(De);if(!e||!e[1])return t;const n=e[1],s=t.split(/\n/g);if(s.length<=2||s[0].trim()!==""||s[s.length-1].trim()!=="")return t;for(let r=1;r<s.length-1;r++)if(s[r]!==""){if(s[r].indexOf(n)!==0)return t;s[r]=s[r].substring(n.length)}return s[s.length-1]="",t=s.join(`
`),t}async function Te(t,e){await Promise.all(e.map(async n=>{n.readonly||await t.saveSnapshotFile(n.file,n.snapshot)}))}class P{constructor(e,n,s,r){f(this,"_counters");f(this,"_dirty");f(this,"_updateSnapshot");f(this,"_snapshotData");f(this,"_initialData");f(this,"_inlineSnapshots");f(this,"_rawSnapshots");f(this,"_uncheckedKeys");f(this,"_snapshotFormat");f(this,"_environment");f(this,"_fileExists");f(this,"added");f(this,"expand");f(this,"matched");f(this,"unmatched");f(this,"updated");this.testFilePath=e,this.snapshotPath=n;const{data:i,dirty:a}=Ft(s,r);this._fileExists=s!=null,this._initialData=i,this._snapshotData=i,this._dirty=a,this._inlineSnapshots=[],this._rawSnapshots=[],this._uncheckedKeys=new Set(Object.keys(this._snapshotData)),this._counters=new Map,this.expand=r.expand||!1,this.added=0,this.matched=0,this.unmatched=0,this._updateSnapshot=r.updateSnapshot,this.updated=0,this._snapshotFormat={printBasicPrototype:!1,escapeString:!1,...r.snapshotFormat},this._environment=r.snapshotEnvironment}static async create(e,n){const s=await n.snapshotEnvironment.resolvePath(e),r=await n.snapshotEnvironment.readSnapshotFile(s);return new P(e,s,r,n)}get environment(){return this._environment}markSnapshotsAsCheckedForTest(e){this._uncheckedKeys.forEach(n=>{Nt(n)===e&&this._uncheckedKeys.delete(n)})}_inferInlineSnapshotStack(e){const n=e.findIndex(r=>r.method.match(/__VITEST_(RESOLVES|REJECTS)__/));if(n!==-1)return e[n+3];const s=e.findIndex(r=>r.method.includes("__INLINE_SNAPSHOT__"));return s!==-1?e[s+2]:null}_addSnapshot(e,n,s){if(this._dirty=!0,s.isInline){const r=Pe(s.error||new Error("snapshot"),{ignoreStackEntries:[]}),i=this._inferInlineSnapshotStack(r);if(!i)throw new Error(`@vitest/snapshot: Couldn't infer stack frame for inline snapshot.
${JSON.stringify(r)}`);i.column--,this._inlineSnapshots.push({snapshot:n,...i})}else s.rawSnapshot?this._rawSnapshots.push({...s.rawSnapshot,snapshot:n}):this._snapshotData[e]=n}clear(){this._snapshotData=this._initialData,this._counters=new Map,this.added=0,this.matched=0,this.unmatched=0,this.updated=0,this._dirty=!1}async save(){const e=Object.keys(this._snapshotData).length,n=this._inlineSnapshots.length,s=this._rawSnapshots.length,r=!e&&!n&&!s,i={deleted:!1,saved:!1};return(this._dirty||this._uncheckedKeys.size)&&!r?(e&&(await Wt(this._environment,this._snapshotData,this.snapshotPath),this._fileExists=!0),n&&await Ce(this._environment,this._inlineSnapshots),s&&await Te(this._environment,this._rawSnapshots),i.saved=!0):!e&&this._fileExists&&(this._updateSnapshot==="all"&&(await this._environment.removeSnapshotFile(this.snapshotPath),this._fileExists=!1),i.deleted=!0),i}getUncheckedCount(){return this._uncheckedKeys.size||0}getUncheckedKeys(){return Array.from(this._uncheckedKeys)}removeUncheckedKeys(){this._updateSnapshot==="all"&&this._uncheckedKeys.size&&(this._dirty=!0,this._uncheckedKeys.forEach(e=>delete this._snapshotData[e]),this._uncheckedKeys.clear())}match({testName:e,received:n,key:s,inlineSnapshot:r,isInline:i,error:a,rawSnapshot:o}){this._counters.set(e,(this._counters.get(e)||0)+1);const c=Number(this._counters.get(e));s||(s=Mt(e,c)),i&&this._snapshotData[s]!==void 0||this._uncheckedKeys.delete(s);let l=o&&typeof n=="string"?n:Kt(n,void 0,this._snapshotFormat);o||(l=jt(l)),o&&o.content&&o.content.match(/\r\n/)&&!l.match(/\r\n/)&&(o.content=O(o.content));const u=i?r:o?o.content:this._snapshotData[s],h=D(u),p=h===D(l),_=u!==void 0,b=i||this._fileExists||o&&o.content!=null;return p&&!i&&!o&&(this._snapshotData[s]=l),_&&this._updateSnapshot==="all"||(!_||!b)&&(this._updateSnapshot==="new"||this._updateSnapshot==="all")?(this._updateSnapshot==="all"?p?this.matched++:(_?this.updated++:this.added++,this._addSnapshot(s,l,{error:a,isInline:i,rawSnapshot:o})):(this._addSnapshot(s,l,{error:a,isInline:i,rawSnapshot:o}),this.added++),{actual:"",count:c,expected:"",key:s,pass:!0}):p?(this.matched++,{actual:"",count:c,expected:"",key:s,pass:!0}):(this.unmatched++,{actual:F(l),count:c,expected:h!==void 0?F(h):void 0,key:s,pass:!1})}async pack(){const e={filepath:this.testFilePath,added:0,fileDeleted:!1,matched:0,unchecked:0,uncheckedKeys:[],unmatched:0,updated:0},n=this.getUncheckedCount(),s=this.getUncheckedKeys();n&&this.removeUncheckedKeys();const r=await this.save();return e.fileDeleted=r.deleted,e.added=this.added,e.matched=this.matched,e.unmatched=this.unmatched,e.updated=this.updated,e.unchecked=r.deleted?0:n,e.uncheckedKeys=Array.from(s),e}}function H(t,e,n,s){const r=new Error(t);return Object.defineProperty(r,"actual",{value:n,enumerable:!0,configurable:!0,writable:!0}),Object.defineProperty(r,"expected",{value:s,enumerable:!0,configurable:!0,writable:!0}),Object.defineProperty(r,"diffOptions",{value:{expand:e}}),r}class ze{constructor(e={}){f(this,"filepath");f(this,"name");f(this,"snapshotState");f(this,"snapshotStateMap",new Map);this.options=e}async startCurrentRun(e,n,s){var r;this.filepath=e,this.name=n,((r=this.snapshotState)==null?void 0:r.testFilePath)!==e&&(await this.finishCurrentRun(),this.getSnapshotState(e)||this.snapshotStateMap.set(e,await P.create(e,s)),this.snapshotState=this.getSnapshotState(e))}getSnapshotState(e){return this.snapshotStateMap.get(e)}clearTest(){this.filepath=void 0,this.name=void 0}skipTestSnapshots(e){var n;(n=this.snapshotState)==null||n.markSnapshotsAsCheckedForTest(e)}assert(e){var n,s,r,i;const{filepath:a=this.filepath,name:o=this.name,message:c,isInline:l=!1,properties:u,inlineSnapshot:h,error:p,errorMessage:_,rawSnapshot:b}=e;let{received:S}=e;if(!a)throw new Error("Snapshot cannot be used outside of test");if(typeof u=="object"){if(typeof S!="object"||!S)throw new Error("Received value must be an object when the matcher has properties");try{if(((s=(n=this.options).isEqual)==null?void 0:s.call(n,S,u))??!1)S=A(S,u);else throw H("Snapshot properties mismatched",(r=this.snapshotState)==null?void 0:r.expand,S,u)}catch(x){throw x.message=_||"Snapshot mismatched",x}}const it=[o,...c?[c]:[]].join(" > "),at=this.getSnapshotState(a),{actual:C,expected:k,key:ot,pass:ct}=at.match({testName:it,received:S,isInline:l,error:p,inlineSnapshot:h,rawSnapshot:b});if(!ct)throw H(`Snapshot \`${ot||"unknown"}\` mismatched`,(i=this.snapshotState)==null?void 0:i.expand,C==null?void 0:C.trim(),k==null?void 0:k.trim())}async assertRaw(e){if(!e.rawSnapshot)throw new Error("Raw snapshot is required");const{filepath:n=this.filepath,rawSnapshot:s}=e;if(s.content==null){if(!n)throw new Error("Snapshot cannot be used outside of test");const r=this.getSnapshotState(n);e.filepath||(e.filepath=n),s.file=await r.environment.resolveRawPath(n,s.file),s.content=await r.environment.readSnapshotFile(s.file)||void 0}return this.assert(e)}async finishCurrentRun(){if(!this.snapshotState)return null;const e=await this.snapshotState.pack();return this.snapshotState=void 0,e}clear(){this.snapshotStateMap.clear()}}export{ze as S,Ue as a,qe as s};
//# sourceMappingURL=vitest_snapshot-Bihmomkt.js.map
